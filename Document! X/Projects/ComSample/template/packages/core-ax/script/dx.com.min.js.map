{"version":3,"sources":["../script/core/browser.ts","../script/core/common.ts","../script/core/dom-helpers.ts","../script/core/help2.ts","../script/core/local-storage.ts","../script/core/messaging.ts","../script/core/featurebase.ts","../script/core/document.ts","../script/core/responsive.ts","../script/core/fixed-to-top.ts","../script/core/theme.ts","../script/core/dynamic-styles.ts","../script/core/dark-mode.ts","../script/core/diacritics.ts","../script/features/base/chm.ts","../script/features/base/copy-code.ts","../script/features/base/highlight-text.ts","../script/features/base/mark-as-new.ts","../script/features/base/help2.ts","../script/features/base/microsoft-help-viewer.ts","../script/features/base/popup-links.ts","../script/features/base/quirks-mode.ts","../script/features/base/syntax-tabs.ts","../script/features/base/tabs.ts","../script/features/base/toggle-section.ts","../script/features/base/toggle-dropdown.ts","../script/features/base/view-in-frame.ts","../script/features/base/lightbox.ts","../script/features/base/video.ts","../script/features/content-filter/content-filter.ts","../script/features/designtime/designtime.ts","../script/features/dynamic-toc/dynamic-toc.ts","../script/features/in-this-topic/in-this-topic.ts","../script/features/language-filter/language-filter.ts","../script/features/member-filter/member-filter.ts","../script/features/versions/versions.ts"],"names":["Innovasys","Content","browserInfoConstants","BrowserInfo","getUserAgent","navigator","userAgent","ua","toLowerCase","match","exec","indexOf","this","name","version","parseInt","Browser","msIeVersion","info","getDocumentInstance","element","elementSelector","jQuery","$","root","hasClass","parents","length","get","data","newDocument","Document","getLocationInfo","location","getCompatMode","document","compatMode","reload","replaceLocation","newLocation","window","history","replaceState","concat","ex","replace","navigateTo","url","href","stopPropagation","e","returnValue","loadStylesheet","stylesheetUrl","stylesheetId","beforeElementId","onLoaded","id","dynamicallyLoadedFileIndex","attributes","data-stylesheet-id","yepnope","injectCss","attrs","loadScript","scriptUrl","scriptId","data-script-id","injectJs","src","resizeIFrames","selector","ignoreOffScreen","minAllowedHeight","maxHeight","top","height","each","index","currentHeight","is","offset","left","doc","contentDocument","contentWindow","exDocument","exHeight","heightDifference","parent_1","parent","tagName","busy","showElement","query","show","css","checkForIe7ModeJqueryBug","mshvAttributeSetWorkaround","attributeHooks","set","elem","value","setAttribute","getAttributeNode","attrHooks","getQueryStringParameter","results","RegExp","search","decodeURIComponent","isCompiledHelp","currentHref","currentProtocol","protocol","isEditor","getUniqueId","getId","idValue","i","_idCharacters","Math","floor","random","getCommonSettings","overrides","settings","compareVersionStrings","a","b","regExStrip0","segmentsA","split","segmentsB","l","min","diff","getDynamicStyleContainer","$dynamicStyleElement","append","isElementInView","fullyInView","pageTop","scrollTop","pageBottom","elementTop","elementBottom","isDesignTime","isAnimationDisabled","isHideBodyDuringLoadDisabled","isOverflowClippedDuringLoad","write","ElementPosition","DomHelpers","getElementPosition","offsetLeft","offsetTop","scrollLeft","offsetParent","leftMargin","body","topMargin","getTextFromContainingTable","parentTableQuery","tableCell","find","preCell","elemsToUse","toArray","push","textResult","elemTmp","textContent","innerText","text","getCurrentHelp2Namespace","namespace","hostname","substring","findHelp2Keyword","namespaceName","keyword","session","ActiveXObject","Initialize","topics","Query","Count","URL","resolveHelp2Keyword","onlineKeyword","namespaces","RegisteredNamespaceList","n","Item","Name","bracketPosition","keywordForUrl","navigateToHelp2Keyword","replacePage","status","win","open","urlExistsInnov","parentUrl","lastIndexOf","successCallBack","notfoundCallBack","ajax","dataType","statusCode","200","response","404","LocalStorageHandler","attributePrefix","windowLocalStorage","cookieValue","storageMethod","cookieData","storageElement","localStorage","appendTo","load","Cookies","JSON","parse","prototype","save","key","removeItem","setItem","stringify","expires","path","domain","getAttribute","getItem","WindowMessage","messageType","messageData","Messaging","isPostMessageEnabled","postMessage","addMessageListener","receiver","addEventListener","attachEvent","removeMessageListener","removeEventListener","detachEvent","getMessageFromData","separator","routeMessageToFrameElement","windowName","getElementById","routeMessageToWindow","self","routeMessageToParentFrame","ResponsiveClickTargetKind","DocumentFeatureBase","initializeDocument","initializeContent","rootSelector","isInitialLoad","onMessage","message","ensureElementVisible","beforeSetElementVisibility","isVisible","isImmediate","afterSetElementVisibility","populateResponsiveConfiguration","configuration","applyResponsiveConfiguration","initializeContentOrdinal","documentInstance","DocumentFeatureConfiguration","registerDocumentFeatureFactory","factory","_featureFactories","getFeatureFactories","ResponsiveConfiguration","profileName","clickTargets","stylesheetUrls","tablesToPivot","ResponsiveClickTarget","className","kind","ResponsiveTable","onAfterPivot","restOfUrl","currentLocation","mkPrefix","rootElement","_this","_isUnloaded","_featureSettings","setBodyVisibleAfterLoadComplete","isNew","isResponsiveEnabled","isContentDocument","_features","map","createInstance","feature","addClass","DocumentMessageNames","RootMessageNames","getLocalStorage","external","IsInnovasysDesigner","_localStorageInstance","_windowMessageEventListener","ev","receiveMessage","title","navigationKind","setBodyVisible","setTimeout","hide","unload","sort","_","getResponsiveConfiguration","responsiveConfiguration","event","processWindowMessage","setElementVisibility","elements","originalDisplay","cancelDefault","slideDown","slideUp","getFeatureByName","matchingFeatures","getName","getFeatureSettings","getBaseSettings","baseSettings","newSettings","defaults","defaultSettings","__assign","quickSearch","resetQuickSearch","insertNavigationHeader","searchHighlightComplete","navigate","openNavigationPane","Features","_super","ResponsiveDocumentFeature","__extends","pivotTable","table","sourceTable","container","labels","pivotColumnIndex","children","first","cell","toString","row","newTable_1","header_1","cellIndex","newRow","clone","getDefaultFeatureSettings","isEnabled","displayMode","checkPendingResponsiveFilesLoad","loadedId","_pendingResponsiveFiles","item","onResponsiveFilesLoaded","deviceType_1","getDeviceType","stylesheet","responsiveStylesheets","attr","scriptElement","scriptContainer","displayModes","trim","html","block","inline","_configuration","clickTarget","applyClickTarget","_tableIndex","responsiveTable","_elementIndex","pivotDiv","replaceWith","off","on","eventObject","currentTarget","setForcedDisplayMode","val","selectedValue","header","innercontainer","paneId","prependTo","buttonClassName","forcedDisplayMode","getForcedDisplayMode","Modernizr","touch","mq","hash","currentPath","pathname","responsiveStorageId","apply","arguments","ResponsiveDocumentFeatureFactory","FixedToTopDocumentFeature","scrollEventId","resizeEventId","refresh","bodyTop","getBodyContentPosition","$fixedToTop","isPinnedNewValue","isPinned","toggleClass","topValue","bodyContentPosition","position","FixedToTopDocumentFeatureFactory","ThemeDocumentFeature","getDefaultSettings","defaultThemeOption","isThemeSelectionEnabled","_rootSelector","themeName","themeOption","onThemeSelected","themeOptionToApply","$element","themeValue","saveSelection","remove","optionValue","ThemeDocumentFeatureFactory","DynamicStylesDocumentFeature","isDynamicWordWrapEnabled","isDynamicWordWrapUpdateOnResizeEnabled","updateDynamicWordBreak","styleId","$bodyContent","bodyContent","_addedStyles","dynamicWordBreak","offsetWidth","scrollWidth","DynamicStylesDocumentFeatureFactory","DarkModeDocumentFeature","findReadableColorOnDarkBackground","color","_optimalColors","toHex8String","resolvedColor","possibleColor","lighten","tinycolor","isReadable","isAlwaysDarkMode","matchMediaListener","matchMedia","queryList","isAddDarkModificationsDisabled","matches","addDarkModifications","removeDarkModifications","removeClass","matchMediaQuery","addListener","originalColor","style","removeData","DarkModeDocumentFeatureFactory","replacementList","DiacriticsHelper","base","letters","removeDiacritics","str","ChmCompatibilityDocumentFeature","ChmCompatibilityDocumentFeatureFactory","CopyCodeDocumentFeature","getSettings","copiedOkText","copyError","clipboard","Object","defineProperty","ClipboardJS","eventId","textValue","clipboardData","setData","showTip","trigger","clearSelection","target","api","qtip","content","my","at","fixed","toggle","CopyCodeDocumentFeatureFactory","highlightTextConstants","HighlightTextDocumentFeature","cleanUpTextNodes","parentNode","node","lastNode","mergeCount","x","childNodes","previousSibling","nodeType","nodeValue","removeChild","highlightText","removeAllHighlights","highlightTextInElement","_diacriticsHelper","location_1","prefix","keywords","_i","keywords_1","ownerDocument","_firstMatch","documentElement","clientHeight","nodeText","lowerCaseNodeText","highlightSpan","textdiacritics","textRegExp","escapeForRegExp","checkedElementVisible","newNodes","pos","createTextNode","createElement","appendChild","parentElement","newNodes_1","newNode","insertBefore","nodeName","getHighlightSpans","span","source","HighlightTextDocumentFeatureFactory","MarkAsNewDocumentFeature","MarkAsNewDocumentFeatureFactory","Help2CompatibilityDocumentFeature","Help2CompatibilityDocumentFeatureFactory","helpViewerCompatibilityConstants","HelpViewerCompatibilityDocumentFeature","removeExternalFile","filename","filetype","targetAttribute","resourceBaseUrl","startIndex","scriptSrc","isMicrosoftHelpViewerVersion2","fixStyles","stylesheets","styleSheets","_pendingStylesheets","_a","pendingStylesheetHref","foundStylesheet","pendingStylesheetIndex","pendingStylesheet","pendingRules","rules","cssRules","_pendingStylesheetTimer","setInterval","clearInterval","stylesheetindex","ruleindex","originalUrl","backgroundText","rule","backgroundImage","isMicrosoftHelpViewer","fixUrl","mshvStylesheet","newStylesheetHref","filter","next","anchorHref","HelpViewerCompatibilityDocumentFeatureFactory","PopupLinksDocumentFeature","getElementPadding","toNumber","bottom","right","configurePopupLink","titleText","classes","hideOptions","linkElement","contentSource","group","String","fromCharCode","showEvent","customClasses","adjustX","showOptions","delay","effect","adjust","viewport","events","render","tooltip","onPopupRender","PopupLinksDocumentFeatureFactory","quirksModeConstants","QuirksModeCompatibilityDocumentFeature","fx","options","orig","prop","custom","cur","addFirstChildClassNames_1","last","QuirksModeCompatibilityDocumentFeatureFactory","syntaxTabsConstants","SyntaxTabsDocumentFeature","selectedTabIndex","active","selected","activate","ui","newTab","select","opacity","duration","tabs","SyntaxTabsDocumentFeatureFactory","_super_1","TabsDocumentFeature","isLegacyUi","selectedTabClassName","firstVisibleTab","tabContainer","widget","_isLocal","anchor","TabsDocumentFeatureFactory","ToggleSectionDocumentFeature","getToggleSetId","getToggleAllLinkClassName","getToggleHeadingClassName","getToggleContentClassName","getToggleAllLabelClassName","getUnToggleAllLabelClassName","getToggledSuffix","toggleStateForVisible","isSaveStateEnabled","desiredExpanded","toggleSection","loadToggleSectionState","setToggleAllSectionsVisibility","prev","isToggled","result","isCurrentlyToggled","sectionDiv","toggleElement","updateToggleAllSectionsLinkLabel","isCurrentlyHidden","allSectionsToggled","ToggleSectionDocumentFeatureFactory","fn","slideFadeToggle","speed","easing","callback","animate","ToggleDropDownDocumentFeature","ToggleDropDownDocumentFeatureFactory","ViewInFrameDocumentFeature","link","pageName","framePage","ViewInFrameDocumentFeatureFactory","lightboxConstants","LightboxDocumentFeature","slimbox","el","rel","LightboxDocumentFeatureFactory","videoConstants","VideoDocumentFeature","containerElement","iframe","autoplay","autoResize","showRelated","theme","movieId","currentLocation_1","fitVids","VideoDocumentFeatureFactory","ContentFilterDocumentFeature","checkboxSelector","getCheckboxClassName","toggleCheckbox","loadToggleCheckboxState","updateFilterLabel","isChecked","toggleClassName","DesignTimeDocumentFeature","click","scrollPosition","newContentElement","DesignTimeDocumentFeatureFactory","dynamicTocConstants","DynamicTocNode","DynamicTocDocumentFeature","width","DynamicToc","loadNodeContainer","initialNodeId","initialNodeContainer","loadNodeToRoot","isResizable","resizable","handles","resize","setTocWidth","outerWidth","innerWidthDifference","$tocContent","currentNodeId","containerToLoadNext","targetNodeId","targetNode","getNode","_loadedContainers","parentNodeId","createElementsForNodeChildren","ensureNodeChildrenPopulated","populatedNode","expandAndSelectNode","containerId","nodeToExpand","cc","isExpanded","toggleNodeIsExpanded","nodeToSelect","u","setNodeSelected","isSelected","$node","scrollIntoView","nodeExists","nodeId","possibleNode","_allNodes","setNode","injectNodeInfo","parentContainerId","newChildNode","currentNode","childNode","afterLoadCallback","recurse","isPopulated","list_1","settings_1","newListItem","iconIndex","newExpander","class","cancelBubble","onNodeElementClick","newNodeAnchor","t","isIconEnabled","iconClassIndex","icon","isExpandOnly","afterPopulated","spacer","siblings","DynamicTocDocumentFeatureFactory","inThisTopicConstants","InThisTopicHeading","headingLink","anchorName","headingText","firstContentChild","headingElement","$firstContentChild","refreshAllHighlights","listItemId","childList_1","headingListItem","headingLevel","childHeadings","childHeading","_documentInstance","refreshHighlights","getIsVisible","isSectionHeading","highlightVisibility","InThisTopicDocumentFeature","allHeadingsSelector","featureSettings","isSupported","headingTags","anchors","allHeadings","_rootHeadings","thisHeading","inThisTopicHeading","$parentSectionContent","$parentSectionHeading","parentHeading","findInThisTopicHeading","parentInThisTopicHeading","findParentInThisTopicHeading","prepend","headingList","areChildHeadingsAlwaysVisible","highlightSelected","headings","heading","headings_1","lastChild","foundHeading","InThisTopicDocumentFeatureFactory","languageFilterConstants","LanguageFilterDocumentFeature","call","_toggleClassAttributeName","_filteredContentClassNamePrefix","isVbChecked","isVbUsageChecked","targetLabel","allCheckboxes","allCheckedCheckboxes","allLabels","_linkSelector","_allLabelSelector","languageName","_languageNameAttributeName","_languageLabelSelectorPrefix","LanguageFilterDocumentFeatureFactory","MemberFilterDocumentFeature","isFiltered","MemberFilterDocumentFeatureFactory","Versions","Configuration","VersionDefinitionSet","VersionDefinition","versionConstants","badRequestStatusCode","VersionsDocumentFeature","versions","versionDefinitionSets","versionDefinitions","createPopupForVersionDefinitionSet","$popupContent","popupContentElement","discoverVersions","versionDefinitionSetId","popupContent","versionDefinitionSet","currentVersionId","promises","currentId","targetUrl_1","versionId","$itemElement","discoveryUrl","parseContentUrlTemplate","type","complete","xhr","$anchor","isFrameless","navigationUrl","empty","when","always","versionDefinition","urlTemplate","targetVersionSetId","pop","locale","versionSetId","getPopupContainerSelector","popupContainer","$container","$span","caption","$contentDiv","$versionList","$versionItem","VersionsDocumentFeatureFactory"],"mappings":"8uBACA,SAAUA,IAAU,SAAAC,GAEhB,IAAMC,EACe,GADfA,EAEU,EAGhBC,GAmBkBA,EAAAC,aAAd,WACI,OAAOC,UAAUC,WAEzBH,GAnBI,SAAAA,IACI,IAAMI,EAAKJ,EAAYC,eAAeI,cAChCC,EAAa,uBAAuBC,KAAKH,IAC3C,uBAAuBG,KAAKH,IAC5B,oCAAoCG,KAAKH,IACzC,kBAAkBG,KAAKH,IACvBA,EAAGI,QAAQ,cAAgB,GAAK,gCAAgCD,KAAKH,IACrE,GACJK,KAAKC,KAAOJ,EAAM,IAAM,GAExBG,KAAKE,QAAUC,SAASN,EADH,IAC0B,IAAK,IAoB5D,SAAAO,KAjCaf,EAAAE,YAAWA,EAgDNa,EAAAC,YAAd,WACI,MAA0B,SAAtBD,EAAQE,KAAKL,KAENG,EAAQE,KAAKJ,QAEb,GAODE,EAAAG,oBAAd,SAA8DC,GAC1D,IAIIC,EAHED,aAAmBE,OAGHF,EAFAG,EAAEH,GAKpBI,EAAeH,EAAgBI,SAAS,gBAAkBJ,EAAkBA,EAAgBK,QAAQ,iBAOxG,GAAuC,OALnCF,EADgB,IAAhBA,EAAKG,OACEJ,EAAE,QAEFA,EAAEC,EAAKI,IAAI,KAGbC,KAAK,sBACV,OAAOL,EAAKK,KAAK,sBAGXC,EAAc,IAAI7B,EAAA8B,SAASP,EAAKI,IAAI,IAG1C,OAFAJ,EAAKK,KAAK,qBAAsBC,GAEzBA,GAODd,EAAAgB,gBAAd,WACI,OAAOC,UAMGjB,EAAAkB,cAAd,WACI,OAAOC,SAASC,YAMNpB,EAAAqB,OAAd,WACIJ,SAASI,UAMCrB,EAAAsB,gBAAd,SAA8BC,GAC1B,GAAIC,OAAOC,QAAQC,aACf,IACIF,OAAOC,QAAQC,aAAa,GAAI,GAAI,IAAAC,OAAIJ,IAC1C,MAAOK,SAITJ,OAAOP,SAASY,QAAQ,IAAAF,OAAIJ,KAStBvB,EAAA8B,WAAd,SAAyBC,EAAaF,GAC9BA,EACAL,OAAOP,SAASY,QAAQE,GAExBP,OAAOP,SAASe,KAAOD,GAOjB/B,EAAAiC,gBAAd,SAA8BC,GACtBA,EAAED,gBACFC,EAAED,kBAEFC,EAAEC,aAAc,GAOVnC,EAAAoC,eAAd,SACIC,EACAC,EACAC,EACAC,QAAA,IAAAA,IAAAA,EAAA,MAEA,IAAMC,EAAK,OAAAd,OAAO/B,KAAK8C,4BACvB9C,KAAK8C,6BAECC,EAAa,CAAEC,qBAAsBN,GAK3C,OAJAO,QAAQC,UAAU,CAAEd,KAAMK,EAAeU,MAAOJ,GAAc,WAC1DH,EAASC,KAGNA,GAOGzC,EAAAgD,WAAd,SACIC,EACAC,EACAX,EACAC,QAAA,IAAAA,IAAAA,EAAA,MAEA,IAAMC,EAAK,OAAAd,OAAO/B,KAAK8C,4BACvB9C,KAAK8C,6BAECC,EAAa,CAAEQ,iBAAkBD,GAKvC,OAJAL,QAAQO,SAAS,CAAEC,IAAKJ,EAAWF,MAAOJ,GAAc,WACpDH,EAASC,KAGNA,GAIGzC,EAAAsD,cAAd,SAA4BC,EAAkBC,QAAA,IAAAA,IAAAA,GAAA,GAE1C,IACIC,EADAC,EAAY,EAGhB,IACID,EAAmBlD,EAAEiB,OAAOmC,KAAKC,SACnC,MAAOhC,GACL6B,EAAmBlD,EAAEiB,QAAQoC,SAGjCrD,EAAE,SAAUgD,GAAUM,KAAK,SAACC,EAAe1D,GACvC,IAAI2D,EAAgB,EACpB,GAAIxD,EAAEH,GAAS4D,GAAG,cAAgBR,GAA+C,GAA5BjD,EAAEH,GAAS6D,SAASC,MAAY,CAEjF,IAAIC,EAAgB,KACpB,IACIA,EAAM/D,EAAQgE,iBAEPhE,EAAQiE,cAAclD,UAAaf,EAAgBe,SAC5D,MAAOmD,IAGT,GAAW,MAAPH,EAEA,IACIJ,EAAgBxD,EAAE4D,GAAKP,SACzB,MAAOW,GACLR,EAAgBN,OAGpBM,EAAgBN,EAEpB,IAIMe,EAAmBT,GAJRxD,EAAEH,GAASS,KAAK,gBAEhB,IAGM3B,EAAnBsF,GACIA,EAAmB,GAAKA,EAAmBtF,KAGjB,SADxBuF,EAASlE,EAAEH,GAASsE,UACf9D,IAAI,GAAG+D,SAAqBZ,EAAgBU,EAAOb,WAE1DG,EAAgBU,EAAOb,UAEvBG,EAAgBN,IAEhBM,EAAgBN,GAEpBlD,EAAEH,GAASwD,OAAO,GAAAjC,OAAGoC,EAAa,OAClCxD,EAAEH,GAASS,KAAK,cAAekD,SAE3BxD,EAAEH,GAAS4D,GAAG,cAEtBzD,EAAEH,GAASwD,OAAO,GAClBrD,EAAEH,GAASS,KAAK,cAAe,IAEf6C,EAAhBK,IAEAL,EAAYK,KAIda,EAAerE,EAAE,WAKvB,OAJoB,IAAhBqE,EAAKjE,QACLiE,EAAKhB,OAAOF,GAGTA,GAIG1D,EAAA6E,YAAd,SAA0BC,EAAwBH,GAE9CG,EAAMC,OACU,SAAZJ,GACApE,EAAE,QAAQyE,IAAI,UAAW,UAOnBhF,EAAAiF,yBAAd,WACI,IACUC,EAQIC,EATY,SAAtBnF,EAAQE,KAAKL,MAAmBG,EAAQE,KAAKJ,SAAWZ,IAClDgG,EAA6B,CAC/BE,IAAK,SAACC,EAAeC,EAAYzF,GAG7B,OAFAwF,EAAKE,aAAa1F,EAAMyF,GAEjBD,EAAKG,iBAAiB3F,KAG5B,MAALU,GAAqC,MAAvBA,EAAUkF,aAClBN,EAAuB5E,EAAUkF,WACxB,oBAAsBP,EACrCC,EAAe,aAAeD,EAC9BC,EAAe,eAAiBD,EAChCC,EAAe,eAAiBD,KAK9BlF,EAAA0F,wBAAd,SAAsC7F,GAClCA,EAAOA,EAAKgC,QAAQ,MAAO,OAAOA,QAAQ,OAAQ,OAE5C8D,EADQ,IAAIC,OAAO,SAAAjE,OAAS9B,EAAI,cAChBH,KAAKM,EAAQgB,kBAAkB6E,QAErD,OAAkB,MAAXF,EAAkB,KAAOG,mBAAmBH,EAAQ,GAAG9D,QAAQ,MAAO,OAGnE7B,EAAA+F,eAAd,WACI,IAAMC,EAAc,GAAArE,OAAG3B,EAAQgB,kBAAkBgB,KAAI,KAC/CiE,EAAkBjG,EAAQgB,kBAAkBkF,SAElD,OAA6C,IAAzCF,EAAYrG,QAAQ,mBAEsB,IAAnCqG,EAAYrG,QAAQ,aAEA,aAApBsG,IAEoB,cAApBA,IAC8B,IAArCD,EAAYrG,QAAQ,cACsB,IAA1CqG,EAAYrG,QAAQ,qBAQdK,EAAAmG,SAAd,WACI,MAA6B,WAAtBlF,SAASiF,UAMNlG,EAAAoG,YAAd,WAWI,IAVA,IACMC,EAAQ,WAEV,IADA,IAAIC,EAAU,GACLC,EAAI,EAAGA,EAHH,GAGiBA,IAC1BD,GAAWtG,EAAQwG,cAAcC,KAAKC,MAAMD,KAAKE,SAAW3G,EAAQwG,cAAc7F,SAGtF,OAAO2F,GAEP7D,EAAK4D,IACmB,EAArB9F,EAAE,IAAAoB,OAAIc,IAAM9B,QACf8B,EAAK4D,IAGT,OAAO5D,GAMGzC,EAAA4G,kBAAd,WACI,OAAS5H,EAAkB6H,WAAc7H,EAAkB8H,UAAa,IAM9D9G,EAAA+G,sBAAd,SAAoCC,EAAWC,GAM3C,IALA,IAAMC,EAAc,WACdC,EAAYH,EAAEnF,QAAQqF,EAAa,IAAIE,MAAM,KAC7CC,EAAYJ,EAAEpF,QAAQqF,EAAa,IAAIE,MAAM,KAC7CE,EAAIb,KAAKc,IAAIJ,EAAUxG,OAAQ0G,EAAU1G,QAEtC4F,EAAI,EAAGA,EAAIe,EAAGf,IAAK,CACxB,IAAMiB,EAAOzH,SAASoH,EAAUZ,GAAI,IAAMxG,SAASsH,EAAUd,GAAI,IACjE,GAAIiB,EACA,OAAOA,EAIf,OAAOL,EAAUxG,OAAS0G,EAAU1G,QAM1BX,EAAAyH,yBAAd,SAAuChF,GACnC,IAAIiF,EAAuBnH,EAAE,IAAAoB,OAAIc,IAMjC,OALoC,IAAhCiF,EAAqB/G,SACrB+G,EAAuBnH,EAAE,8BAAAoB,OAA8Bc,EAAE,eACzDlC,EAAE,QAAQoH,OAAOD,IAGdA,GAGG1H,EAAA4H,gBAAd,SAA8BxH,EAAkByH,GAC5C,GAAe,MAAXzH,EACA,OAAO,EAGX,IAAKG,EAAEH,GAAS4D,GAAG,YACf,OAAO,EAGX,IAAM8D,EAAUvH,EAAEiB,QAAQuG,YACpBC,EAAaF,EAAUvH,EAAEiB,QAAQoC,SACjCqE,EAAa1H,EAAEH,GAAS6D,SAASN,IACjCuE,EAAgBD,EAAa1H,EAAEH,GAASwD,SAE9C,OAAIiE,EACSC,EAAUG,GAA6BC,EAAbF,EAE1BC,GAAcD,GAAiCF,GAAjBI,GA7WjClI,EAAAmI,cAAe,EAEfnI,EAAAoI,qBAAsB,EAEtBpI,EAAAE,KAAO,IAAIf,EAEXa,EAAA0C,2BAA6B,EAEnB1C,EAAAwG,cAAgB,iEAAiEY,MAAM,IAVnHpH,EAkXAA,EAlXaf,EAAAe,QAAOA,EAxCJ,CAAAhB,EAAAC,UAAAD,EAAAC,QAAO,KAA3B,CAAUD,UAAAA,WAAS,IA+ZnB,IAAM6H,UAAoC7H,UAAkB6H,WAAc7H,UAAkB8H,UAEhE,eAAxB3F,SAASC,YACkB,cAAtBH,SAASiF,WACgC,IAAvCjF,SAASe,KAAKrC,QAAQ,cACsB,IAA5CsB,SAASe,KAAKrC,QAAQ,oBAEZ,MAAbkH,WAAsBA,UAAUwB,6BAGzBxB,UAAUyB,6BAEjBnH,SAASoH,MAAM,2DAHfpH,SAASoH,MAAM,uDCxavB,SAAUvJ,GAAU,IAKhBwJ,EAAAA,EAGI,SAAmBtE,EAAqBP,GAArB/D,KAAAsE,KAAAA,EAAqBtE,KAAA+D,IAAAA,IAR5B3E,EAAAC,UAAAD,EAAAC,QAAO,KAKVuJ,gBAAeA,EALhC,CAAUxJ,UAAAA,WAAS,ICAnB,SAAUA,GAAU,IAAAC,EAEhB,SAAAwJ,KAFgBxJ,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,IAQLwJ,EAAAC,mBAAd,SAAiCtI,GAI7B,IAHA,IAAIuI,EAAa,EACbC,EAAY,EAETxI,GACoB,EAEnBnB,EAAAe,QAAQC,eACR0I,GAAevI,EAAQuI,WAAavI,EAAQyI,WAC5CD,GAAcxI,EAAQwI,UAAYxI,EAAQ2H,YAE1CY,GAAcvI,EAAQuI,WACtBC,GAAaxI,EAAQwI,WAGzBxI,EAAWA,EAAQ0I,aAIvB,IAAMC,EAAc5H,SAAS6H,KAAaD,WAS1C,OARmD,IAA/C9J,EAAAE,YAAYC,eAAeO,QAAQ,aACV,IAAfoJ,IAEVJ,GAAcI,EAEdH,GAAezH,SAAS6H,KAAaC,WAGlC,IAAIhK,EAAAuJ,gBAAgBG,EAAYC,IAM7BH,EAAAS,2BAAd,SAAyC9I,GACrC,IAAM+I,EAAmB5I,EAAEH,GACtBM,QAAQ,SACRE,IAAI,GAEHwI,EADsB7I,EAAE4I,GACsBE,KAAK,MAAMzI,IAAI,GAC7D0I,EAAkC/I,EAAE6I,GAAWC,KAAK,OAEtDE,EAA4B,GAE5BD,GAA4B,EAAjBA,EAAQ3I,OACnB4I,EAAaD,EAAQE,UAErBD,EAAWE,KAAKL,GAKpB,IAFA,IAAIM,EAAqB,GAEhB5F,EAAQ,EAAGA,EAAQyF,EAAW5I,SAAUmD,EAAO,CACpD,IAAI6F,EAAUJ,EAAWzF,GACV,MAAX6F,IAC2B,MAAvBA,EAAQC,YACRF,GAAcC,EAAQC,YACM,MAArBD,EAAQE,UACfH,GAAcC,EAAQE,UAEtBH,GAAcnJ,EAAEoJ,GAASG,QAIrC,OAAOJ,GAtEfjB,EAwEAA,EAxEaxJ,EAAAwJ,WAAUA,EAF3B,CAAUzJ,UAAAA,WAAS,ICCnB,IAAM+K,yBAA2B,WAC7B,IAAIC,EAAY,GACV/I,EAAWjC,UAAUC,QAAQe,QAAQgB,kBAU3C,MAR0B,aAAtBC,EAASiF,WAGyC,QAFlD8D,EAAY/I,EAASgJ,UAEPC,UAAU,EADE,KAEtBF,EAAYA,EAAUE,UAFA,KAMvBF,GAGLG,iBAAmB,SAACC,EAAuBC,GAE7C,GAA2B,EAAvBD,EAAczJ,OACd,IAEI,IAAM2J,EAAe,IAAIC,cAAc,kBACvCD,EAAQE,WAAW,aAAA7I,OAAayI,GAAiB,GAE3CK,EAAcH,EAAQI,MAAML,EAAS,2BAA4B,EAAG,IAC1E,GAAmB,EAAfI,EAAOE,MACP,OAAOF,EAAO,GAAGG,IAEvB,MAAO1I,IAKb,MAAO,IAKL2I,oBAAsB,SAACR,EAAiBS,GAE1C,IAAI/I,EAAM,GAEV,IAeI,GAZY,MADZA,EAAMoI,iBAAiBJ,2BAA4BM,KAInC,MADZtI,EAAMoI,iBAAiB,cAAeE,KAGtB,MADZtI,EAAMoI,iBAAiB,eAAgBE,MAEnCtI,EAAMoI,iBAAiB,UAAWE,IAMlC,KAARtI,EACA,OAAOA,EAGP,IAEMgJ,EAFiB,IAAIR,cAAc,yBAEFS,wBAAwB,WAE/D,GAAuB,EAAnBD,EAAWJ,MACX,IAAK,IAAIM,EAAI,EAAGA,GAAKF,EAAWJ,MAAOM,IAAK,CAExC,IACMb,EADiBW,EAAWG,KAAKD,GACCE,KAExC,GAAkD,YAA9Cf,EAAcF,UAAU,EADN,GAElB,OAAQE,GACJ,IAAK,cAEL,IAAK,eAEL,IAAK,UACD,MACJ,QAEI,GAAY,MADZrI,EAAMoI,iBAAiBC,EAAe,KAElC,OAAOrI,IAOrC,MAAOG,IAOT,IAAMkJ,EAAkBN,EAAcnL,QAAQ,MACrB,IAArByL,IACAN,EAAgBA,EAAcZ,UAAU,EAAGkB,IAGzCC,EAAgBP,EAAcjJ,QAAQ,IAAK,KAAKrC,cAEtD,MAAO,yCAAAmC,OAAyC0J,IAI9CC,uBAAyB,SAACjB,EAAiBS,EAAuBS,GACpE/J,OAAOgK,OAAS,0CAChB,IAAMzJ,EAAM8I,oBAAoBR,EAASS,GACzCtJ,OAAOgK,OAAS,GAChB,IAOEC,EAL4C,8BAAzC1J,EAAImI,UAAU,EAFQ,KAGqB,+BAAzCnI,EAAImI,UAAU,EAFM,KAIN,MAAjB1I,OAAOkD,OAYA6G,EACPtK,SAASY,QAAQE,GAEjBd,SAASe,KAAOD,GAblB0J,EAAMjK,OAAOkK,KAAK,cAAe,UACrCC,eAAe5J,EACL,WAAa0J,EAAIxK,SAASe,KAAOD,GACjC,WACR,IAAI6J,EAAY7J,EAAImI,UAAU,EAAGnI,EAAI8J,YAAY,MACjDF,eAAeC,EACC,WAAaH,EAAIxK,SAASe,KAAO4J,GACjC,WAAaH,EAAIxK,SAASe,KAAOD,QAW/C4J,eAAiB,SAAC5J,EAAa+J,EAAsBC,GACvDxL,EAAEyL,KAAK,CACLjK,IAAKA,EACLkK,SAAU,QACVC,WAAY,CACVC,IAAK,SAASC,GACZN,KAEFO,IAAK,SAASD,GACZL,UCjJV,SAAU/M,GAAU,IAAAC,EAyBZ,SAAAqN,EAAmBC,GAEf,IAAIC,EAoBUC,OAtBC,IAAAF,IAAAA,EAAA,IAAA3M,KAAA2M,gBAAAA,EALZ3M,KAAA8M,cAAgB,SAEhB9M,KAAA+M,WAAkB,KAClB/M,KAAAgN,eAA0B,KAK7B,IAEIJ,EAAqBhL,OAAOqL,aAC9B,MAAO3K,IAGJsK,IACyB,YAAtBvL,SAASiF,UAETtG,KAAK8M,cAAgB,YACfE,EAAiBrM,EAAE,aACVyE,IAAI,WAAY,0BAC/B4H,EAAeE,SAAS,QACxBlN,KAAKgN,eAAiBA,EAAehM,IAAI,GAExChB,KAAKgN,eAAuBG,KAAK,kBAGlCnN,KAAK8M,cAAgB,SACfD,EAAcO,QAAQpM,IAAI,gBAE5BhB,KAAK+M,WADLF,EACkBQ,KAAKC,MAAMT,GAEX,KAnDtBxN,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,IA0DZqN,EAAAa,UAAAJ,KAAP,SAAYlN,KAKLyM,EAAAa,UAAAC,KAAP,SAAYvN,KAKLyM,EAAAa,UAAA5H,aAAP,SAAoB8H,EAAa/H,GACD,MAAxB1F,KAAK2M,kBACLc,EAAMzN,KAAK2M,gBAAkBc,GAEN,WAAvBzN,KAAK8M,cACQ,MAATpH,QAAkC,IAAVA,EACxB9D,OAAOqL,aAAaS,WAAWD,GAE/B7L,OAAOqL,aAAaU,QAAQF,EAAK/H,GAEP,WAAvB1F,KAAK8M,eAER9M,KAAK+M,WAAWU,GADP,MAAT/H,EACuB,KAEA,GAAA3D,OAAG2D,GAE9B0H,QAAQ5H,IAAI,eAAgB6H,KAAKO,UAAU5N,KAAK+M,YAAa,CAAEc,QAAS,IAAKC,KAAM,IAAKC,OAAQ,MAClE,aAAvB/N,KAAK8M,gBACZ9M,KAAKgN,eAAerH,aAAa8H,EAAK,GAAA1L,OAAG2D,IAGxC1F,KAAKgN,eAAuBQ,KAAK,kBAKnCd,EAAAa,UAAAS,aAAP,SAAoBP,GAIhB,OAH4B,MAAxBzN,KAAK2M,kBACLc,EAAMzN,KAAK2M,gBAAkBc,GAEN,WAAvBzN,KAAK8M,cACElL,OAAOqL,aAAagB,QAAQR,GACL,WAAvBzN,KAAK8M,cACwB,oBAAzB9M,KAAK+M,WAAWU,GAChB,KAEAzN,KAAK+M,WAAWU,GAEG,aAAvBzN,KAAK8M,cACL9M,KAAKgN,eAAegB,aAAaP,QADrC,GAxFff,EA4FAA,EA5FarN,EAAAqN,oBAAmBA,EAlBpC,CAAUtN,UAAAA,WAAS,ICAnB,SAAUA,IAAU,SAAAC,GAKhB,IAAA6O,EAEI,SAAmBC,EAA4BC,GAA5BpO,KAAAmO,YAAAA,EAA4BnO,KAAAoO,YAAAA,GAFtC/O,EAAA6O,cAAaA,EAQ1B,IAAAG,GAKkBA,EAAAC,qBAAd,WACI,OAA8B,MAAtB1M,OAAO2M,aAOLF,EAAAG,mBAAd,SAAiCC,GACzBJ,EAAUC,yBACN1M,OAAO8M,iBACP9M,OAAO8M,iBAAiB,UAAWD,GAAU,GAG5C7M,OAAe+M,YAAY,YAAaF,KASvCJ,EAAAO,sBAAd,SAAoCH,GAC5BJ,EAAUC,yBACN1M,OAAO8M,iBACP9M,OAAOiN,oBAAoB,UAAWJ,GAAU,GAG/C7M,OAAekN,YAAY,YAAaL,KAUvCJ,EAAAU,mBAAd,SAAiC9N,GAC7B,IACIkN,EADEa,EAAY/N,EAAKlB,QAAQ,KAM3BqO,GAFe,IAAfY,GACAb,EAAclN,EAAKqJ,UAAU,EAAG0E,GAClB/N,EAAKqJ,UAAU0E,EAAY,KAEzCb,EAAclN,EACA,IAGlB,OAAO,IAAIiN,EAAcC,EAAaC,IAG5BC,EAAAY,2BAAd,SAAyCC,EAAoBf,EAAqBC,GACxE5N,EAAmBe,SAAS4N,eAAeD,GAElC,MAAX1O,GAAqD,MAAjCA,EAAgBiE,eAEpC4J,EAAUe,qBAAuB5O,EAAgBiE,cAA0B0J,EAAaC,IAIlFC,EAAAe,qBAAd,SAAmCxN,EAAgBuM,EAAqBC,GACtD,MAAVxM,GAAkByN,OAASzN,GACb,MAAVA,GAAwC,MAAtBA,EAAO2M,aACzB3M,EAAO2M,YAAY,GAAAxM,OAAGoM,EAAW,KAAApM,OAAIqM,GAAe,MAKlDC,EAAAiB,0BAAd,SAAwCnB,EAAqBC,GAC3C,MAAVtJ,QAAkBuK,OAASvK,QAC3B9E,KAAKoP,qBAAqBtK,OAAQqJ,EAAaC,IAI3DC,GAnFA,SAAAA,KAAahP,EAAAgP,UAASA,EAbN,CAAAjP,EAAAC,UAAAD,EAAAC,QAAO,KAA3B,CAAUD,UAAAA,WAAS,ICAnB,SAAUA,IAAU,SAAAC,IAEJkQ,EAAAlQ,EAAAkQ,4BAAAlQ,EAAAkQ,0BAAyB,KACjCA,EAAA,KAAA,GAAA,OACAA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,MAAA,GAAA,QAGJ,IAAAC,GAKWA,EAAAjC,UAAAkC,mBAAP,aAKOD,EAAAjC,UAAAmC,kBAAP,SAAyBC,EAAsBC,KAKxCJ,EAAAjC,UAAAsC,UAAP,SAAiBC,KAOVN,EAAAjC,UAAAwC,qBAAP,SAA4BvP,KAKrBgP,EAAAjC,UAAAyC,2BAAP,SAAkCxP,EAAkByP,EAAoBC,GACpE,OAAO,GAIJV,EAAAjC,UAAA4C,0BAAP,SAAiC3P,EAAkByP,KAK5CT,EAAAjC,UAAA6C,gCAAP,SAAuCC,KAKhCb,EAAAjC,UAAA+C,6BAAP,SAAoCD,KAO7Bb,EAAAjC,UAAAgD,yBAAP,WACI,OAAO,GAGff,GAlDI,SAAAA,EAAsBgB,QAAA,IAAAA,IAAAA,EAAA,MAAAxQ,KAAAwQ,iBAAAA,EAoD1B,SAAAC,KAvDsBpR,EAAAmQ,oBAAmBA,EA6DvBiB,EAAAC,+BAAd,SAA6CC,GACzCF,EAA6BG,kBAAkB/G,KAAK8G,IAG1CF,EAAAI,oBAAd,WACI,OAAOJ,EAA6BG,mBAPhBH,EAAAG,kBAA+C,GAJ3EH,EAcAA,EAdapR,EAAAoR,6BAA4BA,EAgBzCK,EAGI,SAAmBC,EAA4BC,QAAA,IAAAA,IAAAA,EAAA,IAA5BhR,KAAA+Q,YAAAA,EAA4B/Q,KAAAgR,aAAAA,EAIxChR,KAAAiR,eAA2B,GAE3BjR,KAAAkR,cAAmC,IATjC7R,EAAAyR,wBAAuBA,EAapCK,EAGI,SAAmBC,EAA0BC,GAA1BrR,KAAAoR,UAAAA,EAA0BpR,KAAAqR,KAAAA,GAHpChS,EAAA8R,sBAAqBA,EAOlCG,EAGI,SAAmB3N,EAAyB4N,QAAA,IAAAA,IAAAA,EAAA,MAAzBvR,KAAA2D,SAAAA,EAAyB3D,KAAAuR,aAAAA,GAHnClS,EAAAiS,gBAAeA,EAnGZ,CAAAlS,EAAAC,UAAAD,EAAAC,QAAO,KAA3B,CAAUD,UAAAA,WAAS,ICAnB,IAGUoS,UACA7P,YAJJ8P,gBAAkB,GAAA1P,OAAGV,SAASe,KAAI,KAClCsP,SAAW,gBACyB,IAAtCD,gBAAgB1R,QAAQ2R,YAClBF,UAAYC,gBAAgBnH,UAAUoH,SAAS3Q,OAAS,EAAG0Q,gBAAgB1Q,OAAS,GACpFY,YAAc,UAAAI,OAAUyP,WAC9BnQ,SAASY,QAAQN,cAIrB,SAAUvC,GAAU,IAAAC,EAEhB8B,EA+BI,SAAAA,EAAYwQ,EAA0B9O,QAAA,IAAAA,IAAAA,EAAA,IAAtC,IAAA+O,EAAA5R,KAvBQA,KAAA6R,aAAc,EAOf7R,KAAA6C,GAAK,GAiBR7C,KAAK6C,GAAKA,EACV7C,KAAK2R,YAAcA,EACnB3R,KAAK2P,aAAehP,EAAEgR,GACtB3R,KAAK8R,iBAAmB,GACxB9R,KAAK+R,iCAAkC,EACvC/R,KAAKgS,OAAQ,EACbhS,KAAKiS,qBAAsB,EAC3BjS,KAAKkS,mBAAoB,EAEzBlS,KAAK2P,aAAa1O,KAAK,qBAAsBjB,MAI7CA,KAAKmS,UAAYxR,EAAEyR,IACf/S,EAAAoR,6BAA6BI,sBAC7B,SAACF,GAAuD,OAAAA,EAAQ0B,eAAeT,KAGnFjR,EAAEsD,KAAKjE,KAAKmS,UAAW,SAACjO,EAAeoO,GACnCA,EAAQ7C,uBAGRpQ,EAAAe,QAAQmI,cACR5H,EAAE,QAAQ4R,SAAS,gBAGnBlT,EAAAe,QAAQmG,YACR5F,EAAE,QAAQ4R,SAAS,YAoR/B,SAAAC,KAOA,SAAAC,KAxVgBpT,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,IAoEZ8B,EAAAoM,UAAAmF,gBAAP,WACI,GAAIrT,EAAAe,QAAQmI,aACR,IAES3G,OAAO+Q,SAAiBC,sBAEzB5S,KAAK6S,sBAA0BjR,OAAO+Q,UAE5C,MAAOrQ,IAQb,OAJKtC,KAAK6S,wBACN7S,KAAK6S,sBAAwB,IAAIxT,EAAAqN,oBAAoB1M,KAAK6C,KAGvD7C,KAAK6S,uBAMT1R,EAAAoM,UAAAJ,KAAP,WAAA,IAAAyE,EAAA5R,KAEUiH,EAAwB5H,EAAAe,QAAQ4G,oBAElCC,EAAU+K,QACVhS,KAAKgS,OAAQ,GAKD,KAAZhS,KAAK6C,IAEDxD,EAAAgP,UAAUC,yBACVtO,KAAK8S,4BAA8B,SAACC,GAA2B,OAAAnB,EAAKoB,eAAeD,IACnF1T,EAAAgP,UAAUG,mBAAmBxO,KAAK8S,6BAE9B9S,KAAKkS,oBAEL7S,EAAAgP,UAAUiB,0BAA0B,SAAUjO,SAASe,MACvD/C,EAAAgP,UAAUiB,0BAA0B,kBAAmB/N,SAAS0R,SAM3C,WAA7BhM,EAAUiM,eACVvS,EAAE,QAAQ4R,SAAS,uBAEnB5R,EAAE,QAAQ4R,SAAS,uBAIvBvS,KAAK0P,kBAAkB1P,KAAK2P,cAAc,GAE1B,KAAZ3P,KAAK6C,IAAa7C,KAAK+R,iCAEvB/R,KAAKmT,kBAINhS,EAAAoM,UAAA4F,eAAP,WACIxS,EAAE,QAAQ4R,SAAS,YACnBlT,EAAAe,QAAQ6E,YAAYtE,EAAE,QAAS,QAC/ByS,WAAW,WACH/T,EAAAe,QAAQ4G,oBAAoB0B,6BAC5B/H,EAAE,QAAQyE,IAAI,aAAc,QAEhCzE,EAAE,mBAAmB0S,QACtB,IAGAlS,EAAAoM,UAAA+F,OAAP,WAEoB,KAAZtT,KAAK6C,IAEDxD,EAAAgP,UAAUC,wBAA8D,MAApCtO,KAAK8S,6BACzCzT,EAAAgP,UAAUO,sBAAsB5O,KAAK8S,6BAI7C9S,KAAK6R,aAAc,GAOhB1Q,EAAAoM,UAAAmC,kBAAP,SAAyBC,EAAsBC,QAAA,IAAAA,IAAAA,GAAA,GAC3CjP,EAAEsD,KAAKjE,KAAKmS,UAAUoB,KAClB,SAACnM,EAAqBC,GAAgC,OAAAD,EAAEmJ,2BAA6BlJ,EAAEkJ,6BACvF,SAACiD,EAAWlB,GACRA,EAAQ5C,kBAAkBC,EAAcC,MAO7CzO,EAAAoM,UAAAkG,2BAAP,SAAkC1C,GAC9B,IAAMV,EAAyC,IAAIhR,EAAAyR,wBAAwBC,GAK3E,OAJApQ,EAAEsD,KAAKjE,KAAKmS,UAAW,SAACjO,EAAeoO,GACnCA,EAAQlC,gCAAgCC,KAGrCA,GAMJlP,EAAAoM,UAAA+C,6BAAP,SAAoCoD,GAChC/S,EAAEsD,KAAKjE,KAAKmS,UAAW,SAACjO,EAAeoO,GACnCA,EAAQhC,6BAA6BoD,MAQtCvS,EAAAoM,UAAAyF,eAAP,SAAsBW,GAClB,IAAI7D,EACJ,IACIA,EAAUzQ,EAAAgP,UAAUU,mBAAmB4E,EAAM1S,MAC/C,MAAOe,IAIThC,KAAK4T,qBAAqB9D,IAMvB3O,EAAAoM,UAAAqG,qBAAP,SAA4B9D,GACpBA,IAES,YADDA,EAAQ3B,YAER5M,SAASF,SAASI,SAGI,MAAlBzB,KAAKmS,WACLxR,EAAEsD,KAAKjE,KAAKmS,UAAW,SAACjO,EAAeoO,GACnCA,EAAQzC,UAAUC,OAWnC3O,EAAAoM,UAAAwC,qBAAP,SAA4BvP,GACxBG,EAAEsD,KAAKjE,KAAKmS,UAAW,SAACjO,EAAeoO,GACnCA,EAAQvC,qBAAqBvP,MAU9BW,EAAAoM,UAAAsG,qBAAP,SAA4BC,EAAkB7D,EAAoBC,GAAlE,IAAA0B,EAAA5R,KACI,OAAO8T,EAAS7P,KAAK,SAACC,EAAe1D,GAEjC,IAiBsBuT,EAjBlBC,GAAgB,EAEpBrT,EAAEsD,KAAK2N,EAAKO,UAAW,SAACqB,EAAWlB,GAC1B0B,IAC2E,IAAxE1B,EAAQtC,2BAA2BxP,EAASyP,EAAWC,KACvD8D,GAAgB,KAKvBA,IAEiC,SAA9BrT,EAAEH,GAAS4E,IAAI,aAA0B6K,IACP,SAA9BtP,EAAEH,GAAS4E,IAAI,WACX8K,GAAe7Q,EAAAe,QAAQoI,oBAIA,OADjBuL,EAAuBpT,EAAEH,GAASS,KAAK,wBAEzCN,EAAEH,GAAS4E,IAAI,UAAW2O,GAC1BpT,EAAEH,GAASS,KAAK,qBAAsB,OAEd,OAApBT,EAAQuE,QACRpE,EAAEH,GAAS4E,IAAI,UAAW,aAE1BzE,EAAEH,GAAS4E,IAAI,UAAW,SAIlCzE,EAAEH,GAASyT,UAAU,SAIzBtT,EAAEH,GAASS,KAAK,qBAAsBN,EAAEH,GAAS4E,IAAI,YACjD8K,GAAe7Q,EAAAe,QAAQoI,oBACvB7H,EAAEH,GAAS6S,OAEX1S,EAAEH,GAAS0T,QAAQ,UAK/BvT,EAAEsD,KAAK2N,EAAKO,UAAW,SAACqB,EAAWlB,GAC/BA,EAAQnC,0BAA0B3P,EAASyP,SAWpD9O,EAAAoM,UAAA4G,iBAAP,SAA2DlU,GACvD,GAAY,MAARA,EACA,OAAO,KAEX,IAAMmU,EACAzT,EAAEyR,IAAIpS,KAAKmS,UAAW,SAACG,EAA2BpO,GAChD,OAAIoO,EAAQ+B,UAAUzU,gBAAkBK,EAAKL,cAClC0S,EAEA,OAGnB,OAA8B,EAA1B8B,EAAiBrT,OACVqT,EAAiB,QAD5B,GAKGjT,EAAAoM,UAAA+G,mBAAP,SAA4CrU,EAAcsU,GACtD,GAAY,MAARtU,EACA,OAAO,KAEX,GAAmC,MAA/BD,KAAK8R,iBAAiB7R,GACtB,OAAOD,KAAK8R,iBAAiB7R,GAE7B,IAAMuU,EAAkC,MAAnBD,EAA0BA,IAAoB,GAC/DE,OAAW,EAETC,EAAiBtV,EAAkB6H,WAAc7H,EAAkB8H,SACnEyN,EAA8B,MAAZD,EAAmB,KAAOA,EAASzU,EAAKL,eAG5D6U,EAFmB,MAAnBE,EAEcC,SAAAA,SAAA,GAAMJ,GAAyBG,GAG/BC,SAAA,GAAMJ,GAIxB,OAFAxU,KAAK8R,iBAAiB7R,GAAQwU,GAvU1CtT,EA6UAA,EA7Ua9B,EAAA8B,SAAQA,EAgVHqR,EAAAqC,YAAc,cACdrC,EAAAsC,iBAAmB,mBACnBtC,EAAAuC,uBAAyB,yBACzBvC,EAAAwC,wBAA0B,0BAJ5CxC,EAKAA,EALanT,EAAAmT,qBAAoBA,EAQfC,EAAAwC,SAAW,WACXxC,EAAAyC,mBAAqB,qBAFvCzC,EAGAA,EAHapT,EAAAoT,iBAAgBA,EAxVjC,CAAUrT,UAAAA,WAAS,ICTnB,SAAUA,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAEAC,EAAAC,GAAAD,EAA+C/V,EAAAmQ,oBAAA8F,UAAAD,EAAAD,GAK7BC,EAAAE,WAAd,SAAyBC,GAErB,IAAMC,EAAsB9U,EAAE6U,GACxBE,EAAoB/U,EAAE,+CAEtBgV,EAAc,GACdC,EAA2BH,EAC5BhM,KAAK,MACLoM,SAAS,wCACTC,QACA5R,QAGL,OAA0B,IAAtB0R,EACO,MAIXH,EACKhM,KAAK,kBACLoM,SAAS,UACT5R,KAAK,SAACC,EAAO6R,GACVJ,EAAOzR,EAAM8R,YAAcrV,EAAEoV,GAAM7L,SAG3CuL,EAAYhM,KAAK,MAAMxF,KAAK,SAACC,EAAO+R,GAChC,IACUC,EACFC,EAFI,EAARjS,IACMgS,EAAWvV,EAAE,2DAGnBA,EAAEsV,GACGJ,SAAS,MACT5R,KAAK,SAACmS,EAAWL,GACVK,IAAcR,EACdO,EAASxV,EAAE,oDAAAoB,OAAoDpB,EAAEoV,GAAM7L,OAAM,mBAGvEmM,EAAS1V,EAAE,WAAAoB,OAAW4T,EAAOS,EAAUJ,YAAW,eACxDrV,EAAEoV,GACGO,QACApJ,SAASmJ,GACdA,EAAO5M,KAAK,QAAQ8I,SAAS,uBAC7B8D,EAAOnJ,SAASgJ,MAId,MAAVC,GACAA,EAAOjJ,SAASwI,GAEpBQ,EAAShJ,SAASwI,MAInBA,IAGJL,EAAA9H,UAAA8G,QAAP,WACI,MAAO,cAGJgB,EAAA9H,UAAA+G,mBAAP,WACI,OAAOtU,KAAKwQ,iBAAiB8D,mBAA+C,aACxEtU,KAAKuW,4BAGNlB,EAAA9H,UAAAgJ,0BAAP,WACI,MAAO,CACHC,WAAW,EACXC,YAAa,OAIdpB,EAAA9H,UAAAmJ,gCAAP,SAAuCC,GACnC3W,KAAK4W,wBAA0BjW,EAAEyR,IAAIpS,KAAK4W,wBAAyB,SAACC,GAChE,OAAIA,IAASF,EAEF,KAEAE,IAG6B,IAAxC7W,KAAK4W,wBAAwB7V,QAE7Bf,KAAK8W,2BAILzB,EAAA9H,UAAAiJ,UAAR,WACI,OAAOxW,KAAKwQ,iBAAiByB,qBAAuBjS,KAAKsU,qBAAqBkC,WAG3EnB,EAAA9H,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAAAgC,EAAA5R,KAEI,QAF2C,IAAA4P,IAAAA,GAAA,GAEvCA,EAAe,CAEf,IAAMmH,EAAa/W,KAAKgX,gBAAgBpX,cAGlCyQ,EAAyCrQ,KAAKwQ,iBAAiBiD,2BAA2BsD,GAEhG,GAAI/W,KAAKwW,YAAa,CAClB,OAAQO,GACJ,IAAK,SACDpW,EAAE,2DAA2DyE,IAAI,UAAW,QAC5E,MACJ,IAAK,SACDzE,EAAE,2DAA2DyE,IAAI,UAAW,QAC5E,MACJ,IAAK,UACDzE,EAAE,2DAA2DyE,IAAI,UAAW,QAkEpF,GA7DmB,YAAf2R,IAGApW,EAAE,wBAAAoB,OAAwBgV,EAAU,MAAK9S,KAAK,SAACC,EAAe+S,GACpDC,EAAwBvW,EAAEsW,GAAYE,KAAK,mBAAApV,OAAmBgV,IACvC,MAAzBG,IAEAtF,EAAKpB,iBAAiBuB,iCAAkC,EACxDpR,EAAEsD,KAAKiT,EAAsB1P,MAAM,KAAM,SAACgM,EAAWrR,GAEjDyP,EAAKgF,wBAAwB/M,KACzBxK,EAAAe,QAAQoC,eACJL,EACA,mBAAAJ,OAAmBgV,GACnB,oBACA,SAACrU,GACGkP,EAAK8E,gCAAgChU,WAO7D/B,EAAE,sCAAsCsD,KAAK,SAACC,EAAekT,GACzD,IAAMC,EAAkB1W,EAAEyW,GACpBE,EAAuBD,EAAgBpW,KAAK,4BAC9B,MAAhBqW,IAA4E,IAApDA,EAAa1X,cAAcG,QAAQgX,KACrD5U,EAAcxB,EAAE4W,KAAKF,EAAgBG,QAC3C5F,EAAKpB,iBAAiBuB,iCAAkC,EAExDH,EAAKgF,wBAAwB/M,KACzBxK,EAAAe,QAAQoC,eAAeL,EACnB,mBAAAJ,OAAmBgV,GACnB,oBACA,SAACrU,GACGkP,EAAK8E,gCAAgChU,SAOzD/B,EAAE,yCAAyCsD,KAAK,SAACC,EAAekT,GAC5D,IAAMC,EAAkB1W,EAAEyW,GACpBE,EAAuBD,EAAgBpW,KAAK,4BAC9B,MAAhBqW,IAA4E,IAApDA,EAAa1X,cAAcG,QAAQgX,KACrD5U,EAAcxB,EAAE4W,KAAKF,EAAgBG,QAC3C5F,EAAKpB,iBAAiBuB,iCAAkC,EAExDH,EAAKgF,wBAAwB/M,KACzBxK,EAAAe,QAAQgD,WAAWjB,EACf,mBAAAJ,OAAmBgV,GACnB,oBACA,SAACzT,GACGsO,EAAK8E,gCAAgCpT,UAO3B,WAA9B+M,EAAcU,aAA0D,WAA9BV,EAAcU,YAA0B,CAClF,OAAQV,EAAcU,aAClB,IAAK,SACDV,EAAcW,aAAanH,KAAK,IAAIxK,EAAA8R,sBAAsB,6BAChC9R,EAAAkQ,0BAA0BkI,QACpDpH,EAAcW,aAAanH,KAAK,IAAIxK,EAAA8R,sBAAsB,uGAEb9R,EAAAkQ,0BAA0BmI,SACvE,MACJ,IAAK,SACDrH,EAAcW,aAAanH,KAAK,IAAIxK,EAAA8R,sBAAsB,sPAMb9R,EAAAkQ,0BAA0BmI,SACvErH,EAAcW,aAAanH,KACvB,IAAIxK,EAAA8R,sBAAsB,iBAAkB9R,EAAAkQ,0BAA0BkI,QAMlFpH,EAAcW,aAAanH,KAAK,IAAIxK,EAAA8R,sBAAsB,+DACR9R,EAAAkQ,0BAA0BmI,SAC5ErH,EAAcW,aAAanH,KAAK,IAAIxK,EAAA8R,sBAAsB,4DACpB9R,EAAAkQ,0BAA0BkI,QAGhEpH,EAAca,cAAcrH,KAAK,IAAIxK,EAAAiS,gBAAgB,2CAK7DtR,KAAK2X,eAAiBtH,EAEsB,IAAxCrQ,KAAK4W,wBAAwB7V,QAE7Bf,KAAK8W,4BAOVzB,EAAA9H,UAAAgD,yBAAP,WAGI,OAFwB,KAKrB8E,EAAA9H,UAAA+C,6BAAP,SAAoCD,GAApC,IAAAuB,EAAA5R,KAEIW,EAAEsD,KAAKoM,EAAcW,aAAc,SAACwC,EAAWoE,GAC3ChG,EAAKiG,iBAAiBD,KAI1BjX,EAAEsD,KAAKoM,EAAca,cAAe,SAAC4G,EAAqBC,GACtDpX,EAAEoX,EAAgBpU,UAAUM,KAAK,SAAC+T,EAAuBxC,GACrD,IAAMyC,EAAW5C,EAA0BE,WAAWC,GACtC,MAAZyC,IACoC,MAAhCF,EAAgBxG,aAChBwG,EAAgBxG,aAAa5Q,EAAE6U,GAAQyC,GAEvCtX,EAAE6U,GAAO0C,YAAYD,QAOrCtX,EAAE,wBACGwX,IAAI,oBACJC,GAAG,mBAAoB,SAACC,GACf5B,EAAsB9V,EAAE0X,EAAYC,eAAerX,KAAK,qBAC1C,KAAhBwV,IACA7E,EAAK2G,qBAAqB9B,GAC1BpX,EAAAe,QAAQqB,YAIpBd,EAAE,wBACG6X,IAAInI,EAAcU,aAClBoH,IAAI,qBACJC,GAAG,oBACA,SAACC,GACSI,EAAgB9X,EAAE0X,EAAYC,eAAeE,MAC7B,KAAlBC,IACA7G,EAAK2G,qBAAqBE,GAC1BpZ,EAAAe,QAAQqB,aAKrB4T,EAAA9H,UAAAsC,UAAP,SAAiBC,GACb,GAAIA,EACA,OAAQA,EAAQ3B,aACZ,KAAK9O,EAAAmT,qBAAqBuC,uBACtB/U,KAAK+U,yBACL,MACJ,KAAK1V,EAAAmT,qBAAqBwC,wBACtBrU,EAAE,2BAA2ByE,IAAI,UAAW,YAQlDiQ,EAAA9H,UAAAwH,uBAAV,WAAA,IAIc2D,EACAC,EALd/G,EAAA5R,KAEqD,IAA7CW,EAAE,gCAAgCI,SAG5B4X,GADAD,EAAiB/X,EAAE,iFACa8I,KAAK,sBAAsBqM,QAEjEnV,EAAE,oEACGuM,SAASyL,GACdhY,EAAE,2DACGuM,SAASyL,GACdhY,EAAE,yDACGuM,SAASyL,GACdhY,EAAE,8DACGuM,SAASyL,GACdhY,EAAE,iEACGuM,SAASyL,GACdhY,EAAE,yGACGuM,SAASyL,GAEVhY,EAAE,uBAAuBI,QAEzB4X,EAAe9C,SAAS,0BAA0BzQ,IAAI,UAAW,UAGrEuT,EAAe9C,SAAS,KACnBsC,IAAI,oBACJC,GAAG,mBAAoB,SAACC,GAErB,QAAuB,IADNzW,OAAOkD,OAGpB,OAAQnE,EAAE0X,EAAYC,eAAenB,KAAK,OACtC,IAAK,iBACD9X,EAAAgP,UAAUiB,0BACNjQ,EAAAoT,iBAAiBwC,SACjB,YAEJ,MACJ,IAAK,aACD5V,EAAAgP,UAAUiB,0BACNjQ,EAAAoT,iBAAiBwC,SACjB,QAEJ,MACJ,IAAK,cACL,IAAK,YACL,IAAK,eACD,IAAI2D,EAAiBjY,EAAE0X,EAAYC,eAAenB,KAAK,MACF,OAAjDyB,EAAOtO,UAAU,EArVrB,KAsVIsO,EAASA,EAAOtO,UAtVpB,IAwVAjL,EAAAgP,UAAUiB,0BAA0BjQ,EAAAoT,iBAAiByC,mBAAoB0D,GACzE,MACJ,IAAK,wBAEDhH,EAAKpB,iBAAiBoD,qBAClB,IAAIvU,EAAA6O,cAAc7O,EAAAmT,qBAAqBsC,iBAAkB,UAOjF4D,EAAOG,UAAUlY,EAAE,UAEgC,IAA/CA,EAAE,QAAQM,KAAK,8BAEfjB,KAAKwQ,iBAAiB2C,iBACtBxS,EAAE,QAAQM,KAAK,2BAA4B,SAO7CoU,EAAA9H,UAAAsK,iBAAV,SAA2BD,GACvB,IAAMkB,EACClB,EAAYvG,OAAShS,EAAAkQ,0BAA0BmI,OAAU,sBAAwB,MACxF/W,EAAEiX,EAAYxG,WAAWmB,SAASuG,IAG9BzD,EAAA9H,UAAAyJ,cAAR,WAEI,IAAKhX,KAAKwW,YAEN,MAAO,UAGX,IAAMuC,EAA4B/Y,KAAKgZ,uBACvC,OAAyB,MAArBD,EACOA,EAINE,UAAkBC,MAEfD,UAAUE,GAAG,qEAENF,UAAUE,GAAG,qEADb,SAIA,UAGiD,IAArD1Z,UAAUC,UAAUK,QAAQ,oBAE5B,SAGJ,WAOHsV,EAAA9H,UAAAyL,qBAAR,WAEI,IAAM/R,EAAwB5H,EAAAe,QAAQ4G,oBACtC,GAA0C,oBAA/BC,EAAU8R,mBACiB,MAA/B9R,EAAU8R,kBAEb,OAAO9R,EAAU8R,kBAGrB,GAA6C,MAAzC/Y,KAAKsU,qBAAqBmC,YAC1B,OAAOzW,KAAKsU,qBAAqBmC,YAG/BpV,EAAWhC,EAAAe,QAAQgB,kBACzB,GAAsB,yBAAlBC,EAAS+X,KACT,MAAO,UACJ,GAAsB,wBAAlB/X,EAAS+X,KAChB,MAAO,SACJ,GAAsB,wBAAlB/X,EAAS+X,KAChB,MAAO,SAMLC,EACFhY,EAASiY,SAAShP,UAAU,EAAGjJ,EAASiY,SAASrN,YAAY,MAC3DsN,EACA,wBAAAxX,OAAwBsX,EAAYpX,QAAQ,mBAAoB,KACtE,OAAiF,MAA7EjC,KAAKwQ,iBAAiBkC,kBAAkB1E,aAAauL,GAC9CvZ,KAAKwQ,iBAAiBkC,kBAAkB1E,aAAauL,GAGzD,MAQJlE,EAAA9H,UAAAgL,qBAAP,SAA4B9B,GACxB,IAAMpV,EAAWhC,EAAAe,QAAQgB,kBACnBiY,EAAsBhY,EAASiY,SAAShP,UAAU,EAAGjJ,EAASiY,SAASrN,YAAY,MACnFsN,EACA,wBAAAxX,OAAwBsX,EAAYpX,QAAQ,mBAAoB,KACtEjC,KAAKwQ,iBAAiBkC,kBAAkB/M,aAAa4T,EAAqB9C,IAMtEpB,EAAA9H,UAAAuJ,wBAAR,WAEI,IAAM7P,EAAwB5H,EAAAe,QAAQ4G,oBAEtChH,KAAKwQ,iBAAiBF,6BAA6BtQ,KAAK2X,gBAEhB,YAApC3X,KAAK2X,eAAe5G,cACf/Q,KAAKwQ,iBAAiB0B,mBACS,WAA7BjL,EAAUiM,gBACqC,IAA/CvS,EAAE,kCAAkCI,OAQvCJ,EAAE,QAAQM,KAAK,4BAA4B,GAJ3CjB,KAAKwQ,iBAAiB2C,kBAQ9BxS,EAAE,QAAQ4R,SAAS,gBAAAxQ,OAAgB/B,KAAK2X,eAAe5G,eAG/DsE,GAneA,SAAAA,IAAA,IAAAzD,EAAA,OAAAwD,GAAAA,EAAAoE,MAAAxZ,KAAAyZ,YAAAzZ,K,OAEY4R,EAAAgF,wBAAoC,GACpChF,EAAA+F,eAA0C,K,EAHzCxC,EAAAE,0BAAyBA,EA0etC,IAAAqE,GAEWA,EAAAnM,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAI6E,EAA0B7E,IAG7CkJ,GAPA,SAAAA,KAAavE,EAAAuE,iCAAgCA,EA9erB,EAARra,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAwfnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASuE,kCCzfnC,SAAUta,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAAuE,GAAAvE,EAA+C/V,EAAAmQ,oBAAA8F,UAAAqE,EAAAvE,GAKpCuE,EAAApM,UAAA8G,QAAP,WACI,MAAO,gBAKJsF,EAAApM,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAGcgK,EAHdhI,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,GAET,EAA9BjP,EAAE,mBAAmBI,SACf6Y,EAAgB,sBAChBC,EAAgB,sBAEtBzG,WAAW,WAAM,OAAAxB,EAAKkI,WAAW,GAEjCnZ,EAAEiB,QACGuW,IAAIyB,GACJxB,GAAGwB,EAAe,WAAM,OAAAhI,EAAKkI,YAC7B3B,IAAI0B,GACJzB,GAAGyB,EAAe,WAAM,OAAAjI,EAAKkI,cAMnCH,EAAApM,UAAA+C,6BAAP,SAAoCD,GAApC,IAAAuB,EAAA5R,KACIoT,WAAW,WAAM,OAAAxB,EAAKkI,WAAW,IAG7BH,EAAApM,UAAAuM,QAAR,WACI,IAAMC,EAAU/Z,KAAKga,yBAEfC,EAActZ,EAAE,mBAEhBwH,EAAYxH,EAAEiB,QAAQuG,YACtB+R,EAAgCH,EAAZ5R,EAEtBnI,KAAKma,WAAaD,IAClBla,KAAKma,SAAWD,EAChBD,EAAYG,YAAY,aAAcF,GAElCla,KAAKma,UACLF,EAAY7U,IAAI,MAAO,MAI1BpF,KAAKma,WACAE,EAAWN,EAAU5R,EAC3BxH,EAAE,mBAAmByE,IAAI,MAAkB,EAAXiV,EAAe,GAAAtY,OAAGsY,EAAQ,MAAO,MAIjEV,EAAApM,UAAAyM,uBAAR,WACI,IAAMM,EAAsB3Z,EAAE,4BAA6BX,KAAK2P,cAAc4K,WAC9E,GAA2B,MAAvBD,EACA,OAAOA,EAAoBvW,KAIvC4V,GA/DA,SAAAA,IAAA,IAAA/H,EAAA,OAAAwD,GAAAA,EAAAoE,MAAAxZ,KAAAyZ,YAAAzZ,K,OAEY4R,EAAAuI,UAAW,E,EAFVhF,EAAAwE,0BAAyBA,EAiEtC,IAAAa,GAEWA,EAAAjN,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAImJ,EAA0BnJ,IAG7CgK,GAPA,SAAAA,KAAarF,EAAAqF,iCAAgCA,EAnErB,EAARnb,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA8EnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASqF,kCC/EnC,SAAUpb,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAAqF,GAAArF,EAA0C/V,EAAAmQ,oBAAA8F,UAAAmF,EAAArF,GAI/BqF,EAAAlN,UAAA8G,QAAP,WACI,MAAO,SAGHoG,EAAAlN,UAAAmN,mBAAR,WACI,MAAO,CACHC,mBAAoB,KACpBC,yBAAyB,IAIzBH,EAAAlN,UAAA+G,mBAAR,WACI,OAAOtU,KAAKwQ,iBAAiB8D,mBAA0C,QAAStU,KAAK0a,qBAIlFD,EAAAlN,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAAAgC,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,GAE3C5P,KAAK6a,cAAgBlL,EAErB,IAAMzI,EAAWlH,KAAKsU,qBAElBpN,EAAS0T,yBACTja,EAAE,kBAAmBgP,GAChBwI,IAAI,gBACJC,GAAG,eACJ,SAACC,GACG,IAAMyC,EAAYna,EAAE0X,EAAYC,eAAerX,KAAK,cAC9CwB,EAAgB9B,EAAE0X,EAAYC,eAAeE,MAC7CuC,EAAcpa,EAAE,iBAAAoB,OAAiBU,EAAa,MAAM9B,EAAE0X,EAAYC,gBAAgBrX,KAAK,gBAC7F2Q,EAAKoJ,gBAAgBF,EAAWC,EAAatY,GAAe,KAIxE9B,EAAE,kBAAmBgP,GAAc1L,KAAK,SAACC,EAAe1D,GACpD,IAIQya,EAJFC,EAAWva,EAAEH,GACbsa,EAAYI,EAASja,KAAK,cAEf,MAAb6Z,IAG0B,OAFtBG,EAA6BrJ,EAAKpB,iBAAiBkC,kBAClD1E,aAAa,WAAAjM,OAAW+Y,OAEzBG,EAAqB/T,EAASyT,oBAER,MAAtBM,GAEyB,GADnBF,EAAcpa,EAAE,6BAAAoB,OAA6BkZ,EAAkB,MAAMC,IAC3Dna,SACZma,EAAS1C,IAAIuC,EAAYvC,OACzB5G,EAAKoJ,gBAAgBF,EAAWG,EAAoBF,EAAYvC,OAAiB,OAM5FtR,EAAS0T,wBAGVja,EAAE,gCAAgCwE,OAFlCxE,EAAE,gCAAgC0S,QAOlCoH,EAAAlN,UAAAyN,gBAAR,SAAwBF,EAAmBK,EAAoB1Y,EAAuB2Y,GAEtDza,EAAE,yBAAAoB,OAAyB+Y,EAAS,OAC5CO,SAEE,SAAlB5Y,GACA9B,EAAE,QAAQoH,OAAO,gCAAAhG,OAAgCU,EAAa,uCAAAV,OAAsC+Y,EAAS,SAGjHna,EAAE,yBAA0BX,KAAK6a,eAAe5W,KAAK,SAACC,EAAe1D,GAC3D8a,EAAc3a,EAAEH,GAASS,KAAK,gBACpCN,EAAE,QAAQyZ,YAAY,WAAArY,OAAW+Y,EAAS,KAAA/Y,OAAIuZ,GAAeA,IAAgBH,KAE7EC,GAEApb,KAAKwQ,iBAAiBkC,kBAAkB/M,aAAa,WAAA5D,OAAW+Y,GAAaK,IAIzFV,GArFA,SAAAA,I,+CAAatF,EAAAsF,qBAAoBA,EA4FjC,IAAAc,GAEWA,EAAAhO,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAIiK,EAAqBjK,IAGxC+K,GAPA,SAAAA,KAAapG,EAAAoG,4BAA2BA,EA9FhB,EAARlc,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAyGnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASoG,6BC1GnC,SAAUnc,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAAoG,GAAApG,EAAkD/V,EAAAmQ,oBAAA8F,UAAAkG,EAAApG,GAKvCoG,EAAAjO,UAAA8G,QAAP,WACI,MAAO,iBAGHmH,EAAAjO,UAAAmN,mBAAR,WACI,MAAO,CACHe,0BAA0B,EAC1BC,wCAAwC,IAIxCF,EAAAjO,UAAA+G,mBAAR,WACI,OAAOtU,KAAKwQ,iBAAiB8D,mBAAkD,gBAAiBtU,KAAK0a,qBAGlGc,EAAAjO,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAAAgC,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,GAEvCA,IACA5P,KAAK6a,cAAgBlL,GAGnBzI,EAAWlH,KAAKsU,qBACjBpN,EAASuU,2BAKTpc,EAAAe,QAAQ+F,kBAAqB9G,EAAAe,QAAQmI,cAIZ,EAFL5H,EAAE,kBAAmBX,KAAK6a,eAE9B9Z,SACbqS,WAAW,WACPxB,EAAK+J,2BAGLzU,EAASwU,wCACT/a,EAAEiB,QAAQuW,IAAI,wBACTC,GAAG,uBACA,WACIxG,EAAK+J,8BASzBH,EAAAjO,UAAAoO,uBAAR,WAEI,IAAMC,EAAU,uBACVC,EAAelb,EAAE,kBAAmBX,KAAK6a,eACzCiB,EAAcD,EAAa7a,IAAI,GAErC,GAA0C,MAAtChB,KAAK+b,aAAaC,iBAA0B,CAE5C,KAAIF,EAAYG,YAAcjc,KAAK+b,aAAaC,kBAI5C,OAHArb,EAAE,IAAAoB,OAAI6Z,IAAWP,SACjBrb,KAAK+b,aAAaC,iBAAmB,KAMzCF,EAAYG,YAAcH,EAAYI,aACA,EAAlCvb,EAAE,QAASkb,GAAc9a,SAE7Bf,KAAK+b,aAAaC,iBAAmBF,EAAYG,YACnB5c,EAAAe,QAAQyH,yBAAyB+T,GACzCpE,KAAK,iCAKvCgE,GAhFA,SAAAA,IAAA,IAAA5J,EAAA,OAAAwD,GAAAA,EAAAoE,MAAAxZ,KAAAyZ,YAAAzZ,K,OAGY4R,EAAAmK,aAA6C,CAAEC,iBAAkB,M,EAHhE7G,EAAAqG,6BAA4BA,EAuFzC,IAAAW,GAEWA,EAAA5O,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAIgL,EAA6BhL,IAGhD2L,GAPA,SAAAA,KAAahH,EAAAgH,oCAAmCA,EAzFxB,EAAR9c,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAoGnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASgH,qCCrGnC,SAAU/c,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAAgH,GAAAhH,EAA6C/V,EAAAmQ,oBAAA8F,UAAA8G,EAAAhH,GAIjCgH,EAAA7O,UAAA8O,kCAAR,SAA0CC,GACtC,GAAItc,KAAKuc,eAAeD,EAAME,gBAC1B,OAAOxc,KAAKuc,eAAeD,EAAME,gBAOrC,IAJA,IAEIC,EAEK9V,EAAI,EAAGA,EAJU,IAIaA,GAHX,EAGqC,CAC7D,IAAM+V,EAAgBJ,EAAMhG,QAAQqG,QAAQhW,GAC5C,GAAIiW,UAAUC,WAAWH,EAAe,QAAS,CAC7CD,EAAgBC,EAChB,OAUR,OANqB,MAAjBD,IACAA,EAAgBG,UAAU,SAG9B5c,KAAKuc,eAAeD,EAAME,gBAAkBC,GAKzCL,EAAA7O,UAAA8G,QAAP,WACI,MAAO,YAGH+H,EAAA7O,UAAAmN,mBAAR,WACI,MAAO,CACHlE,WAAW,EACXsG,kBAAkB,IAIlBV,EAAA7O,UAAA+G,mBAAR,WACI,OAAOtU,KAAKwQ,iBAAiB8D,mBAA6C,WAAYtU,KAAK0a,qBAGxF0B,EAAA7O,UAAAkC,mBAAP,WAAA,IAUsBsN,EAVtBnL,EAAA5R,KAEUkH,EAAWlH,KAAKsU,qBAElBpN,EAASsP,YACLtP,EAAS4V,iBACTnc,EAAE,QAAQ4R,SAAS,UAEf3Q,OAAOob,cAEDD,EAAqB,SAACE,EAA2BC,QAAA,IAAAA,IAAAA,GAAA,GAC/CD,EAAUE,SACVxc,EAAE,QAAQ4R,SAAS,UACd2K,GACDtL,EAAKwL,wBAGLzc,EAAE,QAAQE,SAAS,YACnB+Q,EAAKyL,0BACL1c,EAAE,QAAQ2c,YAAY,aAV5BC,EAAkB3b,OAAOob,WAAW,iCAcN,GAEpCO,EAAgBC,YAAYT,MAQrCX,EAAA7O,UAAAmC,kBAAP,SAAyBC,EAAsBC,GACvCjP,EAAE,QAAQE,SAAS,WACnBb,KAAKod,wBAILhB,EAAA7O,UAAA6P,qBAAR,WAAA,IAAAxL,EAAA5R,KAC0BW,EAAE,eACVsD,KAAK,SAACuP,EAAGhT,GACnB,IACUid,EACAnB,EAFN9b,EAAQkd,MAAMpB,QACRmB,EAAgBb,UAAUpc,EAAQkd,MAAMpB,QACxCA,EAAQ1K,EAAKyK,kCAAkCoB,IAC3CjB,iBAAmBiB,EAAcjB,iBACvC7b,EAAEH,GAASS,KAAK,mBAAoBT,EAAQkd,MAAMpB,OAClD9b,EAAQkd,MAAMpB,MAAQA,EAAME,oBAMpCJ,EAAA7O,UAAA8P,wBAAR,WAC0B1c,EAAE,eACVsD,KAAK,SAACuP,EAAGhT,GACnB,IAAM0a,EAAWva,EAAEH,GACf0a,EAASja,KAAK,sBACdT,EAAQkd,MAAMpB,MAAQpB,EAASja,KAAK,oBACpCia,EAASyC,WAAW,wBAKpCvB,GA7GA,SAAAA,IAAA,IAAAxK,EAAA,OAAAwD,GAAAA,EAAAoE,MAAAxZ,KAAAyZ,YAAAzZ,K,OAEqB4R,EAAA2K,eAAqD,G,EAF7DpH,EAAAiH,wBAAuBA,EAoHpC,IAAAwB,GAEWA,EAAArQ,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAI4L,EAAwB5L,IAG3CoN,GAPA,SAAAA,KAAazI,EAAAyI,+BAA8BA,EAtHnB,EAARve,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAiInBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASyI,gCClInC,SAAUxe,GAAU,IAAAC,EAEVwe,EA2FF,SAAAC,KA7FoB3I,GAAR9V,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,IAE1B0I,EAAkB,CACpB,CAACE,KAAO,IAAKC,QAAU,mNACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,yBACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,mBACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,6DACvB,CAACD,KAAO,IAAKC,QAAU,+EACvB,CAACD,KAAO,IAAKC,QAAU,2FACvB,CAACD,KAAO,KAAKC,QAAU,mBACvB,CAACD,KAAO,KAAKC,QAAU,mBACvB,CAACD,KAAO,IAAKC,QAAU,2LACvB,CAACD,KAAO,IAAKC,QAAU,2CACvB,CAACD,KAAO,IAAKC,QAAU,iGACvB,CAACD,KAAO,IAAKC,QAAU,2FACvB,CAACD,KAAO,IAAKC,QAAU,+HACvB,CAACD,KAAO,IAAKC,QAAU,qCACvB,CAACD,KAAO,IAAKC,QAAU,2FACvB,CAACD,KAAO,IAAKC,QAAU,mHACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,uDACvB,CAACD,KAAO,IAAKC,QAAU,uGACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,yQACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,mEACvB,CAACD,KAAO,IAAKC,QAAU,2CACvB,CAACD,KAAO,IAAKC,QAAU,6GACvB,CAACD,KAAO,IAAKC,QAAU,6GACvB,CAACD,KAAO,IAAKC,QAAU,iGACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,mNACvB,CAACD,KAAO,IAAKC,QAAU,uDACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,mEACvB,CAACD,KAAO,IAAKC,QAAU,qCACvB,CAACD,KAAO,IAAKC,QAAU,iGACvB,CAACD,KAAO,IAAKC,QAAU,2FACvB,CAACD,KAAO,IAAKC,QAAU,yNACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,yBACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,mBACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,6DACvB,CAACD,KAAO,IAAKC,QAAU,qFACvB,CAACD,KAAO,IAAKC,QAAU,2FACvB,CAACD,KAAO,KAAKC,QAAU,mBACvB,CAACD,KAAO,IAAKC,QAAU,iMACvB,CAACD,KAAO,IAAKC,QAAU,2CACvB,CAACD,KAAO,IAAKC,QAAU,iGACvB,CAACD,KAAO,IAAKC,QAAU,iGACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,+HACvB,CAACD,KAAO,IAAKC,QAAU,2CACvB,CAACD,KAAO,IAAKC,QAAU,2FACvB,CAACD,KAAO,IAAKC,QAAU,yHACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,uDACvB,CAACD,KAAO,IAAKC,QAAU,6GACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAKC,QAAU,yQACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAIC,QAAU,mEACtB,CAACD,KAAO,IAAIC,QAAU,2CACtB,CAACD,KAAO,IAAIC,QAAU,6GACtB,CAACD,KAAO,IAAIC,QAAU,mHACtB,CAACD,KAAO,IAAIC,QAAU,uGACtB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAIC,QAAU,mNACtB,CAACD,KAAO,IAAIC,QAAU,uDACtB,CAACD,KAAO,KAAKC,QAAU,aACvB,CAACD,KAAO,IAAIC,QAAU,yEACtB,CAACD,KAAO,IAAIC,QAAU,qCACtB,CAACD,KAAO,IAAIC,QAAU,uGACtB,CAACD,KAAO,IAAIC,QAAU,4FAWfF,EAAAvQ,UAAA0Q,iBAAP,SAAyBC,GACrB,IAAI,IAAIvX,EAAE,EAAGA,EAAEkX,EAAgB9c,OAAQ4F,IACnCuX,EAAMA,EAAIjc,QAAQ4b,EAAgBlX,GAAGqX,QAASH,EAAgBlX,GAAGoX,MAGrE,OAAOG,GAXfJ,EAaAA,EAba3I,EAAA2I,iBAAgBA,EA3FjC,CAAU1e,UAAAA,WAAS,I,wfCAnB,SAAUA,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAA+I,GAAA/I,EAAqD/V,EAAAmQ,oBAAA8F,UAAA6I,EAAA/I,GAE1C+I,EAAA5Q,UAAA8G,QAAP,WACI,MAAO,qBAGJ8J,EAAA5Q,UAAAkC,mBAAP,WAG+C,IADnB,GAAA1N,OAAG1C,EAAAe,QAAQgB,kBAAkBgB,KAAI,KACrCrC,QAAQ,YACxBY,EAAE,QAAQ4R,SAAS,qBAK/B4L,GAfA,SAAAA,I,+CAAahJ,EAAAgJ,gCAA+BA,EAiB5C,IAAAC,GAEWA,EAAA7Q,UAAA8E,eAAP,SAAsB7B,GAClB,IAAMiB,EAAkB,GAAA1P,OAAG1C,EAAAe,QAAQgB,kBAAkBgB,KAAI,KACzD,OAAiD,IAA7CqP,EAAgB1R,QAAQ,kBAAiE,IAAvC0R,EAAgB1R,QAAQ,WACnE,IAAIoe,EAAgC3N,GAGxC,MAGf4N,GAXA,SAAAA,KAAajJ,EAAAiJ,uCAAsCA,EAnB3B,EAAR/e,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAkCnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASiJ,wCCnCnC,SAAUhf,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAAiJ,GAAAjJ,EAA6C/V,EAAAmQ,oBAAA8F,UAAA+I,EAAAjJ,GAElCiJ,EAAA9Q,UAAA8G,QAAP,WACI,MAAO,aAGHgK,EAAA9Q,UAAA+Q,YAAR,WACI,OAAOte,KAAKwQ,iBAAiB8D,mBAAmB,WAAYtU,KAAK0a,qBAG7D2D,EAAA9Q,UAAAmN,mBAAR,WACI,MAAO,CACH6D,aAAc,sBACdC,UAAW,gCAKZH,EAAA9Q,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IA6BkB6O,EA7BlB7M,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,IAEZ,EAA3BjP,EAAE,gBAAgBI,SAAe2d,OAAOC,kBAEpCtf,EAAAe,QAAQ+F,kBAA4C,oBAAfyY,aAAiChd,OAA4B,eAE5Fid,EAAU,oBAGhBlP,EACKwI,IAAI0G,EAAS,gBACbzG,GAAGyG,EACA,eAEA,SAACxG,GACG,IAAMyG,EACFzf,EAAAwJ,WAAWS,2BACP+O,EAAYC,eACpB,IAEK1W,OAAemd,cAAcC,QAAQ,OAAQF,GAC9ClN,EAAKqN,QAAQ5G,EAAYC,cAA8B1G,EAAK0M,cAAcC,cAC5E,MAAOvc,GACL4P,EAAKqN,QAAQ5G,EAAYC,cAA8B1G,EAAK0M,cAAcE,WAE9Enf,EAAAe,QAAQiC,gBAAgBgW,QAI9BoG,EAAY,IAAIG,YAAY,eAC9B,CACI1U,KAAM,SAACgV,GAAyB,OAAA7f,EAAAwJ,WAAWS,2BAA2B4V,OAGpE9G,GAAG,UACT,SAAC9V,GACGA,EAAE6c,iBACFvN,EAAKqN,QAAQ3c,EAAE4c,QAAwBtN,EAAK0M,cAAcC,gBAGlEE,EAAUrG,GAAG,QACT,SAAC9V,GACGsP,EAAKqN,QAAQ3c,EAAE4c,QAAwBtN,EAAK0M,cAAcE,gBAMtEH,EAAA9Q,UAAA0R,QAAR,SAAgBG,EAAqBtP,GACjC,IAkBMuP,EAlBO1e,EAAEye,GACVE,KAAK,CACFzc,GAAI,wBACJ0c,QAAS,CACLrV,KAAM4F,GAEVyK,SAAU,CACNiF,GAAI,eACJC,GAAI,eAERta,KAAM,CACFwO,MAAO,SAEXN,KAAM,CACFqM,OAAO,EACP/L,OAAO,KAGF2L,KAAK,OACtBD,EAAIM,QAAO,GAEXvM,WAAW,WACPiM,EAAIM,QAAO,IAFD,MAMXtB,EAAA9Q,UAAA6C,gCAAP,SAAuCC,GAC3BA,EAAcU,YAQtBV,EAAcW,aAAanH,KAAK,IAAIxK,EAAA8R,sBAAsB,eAAgB9R,EAAAkQ,0BAA0BmI,UAG5G2G,GAzGA,SAAAA,I,+CAAalJ,EAAAkJ,wBAAuBA,EAgHpC,IAAAuB,GAEWA,EAAArS,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAI6N,EAAwB7N,IAG3CoP,GAPA,SAAAA,KAAazK,EAAAyK,+BAA8BA,EAlHnB,EAARvgB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA6HnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASyK,gCC9HnC,SAAUxgB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAKAC,EALMyK,EACY,EADZA,EAEe,EAGrBC,GAAA1K,EAAkD/V,EAAAmQ,oBAAA8F,UAAAwK,EAAA1K,GAW/B0K,EAAAC,iBAAf,SAAgCC,GAE5B,IAAIC,EACAC,EACAC,EAEJ,EAAG,CACCA,EAAa,EACb,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAWK,WAAWtf,OAAQqf,IAE9CF,GADAD,EAAOD,EAAWK,WAAWD,IACbE,gBAEZL,EAAKM,WAAaV,GACfK,EAASK,WAAaV,IAEzBI,EAAKO,UAAYN,EAASM,UAAYP,EAAKO,UAC3CR,EAAWS,YAAYP,GACvBC,WAGU,EAAbA,GAGT,IAASC,EAAI,EAAGA,EAAIJ,EAAWK,WAAWtf,OAAQqf,IAC9CN,EAA6BC,iBAAiBC,EAAWK,WAAWD,KAKrEN,EAAAvS,UAAA8G,QAAP,WACI,MAAO,kBAGJyL,EAAAvS,UAAAsC,UAAP,SAAiBC,GACb,GAAe,MAAXA,EACA,OAAQA,EAAQ3B,aACZ,KAAK9O,EAAAmT,qBAAqBqC,YACtB7U,KAAK0gB,cAAc5Q,EAAQ1B,aAC3B,MACJ,KAAK/O,EAAAmT,qBAAqBsC,iBACtB9U,KAAK2gB,sBACL,MACJ,KAAKthB,EAAAmT,qBAAqBwC,wBACtBhV,KAAKgV,4BAOb8K,EAAAvS,UAAAmT,cAAR,SAAsBxW,GAClB,IAAMyH,EAA2B3R,KAAKwQ,iBAAiBmB,YAE1C,KAATzH,GACAlK,KAAK4gB,uBAAuBjP,EAAazH,IAI1C4V,EAAAvS,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAE3C,QAF2C,IAAAA,IAAAA,GAAA,GAC3C5P,KAAK6gB,kBAAoB,IAAI1L,EAAA2I,iBACzBlO,EAAe,CACf,IAAMkR,EAAWzhB,EAAAe,QAAQgB,kBAEzB,GAAI0f,EAAS7a,OAAQ,CACX8a,EAAS,cAEf,GAAwC,IAApCD,EAAS7a,OAAOlG,QAAQghB,GAAe,CACjCC,EAAW9a,mBAAmB4a,EAAS7a,OAAOqE,UAAUyW,EAAOhgB,SAASyG,MAAM,KAEpFxH,KAAK2gB,sBAEL,IAAsB,IAAAM,EAAA,EAAAC,EAAAF,EAAAC,EAAAC,EAAAngB,OAAAkgB,IAAU,CAA3B,IAAMxW,EAAOyW,EAAAD,GACC,MAAXxW,GAA+B,KAAZA,GACnBzK,KAAK0gB,cAAcjW,GAI3BzK,KAAKgV,8BAMb8K,EAAAvS,UAAAyH,wBAAR,WAEI,IAEUmM,EAFc,MAApBnhB,KAAKohB,cAECD,EAD2BnhB,KAAKwQ,iBAAiBmB,YACO,eAC1DtS,EAAAwJ,WAAWC,mBAAmB9I,KAAKohB,aAAard,IAAMod,EAAcE,gBAAgBlZ,UAClFgZ,EAAcE,gBAAgBC,cAC7BjiB,EAAAwJ,WAAWC,mBAAmB9I,KAAKohB,aAAard,IAAMod,EAAcE,gBAAgBlZ,aAEvFgZ,EAAcE,gBAAgBlZ,UAAYnI,KAAKohB,YAAYpY,YAGnEhJ,KAAKohB,YAAc,MAQhBtB,EAAAvS,UAAAqT,uBAAP,SAA8BpgB,EAAsB0J,GAchD,IAZA,IAAI+V,EACAsB,EACAC,EACAC,EAEEN,EAA+B3gB,EAAqB,cAEtDkhB,EAAiB1hB,KAAK6gB,kBAAkB5C,iBAAiB/T,GACvDyX,EAAa,IAAI3b,OAAO,uBAAAjE,OAAuB/B,KAAK4hB,gBAAgBF,GAAe,0BAA0B,KAI1GtB,EAAY5f,EAAQ6f,WAAWtf,OAAS,EAAQ,GAALqf,EAAQA,IAAK,CAI7D,IAAIyB,GAAwB,EAG5B,IALA5B,EAAOzf,EAAQ6f,WAAWD,IAKjBG,WAAaV,EAAqC,CAEvD0B,EAAWtB,EAAKO,UAChBgB,EAAoBxhB,KAAK6gB,kBAAkB5C,iBAAiBsD,EAAS3hB,eAKrE,IAHA,IAAIC,OAAK,EACHiiB,EAAmB,GAEA,EAAlBP,EAASxgB,QAAgE,QAAjDlB,EAAQ2hB,EAAkB3hB,MAAM8hB,KAAuB,CAElF,IAAMI,EAAMliB,EAAMqE,MAAQrE,EAAM,GAAGkB,OAEzB,EAANghB,GAEAD,EAASjY,KAAKsX,EAAca,eAAeT,EAASjX,UAAU,EAAGyX,MAIrEN,EAAiBN,EAAcc,cAAc,SAC/B7Q,UAAY,qBAC1BqQ,EAAcS,YAAYf,EAAca,eAAeT,EAASjX,UAAUyX,EAAKA,EAAM7X,EAAKnJ,UAC1F+gB,EAASjY,KAAK4X,GAGdF,EAAWA,EAASjX,UAAUyX,EAAM7X,EAAKnJ,QACzCygB,EAAoBxhB,KAAK6gB,kBAAkB5C,iBAAiBsD,EAAS3hB,eAGrEI,KAAKohB,YAAcK,EAEdI,IAED7hB,KAAKwQ,iBAAiBT,qBAAqBkQ,EAAKkC,eAEhDN,GAAwB,GAIhC,GAAsB,EAAlBC,EAAS/gB,OAAY,CACC,EAAlBwgB,EAASxgB,QAET+gB,EAASjY,KAAKsX,EAAca,eAAeT,IAG/C,IAAsB,IAAAN,EAAA,EAAAmB,EAAAN,EAAAb,EAAAmB,EAAArhB,OAAAkgB,IAAU,CAA3B,IAAMoB,EAAOD,EAAAnB,GACdhB,EAAKD,WAAWsC,aAAaD,EAASpC,GACd,MAApBjgB,KAAKohB,aAAuBnB,EAAKM,WAAaV,IAC9C7f,KAAKohB,YAAcnB,GAI3BA,EAAKD,WAAWS,YAAYR,SAGzBA,EAAKM,WAAaV,IAMI,WAHII,EAGjBsC,UACkB,SAJDtC,EAIZsC,UAAiD,uBAJrCtC,EAIuB7O,WAEpDpR,KAAK4gB,uBANwBX,EAMY/V,MASjD4V,EAAAvS,UAAAiV,kBAAR,WACI,OAAOxiB,KAAKwQ,iBAAiBb,aAAalG,KAAK,wBAM3CqW,EAAAvS,UAAAoT,oBAAR,WAE0B3gB,KAAKwiB,oBACrBve,KAAK,SAACC,EAAe1D,GACjBiiB,EAAwB9hB,EAAEH,GAChCiiB,EAAKvK,YAAYuK,EAAKjL,UAM1BsI,EAA6BC,iBAAiB/f,KAAKwQ,iBAAiBmB,aAEpEhR,EAAE,0BAA0B0S,QAIxByM,EAAAvS,UAAAqU,gBAAR,SAAwBc,GACpB,OAAOA,EAAOzgB,QAAQ,wBAAyB,SAGvD6d,GA3OA,SAAAA,IAAA,IAAAlO,EAAA,OAAAwD,GAAAA,EAAAoE,MAAAxZ,KAAAyZ,YAAAzZ,K,OAGY4R,EAAAwP,YAA2B,KAC3BxP,EAAAiP,kBAAsC,K,EAJrC1L,EAAA2K,6BAA4BA,EA6OzC,IAAA6C,GAEWA,EAAApV,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAIsP,EAA6BtP,IAGhDmS,GAPA,SAAAA,KAAaxN,EAAAwN,oCAAmCA,EApPxB,EAARtjB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA+PnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASwN,qCChQnC,SAAUvjB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAAwN,GAAAxN,EAA8C/V,EAAAmQ,oBAAA8F,UAAAsN,EAAAxN,GAEnCwN,EAAArV,UAAA8G,QAAP,WACI,MAAO,eAGJuO,EAAArV,UAAAmC,kBAAP,SAAyBC,EAAsBC,QAAA,IAAAA,IAAAA,GAAA,GACvC5P,KAAKwQ,iBAAiBwB,OAASpC,GAC/BD,EAAa4C,SAAS,aAIlCqQ,GAZA,SAAAA,I,+CAAazN,EAAAyN,yBAAwBA,EAcrC,IAAAC,GAEWA,EAAAtV,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAIoS,EAAyBpS,IAG5CqS,GAPA,SAAAA,KAAa1N,EAAA0N,gCAA+BA,EAhBpB,EAARxjB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA2BnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAAS0N,iCC5BnC,SAAUzjB,GAAU,IAAAC,GAAQ,SAAA8V,GAKxB,IAAAC,EAAA0N,GAAA1N,EAAuD/V,EAAAmQ,oBAAA8F,UAAAwN,EAAA1N,GAE5C0N,EAAAvV,UAAA8G,QAAP,WACI,MAAO,oCAGJyO,EAAAvV,UAAAkC,mBAAP,WAEIpQ,EAAAe,QAAQiF,2BAEkB,aAAtBhE,SAASiF,UACT3F,EAAE,QAAQ4R,SAAS,uBAI/BuQ,GAfA,SAAAA,I,+CAAa3N,EAAA2N,kCAAiCA,EAiB9C,IAAAC,GAEWA,EAAAxV,UAAA8E,eAAP,SAAsB7B,GAClB,MAA0B,aAAtBnP,SAASiF,SACF,IAAIwc,EAAkCtS,GAG1C,MAGfuS,GAVA,SAAAA,KAAa5N,EAAA4N,yCAAwCA,EAtB7B,EAAR1jB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAqCnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAAS4N,0CCtCnC,SAAU3jB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAQAC,EARM4N,EACe,EADfA,EAEe,EAMrBC,GAAA7N,EAA4D/V,EAAAmQ,oBAAA8F,UAAA2N,EAAA7N,GAUzC6N,EAAAC,mBAAf,SAAkCC,EAAkBC,GAChD,IAGMC,EAAwC,OAAbD,EAC3B,MACc,QAAbA,EACG,OACA,OACVziB,EAR4C,OAAbyiB,EACzB,SACc,QAAbA,EAAsB,OAAS,QAMrBnf,KAAK,SAACuP,EAAGhT,GAClBG,EAAEH,GACD2W,KAAKkM,GACLxjB,MAAMsjB,IAEP3iB,EAAQwf,WAAWS,YAAYjgB,MAQ5ByiB,EAAAK,gBAAf,WAEI,GAAIjkB,EAAAe,QAAQmI,aACR,MAAO,GAGP,IAgBUgb,EAbJC,EAH4B7iB,EAAE,wBAAwBK,IAAI,GAG/ByC,IAE7BJ,OAAS,EAeb,OARIA,EALA4f,EAAuCQ,iCAEnCF,EAAaC,EAAUzjB,QAAQ,QACnCsD,EAAYmgB,EAAUlZ,UAAU,EAAGiZ,GACnCA,EAAaC,EAAUzjB,QAAQ,IAAKwjB,EAAa,GACrC,GAAAxhB,OAAGsB,GAAStB,OAAGyhB,EAAUlZ,UAAUiZ,GAAW,UAIpDA,EAAqBC,EAAUzjB,QAAQ,KAAO,EACxCyjB,EAAUlZ,UAAU,EAAGiZ,KAOhCN,EAAAS,UAAf,WAGI,IAAMC,EAAcpiB,SAASqiB,YAC7B,GAAID,GAAoC,EAArBA,EAAY5iB,OAAY,CAGvC,GAA0E,IAAtEkiB,EAAuCY,oBAAoB9iB,OAAc,CACzE,IAAoC,IAAAkgB,EAAA,EAAA6C,EAAAb,EAAuCY,oBAAvC5C,EAAA6C,EAAA/iB,OAAAkgB,IAA4D,CAG5F,IAHC,IAAM8C,EAAqBD,EAAA7C,GACxB+C,GAAkB,EAEbC,EAAyB,EAAGA,EAA0BN,EAAkB,OAAGM,IAA0B,CAC1G,IAAMC,EAAoBP,EAAYM,GACtC,GAA8B,MAA1BC,EAAkB9hB,MAAgB8hB,EAAkB9hB,OAAS2hB,EAAuB,CAEpF,IAAII,OAAY,EAChB,IAEQA,EADAD,EAAkBE,OAGHF,EAAkBG,SAEvC,MAAOriB,IAIW,MAAhBmiB,GAA8C,EAAtBA,EAAapjB,SACrCijB,GAAkB,GAEtB,OAGR,IAAKA,EAQD,YANsE,MAAlEf,EAAuCqB,0BAEvCrB,EAAuCqB,wBACjC1iB,OAAO2iB,YAAYtB,EAAuCS,UAF1C,MASoC,MAAlET,EAAuCqB,0BACvCE,cAAcvB,EAAuCqB,yBACrDrB,EAAuCqB,wBAA0B,MAKzE,IAAK,IAAIG,EAAkB,EAAGA,EAAmBd,EAAkB,OAAGc,IAAmB,CACrF,IAAMxN,EAAa0M,EAAYc,GAC3BL,OAAK,EAET,IAEQA,EADAnN,EAAWmN,OAGHnN,EAAWoN,SAEzB,MAAOriB,IAIT,GAAIoiB,EAEA,IAAK,IAAIM,EAAY,EAAGA,EAAYN,EAAMrjB,OAAQ2jB,IAAa,CAC3D,IAQYC,EAeJC,EAvBFC,EAAqBT,EAAMM,GAC7BG,EAAKnH,MAAMoH,kBAEsD,SAA7DD,EAAKnH,MAAMoH,gBAAgBxa,UAAU,EADjB,KAEhBsa,EAAiBC,EAAKnH,MAAMoH,gBAC5BH,EAAsB,KAgB1BA,GAbIA,GAFqD,IAArDE,EAAKnH,MAAMoH,gBAAgB/kB,QAAQ,aAErB6kB,EAAeta,UACzBsa,EAAe7kB,QAAQ,IAAK6kB,EAAe7kB,QAAQ,cACnDijB,EACA4B,EAAe3Y,YAAY,OACW,IAAnC2Y,EAAe7kB,QAAQ,OAEhB6kB,EAAeta,UACzBsa,EAAe7kB,QAAQ,OAASijB,EAChC4B,EAAe3Y,YAAY,MAGjB2Y,EAAeta,UAAU,EAAGsa,EAAe3Y,YAAY,OAE/ChK,QAAQ,IAAM,IAExC2iB,EADe,QAAA7iB,OAASkhB,EAAuCK,mBAAiBvhB,OAAG4iB,EAAW,MACpEC,EAAeta,UAAUsa,EAAe7kB,QAAQ,KAAO,GACjF8kB,EAAKnH,MAAMoH,gBAAkBF,QAY3C3B,EAAA8B,sBAAd,WACI,MAA8B,cAAtB1jB,SAASiF,WAC6B,IAAvCjF,SAASe,KAAKrC,QAAQ,cACsB,IAA5CsB,SAASe,KAAKrC,QAAQ,kBAMnBkjB,EAAAQ,8BAAd,WAII,OAA+C,IAHhC9iB,EAAE,wBAAwBK,IAAI,GACpByC,IAEP1D,QAAQ,iBAMhBkjB,EAAA+B,OAAd,SAAqB7iB,GACjB,GAAI8gB,EAAuC8B,wBAAyB,CAChE,IAAIJ,OAAW,EAuBf,OARuC,KATnCA,GAL8B,IAA9BxiB,EAAIpC,QAAQ,cAEZ4kB,EAAcxiB,EAAImI,UAAUnI,EAAIpC,QAAQ,IAAKoC,EAAIpC,QAAQ,cACnDijB,EAAkD7gB,EAAIpB,SAElCkB,QAAQ,IAAM,KACT,IAAxBE,EAAIpC,QAAQ,QAEnB4kB,EAAcxiB,EAAImI,UAAUnI,EAAIpC,QAAQ,OAASijB,EAAkD7gB,EAAI8J,YAAY,OACzFhK,QAAQ,IAAM,IAG1BE,EAAIF,QAAQ,IAAI+D,OAAO,IAAK,KAAM,OAEpCjG,QAAQ,YACpB4kB,EACIA,EAAYra,UACRqa,EAAY5kB,QAAQ,IAAK4kB,EAAY5kB,QAAQ,UAAYijB,GACzD2B,EAAY5jB,SAEDkiB,EAAuCK,kBAAoBqB,EAIlF,OAAOxiB,GAIR8gB,EAAA1V,UAAA8G,QAAP,WACI,MAAO,uCAGJ4O,EAAA1V,UAAAkC,mBAAP,WAEIwT,EAAuCC,mBAAmB,mBAAoB,OAG9ED,EAAuCS,YAGvCrkB,EAAAe,QAAQiF,2BAEJ4d,EAAuC8B,yBACvCpkB,EAAE,QAAQ4R,SAAS,sBAKpB0Q,EAAA1V,UAAAmC,kBAAP,SAAyBiC,GAIjBsR,EAAuCQ,iCAIvC9iB,EAAE,QAAQ0S,OAIV1S,EAAE,QAAQsD,KAAK,SAACuP,EAAGhT,GACTykB,EAAiBtkB,EAAEH,GAAS2W,KAAK,yBACnC8N,IACMC,EAAoB,iBAAAnjB,OAAiBkjB,GAC3ChC,EAAuCY,oBAAoBha,KAAKqb,GAChEvkB,EAAE,QAAQoH,OAAO,gCAAAhG,OAAgCmjB,EAAiB,4BAK1EvkB,EAAE,KAAKsD,KAAK,SAACuP,EAAGhT,GACZ,IAAM4B,EAAOzB,EAAEH,GAAS2W,KAAK,QACzB/U,IAA8C,IAAtCA,EAAKrC,QAAQ,qBACrBY,EAAEH,GAAS2W,KAAK,OAAQ/U,EAAKH,QAAQ,mBAAoB,mCAIjE5C,EAAAe,QAAQ6E,YAAYtE,EAAE,QAAS,UAQ/BA,EAAE,QAAQsD,KAAK,SAACuP,EAAGhT,GACTykB,EAAiBtkB,EAAEH,GAAS2W,KAAK,yBACnC8N,IACMC,EAAoBjC,EAAuCK,kBAAoB2B,EACrFhC,EAAuCY,oBAAoBha,KAAKqb,GAEhEvkB,EAAE,QAAQoH,OAAO,gCAAAhG,OAAgCmjB,EAAiB,4BAK1EvkB,EAAE,MACGwkB,OAAO,SAAC3R,EAAGhT,GAAY,OAAAG,EAAEH,GACrB4kB,OACAhhB,GAAG,QACPiX,SAGL1a,EAAE,KAAKsD,KAAK,SAACuP,EAAGhT,GAEZ,IAAM6kB,EAAa1kB,EAAEH,GAAS2W,KAAK,QAC/BkO,IAA2C,IAA7BA,EAAWtlB,QAAQ,MAC7BslB,EAAW/a,UAAU,EAAG+a,EAAWtlB,QAAQ,QAAUsB,SAASe,MAE9DzB,EAAEH,GAAS2W,KAAK,SAAU,WAMtC8L,EAAuCS,cA7SvBT,EAAAY,oBAAgC,GACzCZ,EAAAqB,wBAAkC,KAiTrDrB,GApTA,SAAAA,I,+CAAa9N,EAAA8N,uCAAsCA,EAsTnD,IAAAqC,GAEWA,EAAA/X,UAAA8E,eAAP,SAAsB7B,GAClB,OAAIyS,EAAuC8B,wBAChC,IAAI9B,EAAuCzS,GAG/C,MAGf8U,GAVA,SAAAA,KAAanQ,EAAAmQ,8CAA6CA,EAhUlC,EAARjmB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA+UnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASmQ,+CChVnC,SAAUlmB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAAmQ,GAAAnQ,EAA+C/V,EAAAmQ,oBAAA8F,UAAAiQ,EAAAnQ,GAI1BmQ,EAAAC,kBAAjB,SAAmCtgB,GAO/B,MAAO,CACHnB,IAAKwhB,EAA0BE,SAASvgB,EAAME,IAAI,gBAClDsgB,OAAQH,EAA0BE,SAASvgB,EAAME,IAAI,mBACrDd,KAAMihB,EAA0BE,SAASvgB,EAAME,IAAI,iBACnDugB,MAAOJ,EAA0BE,SAASvgB,EAAME,IAAI,oBAKrDmgB,EAAAhY,UAAA8G,QAAP,WACI,MAAO,eAIJkR,EAAAhY,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAAAgC,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,GAG3CD,EAAalG,KAAK,iBAAiBxF,KAAK,SAACC,EAAe1D,GACpDoR,EAAKgU,mBAAmBplB,MASzB+kB,EAAAhY,UAAAqY,mBAAP,SAA0BplB,GAA1B,IAcY+e,EAeAsG,EAEAC,EAgBEC,EA/CdnU,EAAA5R,KACUgmB,EAAcrlB,EAAEH,GAGhBylB,EAAgBD,EAAY7O,KAAK,4BACnC8O,EAEA1G,EAAUvf,KAAKwQ,iBAAiBb,aAAalG,KAAKwc,GAInC,OADf1G,EAAUyG,EAAY7O,KAAK,yBAOvBoI,GAHAA,EAAUA,EAAQtd,QAFR,mBAEmB,SAACpC,EAAYqmB,GAEtC,OAAAC,OAAOC,aAAajmB,SAAS+lB,EAAO,QACtBjkB,QAAQ,OAAQ,MAAMA,QAAQ,OAAQ,OAGjD,MAAXsd,IAII8G,GAHAA,EAAYL,EAAY7O,KAAK,0BAGjB,QAKZ0O,GAHAA,EAAYG,EAAY7O,KAAK,sBAGjB6O,EAAY9b,OAExB4b,EAAU,IACRQ,EAAgBN,EAAY7O,KAAK,yBAGnC2O,EAAU,GAAA/jB,OAAG+jB,EAAO,KAAA/jB,OAAIukB,KAExBC,EAAU,KAEVhB,EAA0BC,kBAAkBQ,GAAa1hB,OAGzDiiB,EAAUhB,EAA0BC,kBAAkBQ,GAAa1hB,MAGjEkiB,EAAc,CAAE7S,MAAO0S,GAEvBN,EAAc,CAAEU,MAAO,IAAK/G,OAAO,GACrCrgB,EAAAe,QAAQoI,sBACRge,EAAYE,QAAS,EACrBX,EAAYW,QAAS,GAEzBV,EAAY1G,KAAK,CACbC,QAAS,CACLrV,KAAMqV,EACNtM,MAAO,CAAE/I,KAAM2b,IAEnBtL,SAAU,CACNiF,GAAI,WACJC,GAAI,cACJkH,OAAQ,CAAEvG,EAAGmG,GACbK,SAAUjmB,EAAEiB,QACZ8T,UAAW1V,KAAKwQ,iBAAiBb,cAErCxK,KAAMqhB,EACNnT,KAAM0S,EACNc,OAAQ,CACJC,OAAQ,SAACnT,EAAc0L,GAGb0H,EAAW1H,EAAYvL,SAASiT,QACtCnV,EAAKoV,cAAcD,KAG3BrJ,MAAO,CACHoI,QAAOA,OAMbP,EAAAhY,UAAAyZ,cAAV,SAAwBxmB,GACpBR,KAAKwQ,iBAAiBd,kBAAkBlP,IAtH3B+kB,EAAAE,SAAW,SAAC/f,GAA0B,OAAAvF,SAASuF,EAAO,KAAO,GAyHlF6f,GA3HA,SAAAA,I,+CAAapQ,EAAAoQ,0BAAyBA,EA6HtC,IAAA0B,GAEWA,EAAA1Z,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAI+U,EAA0B/U,IAG7CyW,GAPA,SAAAA,KAAa9R,EAAA8R,iCAAgCA,EA/HrB,EAAR5nB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA0InBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAAS8R,kCC3InC,SAAU7nB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAIAC,EAJM8R,EACY,EAGlBC,GAAA/R,EAA4D/V,EAAAmQ,oBAAA8F,UAAA6R,EAAA/R,GAEjD+R,EAAA5Z,UAAA8G,QAAP,WACI,MAAO,6BAGJ8S,EAAA5Z,UAAAkC,mBAAP,WAGoC,eAA5BpQ,EAAAe,QAAQkB,kBAGPZ,OAAO0mB,GAAW7Z,UAAU8F,KAAO,WAGhCrT,KAAKqnB,QAAQC,KAAKtnB,KAAKunB,MAAS7mB,OAAegd,MAAM1d,KAAKyF,KAAMzF,KAAKunB,MACrEvnB,KAAKqnB,QAAQhU,MAAO,EAGpBrT,KAAKwnB,OAAOxnB,KAAKynB,MAAO,MAO7BN,EAAA5Z,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAE3C,IASU8X,OAXiC,IAAA9X,IAAAA,GAAA,GAEvCvQ,EAAAe,QAAQmI,eAKoB,eAA5BlJ,EAAAe,QAAQkB,iBACiB,SAAtBjC,EAAAe,QAAQE,KAAKL,MAAmBZ,EAAAe,QAAQE,KAAKJ,SAAWgnB,KAGrDQ,EAAuD,eAA5BroB,EAAAe,QAAQkB,gBAGrCqO,EAAalG,KACT,8FACQxF,KAAK,SAACuP,EAAGhT,GACjBknB,GACA/mB,EAAEH,GACGqV,WACAC,QACAvD,SAAS,iBAElB5R,EAAEH,GACGqV,WACA8R,OACApV,SAAS,kBAGdmV,IACA/X,EAAalG,KAAK,uCAAuC8I,SAAS,iBAClE5C,EAAalG,KAAK,oBAAoB8I,SAAS,kBAEnD5C,EAAalG,KAAK,sCAAsC8I,SAAS,gBACjE5C,EAAalG,KAAK,mBAAmB8I,SAAS,gBAE9C5C,EAAalG,KAAK,OAAO8I,SAAS,wBAClC5C,EAAalG,KAAK,yBAAyB8I,SAAS,mCACpD5C,EAAalG,KAAK,oCAAoC8I,SAAS,+BAK3E4U,GArEA,SAAAA,I,+CAAahS,EAAAgS,uCAAsCA,EAuEnD,IAAAS,GAEWA,EAAAra,UAAA8E,eAAP,SAAsB7B,GAClB,IAAMnQ,EAAsBhB,EAAAe,QAAQC,cAEpC,MAAgC,eAA5BhB,EAAAe,QAAQkB,iBAAmD,EAAdjB,GAAmBA,GAAe6mB,EAExE,IAAIC,EAAuC3W,GAG/C,MAGfoX,GAbA,SAAAA,KAAazS,EAAAyS,8CAA6CA,EA7ElC,EAARvoB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA8FnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASyS,+CC/FnC,SAAUxoB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAIAC,EAJMyS,EACc,GAGpBC,GAAA1S,EAA+C/V,EAAAmQ,oBAAA8F,UAAAwS,EAAA1S,GAEpC0S,EAAAva,UAAA8G,QAAP,WACI,MAAO,eAIJyT,EAAAva,UAAAmC,kBAAP,SAAyBC,EAAsBC,QAAA,IAAAA,IAAAA,GAAA,GAE3C,IAAM3C,EAAejN,KAAKwQ,iBAAiBkC,kBAEvCqV,EAA2B9a,EAAae,aAAa,sCAMnDqZ,EAAU,CACZW,OALAD,EADCA,GACkB,EAMnBE,SAAUF,EAEVG,SAAU,SAAC1U,EAAU2U,GACjBlb,EAAatH,aAAa,qCAAsCwiB,EAAGC,OAAOlkB,UAG9EmkB,OAAQ,SAAC7U,EAAU2U,GACflb,EAAatH,aAAa,qCAAsCwiB,EAAGjkB,QAEvEiB,KAAM,KACNkO,KAAM,MAGLhU,EAAAe,QAAQmI,cAAiBlJ,EAAAe,QAAQoI,sBAElC6e,EAAQliB,KAAO,CAAEmjB,QAAS,SAAUC,SAAU,QAC9ClB,EAAQhU,KAAO,CAAEiV,QAAS,SAAUC,SAAU,SAElD5Y,EAAalG,KAAK,oBAAoB+e,KAAKnB,IAIxCS,EAAAva,UAAAgD,yBAAP,WACI,OAAOsX,GAGfC,GA7CA,SAAAA,I,+CAAa3S,EAAA2S,0BAAyBA,EA+CtC,IAAAW,GAEWA,EAAAlb,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAIsX,EAA0BtX,IAG7CiY,GAPA,SAAAA,KAAatT,EAAAsT,iCAAgCA,EArDrB,EAARppB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAgEnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASsT,kCCjEnC,SAAUrpB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAuT,EAAAC,GAAAD,EAAyCrpB,EAAAmQ,oBAAA8F,UAAAqT,EAAAD,GAE9BC,EAAApb,UAAA8G,QAAP,WACI,MAAO,QAIJsU,EAAApb,UAAAyC,2BAAP,SAAkCxP,EAAkByP,EAAoBC,GAEpE,IAKU0Y,EAmBV,OAxBK3Y,GAAiC,OAApBzP,EAAQuE,SACnBpE,EAAEH,GACAsE,SACAjE,SAAS,iBAKRgoB,GAHAD,EAAcvpB,EAAAe,QAAQ+G,sBAAsBxG,EAAEwnB,GAAGjoB,QAAS,OAAS,GAItD,mBAAqB,kBAEpCS,EAAEH,GAASK,SAASgoB,KAEdC,GADAC,EAAepoB,EAAEA,EAAEH,GAASM,QAAQ,oBAAoBE,IAAI,KAC7ByI,KAAK,mBAAA1H,OAAmB8mB,EAAoB,eAEzED,EACAG,EAAaP,KAAK,SAAU,WAAYM,EAAgB5kB,SAExD6kB,EAAaP,KAAK,SAAU,SAAUM,EAAgB5kB,YAM/D,GAKJykB,EAAApb,UAAAmC,kBAAP,SAAyBC,EAAsBC,QAAA,IAAAA,IAAAA,GAAA,GACrB,gBAAlBvO,SAASe,MAETzB,EAAEqoB,OAAO,UAAWroB,EAAEwnB,GAAGK,KAAM,CAC3BS,SAAQ,SAACC,GACL,OAAkC,IAA9BA,EAAO9mB,KAAKrC,QAAQ,MAIbC,KAAKoV,OAAO8T,OAQhCP,EAAApb,UAAA4C,0BAAP,SAAiC3P,EAAkByP,GACzC8Y,EAAepoB,EAAEA,EAAEH,GAASM,QAAQ,oBAAoBE,IAAI,IAC9C,MAAhB+nB,GAAwD,MAAhCA,EAAa9nB,KAAK,YAC1C8nB,EAAaP,KAAK,YAInBG,EAAApb,UAAAgD,yBAAP,WAEI,OAAQ,GAGhBoY,GAnEA,SAAAA,I,+CAAaxT,EAAAwT,oBAAmBA,EAqEhC,IAAAQ,GAEWA,EAAA5b,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAImY,EAAoBnY,IAGvC2Y,GAPA,SAAAA,KAAahU,EAAAgU,2BAA0BA,EAvEf,EAAR9pB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAkFnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASgU,4BCnFnC,SAAU/pB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAAgU,GAAAhU,EAAkD/V,EAAAmQ,oBAAA8F,UAAA8T,EAAAhU,GAEvCgU,EAAA7b,UAAA8G,QAAP,WACI,MAAO,mBAID+U,EAAA7b,UAAA8b,eAAV,WACI,MAAO,oBAIDD,EAAA7b,UAAA+b,0BAAV,WACI,MAAO,yBAIDF,EAAA7b,UAAAgc,0BAAV,WACI,MAAO,qBAIDH,EAAA7b,UAAAic,0BAAV,WACI,MAAO,qBAIDJ,EAAA7b,UAAAkc,2BAAV,WACI,MAAO,kBAIDL,EAAA7b,UAAAmc,6BAAV,WACI,MAAO,gBAIDN,EAAA7b,UAAAoc,iBAAV,WACI,MAAO,cAIDP,EAAA7b,UAAAqc,sBAAV,WACI,OAAO,GAIDR,EAAA7b,UAAAsc,mBAAV,WACI,OAAO,GAIJT,EAAA7b,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAAAgC,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,GAGrCiP,EAAU,SAAA9c,OAAS/B,KAAKqpB,kBAE9B1Z,EACKwI,IAAI0G,EAAS,IAAA9c,OAAI/B,KAAKspB,8BACtBlR,GAAGyG,EAAS,IAAA9c,OAAI/B,KAAKspB,6BAA+B,SAACjR,GAClD,IAAMyR,IAEU,IAFUna,EACrBlG,KAAK,IAAA1H,OAAI6P,EAAK2X,4BAA2B,KAAAxnB,OAAI6P,EAAK2X,6BAA2BxnB,OAAG6P,EAAK+X,qBACrF5oB,QAEL4O,EAAalG,KAAK,IAAA1H,OAAI6P,EAAK2X,8BAA+BtlB,KAAK,SAACC,EAAe1D,IACvDG,EAAEH,GAASK,SAAS+Q,EAAK2X,4BAA8B3X,EAAK+X,qBAC7DG,GACflY,EAAKmY,cAAcppB,EAAEH,MAG7BnB,EAAAe,QAAQiC,gBAAgBgW,KAGhCrY,KAAKgqB,uBAAuBra,EAAalG,KAAK,IAAA1H,OAAI/B,KAAKupB,+BAGvD5Z,EACKwI,IAAI0G,EAAS,IAAA9c,OAAI/B,KAAKupB,8BACtBnR,GAAGyG,EAAS,IAAA9c,OAAI/B,KAAKupB,6BAA+B,SAAClR,GAClDzG,EAAKmY,cAAcppB,EAAE0X,EAAYC,gBACjCjZ,EAAAe,QAAQiC,gBAAgBgW,KAI3BhZ,EAAAe,QAAQmI,cACTvI,KAAKiqB,kCAKNb,EAAA7b,UAAAwC,qBAAP,SAA4BvP,GAA5B,IAAAoR,EAAA5R,KACIW,EAAEH,GACGM,QAAQ,IAAAiB,OAAI/B,KAAKwpB,8BACjBU,KAAK,IAAAnoB,OAAI/B,KAAKupB,8BACdtlB,KAAK,SAACuP,EAAW2O,GACd,IAAMgI,GAAaxpB,EAAEwhB,GAAethB,SAAS+Q,EAAK2X,4BAA8B3X,EAAK+X,oBACjF/X,EAAKgY,0BAA4BO,GACjCvY,EAAKmY,cAAcppB,EAAEwhB,OAU7BiH,EAAA7b,UAAAwc,cAAR,SAAsBjW,EAAkB5D,GAAxC,IAAA0B,EAAA5R,UAAwC,IAAAkQ,IAAAA,GAAA,GAE9Bka,EAAStW,EAAS7P,KAAK,SAACuP,EAAWhT,GACrC,IAEU6pB,EAFJC,EAAa3pB,EAAEH,GAAS4kB,KAAK,IAAArjB,OAAI6P,EAAK4X,8BACxCc,IACMD,EAAqB1pB,EAAEH,GAASK,SAAS+Q,EAAK2X,4BAA8B3X,EAAK+X,oBACvF/X,EAAK2Y,cAAcD,EAAYpa,GAC/BvP,EAAEH,GAAS4Z,YAAYxI,EAAK2X,4BAA8B3X,EAAK+X,oBAAqBU,GAEhFzY,EAAKiY,uBACDQ,EAEAzY,EAAKpB,iBACAkC,kBACA/M,aAAa,GAAA5D,OAAG6P,EAAKyX,kBAAgBtnB,OAAG6P,EAAK+X,mBAAkB,KAAA5nB,OAAIpB,EAAEH,GAAS2W,KAAK,OAAS,MAGjGvF,EAAKpB,iBACAkC,kBACA/M,aAAa,GAAA5D,OAAG6P,EAAKyX,kBAAgBtnB,OAAG6P,EAAK+X,mBAAkB,KAAA5nB,OAAIpB,EAAEH,GAAS2W,KAAK,OAAS,YASjH,OAFAnX,KAAKwqB,mCAEEJ,GAODhB,EAAA7b,UAAAgd,cAAV,SAAwB/pB,EAAiB0P,GACrC,IAAMua,EAAyD,SAA3BjqB,EAAQ4E,IAAI,WAChDpF,KAAKwQ,iBAAiBqD,qBAAqBrT,EAASiqB,EAAmBva,IAOnEkZ,EAAA7b,UAAAyc,uBAAR,SAA+BlW,GAA/B,IAAAlC,EAAA5R,KACI,OAAIA,KAAK6pB,qBACE/V,EAAS7P,KAAK,SAACC,EAAe1D,GAMV,SAJAoR,EAAKpB,iBACvBkC,kBACA1E,aAAa,GAAAjM,OAAG6P,EAAKyX,kBAAgBtnB,OAAG6P,EAAK+X,mBAAkB,KAAA5nB,OAAIpB,EAAEH,GAAS2W,KAAK,SAGpFvF,EAAKmY,cAAcppB,EAAEH,IAAU,KAKhCsT,GAOPsV,EAAA7b,UAAAid,iCAAR,WACI,IAAM7a,EAAuB3P,KAAKwQ,iBAAiBb,aAC7C+a,EAEU,IAFY/a,EACvBlG,KAAK,IAAA1H,OAAI/B,KAAKupB,4BAA2B,KAAAxnB,OAAI/B,KAAKupB,6BAA2BxnB,OAAG/B,KAAK2pB,qBACrF5oB,OAEL4O,EAAalG,KAAK,IAAA1H,OAAI/B,KAAKypB,+BAAgCrkB,IAAI,UAAWslB,EAAqB,SAAW,QAC1G/a,EAAalG,KAAK,IAAA1H,OAAI/B,KAAK0pB,iCAAkCtkB,IAAI,UAAWslB,EAAqB,OAAS,WAOtGtB,EAAA7b,UAAA0c,+BAAR,WACI,IAAMta,EAAe3P,KAAKwQ,iBAAiBb,aAE4B,EAAnEA,EAAalG,KAAK,IAAA1H,OAAI/B,KAAKupB,8BAA+BxoB,OAE1D4O,EAAalG,KAAK,IAAA1H,OAAI/B,KAAKspB,8BAA+BnkB,OAG1DwK,EAAalG,KAAK,IAAA1H,OAAI/B,KAAKspB,8BAA+BjW,QAI3D+V,EAAA7b,UAAA6C,gCAAP,SAAuCC,GACnC,GAAkC,WAA9BA,EAAcU,aAA0D,WAA9BV,EAAcU,YACxD,OAAQV,EAAcU,aAClB,IAAK,SACD,MACJ,IAAK,SAEDV,EAAcW,aAAanH,KACvB,IAAIxK,EAAA8R,sBAAsB,IAAApP,OAAI/B,KAAKupB,6BAA+BlqB,EAAAkQ,0BAA0BkI,UAOpH2R,GArNA,SAAAA,I,+CAAajU,EAAAiU,6BAA4BA,EAuNzC,IAAAuB,GAEWA,EAAApd,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAI4Y,EAA6B5Y,IAGhDma,GAPA,SAAAA,KAAaxV,EAAAwV,oCAAmCA,EAzNxB,EAARtrB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAqOlBuB,EAAEiqB,GAAWC,gBAAkB,SAAUC,EAAeC,EAAgBC,GACrE,OAAOhrB,KAAKirB,QAAQ,CAAE3C,QAAS,SAAUtkB,OAAQ,UAAY8mB,EAAOC,EAAQC,IAGhF5rB,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASwV,qCC1OnC,SAAUvrB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAA8V,GAAA9V,EAAmDD,EAAAiU,6BAAA9T,UAAA4V,EAAA9V,GAGrC8V,EAAA3d,UAAA8b,eAAV,WACI,MAAO,gBAID6B,EAAA3d,UAAA+b,0BAAV,WACI,MAAO,0BAID4B,EAAA3d,UAAAgc,0BAAV,WACI,MAAO,sBAID2B,EAAA3d,UAAAic,0BAAV,WACI,MAAO,sBAID0B,EAAA3d,UAAAkc,2BAAV,WACI,MAAO,wBAIDyB,EAAA3d,UAAAmc,6BAAV,WACI,MAAO,wBAIDwB,EAAA3d,UAAAoc,iBAAV,WACI,MAAO,aAIDuB,EAAA3d,UAAAqc,sBAAV,WACI,OAAO,GAIDsB,EAAA3d,UAAAsc,mBAAV,WACI,OAAO,GAGDqB,EAAA3d,UAAAgd,cAAV,SAAwB/pB,EAAiB0P,GACjCA,GAAe7Q,EAAAe,QAAQoI,oBACvBhI,EAAQmf,SAGPnf,EAAgBqqB,gBAAgB,SAIlCK,EAAA3d,UAAA8G,QAAP,WACI,MAAO,cAGJ6W,EAAA3d,UAAA6C,gCAAP,SAAuCC,GACnC,IASUe,EATwB,WAA9Bf,EAAcU,aAA0D,WAA9BV,EAAcU,cAChDV,EAAcU,YAQhBK,EACA,IAAArP,OAAI/B,KAAKupB,4BAA2B,MAAAxnB,OAAK/B,KAAKypB,6BAA4B,MAAA1nB,OAAK/B,KAAK0pB,gCAG1FrZ,EAAcW,aAAanH,KACvB,IAAIxK,EAAA8R,sBACAC,EACA/R,EAAAkQ,0BAA0BkI,UAI9CyT,GAjFA,SAAAA,I,+CAAa/V,EAAA+V,8BAA6BA,EAoF1C,IAAAC,GAEWA,EAAA5d,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAI0a,EAA8B1a,IAGjD2a,GAPA,SAAAA,KAAahW,EAAAgW,qCAAoCA,EAtFzB,EAAR9rB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAiGnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASgW,sCClGnC,SAAU/rB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAAgW,GAAAhW,EAAgD/V,EAAAmQ,oBAAA8F,UAAA8V,EAAAhW,GAErCgW,EAAA7d,UAAA8G,QAAP,WACI,MAAO,iBAIJ+W,EAAA7d,UAAAmC,kBAAP,SAAyBC,EAAsBC,QAAA,IAAAA,IAAAA,GAAA,GAErCyb,EAAe1qB,EAAE,wBAAyBgP,GAG5C/N,OAAOyN,OAASzN,OAAOmC,KAA6B,YAAtB1C,SAASiF,SAEvC+kB,EAAKhY,SAM0B,KAD3BiY,EAAWjqB,SAASe,KAAKkI,UAAUjJ,SAASe,KAAK6J,YAAY,KAAO,IAC3DlM,QAAQ,OACjBurB,EAAWA,EAAShhB,UAAU,EAAGghB,EAASvrB,QAAQ,OAIhDwrB,EAAY,GAAAxpB,OAAGspB,EAAKpqB,KAAK,aAAY,KAAAc,OAAIupB,GAC/CD,EAAKlU,KAAK,OAAQoU,GAClBF,EAAKlmB,SAKjBimB,GAhCA,SAAAA,I,+CAAajW,EAAAiW,2BAA0BA,EAkCvC,IAAAI,GAEWA,EAAAje,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAI4a,EAA2B5a,IAG9Cgb,GAPA,SAAAA,KAAarW,EAAAqW,kCAAiCA,EApCtB,EAARnsB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA+CnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASqW,mCChDnC,SAAUpsB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAKAC,EALMqW,EAEY,EAGlBC,GAAAtW,EAA6C/V,EAAAmQ,oBAAA8F,UAAAoW,EAAAtW,GAElCsW,EAAAne,UAAA8G,QAAP,WACI,MAAO,YAIJqX,EAAAne,UAAAmC,kBAAP,SAAyBC,EAAsBC,QAAA,IAAAA,IAAAA,GAAA,GAE1CjP,EAAE,iBAAyBgrB,QAAQ,GAAI,KAAM,SAAUC,GAEpD,OAAOA,IAAO5rB,MAAQ4rB,EAAGC,IAAI9qB,QAAU0qB,KAIxCC,EAAAne,UAAA+C,6BAAP,SAAoCD,GAEE,WAA9BA,EAAcU,aAA0D,WAA9BV,EAAcU,aACxDpQ,EAAE,eAAewX,IAAI,UAGjCuT,GArBA,SAAAA,I,+CAAavW,EAAAuW,wBAAuBA,EAuBpC,IAAAI,GAEWA,EAAAve,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAIkb,EAAwBlb,IAG3Csb,GAPA,SAAAA,KAAa3W,EAAA2W,+BAA8BA,EA9BnB,EAARzsB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAyCnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAAS2W,gCC1CnC,SAAU1sB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAMAC,EANM2W,EACY,GADZA,EAEa,GAFbA,EAGmB,GAGzBC,GAAA5W,EAA0C/V,EAAAmQ,oBAAA8F,UAAA0W,EAAA5W,GAE/B4W,EAAAze,UAAA8G,QAAP,WACI,MAAO,SAIJ2X,EAAAze,UAAAmC,kBAAP,SAAyBC,EAAsBC,QAAA,IAAAA,IAAAA,GAAA,GAE3CjP,EAAE,oBAAoBsD,KAAK,SAACuP,EAAWyY,GACnC,IAAMvW,EAAY/U,EAAEsrB,GACdC,EAASxW,EAAUG,SAAS,UAC5BsW,EAA2C,SAA/BzW,EAAUzU,KAAK,YAC3BmrB,EAA+C,SAAjC1W,EAAUzU,KAAK,cAC7BorB,EAAiD,SAAlC3W,EAAUzU,KAAK,eAC9BqrB,EAAQ5W,EAAUzU,KAAK,UAAY,GACnCsrB,EAAU7W,EAAUzU,KAAK,WAE3BwC,EAAM,GAAA1B,OAA0C,WAAvC1C,EAAAe,QAAQgB,kBAAkBkF,SAAwB,SAAW,QAAO,4BAAAvE,OAA2BwqB,EAAO,YAAAxqB,OAAWuqB,EAAK,eAEnI7oB,GAAQ,aAAA1B,OAAaoqB,EAAW,IAAM,KACtC1oB,GAAQ,QAAA1B,OAAQsqB,EAAc,IAAM,KAEpCH,EAAO/U,KAAK,MAAO1T,GACf2oB,GACMI,EAAkBntB,EAAAe,QAAQgB,kBAAkBgB,KAE9C/C,EAAAe,QAAQmI,cAAoC,gBAApBikB,GAA4E,IAAvCA,EAAgBzsB,QAAQ,WAErFmsB,EAAO/U,KAAK,QAAS4U,GAA6B5U,KAAK,SAAU4U,GAEjEG,EAAO/U,KAAK,QAAS4U,GAA6B5U,KAAK,SAAU4U,GAIpErW,EAAkB+W,WAEnBP,EACK/U,KAAK,QAAShX,SAASuV,EAAUzU,KAAK,SAAU,KAChDkW,KAAK,SAAUhX,SAASuV,EAAUzU,KAAK,UAAW,QAIvE+qB,GA3CA,SAAAA,I,+CAAa7W,EAAA6W,qBAAoBA,EA6CjC,IAAAU,GAEWA,EAAAnf,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAIwb,EAAqBxb,IAGxCkc,GAPA,SAAAA,KAAavX,EAAAuX,4BAA2BA,EArDhB,EAARrtB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAgEnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASuX,6B,wfCjEnC,SAAUttB,GAAU,IAAAC,EAAQ8V,EAExBC,EAAA,SAAAuX,I,+CAFgBttB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,IAAC8V,EAAA9V,EAAA8V,WAAA9V,EAAA8V,SAAQ,IAEhCC,EAA2D/V,EAAAmQ,oBAAA8F,UAAAqX,EAAAvX,GAKhDuX,EAAApf,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAAAgC,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,GAG3C,IAAMiP,EAAU,eACV+N,EAAmB,IAAA7qB,OAAI/B,KAAK6sB,wBAClCld,EACKwI,IAAI0G,EAAS+N,GACbxU,GAAGyG,EACA+N,EACA,SAACvU,GACGzG,EAAKkb,eAAensB,EAAE0X,EAAYC,gBAClCjZ,EAAAe,QAAQiC,gBAAgBgW,KAEpCrY,KAAK+sB,wBAAwBpsB,EAAEisB,IAC/B5sB,KAAKgtB,qBASCL,EAAApf,UAAAuf,eAAV,SAAyBhZ,EAA+B5D,GAAxD,IAAA0B,EAAA5R,KAmBI,YAnBoD,IAAAkQ,IAAAA,GAAA,GACpD4D,EAAS7P,KAAK,SAACuP,EAAWhT,GAEtB,IAAMysB,EAAqBtsB,EAAEH,GAAS4D,GAAG,YACpCzD,EAAEH,GAAS4D,GAAG,YAGfwN,EAAKpB,iBAAiBkC,kBAAkB/M,aAAa,sBAAA5D,OAAsBpB,EAAEH,GAAS2W,KAAK,OAAS,MAFpGvF,EAAKpB,iBAAiBkC,kBAAkB/M,aAAa,sBAAA5D,OAAsBpB,EAAEH,GAAS2W,KAAK,OAAS,QAKlG+V,EAAkBvsB,EAAEH,GAAS2W,KAAK,oBACjB,MAAnB+V,GACAtb,EAAKpB,iBAAiBqD,qBAAqBlT,EAAE,IAAAoB,OAAImrB,IAAoBD,EAAW/c,KAKxFlQ,KAAKgtB,oBAEElZ,GAOD6Y,EAAApf,UAAAwf,wBAAV,SAAkCjZ,GAAlC,IAAAlC,EAAA5R,KACI,OAAO8T,EAAS7P,KAAK,SAACuP,EAAWhT,GAGN,SADAoR,EAAKpB,iBAAiBkC,kBAAkB1E,aAAa,sBAAAjM,OAAsBpB,EAAEH,GAAS2W,KAAK,UAE9GxW,EAAEH,GAAS+mB,KAAK,WAAW,GAC3B3V,EAAKkb,eAAensB,EAAEH,IAAU,OAUlCmsB,EAAApf,UAAAsf,qBAAV,WACI,OAAO,MAMDF,EAAApf,UAAAyf,kBAAV,aA7EJL,EAiFAA,EAjFsBxX,EAAAwX,6BAA4BA,EAFtD,CAAUvtB,UAAAA,WAAS,I,wfCAnB,SAAUA,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAAC,EAAA+X,GAAA/X,EAA+C/V,EAAAmQ,oBAAA8F,UAAA6X,EAAA/X,GAEpC+X,EAAA5f,UAAA8G,QAAP,WACI,MAAO,eAGJ8Y,EAAA5f,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAAAgC,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,GACvCA,IAEAjP,EAAE,SAAU,CACRkC,GAAI,mBACJuqB,MAAO,WACH,IAAMC,EAAiBzb,EAAKpB,iBAAiBkC,kBAAkB1E,aAAa,kBACxEqf,GACA1sB,EAAEiB,QAAQuG,UAAUklB,MAI3BngB,SAASyC,GACTvK,IAAI,UAAW,QAEpBzE,EAAE,SAAU,CACRkC,GAAI,mBACJuqB,MAAO,WACHxb,EAAKpB,iBAAiBkC,kBAAkB/M,aAAa,iBAAkBhF,EAAEiB,QAAQuG,gBAGpF+E,SAASyC,GACTvK,IAAI,UAAW,QAEpBzE,EAAE,SAAU,CACRkC,GAAI,2BACJuqB,MAAO,SAAC9qB,GACEgrB,EAA4B3sB,EAAEY,SAAS4N,eAAexO,EAAE2B,EAAEgW,eAAerX,KAAK,gBACpF2Q,EAAKpB,iBAAiBd,kBAAkB4d,GAAmB,MAG9DpgB,SAASyC,GACTvK,IAAI,UAAW,QAGpB/F,EAAAe,QAAQoI,qBAAsB,IAI1C2kB,GA7CA,SAAAA,I,+CAAahY,EAAAgY,0BAAyBA,EA+CtC,IAAAI,GAEWA,EAAAhgB,UAAA8E,eAAP,SAAsB7B,GAClB,OAAInR,EAAAe,QAAQmI,aACD,IAAI4kB,EAA0B3c,GAGlC,MAGf+c,GAVA,SAAAA,KAAapY,EAAAoY,iCAAgCA,EAjDrB,EAARluB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA+DnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASoY,kC,0uBChEnC,SAAUnuB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAMqY,EACgB,GADhBA,EAEgB,IAFhBA,EAGgB,GAHhBA,EAKsB,EALtBA,EAMmB,EANnBA,EAOoB,GAPpBA,EAQiB,EAGvBC,EAAA,aAAatY,EAAAsY,eAAcA,EAmD3B,IAAArY,EAAAsY,GAAAtY,EAA+C/V,EAAAmQ,oBAAA8F,UAAAoY,EAAAtY,GAMpCsY,EAAAngB,UAAA8G,QAAP,WACI,MAAO,eAIJqZ,EAAAngB,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAKU1I,EA8BIymB,EAnCd/b,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,GACvCvQ,EAAAe,QAAQmI,cAAyD,IAAzC5H,EAAE,aAAcgP,GAAc5O,SAIpDmG,EAAWlH,KAAKsU,sBAClBjV,EAAAe,QAAQ+F,kBAAqBe,EAASsP,WACtC7V,EAAE,aAAcgP,GAAc0D,QAIjCjU,EAAkBwuB,WAAa5tB,MAC3B6a,cAAgBlL,EACrB3P,KAAK6tB,kBAAkB,KAAM,WAEc,oBAA3B3mB,EAAsB,eACD,MAA1BA,EAAS4mB,eACwB,MAAjC5mB,EAAS6mB,uBAGZptB,EAAE,iBAAkBiR,EAAKiJ,eAAexH,OACxCzB,EAAKoc,eAAe9mB,EAAS4mB,cAAe5mB,EAAS6mB,qBAAsB7mB,EAAS4mB,kBAIxF5mB,EAAS+mB,cACTttB,EAAE,kBAAkButB,UAAU,CAC1BC,QAAS,IACTC,OAAQ,SAACza,EAAOwU,GACZvW,EAAKyc,YAAY1tB,EAAEwnB,EAAG3nB,SAAS8tB,aAAed,GAC9C7sB,EAAEwnB,EAAG3nB,SAAS4E,IAAI,OAAQ,OAMrB,OADPuoB,EAAQ3tB,KAAKwQ,iBAAiBkC,kBAAkB1E,aAAa,yBAC9C2f,EAAQH,GAAgDA,EAARG,IAE3DY,GADAC,EAAc7tB,EAAE,mBACmB2tB,aAAeE,EAAYb,QACpEa,EAAYb,MAAMA,EAAQY,EAAuBf,GACjDxtB,KAAKquB,YAAYV,OASrBD,EAAAngB,UAAA8gB,YAAR,SAAoBV,GACOtuB,EAAAe,QAAQyH,yBAAyB,yBACzC2P,KAAK,8EAAAzV,OAA8E4rB,EAAK,UACvG3tB,KAAKwQ,iBAAiBkC,kBAAkB/M,aAAa,sBAAuBgoB,IAQxED,EAAAngB,UAAAygB,eAAR,SAAuBS,EAAuBC,EAA6BC,GAA3E,IAMkBC,EANlBhd,EAAA5R,KACUigB,EAAOjgB,KAAK6uB,QAAQJ,GACtBzuB,KAAK8uB,kBAAkBJ,GACG,OAAtBzO,EAAK8O,cAAqC,OAAZ9O,EAAKpd,IAEnC7C,KAAKgvB,8BAA8B/O,GAAM,GACnC2O,EAAa5uB,KAAK6uB,QAAQF,GAChC3uB,KAAKivB,4BAA4BL,EAC7B,SAAAM,GAAiB,OAAAtd,EAAKud,oBAAoBD,EAAcrsB,QAGtDmd,EAAahgB,KAAK6uB,QAAQ5O,EAAK8O,cACrC/uB,KAAKguB,eAAehO,EAAWnd,GAAImd,EAAWoP,YAAaT,IAG/D3uB,KAAK6tB,kBAAkBa,EAAqB,WACxC9c,EAAKoc,eAAeS,EAAeC,EAAqBC,MAK5DjB,EAAAngB,UAAA4hB,oBAAR,SAA4BR,GAIxB,IAFA,IAAIU,EAAervB,KAAK6uB,QAAQF,GAET,MAAhBU,GACsB,OAApBA,EAAaxsB,KAAewsB,EAAaC,IAAQD,EAAaE,YAC/DvvB,KAAKwvB,qBAAqBH,QAGH,KAD3BA,EAAervB,KAAK6uB,QAAQQ,EAAaN,iBAErCM,EAAe,MAMnBI,EAAezvB,KAAK6uB,QAAQF,GACV,MAAlBc,EAAaC,GACc,MAA3BD,EAAapP,YACoB,EAAjCoP,EAAapP,WAAWtf,QACxB0uB,EAAapP,WAAW,GAAGqP,IAAMD,EAAaC,IAE9CD,EAAeA,EAAapP,WAAW,IAE3CrgB,KAAK2vB,gBAAgBF,GAErB9uB,EAAE,iBAAkBX,KAAK6a,eAAe1V,QAMpCuoB,EAAAngB,UAAAoiB,gBAAR,SAAwB1P,GACpBA,EAAK2P,YAAa,EAClB,IAAMC,EAAQlvB,EAAE,QAAAoB,OAAQke,EAAKpd,IAAM7C,KAAK6a,eACrB,EAAfgV,EAAM9uB,QAENqS,WAAW,WACF/T,EAAAe,QAAQ4H,gBAAgB6nB,EAAM7uB,IAAI,IAAI,IACvC6uB,EAAM7uB,IAAI,GAAG8uB,iBAEjBD,EAAMzV,YAAY,cAAc,IACjC,IAOHsT,EAAAngB,UAAAwiB,WAAR,SAAmBC,GACf,OAA+B,MAAxBhwB,KAAK6uB,QAAQmB,IAMjBtC,EAAAngB,UAAAshB,QAAP,SAAemB,GACLC,EAAejwB,KAAKkwB,UAAUF,GACpC,YAA2B,IAAhBC,GAA+C,MAAhBA,EAC/BA,EAGJ,MAMJvC,EAAAngB,UAAA4iB,QAAP,SAAelQ,GACXjgB,KAAKkwB,UAAUjQ,EAAKpd,IAAMod,GAMvByN,EAAAngB,UAAA6iB,eAAP,SAAsBJ,EAAgBK,EAA2BhQ,GAAjE,IAAAzO,EAAA5R,KAEQigB,EAAOjgB,KAAK6uB,QAAQmB,GAEZ,MAAR/P,KACAA,EAAO,IAAIwN,GACN5qB,GAAKmtB,EACM,OAAZ/P,EAAKpd,KACLod,EAAKqP,GAAK,MAEdtvB,KAAKmwB,QAAQlQ,IAGjBA,EAAKmP,YAAciB,EAEnBpQ,EAAKI,WAAa1f,EAAEyR,IAAIiO,EACpB,SAACiQ,GACG,IAAMC,EAAc3e,EAAKid,QAAQyB,EAAaztB,IAC9C,OAAmB,MAAf0tB,EAOOD,EALS1b,SAAAA,SAAA,GAAK2b,GAAgBD,KASjD3vB,EAAEsD,KAAKgc,EAAKI,WACR,SAACnc,EAAessB,GACZA,EAAUzB,aAAe9O,EAAKpd,GAC9B+O,EAAKue,QAAQK,MAIL,OAAZvQ,EAAKpd,IAA4C,oBAArBod,EAAK8O,cAA+B/uB,KAAK+vB,WAAW9P,EAAK8O,gBACrF/uB,KAAKgvB,8BAA8B/O,IAOnCyN,EAAAngB,UAAAsgB,kBAAR,SAA0BuB,EAAqBqB,GAA/C,IAAA7e,EAAA5R,KACIX,EAAAe,QAAQgD,WAAW,UAAArB,OAAUqtB,EAAW,OACpC,MAAArtB,OAAMqtB,GACN,KACA,WACIxd,EAAKkd,kBAAkBM,IAAe,EACb,MAArBqB,GACAA,EAAkBrB,MAS1B1B,EAAAngB,UAAAyhB,8BAAR,SAAsC/O,EAAsByQ,GAA5D,IAAA9e,EAAA5R,KAEI,QAFwD,IAAA0wB,IAAAA,GAAA,GAEnDzQ,EAAKqP,IAAyB,MAAnBrP,EAAKI,WAArB,CAKA,IAAKJ,EAAK0Q,YAAa,CAEnB,IACIC,EADEC,EAAW7wB,KAAKsU,qBAGlB0L,EAAqB,KAEzB,GAAgB,OAAZC,EAAKpd,GACL+tB,EAAOjwB,EAAE,aAAcX,KAAK6a,mBACzB,CAEH,IAAMkU,EAAe,QAAAhtB,OAAQke,EAAKpd,IAElC,GAA0B,KAD1Bmd,EAAarf,EAAEouB,EAAc/uB,KAAK6a,gBACnB9Z,OAEX,OAEJ6vB,EAAOjwB,EAAE,SAGbA,EAAEsD,KAAKgc,EAAKI,WACR,SAACnc,EAAessB,GAEZ,IAAMxe,EAAiBwe,EAAUnlB,EAE3BylB,EAAcnwB,EAAE,QAAS,CAAEkC,GAAI,OAAAd,OAAOyuB,EAAU3tB,MACjD5B,KAAK,UAAWuvB,EAAU3tB,IAE3BmP,GACA8e,EAAYve,SAAS,YAGzB,IAyBUwe,EAzBJC,EAAcrwB,EAAE,SAClB,CAEIswB,QAAUT,EAAUlB,GAAK,uCAAyC,aAErElX,GAAG,mBACA,SAACC,GAGG,OAFAA,EAAY6Y,cAAe,EAEpBtf,EAAKuf,mBAAmB9Y,EAAYC,eAA0B,KAG3E8Y,EAAgBzwB,EAAE,QACnB6W,KAAKgZ,EAAUa,GACfla,KAAK,OAAuB,MAAfqZ,EAAUd,EAAYc,EAAUd,EAAI,KACjDtX,GAAG,mBACA,SAACC,GAGG,OAFAA,EAAY6Y,cAAe,EAEpBtf,EAAKuf,mBAAmB9Y,EAAYC,eAA0B,KAGjFwY,EAAY/oB,OAAOipB,GAEfH,EAASS,gBAELC,EADER,EAAmC,MAAfP,EAAU7pB,GAAa,EAAI6pB,EAAU7pB,EAG3D6pB,EAAUlB,GACNyB,GAAa,IAETQ,EADAvf,EACiBwb,EAEAA,GAIrBuD,GAAa,IAETQ,EADAvf,EACiBwb,EAEAA,GAKvBgE,EAAe7wB,EAAE,8BAClB4R,SAAS,UAAAxQ,OAAUwvB,IAExBT,EAAY/oB,OAAOypB,IAGvBV,EAAY/oB,OAAOqpB,GACnBR,EAAK7oB,OAAO+oB,KAGF,MAAd9Q,EACAA,EAAWjY,OAAO6oB,GAElBA,EAAKre,SAAS,aAIlB0N,EAAK0Q,aAAc,EAGnBD,GAA8B,MAAnBzQ,EAAKI,YAChB1f,EAAEsD,KAAKgc,EAAKI,WACR,SAACnc,EAAessB,GACZ5e,EAAKod,8BAA8BwB,GAAW,OAQtD9C,EAAAngB,UAAA4jB,mBAAR,SAA2B3wB,EAAkBixB,GAA7C,IAAA7f,EAAA5R,KACUkb,EAAWva,EAAEH,GAASsE,OAAO,MAC7Bmb,EAAOjgB,KAAK6uB,QAAQ3T,EAASja,KAAK,YACxC,GAAc,MAAVgf,EAAKyP,GAAc+B,GAEhB,GAAe,MAAXxR,EAAKqP,GAMZ,OALAtvB,KAAKivB,4BAA4BhP,EAAM,SAAAiP,GAEnCtd,EAAK4d,qBAAqBN,MAGvB,OAPP7vB,EAAAe,QAAQ8B,WAAW+d,EAAKyP,GAAG,GAU/B,OAAO,GAMHhC,EAAAngB,UAAA0hB,4BAAR,SAAoChP,EAAsByR,GACtD,GAAIzR,EAAKqP,GAAI,CACT,IAAKrP,EAAKI,WAMN,YAJArgB,KAAK6tB,kBAAkB5N,EAAKqP,GAAI,WAC5BoC,EAAezR,KAKdA,EAAK0Q,aAGN3wB,KAAKgvB,8BAA8B/O,GAI/CyR,EAAezR,IAMXyN,EAAAngB,UAAAiiB,qBAAR,SAA6BvP,GACzB,IAMUuR,EANJG,EAAShxB,EAAE,QAAAoB,OAAQke,EAAKpd,GAAE,UAAU7C,KAAK6a,eAC/C8W,EAAOvX,YAAY,uBACnBuX,EAAOC,SAAS,MAAMxX,YAAY,aAE9Bpa,KAAKsU,qBAAqBgd,iBAEpBE,EAAe7wB,EAAE,QAAAoB,OAAQke,EAAKpd,GAAE,cAAc7C,KAAK6a,gBAChDha,SAAS,YACd2wB,EAAKlU,YAAY,YAAY/K,SAAS,YAC/Bif,EAAK3wB,SAAS,YACrB2wB,EAAKlU,YAAY,YAAY/K,SAAS,YAC/Bif,EAAK3wB,SAAS,YACrB2wB,EAAKlU,YAAY,YAAY/K,SAAS,YAC/Bif,EAAK3wB,SAAS,aACrB2wB,EAAKlU,YAAY,YAAY/K,SAAS,aAI9C0N,EAAKsP,WAAaoC,EAAO9wB,SAAS,eAG9B6sB,EAAAngB,UAAAmN,mBAAR,WACI,MAAO,CACHqT,qBAAsB,KACtBD,cAAe,KACfwD,eAAe,EACf9a,WAAW,EACXyX,aAAa,IAIbP,EAAAngB,UAAA+G,mBAAR,WACI,OAAOtU,KAAKwQ,iBAAiB8D,mBAA+C,aAActU,KAAK0a,qBAGvGgT,GAtaA,SAAAA,IAAA,IAAA9b,EAAA,OAAAwD,GAAAA,EAAAoE,MAAAxZ,KAAAyZ,YAAAzZ,K,OAEY4R,EAAAse,UAA4C,GAC5Cte,EAAAkd,kBAA6C,G,EAH5C3Z,EAAAuY,0BAAyBA,EAgbtC,IAAAmE,GAEWA,EAAAtkB,UAAA8E,eAAP,SAAsB7B,GAClB,IAAKnR,EAAAe,QAAQ+F,iBACT,OAAO,IAAIunB,EAA0Bld,IAIjDqhB,GARA,SAAAA,KAAa1c,EAAA0c,iCAAgCA,EAhfrB,EAARxyB,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA4fnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAAS0c,kC,wfC7fnC,SAAUzyB,GAAU,IAAAC,GAAQ,SAAA8V,GAExB,IAAM2c,EACc,IADdA,EAEqB,IAG3BC,GAgBWA,EAAAxkB,UAAA0U,cAAP,WAAA,IAAArQ,EAAA5R,KAGUgyB,EAAcrxB,EAAE,OAAQ,CAAEyB,KAAM,IAAAL,OAAI/B,KAAKiyB,cAC1C/nB,KAAKlK,KAAKkyB,aACV9Z,GAAG,oBAAqB,WACrB,IASc+Z,EATRva,EAAchG,EAAKwgB,gBAErBzxB,EAAEiX,GAAa/W,SAAS,sBAMQ,GAH1BwxB,EAAqB1xB,EAAEiX,GACxBwN,KAAK,sBACLvP,YACkB9U,SACboxB,EAAoBE,EAAmBrxB,IAAI,GACxB3B,EAAAe,QAAQG,oBAAoB4xB,GACpCpiB,qBAAqBoiB,GAEtC/e,WAAW,WACPwE,EAAYkY,gBAAe,GAC3Ble,EAAK0gB,wBACNR,IAIQ,MAAfla,IAGyBvY,EAAAe,QAAQG,oBAAoBqX,GACpC7H,qBAAqB6H,GAEtCxE,WAAW,WACPwE,EAAYkY,gBAAe,GAC3Ble,EAAK0gB,wBACNR,MAKf9xB,KAAKuyB,WAAalzB,EAAAe,QAAQoG,cAC1B,IAOUgsB,EAPJC,EAAkB9xB,EAAE,SACrBwW,KAAK,KAAMnX,KAAKuyB,YAChBhgB,SAAS,mBAAAxQ,OAAmB/B,KAAK0yB,eACjC3qB,OAAOiqB,GAYZ,OAVgC,EAA5BhyB,KAAK2yB,cAAc5xB,SAEbyxB,EAAY7xB,EAAE,SAAS4R,SAAS,mCAAAxQ,OAAmC/B,KAAK0yB,eAC9E/xB,EAAEsD,KAAKjE,KAAK2yB,cACR,SAACzuB,EAAe0uB,GACZJ,EAAUzqB,OAAO6qB,EAAa3Q,mBAEtCwQ,EAAgB1qB,OAAOyqB,IAGpBC,GAIJV,EAAAxkB,UAAA+kB,qBAAP,WACoBtyB,KAAK6yB,kBAAkB1e,iBAAiB,iBAChD2e,qBAGLf,EAAAxkB,UAAAwlB,aAAP,WACI,OAAO1zB,EAAAe,QAAQ4H,gBAAgBhI,KAAKoyB,gBAAiBpyB,KAAKgzB,mBAGvDjB,EAAAxkB,UAAA0lB,oBAAP,SAA2BhjB,GACvBtP,EAAE,IAAAoB,OAAI/B,KAAKuyB,aAAcnY,YAAY,wBAAyBnK,IAEtE8hB,GA5EI,SAAAA,EAAYvhB,GARLxQ,KAAA0yB,aAAe,EACf1yB,KAAA2yB,cAAsC,GAQzC3yB,KAAK6yB,kBAAoBriB,EAbpB2E,EAAA4c,mBAAkBA,EA0F/B,IAAA3c,EAAA8d,GAAA9d,EAAgD/V,EAAAmQ,oBAAA8F,UAAA4d,EAAA9d,GAIrC8d,EAAA3lB,UAAA8G,QAAP,WACI,MAAO,iBAIJ6e,EAAA3lB,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAAAgC,EAAA5R,KAEI,QAF2C,IAAA4P,IAAAA,GAAA,IAEvCvQ,EAAAe,QAAQmI,cAAyE,IAAzD5H,EAAE,6BAA8BgP,GAAc5O,OAA1E,CAIIoyB,EAA8B,KAE5BC,EAAkBpzB,KAAKsU,qBAC7B,GAAuB,MAAnB8e,EAAyB,CACzB,IAAKA,EAAgBC,YACjB,OAIJ,GADAF,EAAsBC,EAAgBE,aACjCF,EAAgB5c,UAGjB,YAFA7V,EAAE,8BAA8B0S,OAMxC,IAAMkgB,EAAmC,GAEd,MAAvBJ,IACAA,EAAsB,+BAEpBK,EAAc7yB,EAAEwyB,GAEtBnzB,KAAKyzB,cAAgB,GAErBD,EAAYvvB,KAAK,SAACuP,EAAWhT,GAEzB,IAAMkzB,EAAc/yB,EAAEH,GAChBuE,EAAUvE,EAAQuE,QAElB4uB,EAAqB,IAAI5B,EAAmBngB,EAAKpB,kBACvDmjB,EAAmBvB,eAAiB5xB,EAIb,IAAnBuE,EAAQhE,QAA4C,MAA5BgE,EAAQuF,UAAU,EAAG,GAC7CqpB,EAAmBjB,aAAevyB,SAAS4E,EAAQuF,UAAU,GAAI,IAE7DopB,EAAY7yB,SAAS,uBACrB8yB,EAAmBjB,aAAe,EAGC,GAD7BkB,EAAwBF,EAAY5uB,OAAO,uBACvB/D,SAEa,GAD7B8yB,EAAwBD,EAAsB1J,KAAK,uBAC/BnpB,SAGD,OAFf+yB,EACAliB,EAAKmiB,uBAAuBniB,EAAK6hB,cAAeI,EAAsB7yB,IAAI,OAE5E2yB,EAAmBjB,aAAeoB,EAAcpB,aAAe,KAI3EiB,EAAmBX,kBAAmB,GAK9CW,EAAmBzB,aAAcyB,EAAmBX,iBAC9CU,EAAY7d,SAAS,2BAClBC,QAEH4d,GADGxpB,OAIT,IAAI+nB,EAAa,aAAAlwB,OAAa4xB,EAAmBzB,YAAYjwB,QAAQ,iBAAkB,KAAKrC,eAE5F,GAA2B,MAAvB2zB,EAAQtB,GACR,IAAK,IAAI7qB,EAAI,EAAGA,EAAI0qB,EAA4C1qB,IAC5D,GAAqC,MAAjCmsB,EAAQ,GAAAxxB,OAAGkwB,EAAU,KAAAlwB,OAAIqF,IAAc,CACvC6qB,EAAa,GAAAlwB,OAAGkwB,EAAU,KAAAlwB,OAAIqF,GAC9B,MAKZmsB,EAAQtB,IAAc,EACtB0B,EAAmB1B,WAAaA,EAGhC,IAAM+B,EACFpiB,EAAKqiB,6BAA6B,KAAMriB,EAAK6hB,cAAeE,EAAmBjB,eAEnD,MAA5BsB,EAEApiB,EAAK6hB,cAGLO,EAAyBrB,eAHN9oB,KAAK8pB,GAO5BD,EAAYQ,QAAQvzB,EAAE,OAAQ,CAAEV,KAAM0zB,EAAmB1B,gBAI7D,IAAMkC,EAAsBxzB,EAAE,SACzB4R,SAAS,wCAEVvS,KAAKsU,qBAAqB8f,+BAC1BD,EAAY5hB,SAAS,iDAGzB5R,EAAEsD,KAAKjE,KAAKyzB,cACR,SAACjgB,EAAWmgB,GAEFnzB,EAAUmzB,EAAmB1R,gBACnCkS,EAAYpsB,OAAOvH,KAKK,EAA5BR,KAAKyzB,cAAc1yB,QACnBJ,EAAE,8BAA8BoH,OAAOosB,GAEvCxzB,EAAEiB,QACGuW,IAAI,sBACJC,GAAG,qBACA,WACIxG,EAAKkhB,sBAEZ3a,IAAI,sBACJC,GAAG,qBACA,WACIxG,EAAKkhB,sBAGjB1f,WAAW,WAAM,OAAAxB,EAAKkhB,qBAAqB,IAE3CnyB,EAAE,8BAA8B0S,SAKjC6f,EAAA3lB,UAAAulB,kBAAP,WACI9yB,KAAKq0B,kBAAkB,KAAMr0B,KAAKyzB,gBAG9BP,EAAA3lB,UAAA8mB,kBAAR,SAA0BvvB,EAA4BwvB,GAAtD,IAAA1iB,EAAA5R,KACoB,MAAZs0B,IACAA,EAAWt0B,KAAKyzB,eAGpB,IAAIlxB,GAAc,EAelB,OAbc,MAAVuC,IACAvC,EAAcuC,EAAOiuB,gBAGzBpyB,EAAEsD,KAAKqwB,EACH,SAAC9gB,EAAW+gB,GACRhyB,EAAeqP,EAAKyiB,kBAAkBE,EAASA,EAAQ5B,gBAA4B,MAAV7tB,GAAmBvC,IAGtF,MAAVuC,GACAA,EAAOmuB,oBAAoB1wB,GAGxBA,GAGH2wB,EAAA3lB,UAAAmN,mBAAR,WACI,MAAO,CACH0Z,+BAA+B,EAC/Bd,YAAa,KACb9c,WAAW,EACX6c,aAAa,IAIdH,EAAA3lB,UAAA+G,mBAAP,WACI,OAAOtU,KAAKwQ,iBAAiB8D,mBAAgD,cAAetU,KAAK0a,qBAG7FwY,EAAA3lB,UAAAwmB,uBAAR,SAA+BO,EAAgCC,GAC3D,GAAgB,MAAZD,GAAwC,IAApBA,EAASvzB,OAC7B,OAAO,KAGX,IAA2B,IAAAkgB,EAAA,EAAAuT,EAAAF,EAAArT,EAAAuT,EAAAzzB,OAAAkgB,IAAU,CAAhC,IAAM2R,EAAY4B,EAAAvT,GACnB,GAAI2R,EAAaR,iBAAmBmC,EAChC,OAAO3B,EAEL/yB,EAAQG,KAAK+zB,uBAAuBnB,EAAaD,cAAe4B,GACtE,GAAa,MAAT10B,EACA,OAAOA,EAIf,OAAO,MAGHqzB,EAAA3lB,UAAA0mB,6BAAR,SACInvB,EACAwvB,EACA5B,GAEA,GAAc,MAAV5tB,GAAkBA,EAAO4tB,eAAiBA,EAAe,EAEzD,OAAO5tB,EAGL2vB,EAA8B,EAAlBH,EAASvzB,OACrBuzB,EAASA,EAASvzB,OAAS,GAC3B,KAEN,GAAiB,MAAb0zB,EAEA,OAAO,KAEDC,EAAmC10B,KAAKi0B,6BAA6BQ,EACvEA,EAAU9B,cACVD,GACJ,OAAoB,MAAhBgC,EACOA,EAIHD,EAAU/B,cAAgBA,EAAe,EAClC+B,EAKZ,MAEfvB,GAhPA,SAAAA,IAAA,IAAAthB,EAAA,OAAAwD,GAAAA,EAAAoE,MAAAxZ,KAAAyZ,YAAAzZ,K,OAEY4R,EAAA6hB,cAAsC,K,EAFrCte,EAAA+d,2BAA0BA,EAyPvC,IAAAyB,GAEWA,EAAApnB,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAI0iB,EAA2B1iB,IAG9CmkB,GAPA,SAAAA,KAAaxf,EAAAwf,kCAAiCA,EA1VtB,EAARt1B,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAqWnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASwf,mC,wfCtWnC,SAAUv1B,IAAkB,SAAA+V,GAExB,IAIAC,EAJMwf,EACe,EAGrBC,GAAAzf,EAAmDD,EAAAwX,6BAAArX,UAAAuf,EAAAzf,GASxCyf,EAAAtnB,UAAA8G,QAAP,WACI,MAAO,mBAGJwgB,EAAAtnB,UAAAsf,qBAAP,WACI,MAAO,8BAIJgI,EAAAtnB,UAAAmC,kBAAP,SAAyBC,EAAsBC,QAAA,IAAAA,IAAAA,GAAA,GAGrBjP,EAAE,mBAAoBgP,GAC9B1L,KAAK,SAACuP,EAAWhT,GACrBuoB,EAAepoB,EAAEH,GACmC,EAAtDG,EAAE,4BAA6BooB,GAAchoB,QAC7CJ,EAAE,QAAS,CAAEkC,GAAI,iBAAkBouB,QAAO,WACrClpB,OAAOpH,EAAE,eAAgBooB,IACzBhhB,OAAO,UACPA,OAAOpH,EAAE,oBAAqBooB,IAC9B7b,SAAS6b,KAItB3T,EAAA7H,UAAMmC,kBAAiBolB,KAAA90B,KAAC2P,IAIlBklB,EAAAtnB,UAAAuf,eAAV,SAAyBtsB,EAAiB0P,QAAA,IAAAA,IAAAA,GAAA,GAEtC,IAAMP,EAAe3P,KAAKwQ,iBAAiBb,aAK3C,GAAoC,IAFdhP,EAAE,IAAAoB,OAAI/B,KAAK6sB,yBACU1H,OAAO,YACzBpkB,OAGrB,OAFAP,EAAQ+mB,KAAK,WAAW,GAEjB5mB,IAIX,IAAMypB,EAAShV,EAAA7H,UAAMuf,eAAcgI,KAAA90B,KAACQ,EAAS0P,GACvC+c,EAAYzsB,EAAQ4D,GAAG,YAEvB8oB,EAA0B1sB,EAAQ2W,KAAKnX,KAAK+0B,2BAoBlD,OAhBI7H,IAAoB,GAAAnrB,OAAG/B,KAAKg1B,gCAA+B,YACxD9H,IAAoB,GAAAnrB,OAAG/B,KAAKg1B,gCAA+B,QAExDC,EACAtlB,EAAalG,KAAK,IAAA1H,OAAI/B,KAAK6sB,uBAAsB,6BAA4BzoB,GAAG,YAChF8wB,EACAvlB,EAAalG,KAAK,IAAA1H,OAAI/B,KAAK6sB,uBAAsB,kCAAiCzoB,GAAG,cAEtF6oB,GAAegI,GAAeC,KAC1BjI,GAAcgI,GAAgBC,IAEnCl1B,KAAKwQ,iBAAiBqD,qBAClBlE,EAAalG,KAAK,IAAA1H,OAAI/B,KAAKg1B,gCAA+B,UAAU/H,EAAW/c,IAIpFka,GAIDyK,EAAAtnB,UAAAyf,kBAAV,WAGI,IAAImI,EAAsB,KACpBC,EAAgBz0B,EAAE,IAAAoB,OAAI/B,KAAK6sB,yBAC3BwI,EAAuBD,EAAcjQ,OAAO,YAC5CmQ,EAAY30B,EAAE,GAAAoB,OAAG/B,KAAKu1B,cAAa,WAErCF,EAAqBt0B,SAAWq0B,EAAcr0B,OAE9Co0B,EAAcx0B,EAAE,GAAAoB,OAAG/B,KAAKu1B,cAAa,KAAAxzB,OAAI/B,KAAKw1B,oBACP,IAAhCH,EAAqBt0B,SAM5Bo0B,EAHuC,IAAhCE,EAAqBt0B,QAEtB00B,EAAeJ,EAAqBle,KAAKnX,KAAK01B,4BAEhD/0B,EAAE,GAAAoB,OAAG/B,KAAKu1B,cAAa,KAAAxzB,OAAI/B,KAAK21B,8BAA4B5zB,OAAG0zB,EAAY,KAAA1zB,OAAI/B,KAAKu1B,cAAa,QAAAxzB,OACtF0zB,EAAY,YAGvBJ,EAAqBt0B,SAAW6zB,GAC7BS,EAAqBlQ,OACpB,IAAApjB,OAAI/B,KAAK01B,2BAA0B,YAAW30B,SAAW6zB,EAG/Cj0B,EAAE,GAAAoB,OAAG/B,KAAKu1B,cAAa,KAAAxzB,OAAI/B,KAAK21B,6BAA4B,UAE5Dh1B,EAAE,GAAAoB,OAAG/B,KAAKu1B,cAAa,KAAAxzB,OAAI/B,KAAK21B,6BAA4B,cAIlFL,EAAUlwB,IAAI,UAAW,QAEN,MAAf+vB,GACAA,EAAY/vB,IAAI,UAAW,WAKvCyvB,GAvHA,SAAAA,IAAA,IAAAjjB,EAAA,OAAAwD,GAAAA,EAAAoE,MAAAxZ,KAAAyZ,YAAAzZ,K,OAEqB4R,EAAA2jB,cAAgB,qBAChB3jB,EAAA4jB,kBAAoB,8BACpB5jB,EAAA+jB,6BAA+B,2BAC/B/jB,EAAA8jB,2BAA6B,oBAC7B9jB,EAAAojB,gCAAkC,sBAClCpjB,EAAAmjB,0BAA4B,mB,EAPpC5f,EAAA0f,8BAA6BA,EAyH1C,IAAAe,GAEWA,EAAAroB,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAIqkB,EAA8BrkB,IAGjDolB,GAPA,SAAAA,KAAazgB,EAAAygB,qCAAoCA,EA/HzB,EAARv2B,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA0InBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAASygB,sC,wfC3InC,SAAUx2B,IAAkB,SAAA+V,GAExB,IAAAC,EAAAygB,GAAAzgB,EAAiDD,EAAAwX,6BAAArX,UAAAugB,EAAAzgB,GAEtCygB,EAAAtoB,UAAA8G,QAAP,WACI,MAAO,iBAGDwhB,EAAAtoB,UAAAsf,qBAAV,WACI,MAAO,4BAGDgJ,EAAAtoB,UAAAyf,kBAAV,WACI,IAAMrd,EAAe3P,KAAKwQ,iBAAiBb,aACrCmmB,GAAcn1B,EAAE,yBAAyByD,GAAG,cAAgBzD,EAAE,yBAAyByD,GAAG,YAChGuL,EAAalG,KAAK,kBAAkBrE,IAAI,UAAW0wB,EAAa,OAAS,UACzEnmB,EAAalG,KAAK,uBAAuBrE,IAAI,UAAW0wB,EAAa,SAAW,SAGxFD,GAjBA,SAAAA,I,+CAAa1gB,EAAA0gB,4BAA2BA,EAmBxC,IAAAE,GAEWA,EAAAxoB,UAAA8E,eAAP,SAAsB7B,GAElB,OAAO,IAAIqlB,EAA4BrlB,IAG/CulB,GAPA,SAAAA,KAAa5gB,EAAA4gB,mCAAkCA,EArBvB,EAAR12B,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IAgCnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAAS4gB,oC,ICjCzB32B,U,wfAAV,SAAUA,GAAU,IAAAC,EAAQ22B,GAAR32B,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC22B,WAAA32B,EAAA22B,SAAQ,IAChCC,EAAA,aAAaD,EAAAC,cAAaA,EAM1BC,EAAA,aAAaF,EAAAE,qBAAoBA,EAMjCC,EAAA,aAAaH,EAAAG,kBAAiBA,EAblC,CAAU/2B,UAAAA,WAAS,IAqBnB,SAAUA,GAAU,IAAAC,GAAQ,SAAA8V,GAEXA,EAAAihB,iBAAmB,CAC5BC,qBAAsB,KAG1B,IAAAjhB,EAAAkhB,GAAAlhB,EAA6C/V,EAAAmQ,oBAAA8F,UAAAghB,EAAAlhB,GAElCkhB,EAAA/oB,UAAA8G,QAAP,WACI,MAAO,YAGJiiB,EAAA/oB,UAAAgD,yBAAP,WAEI,OAAQ,GAGL+lB,EAAA/oB,UAAAmC,kBAAP,SAAyBC,EAAsBC,GAA/C,IAAAgC,EAAA5R,UAA+C,IAAA4P,IAAAA,GAAA,GAEvCvQ,EAAAe,QAAQmI,cAAgBlJ,EAAAe,QAAQ+F,mBAIhCyJ,EAEKxQ,EAAkB8H,SAASqvB,SAAS/f,WAClCnX,EAAA22B,SAASC,eACT52B,EAAA22B,SAASC,cAAcO,uBAC1B71B,EAAEsD,KAAK5E,EAAA22B,SAASC,cAAcO,sBAC1B,SAACtyB,EAAe2S,GAEPzX,EAAkB8H,SAASqvB,SAAS1f,EAAKhU,KACL,EAAjCgU,EAAK4f,mBAAmB11B,QACxB6Q,EAAK8kB,mCAAmC7f,KAQjC,GADrB8f,EAAgBhnB,EAAalG,KAAK,wBACtB1I,QACd41B,EAAc1yB,KAAK,SAACuP,EAAWojB,GAC3BhlB,EAAKilB,iBAAiBl2B,EAAEi2B,GAAqBzf,KAAK,wBAAyBxW,EAAEi2B,QAOrFN,EAAA/oB,UAAAspB,iBAAR,SAAyBC,EAAgCC,GAAzD,IAOUC,EAKAC,EAEAC,EAdVtlB,EAAA5R,KACiD,MAAzC+2B,EAAa5f,KAAK,sBAItB4f,EAAa5f,KAAK,mBAAoB,QAEhC6f,EACA33B,EAAA22B,SAASC,cAAcO,sBAAsBrR,OAC3C,SAACtO,GAAwC,OAAAA,EAAKhU,KAAOi0B,IAAwB,GAG/EG,EAAoB73B,EAAkB8H,SAASqvB,SAASS,EAAqBn0B,IAAIs0B,UAEjFD,EAAWv2B,EAAEyR,IAAI4kB,EAAqBP,mBACxC,SAAC5f,GACG,IAYcugB,EAZRC,EAAY,GAAAt1B,OAAGi1B,EAAqBn0B,GAAE,KAAAd,OAAI8U,EAAKhU,IAC/Cy0B,EAAe32B,EAAE,oCAAAoB,OAAoCs1B,EAAS,MAAMN,GAEtElgB,EAAKhU,KAAOo0B,EAEZK,EAAa/kB,SAAS,gBAMF,OAHdglB,EACA3lB,EAAK4lB,wBAAwB3gB,EAAMxX,EAAA22B,SAASC,cAAcsB,aAAcP,EAAqBn0B,MAEtD,KAAjB00B,GAClBH,EAAYG,EACb52B,EAAEyL,KAAK,CACRqrB,KAAM,OACNt1B,IAAKi1B,EACLM,SAAU,SAACC,GACP,IAEUC,EAFS,IAAfD,EAAI/rB,QAAgB+rB,EAAI/rB,OAASuJ,EAAAihB,iBAAiBC,sBAClDiB,EAAa/kB,SAAS,iBAChBqlB,EAAUj3B,EAAE,UACVwW,KAAK,SAAU,SAEwB,YAA3B2f,EACdjgB,EAECzX,EAAkB8H,UAFd2wB,YAaPD,EAAQzgB,KAAK,OAAQigB,IAPfU,EAAgBlmB,EAAK4lB,wBACvB3gB,EACAxX,EAAA22B,SAASC,cAAc6B,cACvBd,EAAqBn0B,IACzB+0B,EAAQzgB,KAAK,OAAQ2gB,IAKzBF,EAAQ1tB,KAAKotB,EAAaptB,QAC1BotB,EAAaS,QAAQhwB,OAAO6vB,IAE5BN,EAAa/kB,SAAS,qBAMlC+kB,EAAa/kB,SAAS,mBAKjC7R,OAAOs3B,KAAKd,GACZe,OAAO,gBAKR3B,EAAA/oB,UAAAiqB,wBAAR,SACIU,EACAC,EACAC,GAEA,OAAOD,EAAYl2B,QAAQ,aAAc,SAACpC,GACtC,OAAQA,EAAMD,eACV,IAAK,mBACD,OAAOP,EAAAe,QAAQgB,kBAAkBkY,SAAS9R,MAAM,KAAK6wB,MACzD,IAAK,aAED,IAAMC,EAAUl5B,EAAkB8H,SAASqvB,SAAS+B,OAAOnB,UAC3D,MAAe,MAAXmB,EACO,GAEA,IAAAv2B,OAAIu2B,GAEnB,QACUC,EAAuB14B,EAAMoC,QAAQ,MAAO,IAAIrC,cAWtD,OATI24B,IAAiBH,EAETF,EAAkBr1B,GAIjBzD,EAAkB8H,SAASqvB,SAASgC,GAAcpB,cASvEb,EAAA/oB,UAAAirB,0BAAR,WAEI,IAAM70B,EAAYvE,EAAkB8H,SAASqvB,SAASkC,eACtD,OAAI90B,GAGO,sBAIP2yB,EAAA/oB,UAAAmpB,mCAAR,SAA2CM,GACvC,IAAMn0B,EAAK,aAAAd,OAAai1B,EAAqBn0B,IAEvCo0B,EAAoB73B,EAAkB8H,SAASqvB,SAASS,EAAqBn0B,IAAIs0B,UAEjFuB,EAAa/3B,EAAEX,KAAKw4B,6BAEpBG,EAAQh4B,EAAE,sDAChBg4B,EAAMxhB,KAAK,mBAAoB6f,EAAqB4B,SACpDD,EAAMzuB,KAAK8sB,EAAqB4B,SAChCD,EAAMxhB,KAAK,2BAA4B,IAAApV,OAAIc,IAE3C,IAAMg2B,EAAcl4B,EAAE,qDACtBk4B,EAAY1hB,KAAK,uBAAwB6f,EAAqBn0B,IAC9Dg2B,EAAY1hB,KAAK,KAAMtU,GAEvB,IAAMi2B,EAAen4B,EAAE,SAgBvB,OAfAA,EAAEsD,KAAK+yB,EAAqBP,mBACxB,SAACvyB,EAAe2S,GACZ,IAAMkiB,EAAep4B,EAAE,gCACnBs2B,IAAqBpgB,EAAKhU,IAC1Bk2B,EAAaxmB,SAAS,qBAE1BwmB,EAAa5hB,KAAK,kBAAmB,GAAApV,OAAGi1B,EAAqBn0B,GAAE,KAAAd,OAAI8U,EAAKhU,KACxEk2B,EAAa7uB,KAAK2M,EAAK+hB,SACvBE,EAAa/wB,OAAOgxB,KAE5BF,EAAY9wB,OAAO+wB,GAEnBJ,EAAW3wB,OAAO4wB,GAClBD,EAAW3wB,OAAO8wB,GAEXF,GAGHrC,EAAA/oB,UAAAmN,mBAAR,WACI,MAAO,CACHlE,WAAW,IAIZ8f,EAAA/oB,UAAA+G,mBAAP,WACI,OAAOtU,KAAKwQ,iBAAiB8D,mBAA6C,WAAYtU,KAAK0a,qBAGnG4b,GAhNA,SAAAA,I,+CAAanhB,EAAAmhB,wBAAuBA,EAsNpC,IAAA0C,GAEWA,EAAAzrB,UAAA8E,eAAP,SAAsB7B,GAElB,GAAKpR,EAAkB8H,SAASqvB,SAAS/f,WAClCnX,EAAA22B,SAASC,eACT52B,EAAA22B,SAASC,cAAcO,sBAE1B,OAAO,IAAIF,EAAwB9lB,IAI/CwoB,GAZA,SAAAA,KAAa7jB,EAAA6jB,+BAA8BA,EA5NnB,EAAR35B,EAAAD,EAAAC,UAAAD,EAAAC,QAAO,KAAC8V,WAAA9V,EAAA8V,SAAQ,KAApC,CAAU/V,UAAAA,WAAS,IA4OnBA,UAAUC,QAAQoR,6BAA6BC,+BAC3C,IAAItR,UAAUC,QAAQ8V,SAAS6jB","file":"innovasys.min.js","sourcesContent":["/* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\nnamespace Innovasys.Content {\r\n\r\n    const browserInfoConstants = {\r\n        minHeightChange: 10,\r\n        ie7Version: 7\r\n    };\r\n\r\n    export class BrowserInfo {\r\n        public name: string;\r\n        public version: number;\r\n        constructor() {\r\n            const ua = BrowserInfo.getUserAgent().toLowerCase();\r\n            const match: any = /(chrome)[ /]([\\w.]+)/.exec(ua) ||\r\n                /(webkit)[ /]([\\w.]+)/.exec(ua) ||\r\n                /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) ||\r\n                /(msie) ([\\w.]+)/.exec(ua) ||\r\n                ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\r\n                [];\r\n            this.name = match[1] || \"\";\r\n            const versionIndex = 2;\r\n            this.version = parseInt(match[versionIndex] || \"0\", 10);\r\n        }\r\n\r\n        /**\r\n         * Returns the current user agent string\r\n         */\r\n        public static getUserAgent(): string {\r\n            return navigator.userAgent;\r\n        }\r\n    }\r\n\r\n    export interface ILocationInfo {\r\n        href: string;\r\n        protocol: string;\r\n        search?: string;\r\n        hash?: string;\r\n        hostname?: string;\r\n        pathname?: string;\r\n    }\r\n\r\n    export class Browser {\r\n        /** Indicates that we are running in a design time environment (i.e. the editor) */\r\n        public static isDesignTime = false;\r\n        /** Indicates that animations should be disabled */\r\n        public static isAnimationDisabled = false;\r\n        /** Provides access to more information about the browser agent etc. */\r\n        public static info = new BrowserInfo();\r\n        /** Index for dynamically loaded stylesheets */\r\n        public static dynamicallyLoadedFileIndex = 0;\r\n\r\n        private static readonly _idCharacters = \"_0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\".split(\"\");\r\n\r\n        /**\r\n         * Return Microsoft Internet Explorer (major) version number, or 0 for others.\r\n         */\r\n        public static msIeVersion(): number {\r\n            if (Browser.info.name === \"msie\") {\r\n                // is Microsoft Internet Explorer; return version number\r\n                return Browser.info.version;\r\n            } else {\r\n                return 0;    // is other browser\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get a document instance from a given page element.\r\n         */\r\n        public static getDocumentInstance<TDocument extends Document>(element: JQuery | HTMLElement): TDocument {\r\n            let elementSelector: JQuery;\r\n            if (!(element instanceof jQuery)) {\r\n                elementSelector = $(element);\r\n            } else {\r\n                elementSelector = element as JQuery;\r\n            }\r\n            // Find the container element\r\n            let root: JQuery = elementSelector.hasClass(\"content-root\") ? elementSelector : elementSelector.parents(\".content-root\");\r\n            if (root.length === 0) {\r\n                root = $(\"body\");\r\n            } else {\r\n                root = $(root.get(0));\r\n            }\r\n            // Now we have the root, check for a document object\r\n            if (root.data(\"innovasys-document\") != null) {\r\n                return root.data(\"innovasys-document\") as TDocument;\r\n            } else {\r\n                // No existing document, create a new one\r\n                const newDocument = new Document(root.get(0));\r\n                root.data(\"innovasys-document\", newDocument);\r\n\r\n                return newDocument as TDocument;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Returns basic information about the current browser location.\r\n         */\r\n        public static getLocationInfo(): ILocationInfo {\r\n            return location;\r\n        }\r\n\r\n        /**\r\n         * Return the current document compatMode value.\r\n         */\r\n        public static getCompatMode(): string {\r\n            return document.compatMode;\r\n        }\r\n\r\n        /**\r\n         * Reload the current page.\r\n         */\r\n        public static reload(): void {\r\n            location.reload();\r\n        }\r\n\r\n        /**\r\n         * Replace the current location.\r\n         */\r\n        public static replaceLocation(newLocation: string): void {\r\n            if (window.history.replaceState) {\r\n                try {\r\n                    window.history.replaceState(\"\", \"\", `#${newLocation}`);\r\n                } catch (ex) {\r\n                    // May fail with security exception on local file system\r\n                }\r\n            } else {\r\n                window.location.replace(`#${newLocation}`);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Navigate to a new url.\r\n         * @param url The url to navigate to.\r\n         * @param replace Pass true in order to replace the current entry in the browser history.\r\n         */\r\n        public static navigateTo(url: string, replace: boolean): void {\r\n            if (replace) {\r\n                window.location.replace(url);\r\n            } else {\r\n                window.location.href = url;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Cross browser helper for stopping event propagation.\r\n         */\r\n        public static stopPropagation(e: JQueryEventObject): void {\r\n            if (e.stopPropagation) {\r\n                e.stopPropagation();\r\n            } else {\r\n                e.returnValue = false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Loads a stylesheet from the specified Url.\r\n         */\r\n        public static loadStylesheet(\r\n            stylesheetUrl: string,\r\n            stylesheetId: string,\r\n            beforeElementId: string,\r\n            onLoaded: (_: string) => void = null): string {\r\n\r\n            const id = `file${this.dynamicallyLoadedFileIndex}`;\r\n            this.dynamicallyLoadedFileIndex++;\r\n\r\n            const attributes = { \"data-stylesheet-id\": stylesheetId };\r\n            yepnope.injectCss({ href: stylesheetUrl, attrs: attributes }, () => {\r\n                onLoaded(id);\r\n            });\r\n\r\n            return id;\r\n\r\n        }\r\n\r\n        /**\r\n         * Loads a script file from the specified Url.\r\n         */\r\n        public static loadScript(\r\n            scriptUrl: string,\r\n            scriptId: string,\r\n            beforeElementId: string,\r\n            onLoaded: (_: string) => void = null): string {\r\n\r\n            const id = `file${this.dynamicallyLoadedFileIndex}`;\r\n            this.dynamicallyLoadedFileIndex++;\r\n\r\n            const attributes = { \"data-script-id\": scriptId };\r\n            yepnope.injectJs({ src: scriptUrl, attrs: attributes }, () => {\r\n                onLoaded(id);\r\n            });\r\n\r\n            return id;\r\n\r\n        }\r\n\r\n        public static resizeIFrames(selector: JQuery, ignoreOffScreen = false): number {\r\n\r\n            let maxHeight = 0;\r\n            let minAllowedHeight: number;\r\n\r\n            try {\r\n                minAllowedHeight = $(window.top).height();\r\n            } catch (ex) {\r\n                minAllowedHeight = $(window).height();\r\n            }\r\n\r\n            $(\"iframe\", selector).each((index: number, element: HTMLIFrameElement): void => {\r\n                let currentHeight = 0;\r\n                if ($(element).is(\":visible\") && (ignoreOffScreen || $(element).offset().left >= 0)) {\r\n                    // Only resize if visible\r\n                    let doc: Document = null;\r\n                    try {\r\n                        doc = element.contentDocument\r\n                            ? element.contentDocument\r\n                            : (element.contentWindow.document || (element as any).document);\r\n                    } catch (exDocument) {\r\n                        // Security may prevent access if frame hasn't loaded or is cross origin\r\n                    }\r\n                    if (doc != null) {\r\n                        // Firefox throws an error here, so we trap and fallback\r\n                        try {\r\n                            currentHeight = $(doc).height();\r\n                        } catch (exHeight) {\r\n                            currentHeight = minAllowedHeight;\r\n                        }\r\n                    } else {\r\n                        currentHeight = minAllowedHeight;\r\n                    }\r\n                    let lastHeight = $(element).data(\"last-height\");\r\n                    if (!lastHeight) {\r\n                        lastHeight = 0;\r\n                    }\r\n                    const heightDifference = currentHeight - lastHeight;\r\n                    if (heightDifference > browserInfoConstants.minHeightChange\r\n                        || (heightDifference < 0 && heightDifference < browserInfoConstants.minHeightChange)) {\r\n\r\n                        const parent = $(element).parent();\r\n                        if (parent.get(0).tagName === \"DIV\" && currentHeight < parent.height()) {\r\n                            // Resize to at least the containing DIV height\r\n                            currentHeight = parent.height();\r\n                        }\r\n                        if (currentHeight < minAllowedHeight) {\r\n                            // Make sure at least as high as the window\r\n                            currentHeight = minAllowedHeight;\r\n                        }\r\n                        $(element).height(`${currentHeight}px`);\r\n                        $(element).data(\"last-height\", currentHeight);\r\n                    }\r\n                } else if (!$(element).is(\":visible\")) {\r\n                    // Not visible, collapse to zero\r\n                    $(element).height(0);\r\n                    $(element).data(\"last-height\", 0);\r\n                }\r\n                if (currentHeight > maxHeight) {\r\n                    // Record the maximum iframe height\r\n                    maxHeight = currentHeight;\r\n                }\r\n            });\r\n\r\n            const busy: JQuery = $(\"#i-busy\");\r\n            if (busy.length !== 0) {\r\n                busy.height(maxHeight);\r\n            }\r\n\r\n            return maxHeight;\r\n\r\n        }\r\n\r\n        public static showElement(query: JQuery<Element>, tagName: string): void {\r\n            // Firefox does not remove a display: none on show so we check for that specifically here\r\n            query.show();\r\n            if (tagName === \"body\") {\r\n                $(\"body\").css(\"display\", \"block\");\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Works around a jQuery setAttribute bug for a specific IE mode used by MSHV and Help 2.x (with IE11 installed)\r\n         */\r\n        public static checkForIe7ModeJqueryBug(): void {\r\n            if (Browser.info.name === \"msie\" && Browser.info.version <= browserInfoConstants.ie7Version) {\r\n                const mshvAttributeSetWorkaround = {\r\n                    set: (elem: Element, value: any, name: string): any => {\r\n                        elem.setAttribute(name, value);\r\n\r\n                        return elem.getAttributeNode(name);\r\n                    }\r\n                };\r\n                if ($ != null && ($ as any).attrHooks != null) {\r\n                    const attributeHooks: any = ($ as any).attrHooks;\r\n                    attributeHooks[\"aria-describedby\"] = mshvAttributeSetWorkaround;\r\n                    attributeHooks[\"aria-live\"] = mshvAttributeSetWorkaround;\r\n                    attributeHooks[\"aria-atomic\"] = mshvAttributeSetWorkaround;\r\n                    attributeHooks[\"aria-hidden\"] = mshvAttributeSetWorkaround;\r\n                }\r\n            }\r\n        }\r\n\r\n        public static getQueryStringParameter(name: string): string {\r\n            name = name.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n            const regex = new RegExp(`[\\\\?&]${name}=([^&#]*)`);\r\n            const results = regex.exec(Browser.getLocationInfo().search);\r\n\r\n            return results == null ? null : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\r\n        }\r\n\r\n        public static isCompiledHelp(): boolean {\r\n            const currentHref = `${Browser.getLocationInfo().href}.`;\r\n            const currentProtocol = Browser.getLocationInfo().protocol;\r\n\r\n            if (currentHref.indexOf(\"mk:@MSITStore\") === 0) {\r\n                return true;\r\n            } else if (currentHref.indexOf(\"ms-its:\") === 0) {\r\n                return true;\r\n            } else if (currentProtocol === \"ms-help:\") {\r\n                return true;\r\n            } else if (currentProtocol === \"ms-xhelp:\" ||\r\n                currentHref.indexOf(\"ms.help?\") !== -1 ||\r\n                currentHref.indexOf(\"?method=page&\") !== -1) {\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        public static isEditor(): boolean {\r\n            return location.protocol === \"about:\";\r\n        }\r\n\r\n        /**\r\n         * Returns a unique id, randomnly generated and checked for uniqueness in the DOM\r\n         */\r\n        public static getUniqueId(): string {\r\n            const idlength = 10;\r\n            const getId = (): string => {\r\n                let idValue = \"\";\r\n                for (let i = 0; i < idlength; i++) {\r\n                    idValue += Browser._idCharacters[Math.floor(Math.random() * Browser._idCharacters.length)];\r\n                }\r\n\r\n                return idValue;\r\n            };\r\n            let id = getId();\r\n            while ($(`#${id}`).length > 0) {\r\n                id = getId();\r\n            }\r\n\r\n            return id;\r\n        }\r\n\r\n        /**\r\n         * Returns common feature settings\r\n         */\r\n        public static getCommonSettings(): IOverrides {\r\n            return ((Innovasys as any).overrides || (Innovasys as any).settings) || {};\r\n        }\r\n\r\n        /**\r\n         * Compares 2 version strings and returns an integer indicating the result. < 0 if a < b, > 0 if a > b, 0 if a = b\r\n         */\r\n        public static compareVersionStrings(a: string, b: string): number {\r\n            const regExStrip0 = /(\\.0+)+$/;\r\n            const segmentsA = a.replace(regExStrip0, \"\").split(\".\");\r\n            const segmentsB = b.replace(regExStrip0, \"\").split(\".\");\r\n            const l = Math.min(segmentsA.length, segmentsB.length);\r\n\r\n            for (let i = 0; i < l; i++) {\r\n                const diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\r\n                if (diff) {\r\n                    return diff;\r\n                }\r\n            }\r\n\r\n            return segmentsA.length - segmentsB.length;\r\n        }\r\n\r\n        /**\r\n         * Creates or returns a <style> element to contain custom style markup\r\n         */\r\n        public static getDynamicStyleContainer(id: string): JQuery {\r\n            let $dynamicStyleElement = $(`#${id}`);\r\n            if ($dynamicStyleElement.length === 0) {\r\n                $dynamicStyleElement = $(`<style type=\"text/css\" id=\"${id}\"></style>`);\r\n                $(\"head\").append($dynamicStyleElement);\r\n            }\r\n\r\n            return $dynamicStyleElement;\r\n        }\r\n\r\n        public static isElementInView(element: Element, fullyInView: boolean): boolean {\r\n            if (element == null) {\r\n                return false;\r\n            }\r\n\r\n            if (!$(element).is(\":visible\")) {\r\n                return false;\r\n            }\r\n\r\n            const pageTop = $(window).scrollTop();\r\n            const pageBottom = pageTop + $(window).height();\r\n            const elementTop = $(element).offset().top;\r\n            const elementBottom = elementTop + $(element).height();\r\n\r\n            if (fullyInView) {\r\n                return ((pageTop < elementTop) && (pageBottom > elementBottom));\r\n            } else {\r\n                return ((elementTop <= pageBottom) && (elementBottom >= pageTop));\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/* eslint @typescript-eslint/no-explicit-any: \"off\" */\r\nconst overrides: Innovasys.IOverrides = ((Innovasys as any).overrides || (Innovasys as any).settings);\r\n\r\nif (document.compatMode !== \"BackCompat\"\r\n    || !(location.protocol === \"ms-xhelp:\"\r\n        || location.href.indexOf(\"ms.help?\") !== -1\r\n        || location.href.indexOf(\"?method=page&\") !== -1)) {\r\n\r\n    if (overrides == null || !overrides.isHideBodyDuringLoadDisabled) {\r\n        // Prevent flickering by setting body to display:none during initialization\r\n        document.write(\"<style type=\\\"text/css\\\">body{display:none;}</style>\");\r\n    } else if (overrides.isOverflowClippedDuringLoad) {\r\n        // Prevent adding of a vertical scrollbar during load\r\n        document.write(\"<style type=\\\"text/css\\\">body{overflow-y:hidden;}</style>\");\r\n    }\r\n}\r\n","/* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\nnamespace Innovasys.Content {\r\n\r\n    /**\r\n     * Encapsulates a left and top position.\r\n     */\r\n    export class ElementPosition {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public left: number, public top: number) {}\r\n\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    export class DomHelpers {\r\n\r\n        /**\r\n         * Returns an elements absolute position, allowing for the non-scrolling header\r\n         * @param element The element to find the absolute position of\r\n         */\r\n        public static getElementPosition(element: HTMLElement): ElementPosition {\r\n            let offsetLeft = 0;\r\n            let offsetTop = 0;\r\n\r\n            while (element) {\r\n                const MSIE_4_VERSION = 4;\r\n                // Allow for the scrolling body region in IE\r\n                if (Browser.msIeVersion() > MSIE_4_VERSION) {\r\n                    offsetLeft += (element.offsetLeft - element.scrollLeft);\r\n                    offsetTop += (element.offsetTop - element.scrollTop);\r\n                } else {\r\n                    offsetLeft += element.offsetLeft;\r\n                    offsetTop += element.offsetTop;\r\n                }\r\n\r\n                element = (element.offsetParent as HTMLElement);\r\n            }\r\n\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const leftMargin = (document.body as any).leftMargin as number;\r\n            if (BrowserInfo.getUserAgent().indexOf(\"Mac\") !== -1\r\n                && typeof leftMargin !== \"undefined\") {\r\n\r\n                offsetLeft += leftMargin;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                offsetTop += ((document.body as any).topMargin as number);\r\n            }\r\n\r\n            return new ElementPosition(offsetLeft, offsetTop);\r\n        }\r\n\r\n        /**\r\n         * Returns the text from the containing table. Uses this as the context element from which to find the containing table.\r\n         */\r\n        public static getTextFromContainingTable(element: HTMLElement): string {\r\n            const parentTableQuery = $(element)\r\n                .parents(\"table\")\r\n                .get(0);\r\n            const parentTable: JQuery = $(parentTableQuery);\r\n            const tableCell: HTMLTableCellElement = parentTable.find(\"td\").get(0) as HTMLTableCellElement;\r\n            const preCell: JQuery<HTMLPreElement> = $(tableCell).find(\"pre\");\r\n\r\n            let elemsToUse: HTMLElement[] = [];\r\n\r\n            if (preCell && preCell.length > 0) {\r\n                elemsToUse = preCell.toArray();\r\n            } else {\r\n                elemsToUse.push(tableCell);\r\n            }\r\n\r\n            let textResult: string = \"\";\r\n\r\n            for (let index = 0; index < elemsToUse.length; ++index) {\r\n                let elemTmp = elemsToUse[index];\r\n                if (elemTmp != null) {\r\n                    if (elemTmp.textContent != null) {\r\n                        textResult += elemTmp.textContent;\r\n                    } else if (elemTmp.innerText != null) {\r\n                        textResult += elemTmp.innerText;\r\n                    } else {\r\n                        textResult += $(elemTmp).text();\r\n                    }\r\n                }\r\n            }\r\n            return textResult;\r\n        }\r\n    }\r\n\r\n}\r\n","/* .NET Framework Help Topic Resolution */\r\n\r\nconst getCurrentHelp2Namespace = (): string => {\r\n    let namespace = \"\";\r\n    const location = Innovasys.Content.Browser.getLocationInfo();\r\n\r\n    if (location.protocol === \"ms-help:\") {\r\n        namespace = location.hostname;\r\n        const URL_PREFIX_LENGTH = 2;\r\n        if (namespace.substring(0, URL_PREFIX_LENGTH) === \"//\") {\r\n            namespace = namespace.substring(URL_PREFIX_LENGTH);\r\n        }\r\n    }\r\n\r\n    return namespace;\r\n};\r\n\r\nconst findHelp2Keyword = (namespaceName: string, keyword: string): string => {\r\n\r\n    if (namespaceName.length > 0) {\r\n        try {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const session: any = new ActiveXObject(\"HxDs.HxSession\");\r\n            session.Initialize(`ms-help://${namespaceName}`, 0);\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const topics: any = session.Query(keyword, \"!DefaultAssociativeIndex\", 0, \"\");\r\n            if (topics.Count > 0) {\r\n                return topics(1).URL;\r\n            }\r\n        } catch (e) {\r\n            //\r\n        }\r\n    }\r\n\r\n    return \"\";\r\n};\r\n\r\n// This function is Copyright 2006 Innovasys Limited. No reproduction or usage\r\n//  allowed other than in documentation generated by licensed Innovasys products\r\nconst resolveHelp2Keyword = (keyword: string, onlineKeyword: string): string => {\r\n\r\n    let url = \"\";\r\n\r\n    try {\r\n        // Try the current namespace\r\n        url = findHelp2Keyword(getCurrentHelp2Namespace(), keyword);\r\n        if (url === \"\") {\r\n            // Try the likely namespaces first, most recent first\r\n            url = findHelp2Keyword(\"MS.VSCC.v80\", keyword);\r\n            if (url === \"\") {\r\n                url = findHelp2Keyword(\"MS.VSCC.2003\", keyword);\r\n                if (url === \"\") {\r\n                    url = findHelp2Keyword(\"MS.VSCC\", keyword);\r\n                }\r\n            }\r\n        }\r\n\r\n        // URL found in one of the known VSCC namespaces\r\n        if (url !== \"\") {\r\n            return url;\r\n        } else {\r\n            // For future proofing, try other VSCC namespaces\r\n            const registryWalker = new ActiveXObject(\"HxDs.HxRegistryWalker\");\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const namespaces: any = registryWalker.RegisteredNamespaceList(\"MS.VSCC\");\r\n\r\n            if (namespaces.Count > 0) {\r\n                for (let n = 1; n <= namespaces.Count; n++) {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    const namespace: any = namespaces.Item(n);\r\n                    const namespaceName: string = namespace.Name;\r\n                    const PREFIX_LENGTH = 7;\r\n                    if (namespaceName.substring(0, PREFIX_LENGTH) === \"MS.VSCC\") {\r\n                        switch (namespaceName) {\r\n                            case \"MS.VSCC.v80\":\r\n                                break;\r\n                            case \"MS.VSCC.2003\":\r\n                                break;\r\n                            case \"MS.VSCC\":\r\n                                break;\r\n                            default:\r\n                                url = findHelp2Keyword(namespaceName, \"\");\r\n                                if (url !== \"\") {\r\n                                    return url;\r\n                                }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    } catch (e) {\r\n        //\r\n    }\r\n\r\n    // No match found in any applicable namespace\r\n    // Msdn doesn't support links to individual overloads, only to the master page\r\n    //  so we trim off the brackets when directing to Msdn\r\n    const bracketPosition = onlineKeyword.indexOf(\"(\");\r\n    if (bracketPosition !== -1) {\r\n        onlineKeyword = onlineKeyword.substring(0, bracketPosition);\r\n    }\r\n\r\n    const keywordForUrl = onlineKeyword.replace(\"`\", \"-\").toLowerCase();\r\n\r\n    return `https://docs.microsoft.com/dotnet/api/${keywordForUrl}`;\r\n};\r\n\r\n/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nconst navigateToHelp2Keyword = (keyword: string, onlineKeyword: string, replacePage: boolean): void => {\r\n    window.status = \"Resolving link. Please wait a moment...\";\r\n    const url = resolveHelp2Keyword(keyword, onlineKeyword);\r\n    window.status = \"\";\r\n    const MSDN_PREFIX_LENGTH = 25;\r\n    const DOCS_PREFIX_LENGTH = 26;\r\n    if ((url.substring(0, MSDN_PREFIX_LENGTH) === \"http://msdn.microsoft.com\"\r\n        || url.substring(0, DOCS_PREFIX_LENGTH) === \"https://docs.microsoft.com\"\r\n    ) &&\r\n        window.parent != null) {\r\n        // MSDN no longer support hosting in an IFRAME so open in new browser window\r\n\t\tvar win = window.open('about:blank', '_blank')\r\n\t\turlExistsInnov(url, \r\n            function() { win.location.href = url;}, \r\n            function() {\r\n\t\t\t\tvar parentUrl = url.substring(0, url.lastIndexOf(\".\"));\r\n\t\t\t\turlExistsInnov(parentUrl, \r\n                    function() { win.location.href = parentUrl; }, \r\n                    function() { win.location.href = url;}\r\n                );\r\n\t\t});\r\n    } else if (replacePage) {\r\n        location.replace(url);\r\n    } else {\r\n        location.href = url;\r\n    }\r\n};\r\n\r\n/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nconst urlExistsInnov = (url: string, successCallBack: any, notfoundCallBack: any): void => {\r\n    $.ajax({\r\n      url: url,\r\n      dataType: \"jsonp\",\r\n      statusCode: {\r\n        200: function(response) {\r\n          successCallBack();\r\n        },\r\n        404: function(response) {\r\n          notfoundCallBack();\r\n        }\r\n      }\r\n    });\r\n  }","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    /**\r\n     * Common Local Storage interface\r\n     */\r\n    export interface ILocalStorageHandler {\r\n        load(name: string): void;\r\n        save(name: string): void;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        setAttribute(key: string, value: any): void;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        getAttribute(key: string): any;\r\n    }\r\n\r\n    /**\r\n     * Wrapper for handling load/save to localstorage. Handles the difference in functionality when executing at design time\r\n     *  and in a CHM.\r\n     */\r\n    export class LocalStorageHandler implements ILocalStorageHandler {\r\n\r\n        public storageMethod = \"native\";\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public cookieData: any = null;\r\n        public storageElement: Element = null;\r\n\r\n        constructor(public attributePrefix: string = \"\") {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            let windowLocalStorage: any;\r\n            try {\r\n                // Edge throws an exception when querying localStorage in local file system output\r\n                windowLocalStorage = window.localStorage;\r\n            } catch (e) {\r\n                //\r\n            }\r\n            if (!windowLocalStorage) {\r\n                if (location.protocol === \"ms-its:\") {\r\n                    // Cookies don't work in CHM so we use userdata behavior instead\r\n                    this.storageMethod = \"userdata\";\r\n                    const storageElement = $(\"<link />\");\r\n                    storageElement.css(\"behavior\", \"url(#default#userdata)\");\r\n                    storageElement.appendTo(\"body\");\r\n                    this.storageElement = storageElement.get(0);\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (this.storageElement as any).load(\"localStorage\");\r\n                } else {\r\n                    // If local storage isn't available, fall back to cookie storage\r\n                    this.storageMethod = \"cookie\";\r\n                    const cookieValue = Cookies.get(\"localStorage\");\r\n                    if (cookieValue) {\r\n                        this.cookieData = JSON.parse(cookieValue);\r\n                    } else {\r\n                        this.cookieData = {};\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public load(name: string): void {\r\n            // local storage automatically saves\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public save(name: string): void {\r\n            // local storage automatically saves\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public setAttribute(key: string, value: any): void {\r\n            if (this.attributePrefix != null) {\r\n                key = this.attributePrefix + key;\r\n            }\r\n            if (this.storageMethod === \"native\") {\r\n                if (value == null || typeof value === \"undefined\") {\r\n                    window.localStorage.removeItem(key);\r\n                } else {\r\n                    window.localStorage.setItem(key, value);\r\n                }\r\n            } else if (this.storageMethod === \"cookie\") {\r\n                if (value == null) {\r\n                    this.cookieData[key] = null;\r\n                } else {\r\n                    this.cookieData[key] = `${value}`;\r\n                }\r\n                Cookies.set(\"localStorage\", JSON.stringify(this.cookieData), { expires: 365, path: \"/\", domain: \"\" });\r\n            } else if (this.storageMethod === \"userdata\") {\r\n                this.storageElement.setAttribute(key, `${value}`);\r\n                // Save method is added by the userdata behavior\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                (this.storageElement as any).save(\"localStorage\");\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public getAttribute(key: string): any {\r\n            if (this.attributePrefix != null) {\r\n                key = this.attributePrefix + key;\r\n            }\r\n            if (this.storageMethod === \"native\") {\r\n                return window.localStorage.getItem(key);\r\n            } else if (this.storageMethod === \"cookie\") {\r\n                if (typeof this.cookieData[key] === \"undefined\") {\r\n                    return null;\r\n                } else {\r\n                    return this.cookieData[key];\r\n                }\r\n            } else if (this.storageMethod === \"userdata\") {\r\n                return this.storageElement.getAttribute(key);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    /**\r\n     * A message object, used for cross frame communication.\r\n     */\r\n    export class WindowMessage {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public messageType: string, public messageData: string) { }\r\n    }\r\n\r\n    /**\r\n     * Cross frame messaging utility functionality.\r\n     */\r\n    export class Messaging {\r\n\r\n        /**\r\n         * Returns true if PostMessage support is available in the current browser.\r\n         */\r\n        public static isPostMessageEnabled(): boolean {\r\n            return (window.postMessage != null);\r\n        }\r\n\r\n        /**\r\n         * Registers to receive message events incoming to the current window.\r\n         * @param receiver The receiving event handler.\r\n         */\r\n        public static addMessageListener(receiver: (ev: MessageEvent) => void): void {\r\n            if (Messaging.isPostMessageEnabled()) {\r\n                if (window.addEventListener) {\r\n                    window.addEventListener(\"message\", receiver, false);\r\n                } else {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (window as any).attachEvent(\"onmessage\", receiver);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Removes a previous registered window event listener\r\n         * @param receiver The receiving event handler.\r\n         */\r\n        public static removeMessageListener(receiver: (ev: MessageEvent) => void): void {\r\n            if (Messaging.isPostMessageEnabled()) {\r\n                if (window.addEventListener) {\r\n                    window.removeEventListener(\"message\", receiver, false);\r\n                } else {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (window as any).detachEvent(\"onmessage\", receiver);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Gets a WindowMessage object from string message data.\r\n         * @param data The string containing the message data (format MessageType|MessageData).\r\n         */\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public static getMessageFromData(data: any): WindowMessage {\r\n            const separator = data.indexOf(\"|\") as number;\r\n            let messageType: string;\r\n            let messageData: string;\r\n\r\n            if (separator !== -1) {\r\n                messageType = data.substring(0, separator);\r\n                messageData = data.substring(separator + 1);\r\n            } else {\r\n                messageType = data;\r\n                messageData = \"\";\r\n            }\r\n\r\n            return new WindowMessage(messageType, messageData);\r\n        }\r\n\r\n        public static routeMessageToFrameElement(windowName: string, messageType: string, messageData: string): void {\r\n            const element: Element = document.getElementById(windowName);\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            if (element != null && (element as any).contentWindow != null) {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                Messaging.routeMessageToWindow(((element as any).contentWindow as Window), messageType, messageData);\r\n            }\r\n        }\r\n\r\n        public static routeMessageToWindow(window: Window, messageType: string, messageData: string): void {\r\n            if (window != null && self !== window) {\r\n                if (window != null && window.postMessage != null) {\r\n                    window.postMessage(`${messageType}|${messageData}`, \"*\");\r\n                }\r\n            }\r\n        }\r\n\r\n        public static routeMessageToParentFrame(messageType: string, messageData: string): void {\r\n            if (parent != null && self !== parent) {\r\n                this.routeMessageToWindow(parent, messageType, messageData);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    export enum ResponsiveClickTargetKind {\r\n        auto,\r\n        inline,\r\n        block\r\n    }\r\n\r\n    export abstract class DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(protected documentInstance: Document = null) { }\r\n\r\n        public initializeDocument(): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad?: boolean): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public onMessage(message: WindowMessage): void {\r\n            //\r\n        }\r\n\r\n        public abstract getName(): string;\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public ensureElementVisible(element: Element): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public beforeSetElementVisibility(element: Element, isVisible: boolean, isImmediate: boolean): boolean {\r\n            return false;\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public afterSetElementVisibility(element: Element, isVisible: boolean): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            //\r\n        }\r\n\r\n        /**\r\n         * Returns a number used to determine the order of content initialization amongst document features.\r\n         */\r\n        public initializeContentOrdinal(): number {\r\n            return 0;\r\n        }\r\n\r\n    }\r\n\r\n    export class DocumentFeatureConfiguration {\r\n\r\n        // TODO: Would be useful to key this array so that a feature factory can override a default implementation\r\n\r\n        private static readonly _featureFactories: IDocumentFeatureFactory[] = [];\r\n\r\n        public static registerDocumentFeatureFactory(factory: IDocumentFeatureFactory): void {\r\n            DocumentFeatureConfiguration._featureFactories.push(factory);\r\n        }\r\n\r\n        public static getFeatureFactories(): IDocumentFeatureFactory[] {\r\n            return DocumentFeatureConfiguration._featureFactories;\r\n        }\r\n\r\n    }\r\n\r\n    export class ResponsiveConfiguration {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public profileName: string, public clickTargets: ResponsiveClickTarget[] = []) {\r\n\r\n        }\r\n\r\n        public stylesheetUrls: string[] = [];\r\n\r\n        public tablesToPivot: ResponsiveTable[] = [];\r\n\r\n    }\r\n\r\n    export class ResponsiveClickTarget {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public className: string, public kind: ResponsiveClickTargetKind) { }\r\n\r\n    }\r\n\r\n    export class ResponsiveTable {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public selector: string, public onAfterPivot: (originalTable: JQuery, pivotDiv: JQuery) => void = null) { }\r\n\r\n    }\r\n\r\n}\r\n","/* Userdata support in CHMs requires pages are loaded under the ms-its protocol and not mk:@MSITStore */\r\nconst currentLocation = `${location.href}.`;\r\nconst mkPrefix = \"mk:@MSITStore\";\r\nif (currentLocation.indexOf(mkPrefix) === 0) {\r\n    const restOfUrl = currentLocation.substring(mkPrefix.length + 1, currentLocation.length - 1);\r\n    const newLocation = `ms-its:${restOfUrl}`;\r\n    location.replace(newLocation);\r\n}\r\n\r\n/* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\nnamespace Innovasys.Content {\r\n\r\n    export class Document {\r\n\r\n        /** Handle to the local storage instance */\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _localStorageInstance: any;\r\n        /** Handle to the window message event listener so we can remove it later */\r\n        private _windowMessageEventListener: (event: MessageEvent) => void;\r\n        /** Indicates if this document instance has been unloaded */\r\n        private _isUnloaded = true;\r\n        /** Features collection */\r\n        private readonly _features: IDocumentFeature[];\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _featureSettings: any;\r\n\r\n        /** Provides an id that can be used to disambiguate this document if it is loaded in a parent document */\r\n        public id = \"\";\r\n        /** The root element of this logical document */\r\n        public rootElement: HTMLElement;\r\n        /** JQuery selector representing the root element of this document */\r\n        public rootSelector: JQuery;\r\n        /** Indicates that this page should be highlighted as new */\r\n        public isNew: boolean;\r\n        /** Indicates that automatic responsive functionality is enabled */\r\n        public isResponsiveEnabled: boolean;\r\n        /** Indicates that the body should be made visible after loading is complete. Can be set to false if\r\n         * waiting on dynamically loaded stylesheets\r\n         */\r\n        public setBodyVisibleAfterLoadComplete: boolean;\r\n        /** Indicates that this is a content document. Content documents inform the parent frames on load */\r\n        public isContentDocument: boolean;\r\n\r\n        constructor(rootElement: HTMLElement, id = \"\") {\r\n            this.id = id;\r\n            this.rootElement = rootElement;\r\n            this.rootSelector = $(rootElement);\r\n            this._featureSettings = {};\r\n            this.setBodyVisibleAfterLoadComplete = true;\r\n            this.isNew = false;\r\n            this.isResponsiveEnabled = false;\r\n            this.isContentDocument = true;\r\n\r\n            this.rootSelector.data(\"innovasys-document\", this);\r\n\r\n            // Create the features instances according to configuration. Some factories may return null if the feature\r\n            //  is not required for this document.\r\n            this._features = $.map(\r\n                DocumentFeatureConfiguration.getFeatureFactories(),\r\n                (factory: IDocumentFeatureFactory): IDocumentFeature => factory.createInstance(this));\r\n\r\n            // Initialize the features.\r\n            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                feature.initializeDocument();\r\n            });\r\n\r\n            if (Browser.isDesignTime) {\r\n                $(\"body\").addClass(\"i-designtime\");\r\n            }\r\n\r\n            if (Browser.isEditor()) {\r\n                $(\"body\").addClass(\"i-editor\");\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get a local storage instance, initializing the first time it is called.\r\n         */\r\n        public getLocalStorage(): ILocalStorageHandler {\r\n            if (Browser.isDesignTime) {\r\n                try {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    if ((window.external as any).IsInnovasysDesigner) {\r\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                        this._localStorageInstance = ((window.external as any) as ILocalStorageHandler);\r\n                    }\r\n                } catch (e) {\r\n                    //\r\n                }\r\n            }\r\n            if (!this._localStorageInstance) {\r\n                this._localStorageInstance = new LocalStorageHandler(this.id);\r\n            }\r\n\r\n            return this._localStorageInstance;\r\n        }\r\n\r\n        /**\r\n         * Called once the DOM has loaded. Performs content initialization.\r\n         */\r\n        public load(): void {\r\n\r\n            const overrides: IOverrides = Browser.getCommonSettings();\r\n\r\n            if (overrides.isNew) {\r\n                this.isNew = true;\r\n            }\r\n\r\n            // If running in a frame, set up a message listener and let\r\n            //  the parent frame know we have loaded\r\n            if (this.id === \"\") {\r\n                // Running in a frame - listen for commands\r\n                if (Messaging.isPostMessageEnabled()) {\r\n                    this._windowMessageEventListener = (ev: MessageEvent): void => this.receiveMessage(ev);\r\n                    Messaging.addMessageListener(this._windowMessageEventListener);\r\n\r\n                    if (this.isContentDocument) {\r\n                        // Notify the parent frame that we have loaded, and give it our page title\r\n                        Messaging.routeMessageToParentFrame(\"loaded\", location.href);\r\n                        Messaging.routeMessageToParentFrame(\"updatePageTitle\", document.title);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Add a class to the body that indicates that kind of navigation we are using\r\n            if (overrides.navigationKind !== \"inpage\") {\r\n                $(\"body\").addClass(\"i-navigation-frames\");\r\n            } else {\r\n                $(\"body\").addClass(\"i-navigation-inpage\");\r\n            }\r\n\r\n            // Configure our document content for each of the features\r\n            this.initializeContent(this.rootSelector, true);\r\n\r\n            if (this.id === \"\" && this.setBodyVisibleAfterLoadComplete) {\r\n                // Resume rendering updates after loading complete\r\n                this.setBodyVisible();\r\n            }\r\n        }\r\n\r\n        public setBodyVisible(): void {\r\n            $(\"html\").addClass(\"i-loaded\");\r\n            Browser.showElement($(\"body\"), \"body\");\r\n            setTimeout(() => {\r\n                if (Browser.getCommonSettings().isOverflowClippedDuringLoad) {\r\n                    $(\"body\").css(\"overflow-y\", \"auto\");\r\n                }\r\n                $(\".i-busy-overlay\").hide();\r\n            }, 1);\r\n        }\r\n\r\n        public unload(): void {\r\n\r\n            if (this.id === \"\") {\r\n                // Running in a frame - remove message listener\r\n                if (Messaging.isPostMessageEnabled() && this._windowMessageEventListener != null) {\r\n                    Messaging.removeMessageListener(this._windowMessageEventListener);\r\n                }\r\n            }\r\n\r\n            this._isUnloaded = true;\r\n\r\n        }\r\n\r\n        /**\r\n         * Initializes new DOM content, either on page load or subsequently when new content is created.\r\n         */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad = false): void {\r\n            $.each(this._features.sort(\r\n                (a: IDocumentFeature, b: IDocumentFeature): number => a.initializeContentOrdinal() - b.initializeContentOrdinal()),\r\n                (_: number, feature: IDocumentFeature) => {\r\n                    feature.initializeContent(rootSelector, isInitialLoad);\r\n                });\r\n        }\r\n\r\n        /**\r\n         * Creates, populates and returns a responsive configuration instance.\r\n         */\r\n        public getResponsiveConfiguration(profileName: string): ResponsiveConfiguration {\r\n            const configuration: ResponsiveConfiguration = new ResponsiveConfiguration(profileName);\r\n            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                feature.populateResponsiveConfiguration(configuration);\r\n            });\r\n\r\n            return configuration;\r\n        }\r\n\r\n        /**\r\n         * Applies a responsive configuration.\r\n         */\r\n        public applyResponsiveConfiguration(responsiveConfiguration: ResponsiveConfiguration): void {\r\n            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                feature.applyResponsiveConfiguration(responsiveConfiguration);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cross frame message processor.\r\n         * @param event The message event containing message data.\r\n         */\r\n        public receiveMessage(event: MessageEvent): void {\r\n            let message: WindowMessage;\r\n            try {\r\n                message = Messaging.getMessageFromData(event.data);\r\n            } catch (ex) {\r\n                // Catch exceptions that can fire at design time\r\n            }\r\n\r\n            this.processWindowMessage(message);\r\n        }\r\n\r\n        /**\r\n         * Process the passed message.\r\n         */\r\n        public processWindowMessage(message: WindowMessage): void {\r\n            if (message) {\r\n                switch (message.messageType) {\r\n                    case \"refresh\":\r\n                        document.location.reload();\r\n                        break;\r\n                    default:\r\n                        if (this._features != null) {\r\n                            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                                feature.onMessage(message);\r\n                            });\r\n                        }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Ensures that the passed element is visible. Calls document features to apply\r\n         *  any necessary logic (e.g. where the element is within a collapsed section or tab)\r\n         */\r\n        public ensureElementVisible(element: Element): void {\r\n            $.each(this._features, (index: number, feature: IDocumentFeature): void => {\r\n                feature.ensureElementVisible(element);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Toggle the state of an element or elements.\r\n         * @param elements JQuery selector representing Element(s) to toggle state for.\r\n         * @param isImmediate When set to true, animations are disabled.\r\n         * @param isVisible Indicates if the element(s) should be made visible or not.\r\n         */\r\n        public setElementVisibility(elements: JQuery, isVisible: boolean, isImmediate: boolean): JQuery {\r\n            return elements.each((index: number, element: Element) => {\r\n\r\n                let cancelDefault = false;\r\n                // Allow features to add custom behavior and/or prevent default\r\n                $.each(this._features, (_: number, feature: IDocumentFeature) => {\r\n                    if (!cancelDefault) {\r\n                        if (feature.beforeSetElementVisibility(element, isVisible, isImmediate) === true) {\r\n                            cancelDefault = true;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (!cancelDefault) {\r\n\r\n                    if ($(element).css(\"display\") !== \"none\" !== isVisible) {\r\n                        if ($(element).css(\"display\") === \"none\") {\r\n                            if (isImmediate || Browser.isAnimationDisabled) {\r\n                                // Element is currently not visible - make it visible\r\n                                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                const originalDisplay: any = $(element).data(\"i-original-display\");\r\n                                if (originalDisplay != null) {\r\n                                    $(element).css(\"display\", originalDisplay);\r\n                                    $(element).data(\"i-original-display\", null);\r\n                                } else {\r\n                                    if (element.tagName === \"TR\") {\r\n                                        $(element).css(\"display\", \"table-row\");\r\n                                    } else {\r\n                                        $(element).css(\"display\", \"block\");\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                $(element).slideDown(\"fast\");\r\n                            }\r\n                        } else {\r\n                            // Element is currently visible, hide\r\n                            $(element).data(\"i-original-display\", $(element).css(\"display\"));\r\n                            if (isImmediate || Browser.isAnimationDisabled) {\r\n                                $(element).hide();\r\n                            } else {\r\n                                $(element).slideUp(\"fast\");\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    $.each(this._features, (_: number, feature: IDocumentFeature) => {\r\n                        feature.afterSetElementVisibility(element, isVisible);\r\n                    });\r\n\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Returns a feature matching the passed name\r\n         */\r\n        public getFeatureByName<TFeature extends IDocumentFeature>(name: string): TFeature {\r\n            if (name == null) {\r\n                return null;\r\n            }\r\n            const matchingFeatures: TFeature[]\r\n                = $.map(this._features, (feature: IDocumentFeature, index: number): TFeature => {\r\n                    if (feature.getName().toLowerCase() === name.toLowerCase()) {\r\n                        return feature as TFeature;\r\n                    } else {\r\n                        return null;\r\n                    }\r\n                });\r\n            if (matchingFeatures.length > 0) {\r\n                return matchingFeatures[0];\r\n            }\r\n        }\r\n\r\n        public getFeatureSettings<TFeatureSettings>(name: string, getBaseSettings: () => TFeatureSettings): TFeatureSettings {\r\n            if (name == null) {\r\n                return null;\r\n            }\r\n            if (this._featureSettings[name] != null) {\r\n                return this._featureSettings[name] as TFeatureSettings;\r\n            } else {\r\n                const baseSettings = getBaseSettings != null ? getBaseSettings() : {};\r\n                let newSettings: TFeatureSettings;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const defaults: any = (Innovasys as any).overrides || (Innovasys as any).settings;\r\n                const defaultSettings = defaults == null ? null : defaults[name.toLowerCase()];\r\n                if (defaultSettings != null) {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    newSettings = { ...(baseSettings as any), ...defaultSettings } as TFeatureSettings;\r\n                } else {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    newSettings = { ...(baseSettings as any) } as TFeatureSettings;\r\n                }\r\n                this._featureSettings[name] = newSettings;\r\n\r\n                return newSettings;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class DocumentMessageNames {\r\n        public static quickSearch = \"quickSearch\";\r\n        public static resetQuickSearch = \"resetQuickSearch\";\r\n        public static insertNavigationHeader = \"insertNavigationHeader\";\r\n        public static searchHighlightComplete = \"searchHighlightComplete\";\r\n    }\r\n\r\n    export class RootMessageNames {\r\n        public static navigate = \"navigate\";\r\n        public static openNavigationPane = \"openNavigationPane\";\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const INNOVASYS_PREFIX_LENGTH = 2;\r\n\r\n    export class ResponsiveDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _pendingResponsiveFiles: string[] = [];\r\n        private _configuration: ResponsiveConfiguration = null;\r\n\r\n        public static pivotTable(table: HTMLElement): JQuery<HTMLElement> {\r\n\r\n            const sourceTable: JQuery = $(table);\r\n            const container: JQuery = $(\"<div class=\\\"i-pivot-table-container\\\"></div>\");\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const labels: any = {};\r\n            const pivotColumnIndex: number = sourceTable\r\n                .find(\"tr\")\r\n                .children(\"td.i-pivot-column, th.i-pivot-column\")\r\n                .first()\r\n                .index();\r\n\r\n            // No column found to pivot on so just return here\r\n            if (pivotColumnIndex === -1) {\r\n                return null;\r\n            }\r\n\r\n            // Get the labels for each new row in the new table for the first row in the source table\r\n            sourceTable\r\n                .find(\"tr:first-child\")\r\n                .children(\"td, th\")\r\n                .each((index, cell) => {\r\n                    labels[index.toString()] = $(cell).text();\r\n                });\r\n\r\n            sourceTable.find(\"tr\").each((index, row) => {\r\n                if (index > 0) {\r\n                    const newTable = $(\"<table class=\\\"i-pivot-table i-section-content\\\"></table>\") as JQuery<HTMLElement>;\r\n                    let header: JQuery;\r\n\r\n                    $(row)\r\n                        .children(\"td\")\r\n                        .each((cellIndex, cell) => {\r\n                            if (cellIndex === pivotColumnIndex) {\r\n                                header = $(`<div class=\"i-section-heading\"><span class=\"btn\">${$(cell).text()}</span></div>`);\r\n                            } else {\r\n                                // Add a new row for each column in the source table\r\n                                const newRow = $(`<tr><td>${labels[cellIndex.toString()]}</td></tr>`) as JQuery<HTMLElement>;\r\n                                $(cell)\r\n                                    .clone()\r\n                                    .appendTo(newRow as JQuery<HTMLTableRowElement>);\r\n                                newRow.find(\"td a\").addClass(\"btn btn-mini btn-xs\");\r\n                                newRow.appendTo(newTable);\r\n                            }\r\n                        });\r\n\r\n                    if (header != null) {\r\n                        header.appendTo(container);\r\n                    }\r\n                    newTable.appendTo(container);\r\n                }\r\n            });\r\n\r\n            return container;\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"Responsive\";\r\n        }\r\n\r\n        public getFeatureSettings(): IResponsiveFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IResponsiveFeatureSettings>(\"responsive\",\r\n                this.getDefaultFeatureSettings);\r\n        }\r\n\r\n        public getDefaultFeatureSettings(): IResponsiveFeatureSettings {\r\n            return {\r\n                isEnabled: false,\r\n                displayMode: null\r\n            };\r\n        }\r\n\r\n        public checkPendingResponsiveFilesLoad(loadedId: string): void {\r\n            this._pendingResponsiveFiles = $.map(this._pendingResponsiveFiles, (item: string): string => {\r\n                if (item === loadedId) {\r\n                    // This item now loaded, exclude from pending array\r\n                    return null;\r\n                } else {\r\n                    return item;\r\n                }\r\n            });\r\n            if (this._pendingResponsiveFiles.length === 0) {\r\n                // All loaded\r\n                this.onResponsiveFilesLoaded();\r\n            }\r\n        }\r\n\r\n        private isEnabled(): boolean {\r\n            return this.documentInstance.isResponsiveEnabled || this.getFeatureSettings().isEnabled;\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n\r\n                const deviceType = this.getDeviceType().toLowerCase();\r\n\r\n                // Gather the responsive configuration\r\n                const configuration: ResponsiveConfiguration = this.documentInstance.getResponsiveConfiguration(deviceType);\r\n\r\n                if (this.isEnabled()) {\r\n                    switch (deviceType) {\r\n                        case \"mobile\":\r\n                            $(\".i-hidden-mobile, .i-visible-tablet, .i-visible-desktop\").css(\"display\", \"none\");\r\n                            break;\r\n                        case \"tablet\":\r\n                            $(\".i-hidden-tablet, .i-visible-mobile, .i-visible-desktop\").css(\"display\", \"none\");\r\n                            break;\r\n                        case \"desktop\":\r\n                            $(\".i-hidden-desktop, .i-visible-mobile, .i-visible-tablet\").css(\"display\", \"none\");\r\n                            break;\r\n                        // No default\r\n                    }\r\n\r\n                    if (deviceType !== \"desktop\") {\r\n\r\n                        // Find and add any stylesheets with data-responsive-{profileName} attributes\r\n                        $(`link[data-responsive-${deviceType}]`).each((index: number, stylesheet: Element) => {\r\n                            const responsiveStylesheets = $(stylesheet).attr(`data-responsive-${deviceType}`);\r\n                            if (responsiveStylesheets != null) {\r\n                                // Defer setting body visible while we wait for our custom stylesheet to load\r\n                                this.documentInstance.setBodyVisibleAfterLoadComplete = false;\r\n                                $.each(responsiveStylesheets.split(\",\"), (_: number, url: string) => {\r\n                                    // Give the stylesheet a link so we can remove it later if the responsive style changes\r\n                                    this._pendingResponsiveFiles.push(\r\n                                        Browser.loadStylesheet(\r\n                                            url,\r\n                                            `data-responsive-${deviceType}`,\r\n                                            \"responsive-marker\",\r\n                                            (stylesheetId: string): void => {\r\n                                                this.checkPendingResponsiveFilesLoad(stylesheetId);\r\n                                            }));\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        // Find any stylesheet references stored in css/responsive script tags\r\n                        $(\"script[type='i-url-container/css']\").each((index: number, scriptElement: Element) => {\r\n                            const scriptContainer = $(scriptElement);\r\n                            const displayModes: string = scriptContainer.data(\"responsive-display-modes\");\r\n                            if (displayModes != null && displayModes.toLowerCase().indexOf(deviceType) !== -1) {\r\n                                const url: string = $.trim(scriptContainer.html());\r\n                                this.documentInstance.setBodyVisibleAfterLoadComplete = false;\r\n                                // Give the stylesheet a link so we can remove it later if the responsive style changes\r\n                                this._pendingResponsiveFiles.push(\r\n                                    Browser.loadStylesheet(url,\r\n                                        `data-responsive-${deviceType}`,\r\n                                        \"responsive-marker\",\r\n                                        (stylesheetId: string): void => {\r\n                                            this.checkPendingResponsiveFilesLoad(stylesheetId);\r\n                                        }));\r\n                            }\r\n                        });\r\n\r\n\r\n                        // Find any script references stored in css/responsive script tags\r\n                        $(\"script[type='i-url-container/script']\").each((index: number, scriptElement: Element) => {\r\n                            const scriptContainer = $(scriptElement);\r\n                            const displayModes: string = scriptContainer.data(\"responsive-display-modes\");\r\n                            if (displayModes != null && displayModes.toLowerCase().indexOf(deviceType) !== -1) {\r\n                                const url: string = $.trim(scriptContainer.html());\r\n                                this.documentInstance.setBodyVisibleAfterLoadComplete = false;\r\n                                // Give the stylesheet a link so we can remove it later if the responsive style changes\r\n                                this._pendingResponsiveFiles.push(\r\n                                    Browser.loadScript(url,\r\n                                        `data-responsive-${deviceType}`,\r\n                                        \"responsive-marker\",\r\n                                        (scriptId: string): void => {\r\n                                            this.checkPendingResponsiveFilesLoad(scriptId);\r\n                                        }));\r\n                            }\r\n                        });\r\n\r\n                    }\r\n\r\n                    if (configuration.profileName === \"mobile\" || configuration.profileName === \"tablet\") {\r\n                        switch (configuration.profileName) {\r\n                            case \"mobile\":\r\n                                configuration.clickTargets.push(new ResponsiveClickTarget(\".i-link>a,\"\r\n                                    + \".i-member-link a\", ResponsiveClickTargetKind.block));\r\n                                configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-actions-content .i-page-link,\"\r\n                                    + \"#i-actions-content .i-popup-link,\"\r\n                                    + \"#i-actions-content .i-function-link\", ResponsiveClickTargetKind.inline));\r\n                                break;\r\n                            case \"tablet\":\r\n                                configuration.clickTargets.push(new ResponsiveClickTarget(\".i-breadcrumbs-container a,\"\r\n                                    + \"#i-after-header-content .i-page-link,\"\r\n                                    + \"#i-after-header-content .i-popup-link,\"\r\n                                    + \"#i-after-header-content .i-function-link,\"\r\n                                    + \"#i-actions-content .i-page-link,\"\r\n                                    + \"#i-actions-content .i-popup-link,\"\r\n                                    + \"#i-actions-content .i-function-link\", ResponsiveClickTargetKind.inline));\r\n                                configuration.clickTargets.push(\r\n                                    new ResponsiveClickTarget(\"a[href='#top']\", ResponsiveClickTargetKind.block));\r\n                                break;\r\n                            // No default\r\n                        }\r\n\r\n                        // Add some default click targets - apply to both mobile and tablet\r\n                        configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-footer-content>a,\"\r\n                            + \"#i-after-header-content .i-function-link\", ResponsiveClickTargetKind.inline));\r\n                        configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-seealso-section-content a,\"\r\n                            + \".i-in-this-topic-container a\", ResponsiveClickTargetKind.block));\r\n\r\n                        // And default pivot tables\r\n                        configuration.tablesToPivot.push(new ResponsiveTable(\"table.pivot-table,table.i-pivot-table\"));\r\n                    }\r\n\r\n                }\r\n\r\n                this._configuration = configuration;\r\n\r\n                if (this._pendingResponsiveFiles.length === 0) {\r\n                    // No pending files, immediately apply\r\n                    this.onResponsiveFilesLoaded();\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        public initializeContentOrdinal(): number {\r\n            const CONTENT_ORDINAL = 999;\r\n\r\n            return CONTENT_ORDINAL;\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            // Apply the custom click targets\r\n            $.each(configuration.clickTargets, (_: number, clickTarget: ResponsiveClickTarget) => {\r\n                this.applyClickTarget(clickTarget);\r\n            });\r\n\r\n            // Pivot tables\r\n            $.each(configuration.tablesToPivot, (_tableIndex: number, responsiveTable: ResponsiveTable) => {\r\n                $(responsiveTable.selector).each((_elementIndex: number, table: HTMLElement) => {\r\n                    const pivotDiv = ResponsiveDocumentFeature.pivotTable(table);\r\n                    if (pivotDiv != null) {\r\n                        if (responsiveTable.onAfterPivot != null) {\r\n                            responsiveTable.onAfterPivot($(table), pivotDiv);\r\n                        } else {\r\n                            $(table).replaceWith(pivotDiv);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Wire up any responsive switches\r\n            $(\".i-responsive-switch\")\r\n                .off(\"click.responsive\")\r\n                .on(\"click.responsive\", (eventObject: JQueryEventObject) => {\r\n                    const displayMode: string = $(eventObject.currentTarget).data(\"i-responsive-mode\");\r\n                    if (displayMode !== \"\") {\r\n                        this.setForcedDisplayMode(displayMode);\r\n                        Browser.reload();\r\n                    }\r\n                });\r\n\r\n            $(\".i-responsive-select\")\r\n                .val(configuration.profileName)\r\n                .off(\"change.responsive\")\r\n                .on(\"change.responsive\",\r\n                    (eventObject: JQueryEventObject) => {\r\n                        const selectedValue = $(eventObject.currentTarget).val();\r\n                        if (selectedValue !== \"\") {\r\n                            this.setForcedDisplayMode(selectedValue as string);\r\n                            Browser.reload();\r\n                        }\r\n                    });\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (message) {\r\n                switch (message.messageType) {\r\n                    case DocumentMessageNames.insertNavigationHeader:\r\n                        this.insertNavigationHeader();\r\n                        break;\r\n                    case DocumentMessageNames.searchHighlightComplete:\r\n                        $(\"a#i-remove-highlighting\").css(\"display\", \"inline\");\r\n                        break;\r\n                    // No default\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        protected insertNavigationHeader(): void {\r\n\r\n            if ($(\"body > div.navigation-header\").length === 0) {\r\n\r\n                const header: JQuery = $(\"<div class=\\\"i-navigation-header\\\"><div class=\\\"i-inner-container\\\"></div></div>\");\r\n                const innercontainer: JQuery = header.find(\".i-inner-container\").first();\r\n\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-previous\\\"><i class=\\\"icon-arrow-left\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-index\\\"><i class=\\\"icon-list\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-toc\\\"><i class=\\\"icon-book\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-search\\\"><i class=\\\"icon-search\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-next\\\"><i class=\\\"icon-arrow-right\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-remove-highlighting\\\" class=\\\"btn-warning\\\"><i class=\\\"icon-remove icon-white\\\"></i></a>\")\r\n                    .appendTo(innercontainer);\r\n\r\n                if ($(\".i-search-highlight\").length) {\r\n                    // Highlighted search items have been added to the body so show the remove highlights button\r\n                    innercontainer.children(\"#i-remove-highlighting\").css(\"display\", \"inline\");\r\n                }\r\n\r\n                innercontainer.children(\"a\")\r\n                    .off(\"click.responsive\")\r\n                    .on(\"click.responsive\", (eventObject: JQueryEventObject) => {\r\n                        const webframe = window.parent;\r\n                        if (typeof webframe != \"undefined\") {\r\n\r\n                            switch ($(eventObject.currentTarget).attr(\"id\")) {\r\n                                case \"i-nav-previous\":\r\n                                    Messaging.routeMessageToParentFrame(\r\n                                        RootMessageNames.navigate,\r\n                                        \"previous\");\r\n\r\n                                    break;\r\n                                case \"i-nav-next\":\r\n                                    Messaging.routeMessageToParentFrame(\r\n                                        RootMessageNames.navigate,\r\n                                        \"next\");\r\n\r\n                                    break;\r\n                                case \"i-nav-index\":\r\n                                case \"i-nav-toc\":\r\n                                case \"i-nav-search\":\r\n                                    let paneId: string = $(eventObject.currentTarget).attr(\"id\");\r\n                                    if (paneId.substring(0, INNOVASYS_PREFIX_LENGTH) === \"i-\") {\r\n                                        paneId = paneId.substring(INNOVASYS_PREFIX_LENGTH);\r\n                                    }\r\n                                    Messaging.routeMessageToParentFrame(RootMessageNames.openNavigationPane, paneId);\r\n                                    break;\r\n                                case \"i-remove-highlighting\":\r\n                                    // Instruct search highlighting to remove any existing highlights\r\n                                    this.documentInstance.processWindowMessage(\r\n                                        new WindowMessage(DocumentMessageNames.resetQuickSearch, null));\r\n                                    break;\r\n                                // No default\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                header.prependTo($(\"body\"));\r\n\r\n                if ($(\"html\").data(\"responsive-load-complete\") === true) {\r\n                    // Async load of responsive files already complete so make the body visible\r\n                    this.documentInstance.setBodyVisible();\r\n                    $(\"html\").data(\"responsive-load-complete\", null);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        protected applyClickTarget(clickTarget: ResponsiveClickTarget): void {\r\n            const buttonClassName: string\r\n                = (clickTarget.kind === ResponsiveClickTargetKind.inline) ? \"btn btn-mini btn-xs\" : \"btn\";\r\n            $(clickTarget.className).addClass(buttonClassName);\r\n        }\r\n\r\n        private getDeviceType(): string {\r\n\r\n            if (!this.isEnabled()) {\r\n                // Responsive disabled - always desktop\r\n                return \"DESKTOP\";\r\n            }\r\n\r\n            const forcedDisplayMode: string = this.getForcedDisplayMode();\r\n            if (forcedDisplayMode != null) {\r\n                return forcedDisplayMode;\r\n            }\r\n\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            if ((Modernizr as any).touch) {\r\n\r\n                if (Modernizr.mq(\"screen and (orientation: portrait) and (max-device-width: 600px)\")) {\r\n                    return \"MOBILE\";\r\n                } else if (Modernizr.mq(\"screen and (orientation: landscape) and (max-device-width: 767px)\")) {\r\n                    return \"MOBILE\";\r\n                } else {\r\n                    return \"TABLET\";\r\n                }\r\n\r\n            } else if (navigator.userAgent.indexOf(\"Windows Phone OS\") !== -1) {\r\n                // Specific check for windows phone as Modernizr returns false for the touch property\r\n                return \"MOBILE\";\r\n            }\r\n\r\n            return \"DESKTOP\";\r\n\r\n        }\r\n\r\n        /**\r\n         * Returns any forced display mode set by the containing frame.\r\n         */\r\n        private getForcedDisplayMode() {\r\n\r\n            const overrides: IOverrides = Browser.getCommonSettings();\r\n            if (typeof overrides.forcedDisplayMode != \"undefined\"\r\n                && overrides.forcedDisplayMode != null) {\r\n\r\n                return overrides.forcedDisplayMode;\r\n            }\r\n\r\n            if (this.getFeatureSettings().displayMode != null) {\r\n                return this.getFeatureSettings().displayMode;\r\n            }\r\n\r\n            const location = Browser.getLocationInfo();\r\n            if (location.hash === \"#ForceDisplayDesktop\") {\r\n                return \"DESKTOP\";\r\n            } else if (location.hash === \"#ForceDisplayMobile\") {\r\n                return \"MOBILE\";\r\n            } else if (location.hash === \"#ForceDisplayTablet\") {\r\n                return \"TABLET\";\r\n            }\r\n\r\n            // Only check local storage here if we are in a frame - the parent frame sets the local storage\r\n            // value for overriding the default behavior so we only need to check it if we are actually running\r\n            // in a frame\r\n            const currentPath: string =\r\n                location.pathname.substring(0, location.pathname.lastIndexOf(\"/\"));\r\n            const responsiveStorageId\r\n                = `innovasys-responsive-${currentPath.replace(/[^a-zA-Z0-9_\\-]/g, \"\")}`;\r\n            if (this.documentInstance.getLocalStorage().getAttribute(responsiveStorageId) != null) {\r\n                return this.documentInstance.getLocalStorage().getAttribute(responsiveStorageId);\r\n            }\r\n\r\n            return null;\r\n\r\n        }\r\n\r\n        /**\r\n         * Forces a specific responsive display mode when the document loads. The forced display mode is set in local storage\r\n         *  so will be used by all subsequent page loads until it is reset.\r\n         */\r\n        public setForcedDisplayMode(displayMode: string): void {\r\n            const location = Browser.getLocationInfo();\r\n            const currentPath: string = location.pathname.substring(0, location.pathname.lastIndexOf(\"/\"));\r\n            const responsiveStorageId\r\n                = `innovasys-responsive-${currentPath.replace(/[^a-zA-Z0-9_\\-]/g, \"\")}`;\r\n            this.documentInstance.getLocalStorage().setAttribute(responsiveStorageId, displayMode);\r\n        }\r\n\r\n        /**\r\n         * Called after responsive setup completes.\r\n         */\r\n        private onResponsiveFilesLoaded() {\r\n\r\n            const overrides: IOverrides = Browser.getCommonSettings();\r\n\r\n            this.documentInstance.applyResponsiveConfiguration(this._configuration);\r\n\r\n            if (this._configuration.profileName !== \"desktop\") {\r\n                if (!this.documentInstance.isContentDocument\r\n                    || overrides.navigationKind === \"inpage\"\r\n                    || $(\"body > div.i-navigation-header\").length !== 0) {\r\n\r\n                    // Navigation header already loaded, or not a content document or a page with\r\n                    //  inpage navigation so make the body visible;\r\n                    this.documentInstance.setBodyVisible();\r\n                } else {\r\n                    // Navigation header not loaded yet, add a flag here so that when the header has finished loaded it will make\r\n                    //  the body visible\r\n                    $(\"html\").data(\"responsive-load-complete\", true);\r\n                }\r\n            }\r\n\r\n            $(\"html\").addClass(`i-responsive-${this._configuration.profileName}`);\r\n\r\n        }\r\n    }\r\n\r\n    export interface IResponsiveFeatureSettings {\r\n        isEnabled: boolean;\r\n        displayMode: string;\r\n    }\r\n\r\n    export class ResponsiveDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new ResponsiveDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ResponsiveDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class FixedToTopDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private isPinned = false;\r\n        private readonly rootSelector: string;\r\n\r\n        public getName(): string {\r\n            return \"Fixed to Top\";\r\n        }\r\n\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if ($(\".i-fixed-to-top\").length > 0) {\r\n                const scrollEventId = \"scroll.fixed-to-top\";\r\n                const resizeEventId = \"resize.fixed-to-top\";\r\n\r\n                setTimeout(() => this.refresh(), 1);\r\n\r\n                $(window)\r\n                    .off(scrollEventId)\r\n                    .on(scrollEventId, () => this.refresh())\r\n                    .off(resizeEventId)\r\n                    .on(resizeEventId, () => this.refresh());\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            setTimeout(() => this.refresh(), 1);\r\n        }\r\n\r\n        private refresh(): void {\r\n            const bodyTop = this.getBodyContentPosition();\r\n\r\n            const $fixedToTop = $(\".i-fixed-to-top\");\r\n\r\n            const scrollTop = $(window).scrollTop();\r\n            const isPinnedNewValue = (scrollTop > bodyTop);\r\n\r\n            if (this.isPinned !== isPinnedNewValue) {\r\n                this.isPinned = isPinnedNewValue;\r\n                $fixedToTop.toggleClass(\"i-is-fixed\", isPinnedNewValue);\r\n\r\n                if (this.isPinned) {\r\n                    $fixedToTop.css(\"top\", \"0\");\r\n                }\r\n            }\r\n\r\n            if (!this.isPinned) {\r\n                const topValue = bodyTop - scrollTop;\r\n                $(\".i-fixed-to-top\").css(\"top\", topValue > 0 ? `${topValue}px` : \"\");\r\n            }\r\n        }\r\n\r\n        private getBodyContentPosition(): number {\r\n            const bodyContentPosition = $(\"#i-body-content-container\", this.rootSelector).position();\r\n            if (bodyContentPosition != null) {\r\n                return bodyContentPosition.top;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class FixedToTopDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new FixedToTopDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.FixedToTopDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class ThemeDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _rootSelector: JQuery;\r\n\r\n        public getName(): string {\r\n            return \"Theme\";\r\n        }\r\n\r\n        private getDefaultSettings(): IThemeFeatureSettings {\r\n            return {\r\n                defaultThemeOption: null,\r\n                isThemeSelectionEnabled: false\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IThemeFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IThemeFeatureSettings>(\"theme\", this.getDefaultSettings);\r\n        }\r\n\r\n        /* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            this._rootSelector = rootSelector;\r\n\r\n            const settings = this.getFeatureSettings();\r\n\r\n            if (settings.isThemeSelectionEnabled) {\r\n                $(\".i-theme-select\", rootSelector)\r\n                    .off(\"change.theme\")\r\n                    .on(\"change.theme\",\r\n                    (eventObject: JQueryEventObject) => {\r\n                        const themeName = $(eventObject.currentTarget).data(\"theme-name\");\r\n                        const stylesheetUrl = $(eventObject.currentTarget).val() as string;\r\n                        const themeOption = $(`option[value='${stylesheetUrl}']`, $(eventObject.currentTarget)).data(\"theme-option\");\r\n                        this.onThemeSelected(themeName, themeOption, stylesheetUrl, true);\r\n                    });\r\n            }\r\n\r\n            $(\".i-theme-select\", rootSelector).each((index: number, element: Element) => {\r\n                const $element = $(element);\r\n                const themeName = $element.data(\"theme-name\");\r\n\r\n                if (themeName != null) {\r\n                    let themeOptionToApply: string = this.documentInstance.getLocalStorage()\r\n                        .getAttribute(`i-theme-${themeName}`);\r\n                    if (themeOptionToApply == null) {\r\n                        themeOptionToApply = settings.defaultThemeOption;\r\n                    }\r\n                    if (themeOptionToApply != null) {\r\n                        const themeOption = $(`option[data-theme-option='${themeOptionToApply}']`, $element);\r\n                        if (themeOption.length > 0) {\r\n                            $element.val(themeOption.val());\r\n                            this.onThemeSelected(themeName, themeOptionToApply, themeOption.val() as string, false);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (!settings.isThemeSelectionEnabled) {\r\n                $(\".i-theme-selection-container\").hide();\r\n            } else {\r\n                $(\".i-theme-selection-container\").show();\r\n            }\r\n\r\n        }\r\n\r\n        private onThemeSelected(themeName: string, themeValue: string, stylesheetUrl: string, saveSelection: boolean) {\r\n            // Remove any existing theme stylesheets\r\n            const existingStylesheets = $(`link[data-theme-name='${themeName}']`);\r\n            existingStylesheets.remove();\r\n            // Add the new one (if not \"none\")\r\n            if (stylesheetUrl !== \"none\") {\r\n                $(\"head\").append(`<link rel=\"stylesheet\" href=\"${stylesheetUrl}\" type=\"text/css\" data-theme-name=\"${themeName}\" />`);\r\n            }\r\n            // Add a class to the root\r\n            $(\".i-theme-select option\", this._rootSelector).each((index: number, element: Element) => {\r\n                const optionValue = $(element).data(\"theme-option\");\r\n                $(\"html\").toggleClass(`i-theme-${themeName}-${optionValue}`, optionValue === themeValue);\r\n            });\r\n            if (saveSelection) {\r\n                // Save as the current preference\r\n                this.documentInstance.getLocalStorage().setAttribute(`i-theme-${themeName}`, themeValue);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export interface IThemeFeatureSettings {\r\n        defaultThemeOption: string;\r\n        isThemeSelectionEnabled: boolean;\r\n    }\r\n\r\n    export class ThemeDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new ThemeDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ThemeDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class DynamicStylesDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _rootSelector: JQuery;\r\n        private _addedStyles: { dynamicWordBreak: number } = { dynamicWordBreak: null };\r\n\r\n        public getName(): string {\r\n            return \"DynamicStyles\";\r\n        }\r\n\r\n        private getDefaultSettings(): IDynamicStylesFeatureSettings {\r\n            return {\r\n                isDynamicWordWrapEnabled: false,\r\n                isDynamicWordWrapUpdateOnResizeEnabled: true\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IDynamicStylesFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IDynamicStylesFeatureSettings>(\"dynamicstyles\", this.getDefaultSettings);\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n                this._rootSelector = rootSelector;\r\n            }\r\n\r\n            const settings = this.getFeatureSettings();\r\n            if (!settings.isDynamicWordWrapEnabled) {\r\n                return;\r\n            }\r\n\r\n            // No dynamic styles in compiled help or at design time\r\n            if (!Browser.isCompiledHelp() && !Browser.isDesignTime) {\r\n\r\n                const $bodyContent = $(\"#i-body-content\", this._rootSelector);\r\n\r\n                if ($bodyContent.length > 0) {\r\n                    setTimeout(() => {\r\n                        this.updateDynamicWordBreak();\r\n                    });\r\n\r\n                    if (settings.isDynamicWordWrapUpdateOnResizeEnabled) {\r\n                        $(window).off(\"resize.dynamicstyles\")\r\n                            .on(\"resize.dynamicstyles\",\r\n                                () => {\r\n                                    this.updateDynamicWordBreak();\r\n                                });\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        private updateDynamicWordBreak(): void {\r\n\r\n            const styleId = \"i-dynamic-word-break\";\r\n            const $bodyContent = $(\"#i-body-content\", this._rootSelector);\r\n            const bodyContent = $bodyContent.get(0);\r\n\r\n            if (this._addedStyles.dynamicWordBreak != null) {\r\n                // Style already added. If the current width is > applied width, remove and re-evaluate\r\n                if (bodyContent.offsetWidth > this._addedStyles.dynamicWordBreak) {\r\n                    $(`#${styleId}`).remove();\r\n                    this._addedStyles.dynamicWordBreak = null;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (bodyContent.offsetWidth < bodyContent.scrollWidth\r\n                && ($(\"table\", $bodyContent).length > 0)) {\r\n\r\n                this._addedStyles.dynamicWordBreak = bodyContent.offsetWidth;\r\n                const $dynamicStylesElement = Browser.getDynamicStyleContainer(styleId);\r\n                $dynamicStylesElement.html(\"td {word-break: break-all;}\");\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    export interface IDynamicStylesFeatureSettings {\r\n        isDynamicWordWrapEnabled: boolean;\r\n        isDynamicWordWrapUpdateOnResizeEnabled: boolean;\r\n    }\r\n\r\n    export class DynamicStylesDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new DynamicStylesDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.DynamicStylesDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class DarkModeDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private readonly _optimalColors: Record<string, tinycolor.Instance> = {};\r\n\r\n        private findReadableColorOnDarkBackground(color: tinycolor.Instance): tinycolor.Instance {\r\n            if (this._optimalColors[color.toHex8String()]) {\r\n                return this._optimalColors[color.toHex8String()];\r\n            }\r\n\r\n            const maximumLightening = 100;\r\n            const lighteningIncrement = 1;\r\n            let resolvedColor: tinycolor.Instance;\r\n\r\n            for (let i = 1; i < maximumLightening; i += lighteningIncrement) {\r\n                const possibleColor = color.clone().lighten(i);\r\n                if (tinycolor.isReadable(possibleColor, \"#333\")) {\r\n                    resolvedColor = possibleColor;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (resolvedColor == null) {\r\n                resolvedColor = tinycolor(\"#ccc\");\r\n            }\r\n\r\n            this._optimalColors[color.toHex8String()] = resolvedColor;\r\n\r\n            return resolvedColor;\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"DarkMode\";\r\n        }\r\n\r\n        private getDefaultSettings(): IDarkModeFeatureSettings {\r\n            return {\r\n                isEnabled: false,\r\n                isAlwaysDarkMode: false\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IDarkModeFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IDarkModeFeatureSettings>(\"darkmode\", this.getDefaultSettings);\r\n        }\r\n\r\n        public initializeDocument(): void {\r\n\r\n            const settings = this.getFeatureSettings();\r\n\r\n            if (settings.isEnabled) {\r\n                if (settings.isAlwaysDarkMode) {\r\n                    $(\"html\").addClass(\"i-dark\");\r\n                } else {\r\n                    if (window.matchMedia) {\r\n                        const matchMediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n                        const matchMediaListener = (queryList: MediaQueryList, isAddDarkModificationsDisabled: boolean = false) => {\r\n                            if (queryList.matches) {\r\n                                $(\"html\").addClass(\"i-dark\");\r\n                                if (!isAddDarkModificationsDisabled) {\r\n                                    this.addDarkModifications();\r\n                                }\r\n                            } else {\r\n                                if ($(\"html\").hasClass(\"i-dark\")) {\r\n                                    this.removeDarkModifications();\r\n                                    $(\"html\").removeClass(\"i-dark\");\r\n                                }\r\n                            }\r\n                        };\r\n                        matchMediaListener(matchMediaQuery, true);\r\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                        matchMediaQuery.addListener(matchMediaListener as any);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad?: boolean): void {\r\n            if ($(\"html\").hasClass(\"i-dark\")) {\r\n                this.addDarkModifications();\r\n            }\r\n        }\r\n\r\n        private addDarkModifications(): void {\r\n            const $inlineColors = $(\"pre [style]\");\r\n            $inlineColors.each((_, element) => {\r\n                if (element.style.color) {\r\n                    const originalColor = tinycolor(element.style.color);\r\n                    const color = this.findReadableColorOnDarkBackground(originalColor);\r\n                    if (color.toHex8String() !== originalColor.toHex8String()) {\r\n                        $(element).data(\"i-original-color\", element.style.color);\r\n                        element.style.color = color.toHex8String();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        private removeDarkModifications(): void {\r\n            const $inlineColors = $(\"pre [style]\");\r\n            $inlineColors.each((_, element) => {\r\n                const $element = $(element);\r\n                if ($element.data(\"i-original-color\")) {\r\n                    element.style.color = $element.data(\"i-original-color\");\r\n                    $element.removeData(\"i-original-color\");\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    export interface IDarkModeFeatureSettings {\r\n        isEnabled: boolean;\r\n        isAlwaysDarkMode: boolean;\r\n    }\r\n\r\n    export class DarkModeDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new DarkModeDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.DarkModeDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const replacementList = [\r\n        {'base':'A', 'letters':/[\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F]/g},\r\n        {'base':'AA','letters':/[\\uA732]/g},\r\n        {'base':'AE','letters':/[\\u00C6\\u01FC\\u01E2]/g},\r\n        {'base':'AO','letters':/[\\uA734]/g},\r\n        {'base':'AU','letters':/[\\uA736]/g},\r\n        {'base':'AV','letters':/[\\uA738\\uA73A]/g},\r\n        {'base':'AY','letters':/[\\uA73C]/g},\r\n        {'base':'B', 'letters':/[\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181]/g},\r\n        {'base':'C', 'letters':/[\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E]/g},\r\n        {'base':'D', 'letters':/[\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779]/g},\r\n        {'base':'DZ','letters':/[\\u01F1\\u01C4]/g},\r\n        {'base':'Dz','letters':/[\\u01F2\\u01C5]/g},\r\n        {'base':'E', 'letters':/[\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E]/g},\r\n        {'base':'F', 'letters':/[\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B]/g},\r\n        {'base':'G', 'letters':/[\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E]/g},\r\n        {'base':'H', 'letters':/[\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D]/g},\r\n        {'base':'I', 'letters':/[\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197]/g},\r\n        {'base':'J', 'letters':/[\\u004A\\u24BF\\uFF2A\\u0134\\u0248]/g},\r\n        {'base':'K', 'letters':/[\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2]/g},\r\n        {'base':'L', 'letters':/[\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780]/g},\r\n        {'base':'LJ','letters':/[\\u01C7]/g},\r\n        {'base':'Lj','letters':/[\\u01C8]/g},\r\n        {'base':'M', 'letters':/[\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C]/g},\r\n        {'base':'N', 'letters':/[\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4]/g},\r\n        {'base':'NJ','letters':/[\\u01CA]/g},\r\n        {'base':'Nj','letters':/[\\u01CB]/g},\r\n        {'base':'O', 'letters':/[\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C]/g},\r\n        {'base':'OI','letters':/[\\u01A2]/g},\r\n        {'base':'OO','letters':/[\\uA74E]/g},\r\n        {'base':'OU','letters':/[\\u0222]/g},\r\n        {'base':'P', 'letters':/[\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754]/g},\r\n        {'base':'Q', 'letters':/[\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A]/g},\r\n        {'base':'R', 'letters':/[\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782]/g},\r\n        {'base':'S', 'letters':/[\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784]/g},\r\n        {'base':'T', 'letters':/[\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786]/g},\r\n        {'base':'TZ','letters':/[\\uA728]/g},\r\n        {'base':'U', 'letters':/[\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244]/g},\r\n        {'base':'V', 'letters':/[\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245]/g},\r\n        {'base':'VY','letters':/[\\uA760]/g},\r\n        {'base':'W', 'letters':/[\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72]/g},\r\n        {'base':'X', 'letters':/[\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C]/g},\r\n        {'base':'Y', 'letters':/[\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE]/g},\r\n        {'base':'Z', 'letters':/[\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762]/g},\r\n        {'base':'a', 'letters':/[\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250]/g},\r\n        {'base':'aa','letters':/[\\uA733]/g},\r\n        {'base':'ae','letters':/[\\u00E6\\u01FD\\u01E3]/g},\r\n        {'base':'ao','letters':/[\\uA735]/g},\r\n        {'base':'au','letters':/[\\uA737]/g},\r\n        {'base':'av','letters':/[\\uA739\\uA73B]/g},\r\n        {'base':'ay','letters':/[\\uA73D]/g},\r\n        {'base':'b', 'letters':/[\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253]/g},\r\n        {'base':'c', 'letters':/[\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184]/g},\r\n        {'base':'d', 'letters':/[\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A]/g},\r\n        {'base':'dz','letters':/[\\u01F3\\u01C6]/g},\r\n        {'base':'e', 'letters':/[\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD]/g},\r\n        {'base':'f', 'letters':/[\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C]/g},\r\n        {'base':'g', 'letters':/[\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F]/g},\r\n        {'base':'h', 'letters':/[\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265]/g},\r\n        {'base':'hv','letters':/[\\u0195]/g},\r\n        {'base':'i', 'letters':/[\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131]/g},\r\n        {'base':'j', 'letters':/[\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249]/g},\r\n        {'base':'k', 'letters':/[\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3]/g},\r\n        {'base':'l', 'letters':/[\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747]/g},\r\n        {'base':'lj','letters':/[\\u01C9]/g},\r\n        {'base':'m', 'letters':/[\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F]/g},\r\n        {'base':'n', 'letters':/[\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5]/g},\r\n        {'base':'nj','letters':/[\\u01CC]/g},\r\n        {'base':'o', 'letters':/[\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275]/g},\r\n        {'base':'oi','letters':/[\\u01A3]/g},\r\n        {'base':'ou','letters':/[\\u0223]/g},\r\n        {'base':'oo','letters':/[\\uA74F]/g},\r\n        {'base':'p','letters':/[\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755]/g},\r\n        {'base':'q','letters':/[\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759]/g},\r\n        {'base':'r','letters':/[\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783]/g},\r\n        {'base':'s','letters':/[\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B]/g},\r\n        {'base':'t','letters':/[\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787]/g},\r\n        {'base':'tz','letters':/[\\uA729]/g},\r\n        {'base':'u','letters':/[\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289]/g},\r\n        {'base':'v','letters':/[\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C]/g},\r\n        {'base':'vy','letters':/[\\uA761]/g},\r\n        {'base':'w','letters':/[\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73]/g},\r\n        {'base':'x','letters':/[\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D]/g},\r\n        {'base':'y','letters':/[\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF]/g},\r\n        {'base':'z','letters':/[\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763]/g}\r\n    ];;\r\n\r\n\r\n\r\n    export class DiacriticsHelper {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor() {\r\n\r\n        }\r\n\r\n        public removeDiacritics (str : string) : string {\r\n            for(var i=0; i<replacementList.length; i++) {\r\n                str = str.replace(replacementList[i].letters, replacementList[i].base);\r\n            }\r\n        \r\n            return str;\r\n        }\r\n    }\r\n}","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class ChmCompatibilityDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"CHM Compatibility\";\r\n        }\r\n\r\n        public initializeDocument(): void {\r\n\r\n            const currentLocation = `${Browser.getLocationInfo().href}.`;\r\n            if (currentLocation.indexOf(\"ms-its:\") === 0) {\r\n                $(\"body\").addClass(\"i-chm i-compiled\");\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    export class ChmCompatibilityDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            const currentLocation = `${Browser.getLocationInfo().href}.`;\r\n            if (currentLocation.indexOf(\"mk:@MSITStore\") === 0 || currentLocation.indexOf(\"ms-its:\") === 0) {\r\n                return new ChmCompatibilityDocumentFeature(documentInstance);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ChmCompatibilityDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class CopyCodeDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Copy Code\";\r\n        }\r\n\r\n        private getSettings(): ICopyCodeFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings(\"copycode\", this.getDefaultSettings);\r\n        }\r\n\r\n        private getDefaultSettings(): ICopyCodeFeatureSettings {\r\n            return {\r\n                copiedOkText: \"Copied to clipboard\",\r\n                copyError: \"Could not copy to clipboard\"\r\n            };\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if ($(\".i-copy-code\").length > 0 || !Object.defineProperty) {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                if (Browser.isCompiledHelp() || ((typeof ClipboardJS == \"undefined\") && ((window as any).clipboardData))) {\r\n\r\n                    const eventId = \"click.i-copy-code\";\r\n\r\n                    // In CHM and Help 2.x, or any old browser versions, use the inbuilt IE clipboard support\r\n                    rootSelector\r\n                        .off(eventId, \".i-copy-code\")\r\n                        .on(eventId,\r\n                            \".i-copy-code\",\r\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                            (eventObject: JQueryEventObject): any => {\r\n                                const textValue =\r\n                                    DomHelpers.getTextFromContainingTable(\r\n                                        eventObject.currentTarget as HTMLElement);\r\n                                try {\r\n                                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                    (window as any).clipboardData.setData(\"Text\", textValue);\r\n                                    this.showTip(eventObject.currentTarget as HTMLElement, this.getSettings().copiedOkText);\r\n                                } catch (ex) {\r\n                                    this.showTip(eventObject.currentTarget as HTMLElement, this.getSettings().copyError);\r\n                                }\r\n                                Browser.stopPropagation(eventObject);\r\n                            });\r\n\r\n                } else {\r\n                    const clipboard = new ClipboardJS(\".i-copy-code\",\r\n                        {\r\n                            text: (trigger: HTMLElement) => DomHelpers.getTextFromContainingTable(trigger)\r\n                        });\r\n\r\n                    clipboard.on(\"success\",\r\n                        (e: ClipboardJS.Event) => {\r\n                            e.clearSelection();\r\n                            this.showTip(e.trigger as HTMLElement, this.getSettings().copiedOkText);\r\n                        });\r\n\r\n                    clipboard.on(\"error\",\r\n                        (e: ClipboardJS.Event) => {\r\n                            this.showTip(e.trigger as HTMLElement, this.getSettings().copyError);\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        private showTip(target: HTMLElement, message: string) {\r\n            const tips = $(target)\r\n                .qtip({\r\n                    id: \"i-copytoclipboard-tip\",\r\n                    content: {\r\n                        text: message\r\n                    },\r\n                    position: {\r\n                        my: \"right center\",\r\n                        at: \"left center\"\r\n                    },\r\n                    show: {\r\n                        event: \"click\"\r\n                    },\r\n                    hide: {\r\n                        fixed: true,\r\n                        event: false\r\n                    }\r\n                });\r\n            const api = tips.qtip(\"api\");\r\n            api.toggle(true);\r\n            const DELAY = 2000;\r\n            setTimeout(() => {\r\n                api.toggle(false);\r\n            }, DELAY);\r\n        }\r\n\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            switch (configuration.profileName) {\r\n                case \"tablet\":\r\n                    break;\r\n                case \"mobile\":\r\n                    break;\r\n                // No default\r\n            }\r\n            // Dropdown Header as a button\r\n            configuration.clickTargets.push(new ResponsiveClickTarget(\".i-copy-code\", ResponsiveClickTargetKind.inline));\r\n        }\r\n\r\n    }\r\n\r\n    export interface ICopyCodeFeatureSettings {\r\n        copiedOkText: string;\r\n        copyError: string;\r\n    }\r\n\r\n    export class CopyCodeDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new CopyCodeDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.CopyCodeDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const highlightTextConstants = {\r\n        textNodeType: 3,\r\n        elementNodeType: 1\r\n    };\r\n\r\n    export class HighlightTextDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        // Stores the first found match so we can scroll to it\r\n        private _firstMatch: HTMLElement = null;\r\n        private _diacriticsHelper: DiacriticsHelper = null;\r\n\r\n\r\n        /**\r\n         * Merge any adjacent text nodes (left behind from search highlight)\r\n         * @param parentNode The node to start searching from.\r\n         */\r\n        private static cleanUpTextNodes(parentNode: Node): void {\r\n\r\n            let node: Node;\r\n            let lastNode: Node;\r\n            let mergeCount: number;\r\n\r\n            do {\r\n                mergeCount = 0;\r\n                for (let x = 1; x < parentNode.childNodes.length; x++) {\r\n                    node = parentNode.childNodes[x];\r\n                    lastNode = node.previousSibling;\r\n\r\n                    if (node.nodeType === highlightTextConstants.textNodeType\r\n                        && lastNode.nodeType === highlightTextConstants.textNodeType) {\r\n\r\n                        node.nodeValue = lastNode.nodeValue + node.nodeValue;\r\n                        parentNode.removeChild(lastNode);\r\n                        mergeCount++;\r\n                    }\r\n                }\r\n            } while (mergeCount > 0);\r\n\r\n            /* eslint-disable-next-line @typescript-eslint/prefer-for-of */\r\n            for (let x = 0; x < parentNode.childNodes.length; x++) {\r\n                HighlightTextDocumentFeature.cleanUpTextNodes(parentNode.childNodes[x]);\r\n            }\r\n\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"Highlight Text\";\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (message != null) {\r\n                switch (message.messageType) {\r\n                    case DocumentMessageNames.quickSearch:\r\n                        this.highlightText(message.messageData);\r\n                        break;\r\n                    case DocumentMessageNames.resetQuickSearch:\r\n                        this.removeAllHighlights();\r\n                        break;\r\n                    case DocumentMessageNames.searchHighlightComplete:\r\n                        this.searchHighlightComplete();\r\n                        break;\r\n                    // No default\r\n                }\r\n            }\r\n        }\r\n\r\n        private highlightText(text: string) {\r\n            const rootElement: HTMLElement = this.documentInstance.rootElement;\r\n\r\n            if (text !== \"\") {\r\n                this.highlightTextInElement(rootElement, text);\r\n            }\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n            this._diacriticsHelper = new DiacriticsHelper;\r\n            if (isInitialLoad) {\r\n                const location = Browser.getLocationInfo();\r\n\r\n                if (location.search) {\r\n                    const prefix = \"?highlight=\";\r\n\r\n                    if (location.search.indexOf(prefix) === 0) {\r\n                        const keywords = decodeURIComponent(location.search.substring(prefix.length)).split(\",\");\r\n\r\n                        this.removeAllHighlights();\r\n\r\n                        for (const keyword of keywords) {\r\n                            if (keyword != null && keyword !== \"\") {\r\n                                this.highlightText(keyword);\r\n                            }\r\n                        }\r\n\r\n                        this.searchHighlightComplete();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        private searchHighlightComplete() {\r\n            // Scroll to the first hit if it's not already visible\r\n            if (this._firstMatch != null) {\r\n                const rootElement: HTMLElement = this.documentInstance.rootElement;\r\n                const ownerDocument: HTMLDocument = (rootElement.ownerDocument) as HTMLDocument;\r\n                if (DomHelpers.getElementPosition(this._firstMatch).top > ownerDocument.documentElement.scrollTop\r\n                    + ownerDocument.documentElement.clientHeight\r\n                    || DomHelpers.getElementPosition(this._firstMatch).top < ownerDocument.documentElement.scrollTop) {\r\n\r\n                    ownerDocument.documentElement.scrollTop = this._firstMatch.offsetTop;\r\n                }\r\n            }\r\n            this._firstMatch = null;\r\n        }\r\n\r\n        /**\r\n         * Finds some specific text and wraps with a search result highlight element.\r\n         * @param element The root element to search through.\r\n         * @param text The text to find.\r\n         */\r\n        public highlightTextInElement(element: HTMLElement, text: string): void {\r\n\r\n            let node: Node;\r\n            let nodeText: string;\r\n            let lowerCaseNodeText: string;\r\n            let highlightSpan: HTMLSpanElement;\r\n            let remainingText: Node;\r\n            const ownerDocument: HTMLDocument = (element.ownerDocument) as HTMLDocument;\r\n\r\n            let textdiacritics = this._diacriticsHelper.removeDiacritics(text);\r\n            const textRegExp = new RegExp(`(^|[\\\\b\\\\s]|[^\\\\w])(${this.escapeForRegExp(textdiacritics)})(?=$|[\\\\b\\\\s]|[^\\\\w])`, \"i\");\r\n\r\n            // Traverse the document backwards otherwise the DOM returns stale objects as\r\n            //  we make modifications\r\n            for (let x: number = element.childNodes.length - 1; x >= 0; x--) {\r\n\r\n                node = element.childNodes[x];\r\n\r\n                let checkedElementVisible = false;\r\n\r\n                // Text Node\r\n                if (node.nodeType === highlightTextConstants.textNodeType) {\r\n\r\n                    nodeText = node.nodeValue;\r\n                    lowerCaseNodeText = this._diacriticsHelper.removeDiacritics(nodeText.toLowerCase());\r\n\r\n                    let match: RegExpMatchArray;\r\n                    const newNodes: Node[] = [];\r\n\r\n                    while (nodeText.length > 0 && (match = lowerCaseNodeText.match(textRegExp)) !== null) {\r\n\r\n                        const pos = match.index + match[1].length;\r\n\r\n                        if (pos > 0) {\r\n                            // Text up to match\r\n                            newNodes.push(ownerDocument.createTextNode(nodeText.substring(0, pos)));\r\n                        }\r\n\r\n                        // Match highlight\r\n                        highlightSpan = (ownerDocument.createElement(\"SPAN\") as HTMLSpanElement);\r\n                        highlightSpan.className = \"i-search-highlight\";\r\n                        highlightSpan.appendChild(ownerDocument.createTextNode(nodeText.substring(pos, pos + text.length)));\r\n                        newNodes.push(highlightSpan);\r\n\r\n                        // Remainder\r\n                        nodeText = nodeText.substring(pos + text.length);\r\n                        lowerCaseNodeText = this._diacriticsHelper.removeDiacritics(nodeText.toLowerCase());\r\n\r\n                        // Store the first (last)hit so we can scroll to it\r\n                        this._firstMatch = highlightSpan;\r\n\r\n                        if (!checkedElementVisible) {\r\n                            // Delegate responsibility to the document and features\r\n                            this.documentInstance.ensureElementVisible(node.parentElement);\r\n\r\n                            checkedElementVisible = true;\r\n                        }\r\n                    }\r\n\r\n                    if (newNodes.length > 0) {\r\n                        if (nodeText.length > 0) {\r\n                            // Remainder after the last match\r\n                            newNodes.push(ownerDocument.createTextNode(nodeText));\r\n                        }\r\n\r\n                        for (const newNode of newNodes) {\r\n                            node.parentNode.insertBefore(newNode, node);\r\n                            if (this._firstMatch != null && node.nodeType === highlightTextConstants.elementNodeType) {\r\n                                this._firstMatch = node as HTMLSpanElement;\r\n                            }\r\n                        }\r\n\r\n                        node.parentNode.removeChild(node);\r\n                    }\r\n\r\n                } else if (node.nodeType === highlightTextConstants.elementNodeType) {\r\n                    // Element node\r\n\r\n                    const elementNode: HTMLElement = node as HTMLElement;\r\n                    // To ensure we don't modify script or go over\r\n                    //  highlights we have already applied\r\n                    if (elementNode.nodeName !== \"SCRIPT\"\r\n                        && !(elementNode.nodeName === \"SPAN\" && elementNode.className === \"i-search-highlight\")) {\r\n\r\n                        this.highlightTextInElement(elementNode, text);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Returns any search highlight spans in this document.\r\n         */\r\n        private getHighlightSpans(): JQuery {\r\n            return this.documentInstance.rootSelector.find(\".i-search-highlight\");\r\n        }\r\n\r\n        /**\r\n         * Remove any search highlight spans.\r\n         */\r\n        private removeAllHighlights(): void {\r\n\r\n            const spans: JQuery = this.getHighlightSpans();\r\n            spans.each((index: number, element: Element) => {\r\n                const span: JQuery<Element> = $(element);\r\n                span.replaceWith(span.html());\r\n            });\r\n\r\n            // This process may have resulted in multiple contiguous text nodes\r\n            //  which could cause problems with subsequent search highlight operations\r\n            // So we join any continguous text nodes here\r\n            HighlightTextDocumentFeature.cleanUpTextNodes(this.documentInstance.rootElement);\r\n\r\n            $(\"#i-remove-highlighting\").hide();\r\n\r\n        }\r\n\r\n        private escapeForRegExp(source: string): string {\r\n            return source.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\r\n        }\r\n\r\n    }\r\n\r\n    export class HighlightTextDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new HighlightTextDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.HighlightTextDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class MarkAsNewDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Mark As New\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n            if (this.documentInstance.isNew && isInitialLoad) {\r\n                rootSelector.addClass(\"i-is-new\");\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class MarkAsNewDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new MarkAsNewDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.MarkAsNewDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    /**\r\n     * Handles any compatibility issues when content is served in Microsoft Help 2.x\r\n     */\r\n    export class Help2CompatibilityDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Microsoft Help 2.x Compatibility\";\r\n        }\r\n\r\n        public initializeDocument(): void {\r\n            // Works around a jQuery setAttribute bug for a specific IE mode used by MSHV and Help 2.x (with IE11 installed)\r\n            Browser.checkForIe7ModeJqueryBug();\r\n\r\n            if (location.protocol === \"ms-help:\") {\r\n                $(\"body\").addClass(\"i-help2 i-compiled\");\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class Help2CompatibilityDocumentFeatureFactory implements IDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            if (location.protocol === \"ms-help:\") {\r\n                return new Help2CompatibilityDocumentFeature(documentInstance);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n// Register factory\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.Help2CompatibilityDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const helpViewerCompatibilityConstants = {\r\n        urlSuffixLength: 5,\r\n        dotPrefixLength: 2\r\n    };\r\n\r\n    /**\r\n     * Handles any compatibility issues when content is served in Microsoft Help Viewer.\r\n     */\r\n    export class HelpViewerCompatibilityDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private static readonly _pendingStylesheets: string[] = [];\r\n        private static _pendingStylesheetTimer: number = null;\r\n\r\n        /**\r\n         * Removes any referenced files that match the passed pattern (scripts and stylesheets).\r\n         * @param filename Filename pattern (regular expression).\r\n         * @param filetype Indicates the type of file (\"js\" or \"css\", so that we know what tags / attributes to look in.\r\n         */\r\n        private static removeExternalFile(filename: RegExp, filetype: string): void {\r\n            const targetTagName: string = (filetype === \"js\")\r\n                ? \"script\"\r\n                : (filetype === \"css\") ? \"link\" : \"none\";\r\n            const targetAttribute: string = (filetype === \"js\")\r\n                ? \"src\"\r\n                : (filetype === \"css\")\r\n                    ? \"href\"\r\n                    : \"none\";\r\n            $(targetTagName).each((_, element) => {\r\n                if ($(element)\r\n                    .attr(targetAttribute)\r\n                    .match(filename)) {\r\n\r\n                    element.parentNode.removeChild(element);\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Discovers the base url for resource requests so that we can fix up images etc.\r\n         */\r\n        private static resourceBaseUrl() {\r\n\r\n            if (Browser.isDesignTime) {\r\n                return \"\";\r\n            } else {\r\n                // Get the first script tag\r\n                const script: HTMLScriptElement = $(\"#mshs_support_script\").get(0) as HTMLScriptElement;\r\n\r\n                // Extract the src which is a full resource url to within our origin .mshc\r\n                const scriptSrc: string = script.src;\r\n\r\n                let scriptUrl: string;\r\n\r\n                if (HelpViewerCompatibilityDocumentFeature.isMicrosoftHelpViewerVersion2()) {\r\n                    // HV 2\r\n                    let startIndex = scriptSrc.indexOf(\"&id=\");\r\n                    scriptUrl = scriptSrc.substring(0, startIndex);\r\n                    startIndex = scriptSrc.indexOf(\"&\", startIndex + 1);\r\n                    scriptUrl = `${scriptUrl}${scriptSrc.substring(startIndex)}&id=`;\r\n                } else {\r\n                    // HV 1\r\n                    // Get the portion up to the ; (the base url for resource references)\r\n                    const startIndex: number = scriptSrc.indexOf(\";\") + 1;\r\n                    scriptUrl = scriptSrc.substring(0, startIndex);\r\n                }\r\n\r\n                return scriptUrl;\r\n            }\r\n        }\r\n\r\n        private static fixStyles(): void {\r\n\r\n            // Fix Javascript rules using urls\r\n            const stylesheets = document.styleSheets;\r\n            if (stylesheets && stylesheets.length > 0) {\r\n\r\n                // Waiting on any stylesheets to load?\r\n                if (HelpViewerCompatibilityDocumentFeature._pendingStylesheets.length !== 0) {\r\n                    for (const pendingStylesheetHref of HelpViewerCompatibilityDocumentFeature._pendingStylesheets) {\r\n                        let foundStylesheet = false;\r\n                        /* eslint-disable-next-line @typescript-eslint/prefer-for-of */\r\n                        for (let pendingStylesheetIndex = 0; pendingStylesheetIndex < (stylesheets.length); pendingStylesheetIndex++) {\r\n                            const pendingStylesheet = stylesheets[pendingStylesheetIndex];\r\n                            if (pendingStylesheet.href != null && pendingStylesheet.href === pendingStylesheetHref) {\r\n                                // Found the pending stylesheet - check that the rules have loaded\r\n                                let pendingRules: CSSRuleList;\r\n                                try {\r\n                                    if (pendingStylesheet.rules) {\r\n                                        pendingRules = pendingStylesheet.rules;\r\n                                    } else {\r\n                                        pendingRules = pendingStylesheet.cssRules;\r\n                                    }\r\n                                } catch (ex) {\r\n                                    //\r\n                                }\r\n\r\n                                if (pendingRules != null && pendingRules.length > 0) {\r\n                                    foundStylesheet = true;\r\n                                }\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (!foundStylesheet) {\r\n                            // Could not locate the stylesheet, try again in a bit\r\n                            if (HelpViewerCompatibilityDocumentFeature._pendingStylesheetTimer == null) {\r\n                                const retryInterval = 50;\r\n                                HelpViewerCompatibilityDocumentFeature._pendingStylesheetTimer\r\n                                    = window.setInterval(HelpViewerCompatibilityDocumentFeature.fixStyles, retryInterval);\r\n                            }\r\n\r\n                            return;\r\n                        }\r\n\r\n                    }\r\n                    if (HelpViewerCompatibilityDocumentFeature._pendingStylesheetTimer != null) {\r\n                        clearInterval(HelpViewerCompatibilityDocumentFeature._pendingStylesheetTimer);\r\n                        HelpViewerCompatibilityDocumentFeature._pendingStylesheetTimer = null;\r\n                    }\r\n                }\r\n\r\n                /* eslint-disable-next-line @typescript-eslint/prefer-for-of */\r\n                for (let stylesheetindex = 0; stylesheetindex < (stylesheets.length); stylesheetindex++) {\r\n                    const stylesheet = stylesheets[stylesheetindex];\r\n                    let rules: CSSRuleList;\r\n\r\n                    try {\r\n                        if (stylesheet.rules) {\r\n                            rules = stylesheet.rules;\r\n                        } else {\r\n                            rules = stylesheet.cssRules;\r\n                        }\r\n                    } catch (ex) {\r\n                        //\r\n                    }\r\n\r\n                    if (rules) {\r\n                        /* eslint-disable-next-line @typescript-eslint/prefer-for-of */\r\n                        for (let ruleindex = 0; ruleindex < rules.length; ruleindex++) {\r\n                            const rule: CSSStyleRule = rules[ruleindex] as CSSStyleRule;\r\n                            if (rule.style.backgroundImage) {\r\n                                const urlPrefixLength = 4;\r\n                                if (rule.style.backgroundImage.substring(0, urlPrefixLength) === \"url(\") {\r\n                                    let backgroundText = rule.style.backgroundImage;\r\n                                    let originalUrl: string = null;\r\n                                    if (rule.style.backgroundImage.indexOf(\"127.0.0.1\") !== -1) {\r\n                                        // Chrome - rule returned as full url\r\n                                        originalUrl = backgroundText.substring(\r\n                                            backgroundText.indexOf(\"/\", backgroundText.indexOf(\"127.0.0.1\")) +\r\n                                            helpViewerCompatibilityConstants.urlSuffixLength,\r\n                                            backgroundText.lastIndexOf(\")\"));\r\n                                    } else if (backgroundText.indexOf(\"../\") !== -1) {\r\n                                        // IE - rule returned as original, with a .. prefix\r\n                                        originalUrl = backgroundText.substring(\r\n                                            backgroundText.indexOf(\"../\") + helpViewerCompatibilityConstants.dotPrefixLength,\r\n                                            backgroundText.lastIndexOf(\")\"));\r\n                                    } else {\r\n                                        // Relative url\r\n                                        originalUrl = backgroundText.substring(0, backgroundText.lastIndexOf(\")\"));\r\n                                    }\r\n                                    originalUrl = originalUrl.replace(\"\\\"\", \"\");\r\n                                    const newUrl = `url(\\\"${HelpViewerCompatibilityDocumentFeature.resourceBaseUrl()}${originalUrl}\\\")`;\r\n                                    backgroundText = newUrl + backgroundText.substring(backgroundText.indexOf(\")\") + 1);\r\n                                    rule.style.backgroundImage = backgroundText;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Returns true if this page is executing in the context of the Microsoft Help Viewer (v1.x or v2.x).\r\n         */\r\n        public static isMicrosoftHelpViewer(): boolean {\r\n            return (location.protocol === \"ms-xhelp:\"\r\n                || location.href.indexOf(\"ms.help?\") !== -1\r\n                || location.href.indexOf(\"?method=page&\") !== -1);\r\n        }\r\n\r\n        /**\r\n         * Returns true if this page is executing in the context of the Microsoft Help Viewer v2.x.\r\n         */\r\n        public static isMicrosoftHelpViewerVersion2(): boolean {\r\n            const script = $(\"#mshs_support_script\").get(0) as HTMLScriptElement;\r\n            const scriptSrc = script.src;\r\n\r\n            return (scriptSrc.indexOf(\"method=asset\") !== -1);\r\n        }\r\n\r\n        /**\r\n         * Adjusts the passed url so that it is a valid Microsoft Help Viewer asset url when running under Microsoft Help Viewer.\r\n         */\r\n        public static fixUrl(url: string): string {\r\n            if (HelpViewerCompatibilityDocumentFeature.isMicrosoftHelpViewer()) {\r\n                let originalUrl: string;\r\n                if (url.indexOf(\"127.0.0.1\") !== -1) {\r\n                    // Chrome - rule returned as full url\r\n                    originalUrl = url.substring(url.indexOf(\"/\", url.indexOf(\"127.0.0.1\"))\r\n                        + helpViewerCompatibilityConstants.urlSuffixLength, url.length);\r\n\r\n                    originalUrl = originalUrl.replace(\"\\\"\", \"\");\r\n                } else if (url.indexOf(\"../\") !== -1) {\r\n                    // IE - rule returned as original, with a .. prefix\r\n                    originalUrl = url.substring(url.indexOf(\"../\") + helpViewerCompatibilityConstants.dotPrefixLength, url.lastIndexOf(\")\"));\r\n                    originalUrl = originalUrl.replace(\"\\\"\", \"\");\r\n                } else {\r\n                    // Relative url in MSHV 2.0\r\n                    originalUrl = url.replace(new RegExp(\"/\", \"g\"), \"\\\\\");\r\n                }\r\n                if (originalUrl.indexOf(\"/help/\") !== -1) {\r\n                    originalUrl =\r\n                        originalUrl.substring(\r\n                            originalUrl.indexOf(\"/\", originalUrl.indexOf(\"/help/\") + helpViewerCompatibilityConstants.urlSuffixLength),\r\n                            originalUrl.length);\r\n                }\r\n                const newUrl: string = HelpViewerCompatibilityDocumentFeature.resourceBaseUrl() + originalUrl;\r\n\r\n                return newUrl;\r\n            } else {\r\n                return url;\r\n            }\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"Microsoft Help Viewer Compatibility\";\r\n        }\r\n\r\n        public initializeDocument(): void {\r\n            // Removes any unwanted branding files\r\n            HelpViewerCompatibilityDocumentFeature.removeExternalFile(/branding.*\\.css/g, \"css\");\r\n\r\n            // Fix urls in stylesheets\r\n            HelpViewerCompatibilityDocumentFeature.fixStyles();\r\n\r\n            // Works around a jQuery setAttribute bug for a specific IE mode used by MSHV and Help 2.x (with IE11 installed)\r\n            Browser.checkForIe7ModeJqueryBug();\r\n\r\n            if (HelpViewerCompatibilityDocumentFeature.isMicrosoftHelpViewer()) {\r\n                $(\"body\").addClass(\"i-mshv i-compiled\");\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootElement: JQuery): void {\r\n\r\n            // Fixes any content issues (e.g.link and resource url issues)\r\n\r\n            if (HelpViewerCompatibilityDocumentFeature.isMicrosoftHelpViewerVersion2()) {\r\n\r\n                // Microsoft Help Viewer 2.x (Visual Studio 2012+) patches\r\n\r\n                $(\"body\").hide();\r\n\r\n                // Standard url() references in stylesheets don't work in MSHV 2 so we have to reference\r\n                //  an additional stylesheet with alternate syntax\r\n                $(\"link\").each((_, element) => {\r\n                    const mshvStylesheet = $(element).attr(\"data-mshv2-stylesheet\");\r\n                    if (mshvStylesheet) {\r\n                        const newStylesheetHref = `ms-xhelp:///?;${mshvStylesheet}`;\r\n                        HelpViewerCompatibilityDocumentFeature._pendingStylesheets.push(newStylesheetHref);\r\n                        $(\"head\").append(`<link rel=\"stylesheet\" href=\"${newStylesheetHref}\" type=\"text/css\" />`);\r\n                    }\r\n                });\r\n\r\n                // Fix any id links to work around bug in VS 2012 RC Help Viewer\r\n                $(\"a\").each((_, element) => {\r\n                    const href = $(element).attr(\"href\");\r\n                    if (href && href.indexOf(\"ms-xhelp:///?id=\") !== -1) {\r\n                        $(element).attr(\"href\", href.replace(\"ms-xhelp:///?id=\", \"ms-xhelp:///?method=page&id=\"));\r\n                    }\r\n                });\r\n\r\n                Browser.showElement($(\"body\"), \"body\");\r\n\r\n            } else {\r\n\r\n                // Microsoft Help Viewer 1 (Visual Studio 2010) patches\r\n\r\n                // Standard url() references in stylesheets don't work in MSHV 2 so we have to reference\r\n                //  an additional stylesheet with alternate syntax for those references to work in MSHV 1\r\n                $(\"link\").each((_, element) => {\r\n                    const mshvStylesheet = $(element).attr(\"data-mshv1-stylesheet\");\r\n                    if (mshvStylesheet) {\r\n                        const newStylesheetHref = HelpViewerCompatibilityDocumentFeature.resourceBaseUrl() + mshvStylesheet;\r\n                        HelpViewerCompatibilityDocumentFeature._pendingStylesheets.push(newStylesheetHref);\r\n\r\n                        $(\"head\").append(`<link rel=\"stylesheet\" href=\"${newStylesheetHref}\" type=\"text/css\" />`);\r\n                    }\r\n                });\r\n\r\n                // Fix double line breaks\r\n                $(\"BR\")\r\n                    .filter((_, element) => $(element)\r\n                        .next()\r\n                        .is(\"BR\"))\r\n                    .remove();\r\n\r\n                // Fix bookmark links\r\n                $(\"A\").each((_, element) => {\r\n                    // Check for bookmark links - currently prefixed with the full page url\r\n                    const anchorHref = $(element).attr(\"href\");\r\n                    if (anchorHref && anchorHref.indexOf(\"#\") !== -1) {\r\n                        if (anchorHref.substring(0, anchorHref.indexOf(\"#\")) === location.href) {\r\n                            // Bookmark in this document\r\n                            $(element).attr(\"target\", \"_self\");\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // Make sure stylesheets are all fixed up\r\n                HelpViewerCompatibilityDocumentFeature.fixStyles();\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    export class HelpViewerCompatibilityDocumentFeatureFactory implements IDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            if (HelpViewerCompatibilityDocumentFeature.isMicrosoftHelpViewer()) {\r\n                return new HelpViewerCompatibilityDocumentFeature(documentInstance);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n// Register factory\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.HelpViewerCompatibilityDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class PopupLinksDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        protected static toNumber = (value: string): number => parseInt(value, 10) || 0;\r\n\r\n        protected static getElementPadding(query: JQuery<HTMLElement>): {\r\n            left: number;\r\n            top: number;\r\n            right: number;\r\n            bottom: number;\r\n        } {\r\n\r\n            return {\r\n                top: PopupLinksDocumentFeature.toNumber(query.css(\"padding-top\")),\r\n                bottom: PopupLinksDocumentFeature.toNumber(query.css(\"padding-bottom\")),\r\n                left: PopupLinksDocumentFeature.toNumber(query.css(\"padding-left\")),\r\n                right: PopupLinksDocumentFeature.toNumber(query.css(\"padding-right\"))\r\n            };\r\n\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"Popup Links\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            // Configure any popup links\r\n            rootSelector.find(\".i-popup-link\").each((index: number, element: HTMLElement): void => {\r\n                this.configurePopupLink(element);\r\n            });\r\n\r\n        }\r\n\r\n        /**\r\n         * Configures an individual popup link element.\r\n         * @param element The element to configure as a popup link.\r\n         */\r\n        public configurePopupLink(element: HTMLElement): void {\r\n            const linkElement = $(element) as JQuery<HTMLElement>;\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            let content: any;\r\n            const contentSource = linkElement.attr(\"data-popup-contentsource\");\r\n            if (contentSource) {\r\n                // Get content from a jQuery selector\r\n                content = this.documentInstance.rootSelector.find(contentSource);\r\n            } else {\r\n                // Content declared inline\r\n                content = linkElement.attr(\"data-popup-content\");\r\n                if (content != null) {\r\n                    const r = /\\\\u([\\d\\w]{4})/gi;\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    content = content.replace(r, (match: any, group: any) =>\r\n                        /* eslint-disable-next-line id-blacklist */\r\n                        String.fromCharCode(parseInt(group, 16)));\r\n                    content = content.replace(/\\\\n/g, \"\\n\").replace(/\\\\r/g, \"\\r\");\r\n                }\r\n            }\r\n            if (content != null) {\r\n                let showEvent = linkElement.attr(\"data-popup-showevent\");\r\n                if (!showEvent) {\r\n                    // Default show event to click\r\n                    showEvent = \"click\";\r\n                }\r\n                let titleText = linkElement.attr(\"data-popup-title\");\r\n                if (!titleText) {\r\n                    // Default title to link caption\r\n                    titleText = linkElement.text();\r\n                }\r\n                let classes = \"\";\r\n                const customClasses = linkElement.attr(\"data-popup-classes\");\r\n                if (customClasses) {\r\n                    // Custom coloring or effect class\r\n                    classes = `${classes} ${customClasses}`;\r\n                }\r\n                let adjustX = 0;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                if (PopupLinksDocumentFeature.getElementPadding(linkElement).left !== 0) {\r\n                    // Adjust the padding of the tip by the same amount as the link element padding\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    adjustX = PopupLinksDocumentFeature.getElementPadding(linkElement).left;\r\n                }\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const showOptions = { event: showEvent } as any;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const hideOptions = { delay: 500, fixed: true } as any;\r\n                if (Browser.isAnimationDisabled) {\r\n                    showOptions.effect = false;\r\n                    hideOptions.effect = false;\r\n                }\r\n                linkElement.qtip({\r\n                    content: {\r\n                        text: content,\r\n                        title: { text: titleText }\r\n                    },\r\n                    position: {\r\n                        my: \"top left\",\r\n                        at: \"bottom left\",\r\n                        adjust: { x: adjustX },\r\n                        viewport: $(window) as unknown as JQuery<HTMLElement>,\r\n                        container: this.documentInstance.rootSelector\r\n                    },\r\n                    show: showOptions,\r\n                    hide: hideOptions,\r\n                    events: {\r\n                        render: (event: Event, api: QTip2.Api) => {\r\n                            // Sets up bindings for click events on checkboxes contained on the popup\r\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                            const tooltip = (api as any).elements.tooltip;\r\n                            this.onPopupRender(tooltip);\r\n                        }\r\n                    },\r\n                    style: {\r\n                        classes\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        protected onPopupRender(element: JQuery): void {\r\n            this.documentInstance.initializeContent(element);\r\n        }\r\n\r\n    }\r\n\r\n    export class PopupLinksDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new PopupLinksDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.PopupLinksDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const quirksModeConstants = {\r\n        msie8Version: 8\r\n    };\r\n\r\n    export class QuirksModeCompatibilityDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Quirks Mode Compatibility\";\r\n        }\r\n\r\n        public initializeDocument(): void {\r\n\r\n            // Prevent expand flickering when IE or CHM running in quirks mode\r\n            if (Browser.getCompatMode() !== \"CSS1Compat\") {\r\n                // Define overriding method.\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                (jQuery.fx as any).prototype.hide = function() {\r\n                    // Remember where we started, so that we can go back to it later\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    this.options.orig[this.prop] = (jQuery as any).style(this.elem, this.prop);\r\n                    this.options.hide = true;\r\n\r\n                    // Begin the animation\r\n                    this.custom(this.cur(), 1);\r\n                };\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (Browser.isDesignTime) {\r\n                return;\r\n            }\r\n\r\n            // Fix quirks mode rendering issues\r\n            if (Browser.getCompatMode() !== \"CSS1Compat\"\r\n                || Browser.info.name === \"msie\" && Browser.info.version <= quirksModeConstants.msie8Version) {\r\n\r\n                // Quirks mode without first-child support\r\n                const addFirstChildClassNames = (Browser.getCompatMode() !== \"CSS1Compat\");\r\n\r\n                const contentSections =\r\n                    rootSelector.find(\r\n                        \".i-section-content,.i-description-content,.i-returns-content,.i-description,.i-box-content\");\r\n                contentSections.each((_, element) => {\r\n                    if (addFirstChildClassNames) {\r\n                        $(element)\r\n                            .children()\r\n                            .first()\r\n                            .addClass(\"i-first-child\");\r\n                    }\r\n                    $(element)\r\n                        .children()\r\n                        .last()\r\n                        .addClass(\"i-last-child\");\r\n                });\r\n\r\n                if (addFirstChildClassNames) {\r\n                    rootSelector.find(\"table.i-syntax-table th:first-child\").addClass(\"i-first-child\");\r\n                    rootSelector.find(\"td>p:first-child\").addClass(\"i-first-child\");\r\n                }\r\n                rootSelector.find(\"table.i-syntax-table th:last-child\").addClass(\"i-last-child\");\r\n                rootSelector.find(\"td>p:last-child\").addClass(\"i-last-child\");\r\n\r\n                rootSelector.find(\"p+p\").addClass(\"i-adjacent-paragraph\");\r\n                rootSelector.find(\"h4+.i-returns-content\").addClass(\"i-returns-content-after-heading\");\r\n                rootSelector.find(\".i-example-section-content p+div\").addClass(\"i-example-after-paragraph\");\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    export class QuirksModeCompatibilityDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            const msIeVersion: number = Browser.msIeVersion();\r\n\r\n            if (Browser.getCompatMode() !== \"CSS1Compat\" || (msIeVersion > 0 && msIeVersion <= quirksModeConstants.msie8Version)) {\r\n                // Quirks mode feature is active if running in compatibility mode or IE8 or lower\r\n                return new QuirksModeCompatibilityDocumentFeature(documentInstance);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.QuirksModeCompatibilityDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const syntaxTabsConstants = {\r\n        featureOrdinal: 99\r\n    };\r\n\r\n    export class SyntaxTabsDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Syntax Tabs\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            const localStorage = this.documentInstance.getLocalStorage();\r\n\r\n            let selectedTabIndex: number = localStorage.getAttribute(\"i-tab-container-selected-tab-index\");\r\n            if (!selectedTabIndex) {\r\n                selectedTabIndex = 0;\r\n            }\r\n\r\n            // Change default duration on the tabs\r\n            const options = {\r\n                active: selectedTabIndex,\r\n                selected: selectedTabIndex,\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                activate: (_: Event, ui: any) => {\r\n                    localStorage.setAttribute(\"i-tab-container-selected-tab-index\", ui.newTab.index());\r\n                },\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                select: (_: Event, ui: any) => {\r\n                    localStorage.setAttribute(\"i-tab-container-selected-tab-index\", ui.index);\r\n                },\r\n                show: null,\r\n                hide: null\r\n            } as JQueryUI.TabsOptions;\r\n\r\n            if (!Browser.isDesignTime && !Browser.isAnimationDisabled) {\r\n                // Only animate if not design time and animation enabled\r\n                options.show = { opacity: \"toggle\", duration: \"fast\" };\r\n                options.hide = { opacity: \"toggle\", duration: \"fast\" };\r\n            }\r\n            rootSelector.find(\".i-tab-container\").tabs(options);\r\n\r\n        }\r\n\r\n        public initializeContentOrdinal(): number {\r\n            return syntaxTabsConstants.featureOrdinal;\r\n        }\r\n\r\n    }\r\n\r\n    export class SyntaxTabsDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new SyntaxTabsDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.SyntaxTabsDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class TabsDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Tabs\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public beforeSetElementVisibility(element: Element, isVisible: boolean, isImmediate: boolean): boolean {\r\n\r\n            if (!isVisible && element.tagName === \"LI\"\r\n                && $(element)\r\n                    .parent()\r\n                    .hasClass(\"ui-tabs-nav\")) {\r\n\r\n                const isLegacyUi = (Browser.compareVersionStrings($.ui.version, \"1.8\") < 0);\r\n\r\n                // If we are hiding a tab, make sure it isn't the selected tab\r\n                const selectedTabClassName: string\r\n                    = isLegacyUi ? \"ui-tabs-selected\" : \"ui-tabs-active\";\r\n\r\n                if ($(element).hasClass(selectedTabClassName)) {\r\n                    const tabContainer = $($(element).parents(\".i-tab-container\").get(0));\r\n                    const firstVisibleTab = tabContainer.find(`li:visible:not(.${selectedTabClassName}):first`);\r\n                    if (firstVisibleTab) {\r\n                        if (isLegacyUi) {\r\n                            tabContainer.tabs(\"option\", \"selected\", firstVisibleTab.index());\r\n                        } else {\r\n                            tabContainer.tabs(\"option\", \"active\", firstVisibleTab.index());\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n            if (location.href === \"about:blank\") {\r\n                // Ensure that all tabs references are treated as local at design time\r\n                $.widget(\"ui.tabs\", $.ui.tabs, {\r\n                    _isLocal(anchor: HTMLAnchorElement) {\r\n                        if (anchor.href.indexOf(\"#\") !== -1) {\r\n                            return true;\r\n                        } else {\r\n                            // ReSharper disable once SuspiciousThisUsage - calls jQuery UI _super function\r\n                            return this._super(anchor);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public afterSetElementVisibility(element: Element, isVisible: boolean): void {\r\n            const tabContainer = $($(element).parents(\".i-tab-container\").get(0));\r\n            if (tabContainer != null && tabContainer.data(\"ui-tabs\") != null) {\r\n                tabContainer.tabs(\"refresh\");\r\n            }\r\n        }\r\n\r\n        public initializeContentOrdinal(): number {\r\n            // Make sure we apply our design time fix for tabs before other features use the ui.tabs widget\r\n            return -1;\r\n        }\r\n\r\n    }\r\n\r\n    export class TabsDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new TabsDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.TabsDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class ToggleSectionDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Toggle Sections\";\r\n        }\r\n\r\n        /** The id value that is used to save/load state from local storage and to disambiguate event handlers. */\r\n        protected getToggleSetId(): string {\r\n            return \"i-toggle-section\";\r\n        }\r\n\r\n        /** Css class name of the section link to toggle all */\r\n        protected getToggleAllLinkClassName(): string {\r\n            return \"i-toggle-all-sections\";\r\n        }\r\n\r\n        /** Css class name of the section heading div */\r\n        protected getToggleHeadingClassName(): string {\r\n            return \"i-section-heading\";\r\n        }\r\n\r\n        /** Css class name of the section content div following each section heading */\r\n        protected getToggleContentClassName(): string {\r\n            return \"i-section-content\";\r\n        }\r\n\r\n        /** Css class name of the collapse all label */\r\n        protected getToggleAllLabelClassName(): string {\r\n            return \"i-collapse-all\";\r\n        }\r\n\r\n        /** Css class name of the expand all label */\r\n        protected getUnToggleAllLabelClassName(): string {\r\n            return \"i-expand-all\";\r\n        }\r\n\r\n        /** The suffix used for toggle class name and when saving toggle state */\r\n        protected getToggledSuffix(): string {\r\n            return \"-collapsed\";\r\n        }\r\n\r\n        /** Returns true if the related content is only visible when the section is toggled (false = initially visible without toggling) */\r\n        protected toggleStateForVisible(): boolean {\r\n            return true;\r\n        }\r\n\r\n        /** Set to true to automatically save the toggle state between page loads */\r\n        protected isSaveStateEnabled(): boolean {\r\n            return true;\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            // Wire up click handler for the \"Expand All / Collapse All\" link\r\n            const eventId = `click.${this.getToggleSetId()}`;\r\n\r\n            rootSelector\r\n                .off(eventId, `.${this.getToggleAllLinkClassName()}`)\r\n                .on(eventId, `.${this.getToggleAllLinkClassName()}`, (eventObject: JQueryEventObject) => {\r\n                    const desiredExpanded = !(rootSelector\r\n                        .find(`.${this.getToggleHeadingClassName()}.${this.getToggleHeadingClassName()}${this.getToggledSuffix()}`)\r\n                        .length === 0);\r\n\r\n                    rootSelector.find(`.${this.getToggleHeadingClassName()}`).each((index: number, element: Element) => {\r\n                        const isExpanded = !$(element).hasClass(this.getToggleHeadingClassName() + this.getToggledSuffix());\r\n                        if (isExpanded !== desiredExpanded) {\r\n                            this.toggleSection($(element) as JQuery<HTMLElement>);\r\n                        }\r\n                    });\r\n                    Browser.stopPropagation(eventObject);\r\n                });\r\n\r\n            this.loadToggleSectionState(rootSelector.find(`.${this.getToggleHeadingClassName()}`));\r\n\r\n            // Click Event handler\r\n            rootSelector\r\n                .off(eventId, `.${this.getToggleHeadingClassName()}`)\r\n                .on(eventId, `.${this.getToggleHeadingClassName()}`, (eventObject: JQueryEventObject) => {\r\n                    this.toggleSection($(eventObject.currentTarget) as JQuery<HTMLElement>);\r\n                    Browser.stopPropagation(eventObject);\r\n                });\r\n\r\n            // Set the initial state of the \"Expand All\" / \"Collapse All\" link\r\n            if (!Browser.isDesignTime) {\r\n                this.setToggleAllSectionsVisibility();\r\n            }\r\n\r\n        }\r\n\r\n        public ensureElementVisible(element: HTMLElement): void {\r\n            $(element)\r\n                .parents(`.${this.getToggleContentClassName()}`)\r\n                .prev(`.${this.getToggleHeadingClassName()}`)\r\n                .each((_: number, parentElement: HTMLElement): void => {\r\n                    const isToggled = !$(parentElement).hasClass(this.getToggleHeadingClassName() + this.getToggledSuffix());\r\n                    if (this.toggleStateForVisible() !== isToggled) {\r\n                        this.toggleSection($(parentElement));\r\n                    }\r\n                });\r\n        }\r\n\r\n        /**\r\n         * Toggle a given section or sections.\r\n         * @param elements The JQuery selector containing the element or elements to toggle.\r\n         * @param isImmediate When set to true, animations are disabled.\r\n         */\r\n        private toggleSection(elements: JQuery, isImmediate: boolean = false): JQuery {\r\n\r\n            const result = elements.each((_: number, element: HTMLElement): void => {\r\n                const sectionDiv = $(element).next(`.${this.getToggleContentClassName()}`);\r\n                if (sectionDiv) {\r\n                    const isCurrentlyToggled = $(element).hasClass(this.getToggleHeadingClassName() + this.getToggledSuffix());\r\n                    this.toggleElement(sectionDiv, isImmediate);\r\n                    $(element).toggleClass(this.getToggleHeadingClassName() + this.getToggledSuffix(), !isCurrentlyToggled);\r\n\r\n                    if (this.isSaveStateEnabled()) {\r\n                        if (isCurrentlyToggled) {\r\n                            // No longer collapsed\r\n                            this.documentInstance\r\n                                .getLocalStorage()\r\n                                .setAttribute(`${this.getToggleSetId()}${this.getToggledSuffix()}-${$(element).attr(\"id\")}`, null);\r\n                        } else {\r\n                            // Is now collapsed\r\n                            this.documentInstance\r\n                                .getLocalStorage()\r\n                                .setAttribute(`${this.getToggleSetId()}${this.getToggledSuffix()}-${$(element).attr(\"id\")}`, \"true\");\r\n                        }\r\n                    }\r\n                }\r\n\r\n            });\r\n\r\n            this.updateToggleAllSectionsLinkLabel();\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        /**\r\n         * Executes the toggle function, allowing derived types to override the default method (slideToggle).\r\n         */\r\n        protected toggleElement(element: JQuery, isImmediate: boolean): void {\r\n            const isCurrentlyHidden: boolean = (element.css(\"display\") === \"none\");\r\n            this.documentInstance.setElementVisibility(element, isCurrentlyHidden, isImmediate);\r\n        }\r\n\r\n        /**\r\n         * Load saved state of a toggle section or sections from local storage.\r\n         * @param elements JQuery selector representing Element(s) to load and set the toggle state for.\r\n         */\r\n        private loadToggleSectionState(elements: JQuery): JQuery {\r\n            if (this.isSaveStateEnabled()) {\r\n                return elements.each((index: number, element: HTMLElement): void => {\r\n\r\n                    const attributeValue = this.documentInstance\r\n                        .getLocalStorage()\r\n                        .getAttribute(`${this.getToggleSetId()}${this.getToggledSuffix()}-${$(element).attr(\"id\")}`);\r\n\r\n                    if (attributeValue === \"true\") {\r\n                        this.toggleSection($(element), true);\r\n                    }\r\n\r\n                });\r\n            } else {\r\n                return elements;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Update the labels for the \"Expand All\" / \"Collapse All\" link\r\n         */\r\n        private updateToggleAllSectionsLinkLabel() {\r\n            const rootSelector: JQuery = this.documentInstance.rootSelector;\r\n            const allSectionsToggled = (rootSelector\r\n                .find(`.${this.getToggleHeadingClassName()}.${this.getToggleHeadingClassName()}${this.getToggledSuffix()}`)\r\n                .length === 0);\r\n\r\n            rootSelector.find(`.${this.getToggleAllLabelClassName()}`).css(\"display\", allSectionsToggled ? \"inline\" : \"none\");\r\n            rootSelector.find(`.${this.getUnToggleAllLabelClassName()}`).css(\"display\", allSectionsToggled ? \"none\" : \"inline\");\r\n        }\r\n\r\n        /**\r\n         * Set the visibility of the \"Expand All\" / \"Collapse All\" link depending on whether the page contains\r\n         *  at least one toggle section.\r\n         */\r\n        private setToggleAllSectionsVisibility() {\r\n            const rootSelector = this.documentInstance.rootSelector;\r\n\r\n            if (rootSelector.find(`.${this.getToggleHeadingClassName()}`).length > 0) {\r\n                // Sections - show\r\n                rootSelector.find(`.${this.getToggleAllLinkClassName()}`).show();\r\n            } else {\r\n                // No sections - hide\r\n                rootSelector.find(`.${this.getToggleAllLinkClassName()}`).hide();\r\n            }\r\n        }\r\n\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (configuration.profileName === \"mobile\" || configuration.profileName === \"tablet\") {\r\n                switch (configuration.profileName) {\r\n                    case \"tablet\":\r\n                        break;\r\n                    case \"mobile\":\r\n                        // Headings as buttons\r\n                        configuration.clickTargets.push(\r\n                            new ResponsiveClickTarget(`.${this.getToggleHeadingClassName()}`, ResponsiveClickTargetKind.block));\r\n                        break;\r\n                    // No default\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class ToggleSectionDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new ToggleSectionDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n($.fn as any).slideFadeToggle = function (speed: string, easing: string, callback: any) {\r\n    return this.animate({ opacity: \"toggle\", height: \"toggle\" }, speed, easing, callback);\r\n};\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ToggleSectionDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class ToggleDropDownDocumentFeature extends ToggleSectionDocumentFeature implements IDocumentFeature {\r\n\r\n        /** The id value that is used to save/load state from local storage and to disambiguate event handlers. */\r\n        protected getToggleSetId(): string {\r\n            return \"i-drop-downs\";\r\n        }\r\n\r\n        /** Css class name of the section link to toggle all */\r\n        protected getToggleAllLinkClassName(): string {\r\n            return \"i-toggle-all-dropdowns\";\r\n        }\r\n\r\n        /** Css class name of the section heading div */\r\n        protected getToggleHeadingClassName(): string {\r\n            return \"i-dropdown-heading\";\r\n        }\r\n\r\n        /** Css class name of the section content div following each section heading */\r\n        protected getToggleContentClassName(): string {\r\n            return \"i-dropdown-content\";\r\n        }\r\n\r\n        /** Css class name of the collapse all label */\r\n        protected getToggleAllLabelClassName(): string {\r\n            return \"i-show-all-dropdowns\";\r\n        }\r\n\r\n        /** Css class name of the expand all label */\r\n        protected getUnToggleAllLabelClassName(): string {\r\n            return \"i-hide-all-dropdowns\";\r\n        }\r\n\r\n        /** The suffix used for toggle class name and when saving toggle state */\r\n        protected getToggledSuffix(): string {\r\n            return \"-expanded\";\r\n        }\r\n\r\n        /** Returns true if the related content is only visible when the section is toggled (false = initially visible without toggling) */\r\n        protected toggleStateForVisible(): boolean {\r\n            return false;\r\n        }\r\n\r\n        /** Set to true to automatically save the toggle state between page loads */\r\n        protected isSaveStateEnabled(): boolean {\r\n            return false;\r\n        }\r\n\r\n        protected toggleElement(element: JQuery, isImmediate: boolean): void {\r\n            if (isImmediate || Browser.isAnimationDisabled) {\r\n                element.toggle();\r\n            } else {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                (element as any).slideFadeToggle(\"fast\");\r\n            }\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"Drop Downs\";\r\n        }\r\n\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (configuration.profileName === \"mobile\" || configuration.profileName === \"tablet\") {\r\n                switch (configuration.profileName) {\r\n                    case \"tablet\":\r\n                        break;\r\n                    case \"mobile\":\r\n                        break;\r\n                    // No default\r\n                }\r\n\r\n                const className\r\n                    = `.${this.getToggleHeadingClassName()},.${this.getToggleAllLabelClassName()},.${this.getUnToggleAllLabelClassName()}`;\r\n\r\n                // Dropdown Header as a button\r\n                configuration.clickTargets.push(\r\n                    new ResponsiveClickTarget(\r\n                        className,\r\n                        ResponsiveClickTargetKind.block));\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    export class ToggleDropDownDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new ToggleDropDownDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ToggleDropDownDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class ViewInFrameDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"View In Frame\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            const link: JQuery = $(\".i-view-in-frame-link\", rootSelector);\r\n\r\n            // Display / hide link to root page if running outside the navigation frame in web output\r\n            if (window.self !== window.top || location.protocol === \"ms-its:\") {\r\n                // Running in a frameset or CHM, hide the link\r\n                link.hide();\r\n            } else {\r\n                // Not running in a navigation frame, set the link target to the web root page\r\n\r\n                // Get the current page name\r\n                let pageName = location.href.substring(location.href.lastIndexOf(\"/\") + 1);\r\n                if (pageName.indexOf(\"#\") !== -1) {\r\n                    pageName = pageName.substring(0, pageName.indexOf(\"#\"));\r\n                }\r\n\r\n                // Append to root page name\r\n                const framePage = `${link.data(\"root-page\")}#${pageName}`;\r\n                link.attr(\"href\", framePage);\r\n                link.show();\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    export class ViewInFrameDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new ViewInFrameDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ViewInFrameDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const lightboxConstants =\r\n    {\r\n        minRelLength: 9\r\n    };\r\n\r\n    export class LightboxDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Lightbox\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            ($(\"a.i-thumbnail\") as any).slimbox({}, null, function (el: HTMLAnchorElement): boolean {\r\n                /* eslint-disable-next-line no-invalid-this */\r\n                return el === this || el.rel.length >= lightboxConstants.minRelLength;\r\n            });\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            // Remove slimbox click handler in responsive mode\r\n            if (configuration.profileName === \"mobile\" || configuration.profileName === \"tablet\") {\r\n                $(\"i-thumbnail\").off(\"click\");\r\n            }\r\n        }\r\n    }\r\n\r\n    export class LightboxDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new LightboxDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.LightboxDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const videoConstants = {\r\n        defaultWidth: 64,\r\n        defaultHeight: 36,\r\n        defaultQuirksHeight: 39\r\n    };\r\n\r\n    export class VideoDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Video\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            $(\".i-video-youtube\").each((_: number, containerElement: Element): any => {\r\n                const container = $(containerElement) as JQuery<HTMLElement>;\r\n                const iframe = container.children(\"iframe\");\r\n                const autoplay = (container.data(\"autoplay\") === \"True\");\r\n                const autoResize = (container.data(\"autoresize\") === \"True\");\r\n                const showRelated = (container.data(\"showrelated\") === \"True\");\r\n                const theme = container.data(\"theme\") || \"\";\r\n                const movieId = container.data(\"movieid\");\r\n\r\n                let src = `${Browser.getLocationInfo().protocol === \"https:\" ? \"https:\" : \"http:\"}//www.youtube.com/embed/${movieId}?&theme=${theme}&autohide=1`;\r\n\r\n                src += (`&autoplay=${autoplay ? \"1\" : \"0\"}`);\r\n                src += (`&rel=${showRelated ? \"1\" : \"0\"}`);\r\n\r\n                iframe.attr(\"src\", src);\r\n                if (autoResize) {\r\n                    const currentLocation = Browser.getLocationInfo().href;\r\n\r\n                    if (Browser.isDesignTime || currentLocation === \"about:blank\" || currentLocation.indexOf(\"ms-its:\") === 0) {\r\n                        // CHM or design time\r\n                        iframe.attr(\"width\", videoConstants.defaultWidth).attr(\"height\", videoConstants.defaultQuirksHeight);\r\n                    } else {\r\n                        iframe.attr(\"width\", videoConstants.defaultWidth).attr(\"height\", videoConstants.defaultHeight);\r\n                    }\r\n\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (container as any).fitVids();\r\n                } else {\r\n                    iframe\r\n                        .attr(\"width\", parseInt(container.data(\"width\"), 10))\r\n                        .attr(\"height\", parseInt(container.data(\"height\"), 10));\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    export class VideoDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new VideoDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.VideoDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export abstract class ContentFilterDocumentFeature extends DocumentFeatureBase {\r\n\r\n        public abstract getName(): string;\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            // Initialize the language filtering check boxes\r\n            const eventId = \"click.toggle\";\r\n            const checkboxSelector = `.${this.getCheckboxClassName()}`;\r\n            rootSelector\r\n                .off(eventId, checkboxSelector)\r\n                .on(eventId,\r\n                    checkboxSelector,\r\n                    (eventObject: JQueryEventObject): void => {\r\n                        this.toggleCheckbox($(eventObject.currentTarget) as JQuery<HTMLElement>);\r\n                        Browser.stopPropagation(eventObject);\r\n                    });\r\n            this.loadToggleCheckboxState($(checkboxSelector));\r\n            this.updateFilterLabel();\r\n\r\n        }\r\n\r\n        /**\r\n         * Toggle the checked state of a checkbox or checkboxes.\r\n         * @param elements JQuery selector representing Element(s) to load and set the toggle state for.\r\n         * @param isImmediate When set to true, animations are disabled.\r\n         */\r\n        protected toggleCheckbox(elements: JQuery<HTMLElement>, isImmediate: boolean = false): JQuery {\r\n            elements.each((_: number, element: HTMLElement): void => {\r\n\r\n                const isChecked: boolean = $(element).is(\":checked\");\r\n                if (!$(element).is(\":checked\")) {\r\n                    this.documentInstance.getLocalStorage().setAttribute(`checkbox-unchecked-${$(element).attr(\"id\")}`, \"true\");\r\n                } else {\r\n                    this.documentInstance.getLocalStorage().setAttribute(`checkbox-unchecked-${$(element).attr(\"id\")}`, null);\r\n                }\r\n\r\n                const toggleClassName = $(element).attr(\"data-toggleclass\");\r\n                if (toggleClassName != null) {\r\n                    this.documentInstance.setElementVisibility($(`.${toggleClassName}`), isChecked, isImmediate);\r\n                }\r\n\r\n            });\r\n\r\n            this.updateFilterLabel();\r\n\r\n            return elements;\r\n        }\r\n\r\n        /**\r\n         * Load saved state of a Checkbox or Checkboxes from local storage.\r\n         * @param elements JQuery selector representing Element(s) to load and set the checkbox state for.\r\n         */\r\n        protected loadToggleCheckboxState(elements: JQuery): JQuery {\r\n            return elements.each((_: number, element: HTMLElement): void => {\r\n\r\n                const attributeValue = this.documentInstance.getLocalStorage().getAttribute(`checkbox-unchecked-${$(element).attr(\"id\")}`);\r\n                if (attributeValue === \"true\") {\r\n                    $(element).prop(\"checked\", false);\r\n                    this.toggleCheckbox($(element), true);\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Overriden in derived classes to return the class name (without leading \".\") of the checkboxes associated with\r\n         *  this filter.\r\n         */\r\n        protected getCheckboxClassName(): string {\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Overriden by derived classes to update the label describing the current filter (where required).\r\n         */\r\n        protected updateFilterLabel(): void {\r\n            // No default implementation\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class DesignTimeDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Design Time\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n            if (isInitialLoad) {\r\n                // Create design time interaction divs\r\n                $(\"<div/>\", {\r\n                    id: \"hsDesignTimeLoad\",\r\n                    click: () => {\r\n                        const scrollPosition = this.documentInstance.getLocalStorage().getAttribute(\"scrollPosition\");\r\n                        if (scrollPosition) {\r\n                            $(window).scrollTop(scrollPosition);\r\n                        }\r\n                    }\r\n                })\r\n                    .appendTo(rootSelector)\r\n                    .css(\"display\", \"none\");\r\n\r\n                $(\"<div/>\", {\r\n                    id: \"hsDesignTimeSave\",\r\n                    click: () => {\r\n                        this.documentInstance.getLocalStorage().setAttribute(\"scrollPosition\", $(window).scrollTop());\r\n                    }\r\n                })\r\n                    .appendTo(rootSelector)\r\n                    .css(\"display\", \"none\");\r\n\r\n                $(\"<div/>\", {\r\n                    id: \"i-design-time-initialize\",\r\n                    click: (e: Event) => {\r\n                        const newContentElement: JQuery = $(document.getElementById($(e.currentTarget).data(\"element-id\")));\r\n                        this.documentInstance.initializeContent(newContentElement, false);\r\n                    }\r\n                })\r\n                    .appendTo(rootSelector)\r\n                    .css(\"display\", \"none\");\r\n\r\n                // Disable animation at design time\r\n                Browser.isAnimationDisabled = true;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class DesignTimeDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            if (Browser.isDesignTime) {\r\n                return new DesignTimeDocumentFeature(documentInstance);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.DesignTimeDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const dynamicTocConstants = {\r\n        tocSplitterWidth: 14,\r\n        maxSavedTocWidth: 1000,\r\n        minSavedTocWidth: 50,\r\n\r\n        newFolderNodeIconIndex: 3,\r\n        folderNodeIconIndex: 1,\r\n        newPageNodeIconIndex: 10,\r\n        pageNodeIconIndex: 9\r\n    };\r\n\r\n    export class DynamicTocNode {\r\n        /**\r\n         * Unique node id\r\n         */\r\n        public id: string;\r\n        /**\r\n         * Title\r\n         */\r\n        public t: string;\r\n        /**\r\n         * Icon\r\n         */\r\n        public i: number;\r\n        /**\r\n         * Is New Indicator\r\n         */\r\n        public n: boolean;\r\n        /**\r\n         * Target url\r\n         */\r\n        public u: string;\r\n        /**\r\n         * Child Nodes\r\n         */\r\n        public childNodes: DynamicTocNode[];\r\n        /**\r\n         * Populated\r\n         */\r\n        public isPopulated: boolean;\r\n        /**\r\n         * Id of the container this node is contained in\r\n         */\r\n        public containerId: string;\r\n        /**\r\n         * Id of the parent node\r\n         */\r\n        public parentNodeId: string;\r\n        /**\r\n         * Container where child nodes are located\r\n         */\r\n        public cc: string;\r\n        /**\r\n         * True if the node is currently expanded\r\n         */\r\n        public isExpanded: boolean;\r\n        /**\r\n         * True if the node is selected\r\n         */\r\n        public isSelected: boolean;\r\n    }\r\n\r\n    export class DynamicTocDocumentFeature extends DocumentFeatureBase {\r\n\r\n        private _allNodes: Record<string, DynamicTocNode> = {};\r\n        private _loadedContainers: Record<string, boolean> = {};\r\n        private _rootSelector: JQuery;\r\n\r\n        public getName(): string {\r\n            return \"Dynamic ToC\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n            if (Browser.isDesignTime || $(\"#i-dt-root\", rootSelector).length === 0) {\r\n                return;\r\n            }\r\n\r\n            const settings = this.getFeatureSettings();\r\n            if (Browser.isCompiledHelp() || !settings.isEnabled) {\r\n                $(\"#i-dt-root\", rootSelector).hide();\r\n            }\r\n\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            (Innovasys as any).DynamicToc = this;\r\n            this._rootSelector = rootSelector;\r\n            this.loadNodeContainer(\"c0\", () => {\r\n                // If there is an initial node to select, load it, expand the path to it and mark as selected\r\n                if (typeof (settings.initialNodeId) != \"undefined\"\r\n                    && settings.initialNodeId != null\r\n                    && settings.initialNodeContainer != null) {\r\n\r\n                    // Hide whilst selecting and expanding nodes\r\n                    $(\"#i-toc-content\", this._rootSelector).hide();\r\n                    this.loadNodeToRoot(settings.initialNodeId, settings.initialNodeContainer, settings.initialNodeId);\r\n                }\r\n            });\r\n\r\n            if (settings.isResizable) {\r\n                $(\"#i-toc-content\").resizable({\r\n                    handles: \"e\",\r\n                    resize: (event, ui) => {\r\n                        this.setTocWidth($(ui.element).outerWidth() + dynamicTocConstants.tocSplitterWidth);\r\n                        $(ui.element).css(\"left\", \"\");\r\n                    }\r\n                });\r\n\r\n                // Load width from storage\r\n                const width = this.documentInstance.getLocalStorage().getAttribute(\"i-dynamic-toc-width\");\r\n                if (width != null && width < dynamicTocConstants.maxSavedTocWidth && width > dynamicTocConstants.minSavedTocWidth) {\r\n                    const $tocContent = $(\"#i-toc-content\");\r\n                    const innerWidthDifference = $tocContent.outerWidth() - $tocContent.width();\r\n                    $tocContent.width(width - innerWidthDifference - dynamicTocConstants.tocSplitterWidth);\r\n                    this.setTocWidth(width);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Adds a dynamic style to adjust the body margin to match the ToC width\r\n         */\r\n        private setTocWidth(width: number): void {\r\n            const styleContainer = Browser.getDynamicStyleContainer(\"i-dynamic-body-margin\");\r\n            styleContainer.html(`@media only screen and (min-width: 769px) { #i-body-content { margin-left: ${width}px; }`);\r\n            this.documentInstance.getLocalStorage().setAttribute(\"i-dynamic-toc-width\", width);\r\n        }\r\n\r\n        /**\r\n         * Loads the passed node id (currentNodeId), loading the container if necessary and then repeating\r\n         * up the node hiearchy to the root. Once the node path is fully loaded, the path is expanded and\r\n         * the node is marked as selected.\r\n         */\r\n        private loadNodeToRoot(currentNodeId: string, containerToLoadNext: string, targetNodeId: string) {\r\n            const node = this.getNode(currentNodeId);\r\n            if (this._loadedContainers[containerToLoadNext]) {\r\n                if (node.parentNodeId === \"n0\" || node.id === \"n0\") {\r\n                    // Now joined up to the root node\r\n                    this.createElementsForNodeChildren(node, true);\r\n                    const targetNode = this.getNode(targetNodeId);\r\n                    this.ensureNodeChildrenPopulated(targetNode,\r\n                        populatedNode => this.expandAndSelectNode(populatedNode.id));\r\n\r\n                } else {\r\n                    const parentNode = this.getNode(node.parentNodeId);\r\n                    this.loadNodeToRoot(parentNode.id, parentNode.containerId, targetNodeId);\r\n                }\r\n            } else {\r\n                this.loadNodeContainer(containerToLoadNext, () => {\r\n                    this.loadNodeToRoot(currentNodeId, containerToLoadNext, targetNodeId);\r\n                });\r\n            }\r\n        }\r\n\r\n        private expandAndSelectNode(targetNodeId: string): void {\r\n            // Expand down\r\n            let nodeToExpand = this.getNode(targetNodeId);\r\n\r\n            while (nodeToExpand != null) {\r\n                if ((nodeToExpand.id === \"n0\" || nodeToExpand.cc) && !nodeToExpand.isExpanded) {\r\n                    this.toggleNodeIsExpanded(nodeToExpand);\r\n                }\r\n                nodeToExpand = this.getNode(nodeToExpand.parentNodeId);\r\n                if (typeof nodeToExpand == \"undefined\") {\r\n                    nodeToExpand = null;\r\n                }\r\n            }\r\n\r\n            // If the target node has children and a url, check the first child to\r\n            //  see if it is for the same url and if so select that instead\r\n            let nodeToSelect = this.getNode(targetNodeId);\r\n            if (nodeToSelect.u != null &&\r\n                nodeToSelect.childNodes != null &&\r\n                nodeToSelect.childNodes.length > 0 &&\r\n                nodeToSelect.childNodes[0].u === nodeToSelect.u) {\r\n\r\n                nodeToSelect = nodeToSelect.childNodes[0];\r\n            }\r\n            this.setNodeSelected(nodeToSelect);\r\n\r\n            $(\"#i-toc-content\", this._rootSelector).show();\r\n        }\r\n\r\n        /**\r\n         * Mark the node as selected (both in the node and related element)\r\n         */\r\n        private setNodeSelected(node: DynamicTocNode): void {\r\n            node.isSelected = true;\r\n            const $node = $(`#i-n-${node.id}`, this._rootSelector);\r\n            if ($node.length > 0) {\r\n                // Delay to ensure the ToC is visible\r\n                setTimeout(() => {\r\n                    if (!Browser.isElementInView($node.get(0), true)) {\r\n                        $node.get(0).scrollIntoView();\r\n                    }\r\n                    $node.toggleClass(\"i-selected\", true);\r\n                }, 1);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Returns true if the node has been loaded (either partially or fully)\r\n         */\r\n        private nodeExists(nodeId: string): boolean {\r\n            return this.getNode(nodeId) != null;\r\n        }\r\n\r\n        /**\r\n         * Gets a previously loaded node. Returns null if the node has not been loaded\r\n         */\r\n        public getNode(nodeId: string): DynamicTocNode {\r\n            const possibleNode = this._allNodes[nodeId];\r\n            if (typeof possibleNode != \"undefined\" && possibleNode != null) {\r\n                return possibleNode;\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Saves the passed node so that it can be fetched using getNode()\r\n         */\r\n        public setNode(node: DynamicTocNode): void {\r\n            this._allNodes[node.id] = node;\r\n        }\r\n\r\n        /**\r\n         * Injects node info, including child nodes. Called from container scripts.\r\n         */\r\n        public injectNodeInfo(nodeId: string, parentContainerId: string, childNodes: DynamicTocNode[]): void {\r\n\r\n            let node = this.getNode(nodeId);\r\n\r\n            if (node == null) {\r\n                node = new DynamicTocNode();\r\n                node.id = nodeId;\r\n                if (node.id === \"n0\") {\r\n                    node.cc = \"c0\";\r\n                }\r\n                this.setNode(node);\r\n            }\r\n\r\n            node.containerId = parentContainerId;\r\n\r\n            node.childNodes = $.map(childNodes,\r\n                (newChildNode: DynamicTocNode) => {\r\n                    const currentNode = this.getNode(newChildNode.id);\r\n                    if (currentNode != null) {\r\n                        // Node already exists, merge new one\r\n                        const newNode = { ...currentNode, ...newChildNode } as DynamicTocNode;\r\n\r\n                        return newNode;\r\n                    } else {\r\n                        // No existing node\r\n                        return newChildNode;\r\n                    }\r\n                });\r\n\r\n            $.each(node.childNodes,\r\n                (index: number, childNode: DynamicTocNode) => {\r\n                    childNode.parentNodeId = node.id;\r\n                    this.setNode(childNode);\r\n                });\r\n\r\n            // Only create elements when this node is joined up to the parent\r\n            if (node.id === \"n0\" || (typeof node.parentNodeId != \"undefined\" && this.nodeExists(node.parentNodeId))) {\r\n                this.createElementsForNodeChildren(node);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Loads a node container script, executing an optional afterLoadCallback once the script is loaded.\r\n         */\r\n        private loadNodeContainer(containerId: string, afterLoadCallback?: (loadedContainerId: string) => void) {\r\n            Browser.loadScript(`./_toc/${containerId}.js`,\r\n                `dt-${containerId}`,\r\n                null,\r\n                () => {\r\n                    this._loadedContainers[containerId] = true;\r\n                    if (afterLoadCallback != null) {\r\n                        afterLoadCallback(containerId);\r\n                    }\r\n                });\r\n        }\r\n\r\n        /**\r\n         * Creates the DOM elements for the child nodes of the passed node. Set recurse to true to populate\r\n         * the whole node hiearchy below the passed node.\r\n         */\r\n        private createElementsForNodeChildren(node: DynamicTocNode, recurse: boolean = false): void {\r\n\r\n            if (!node.cc || node.childNodes == null) {\r\n                // No children, or children not yet populated\r\n                return;\r\n            }\r\n\r\n            if (!node.isPopulated) {\r\n\r\n                const settings = this.getFeatureSettings();\r\n                let list: JQuery;\r\n\r\n                let parentNode: JQuery = null;\r\n\r\n                if (node.id === \"n0\") {\r\n                    list = $(\"#i-dt-root\", this._rootSelector);\r\n                } else {\r\n                    // Find the node for the parent and add a child list to contain the children\r\n                    const parentNodeId = `#i-n-${node.id}`;\r\n                    parentNode = $(parentNodeId, this._rootSelector);\r\n                    if (parentNode.length === 0) {\r\n                        // Parent node does not exist yet\r\n                        return;\r\n                    }\r\n                    list = $(\"<ul/>\");\r\n                }\r\n\r\n                $.each(node.childNodes,\r\n                    (index: number, childNode: DynamicTocNode) => {\r\n\r\n                        const isNew: boolean = childNode.n;\r\n\r\n                        const newListItem = $(\"<li/>\", { id: `i-n-${childNode.id}` })\r\n                            .data(\"node-id\", childNode.id);\r\n\r\n                        if (isNew) {\r\n                            newListItem.addClass(\"i-is-new\");\r\n                        }\r\n\r\n                        const newExpander = $(\"<ins/>\",\r\n                            {\r\n                                /* eslint-disable-next-line quote-props */\r\n                                \"class\": (childNode.cc ? \"i-spacer i-expandorcollapse i-expand\" : \"i-spacer\")\r\n                            })\r\n                            .on(\"click.dynamictoc\",\r\n                                (eventObject: JQueryEventObject): boolean => {\r\n                                    eventObject.cancelBubble = true;\r\n\r\n                                    return this.onNodeElementClick(eventObject.currentTarget as Element, true);\r\n                                });\r\n\r\n                        const newNodeAnchor = $(\"<a/>\")\r\n                            .html(childNode.t)\r\n                            .attr(\"href\", childNode.u != null ? childNode.u : \"#\")\r\n                            .on(\"click.dynamictoc\",\r\n                                (eventObject: JQueryEventObject): boolean => {\r\n                                    eventObject.cancelBubble = true;\r\n\r\n                                    return this.onNodeElementClick(eventObject.currentTarget as Element, false);\r\n                                });\r\n\r\n                        newListItem.append(newExpander);\r\n\r\n                        if (settings.isIconEnabled) {\r\n                            const iconIndex: number = childNode.i == null ? -1 : childNode.i;\r\n                            let iconClassIndex: number = iconIndex;\r\n\r\n                            if (childNode.cc) {\r\n                                if (iconIndex <= 0) {\r\n                                    if (isNew) {\r\n                                        iconClassIndex = dynamicTocConstants.newFolderNodeIconIndex;\r\n                                    } else {\r\n                                        iconClassIndex = dynamicTocConstants.folderNodeIconIndex;\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                if (iconIndex <= 0) {\r\n                                    if (isNew) {\r\n                                        iconClassIndex = dynamicTocConstants.newPageNodeIconIndex;\r\n                                    } else {\r\n                                        iconClassIndex = dynamicTocConstants.pageNodeIconIndex;\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            const icon: JQuery = $(\"<ins class=\\\"i-icon\\\"></ins>\")\r\n                                .addClass(`i-icon-${iconClassIndex}`);\r\n\r\n                            newListItem.append(icon);\r\n                        }\r\n\r\n                        newListItem.append(newNodeAnchor);\r\n                        list.append(newListItem);\r\n                    });\r\n\r\n                if (parentNode != null) {\r\n                    parentNode.append(list);\r\n                } else {\r\n                    list.addClass(\"i-visible\");\r\n                }\r\n\r\n                // Set flag to indicate populated\r\n                node.isPopulated = true;\r\n            }\r\n\r\n            if (recurse && node.childNodes != null) {\r\n                $.each(node.childNodes,\r\n                    (index: number, childNode: DynamicTocNode) => {\r\n                        this.createElementsForNodeChildren(childNode, true);\r\n                    });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Node element click handler\r\n         */\r\n        private onNodeElementClick(element: Element, isExpandOnly: boolean): boolean {\r\n            const $element = $(element).parent(\"li\");\r\n            const node = this.getNode($element.data(\"node-id\"));\r\n            if (node.u != null && !isExpandOnly) {\r\n                Browser.navigateTo(node.u, false);\r\n            } else if (node.cc != null) {\r\n                this.ensureNodeChildrenPopulated(node, populatedNode => {\r\n                    // Toggle expand\r\n                    this.toggleNodeIsExpanded(populatedNode);\r\n                });\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        /**\r\n         * Ensures that the passed node is populated. After it is populated, the afterPopulated callback is invoked.\r\n         */\r\n        private ensureNodeChildrenPopulated(node: DynamicTocNode, afterPopulated: (populatedNode: DynamicTocNode) => void): void {\r\n            if (node.cc) {\r\n                if (!node.childNodes) {\r\n                    // Node model needs to populate - it will expand once populated\r\n                    this.loadNodeContainer(node.cc, () => {\r\n                        afterPopulated(node);\r\n                    });\r\n\r\n                    return;\r\n                } else {\r\n                    if (!node.isPopulated) {\r\n                        // Node model is populated, but the DOM elements have not been\r\n                        //  created. Create them now\r\n                        this.createElementsForNodeChildren(node);\r\n                    }\r\n                }\r\n            }\r\n            afterPopulated(node);\r\n        }\r\n\r\n        /**\r\n         * Expand / collapse a node.\r\n         */\r\n        private toggleNodeIsExpanded(node: DynamicTocNode) {\r\n            const spacer = $(`#i-n-${node.id} > ins`, this._rootSelector);\r\n            spacer.toggleClass(\"i-expand i-collapse\");\r\n            spacer.siblings(\"ul\").toggleClass(\"i-visible\");\r\n\r\n            if (this.getFeatureSettings().isIconEnabled) {\r\n                // Update the icon for the 2 state icons\r\n                const icon: JQuery = $(`#i-n-${node.id} > a > ins`, this._rootSelector);\r\n                if (icon.hasClass(\"i-icon-1\")) {\r\n                    icon.removeClass(\"i-icon-1\").addClass(\"i-icon-2\");\r\n                } else if (icon.hasClass(\"i-icon-2\")) {\r\n                    icon.removeClass(\"i-icon-2\").addClass(\"i-icon-1\");\r\n                } else if (icon.hasClass(\"i-icon-3\")) {\r\n                    icon.removeClass(\"i-icon-3\").addClass(\"i-icon-4\");\r\n                } else if (icon.hasClass(\"i-icon-4\")) {\r\n                    icon.removeClass(\"i-icon-4\").addClass(\"i-icon-3\");\r\n                }\r\n            }\r\n\r\n            node.isExpanded = spacer.hasClass(\"i-collapse\");\r\n        }\r\n\r\n        private getDefaultSettings(): IDynamicTocFeatureSettings {\r\n            return {\r\n                initialNodeContainer: null,\r\n                initialNodeId: null,\r\n                isIconEnabled: false,\r\n                isEnabled: false,\r\n                isResizable: true\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IDynamicTocFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IDynamicTocFeatureSettings>(\"dynamictoc\", this.getDefaultSettings);\r\n        }\r\n\r\n    }\r\n\r\n    export interface IDynamicTocFeatureSettings {\r\n        isIconEnabled: boolean;\r\n        initialNodeId: string;\r\n        initialNodeContainer: string;\r\n        isEnabled: boolean;\r\n        isResizable: boolean;\r\n    }\r\n\r\n    export class DynamicTocDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            if (!Browser.isCompiledHelp()) {\r\n                return new DynamicTocDocumentFeature(documentInstance);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.DynamicTocDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const inThisTopicConstants = {\r\n        expansionDelay: 250,\r\n        maxInThisTopicAnchors: 100\r\n    };\r\n\r\n    export class InThisTopicHeading {\r\n\r\n        private readonly _documentInstance: Document;\r\n\r\n        public headingLevel = 1;\r\n        public childHeadings: InThisTopicHeading[] = [];\r\n        public headingText: string;\r\n        public anchorName: string;\r\n        public headingElement: HTMLElement;\r\n        public listItemId: string;\r\n        public isSectionHeading: boolean;\r\n\r\n        constructor(documentInstance: Document) {\r\n            this._documentInstance = documentInstance;\r\n        }\r\n\r\n        public createElement(): JQuery {\r\n\r\n            // Create the heading link that points to the anchor we created\r\n            const headingLink = $(\"<a/>\", { href: `#${this.anchorName}` })\r\n                .text(this.headingText)\r\n                .on(\"click.inthistopic\", () => {\r\n                    const clickTarget = this.headingElement;\r\n\r\n                    if ($(clickTarget).hasClass(\"i-section-heading\")) {\r\n                        // Click on a section heading. Make sure that the content within the heading\r\n                        //  is visible and scroll so that the first child is in view\r\n                        const $firstContentChild = $(clickTarget)\r\n                            .next(\".i-section-content\")\r\n                            .children();\r\n                        if ($firstContentChild.length > 0) {\r\n                            const firstContentChild = $firstContentChild.get(0) as HTMLElement;\r\n                            const documentInstance = Browser.getDocumentInstance(firstContentChild);\r\n                            documentInstance.ensureElementVisible(firstContentChild);\r\n                            // Timeout is necessary to allow the parent section(s) to expand\r\n                            setTimeout(() => {\r\n                                clickTarget.scrollIntoView(true);\r\n                                this.refreshAllHighlights();\r\n                            }, inThisTopicConstants.expansionDelay);\r\n                        }\r\n                    }\r\n\r\n                    if (clickTarget != null) {\r\n                        // Click on a current invisible heading (i.e. in a collapsed section). Call ensureElementVisible\r\n                        //  and then scroll to the target\r\n                        const documentInstance = Browser.getDocumentInstance(clickTarget);\r\n                        documentInstance.ensureElementVisible(clickTarget);\r\n                        // Timeout is necessary to allow the parent section(s) to expand\r\n                        setTimeout(() => {\r\n                            clickTarget.scrollIntoView(true);\r\n                            this.refreshAllHighlights();\r\n                        }, inThisTopicConstants.expansionDelay);\r\n                    }\r\n                });\r\n\r\n            // Create a list item to contain the link\r\n            this.listItemId = Browser.getUniqueId();\r\n            const headingListItem = $(\"<li/>\")\r\n                .attr(\"id\", this.listItemId)\r\n                .addClass(`i-heading-level-${this.headingLevel}`)\r\n                .append(headingLink);\r\n\r\n            if (this.childHeadings.length > 0) {\r\n                // Create a child list and add the child items to it\r\n                const childList = $(\"<ul/>\").addClass(`i-in-this-topic i-in-this-topic-${this.headingLevel}`);\r\n                $.each(this.childHeadings,\r\n                    (index: number, childHeading: InThisTopicHeading) => {\r\n                        childList.append(childHeading.createElement());\r\n                    });\r\n                headingListItem.append(childList);\r\n            }\r\n\r\n            return headingListItem;\r\n\r\n        }\r\n\r\n        public refreshAllHighlights(): void {\r\n            const feature = this._documentInstance.getFeatureByName(\"In This Topic\") as InThisTopicDocumentFeature;\r\n            feature.refreshHighlights();\r\n        }\r\n\r\n        public getIsVisible(): boolean {\r\n            return Browser.isElementInView(this.headingElement, !this.isSectionHeading);\r\n        }\r\n\r\n        public highlightVisibility(isVisible: boolean): void {\r\n            $(`#${this.listItemId}`).toggleClass(\"i-inthistopic-visible\", isVisible);\r\n        }\r\n    }\r\n\r\n    export class InThisTopicDocumentFeature extends DocumentFeatureBase {\r\n\r\n        private _rootHeadings: InThisTopicHeading[] = null;\r\n\r\n        public getName(): string {\r\n            return \"In This Topic\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (Browser.isDesignTime || $(\".i-in-this-topic-container\", rootSelector).length === 0) {\r\n                return;\r\n            }\r\n\r\n            let allHeadingsSelector: string = null;\r\n\r\n            const featureSettings = this.getFeatureSettings();\r\n            if (featureSettings != null) {\r\n                if (!featureSettings.isSupported) {\r\n                    return;\r\n                }\r\n\r\n                allHeadingsSelector = featureSettings.headingTags;\r\n                if (!featureSettings.isEnabled) {\r\n                    $(\".i-in-this-topic-container\").hide();\r\n\r\n                    return;\r\n                }\r\n            }\r\n\r\n            const anchors: Record<string, boolean> = {};\r\n\r\n            if (allHeadingsSelector == null) {\r\n                allHeadingsSelector = \"h1,h2,h3,.i-section-heading\";\r\n            }\r\n            const allHeadings = $(allHeadingsSelector);\r\n\r\n            this._rootHeadings = [];\r\n\r\n            allHeadings.each((_: number, element: HTMLElement) => {\r\n\r\n                const thisHeading = $(element);\r\n                const tagName = element.tagName;\r\n\r\n                const inThisTopicHeading = new InThisTopicHeading(this.documentInstance);\r\n                inThisTopicHeading.headingElement = element;\r\n\r\n                // Find the level of this heading\r\n                /* eslint-disable-next-line no-magic-numbers */\r\n                if (tagName.length === 2 && tagName.substring(0, 1) === \"H\") {\r\n                    inThisTopicHeading.headingLevel = parseInt(tagName.substring(1), 10);\r\n                } else {\r\n                    if (thisHeading.hasClass(\"i-section-heading\")) {\r\n                        inThisTopicHeading.headingLevel = 1;\r\n                        // If this is a nested heading, find the parent and use its headinglevel+1\r\n                        const $parentSectionContent = thisHeading.parent(\".i-section-content\");\r\n                        if ($parentSectionContent.length > 0) {\r\n                            const $parentSectionHeading = $parentSectionContent.prev(\".i-section-heading\");\r\n                            if ($parentSectionHeading.length > 0) {\r\n                                const parentHeading: InThisTopicHeading\r\n                                    = this.findInThisTopicHeading(this._rootHeadings, $parentSectionHeading.get(0));\r\n                                if (parentHeading != null) {\r\n                                    inThisTopicHeading.headingLevel = parentHeading.headingLevel + 1;\r\n                                }\r\n                            }\r\n                        }\r\n                        inThisTopicHeading.isSectionHeading = true;\r\n                    }\r\n                }\r\n\r\n                // Get heading text\r\n                inThisTopicHeading.headingText = inThisTopicHeading.isSectionHeading\r\n                    ? thisHeading.children(\".i-section-heading-text\")\r\n                        .first()\r\n                        .text()\r\n                    : thisHeading.text();\r\n\r\n                // Create a unique anchor name for this heading\r\n                let anchorName = `i-heading-${inThisTopicHeading.headingText.replace(/[^a-zA-Z0-9]+/g, \"-\").toLowerCase()}`;\r\n\r\n                if (anchors[anchorName] != null) {\r\n                    for (let a = 0; a < inThisTopicConstants.maxInThisTopicAnchors; a++) {\r\n                        if (anchors[`${anchorName}-${a}`] == null) {\r\n                            anchorName = `${anchorName}-${a}`;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                anchors[anchorName] = true;\r\n                inThisTopicHeading.anchorName = anchorName;\r\n\r\n                // Find the logical parent of this heading\r\n                const parentInThisTopicHeading =\r\n                    this.findParentInThisTopicHeading(null, this._rootHeadings, inThisTopicHeading.headingLevel);\r\n\r\n                if (parentInThisTopicHeading == null) {\r\n                    // Root heading\r\n                    this._rootHeadings.push(inThisTopicHeading);\r\n                } else {\r\n                    // Nested heading\r\n                    parentInThisTopicHeading.childHeadings.push(inThisTopicHeading);\r\n                }\r\n\r\n                // Add an anchor just before the heading content as a target for the link\r\n                thisHeading.prepend($(\"<a/>\", { name: inThisTopicHeading.anchorName }));\r\n\r\n            });\r\n\r\n            const headingList: JQuery = $(\"<ul/>\")\r\n                .addClass(\"i-in-this-topic i-in-this-topic-root\");\r\n\r\n            if (this.getFeatureSettings().areChildHeadingsAlwaysVisible) {\r\n                headingList.addClass(\"i-in-this-topic-child-headings-always-visible\");\r\n            }\r\n\r\n            $.each(this._rootHeadings,\r\n                (_: number, inThisTopicHeading: InThisTopicHeading) => {\r\n\r\n                    const element = inThisTopicHeading.createElement();\r\n                    headingList.append(element);\r\n\r\n                });\r\n\r\n            // Add the list to the body\r\n            if (this._rootHeadings.length > 0) {\r\n                $(\".i-in-this-topic-container\").append(headingList);\r\n\r\n                $(window)\r\n                    .off(\"scroll.inthistopic\")\r\n                    .on(\"scroll.inthistopic\",\r\n                        () => {\r\n                            this.refreshHighlights();\r\n                        })\r\n                    .off(\"resize.inthistopic\")\r\n                    .on(\"resize.inthistopic\",\r\n                        () => {\r\n                            this.refreshHighlights();\r\n                        });\r\n\r\n                setTimeout(() => this.refreshHighlights(), 1);\r\n            } else {\r\n                $(\".i-in-this-topic-container\").hide();\r\n            }\r\n\r\n        }\r\n\r\n        public refreshHighlights(): void {\r\n            this.highlightSelected(null, this._rootHeadings);\r\n        }\r\n\r\n        private highlightSelected(parent: InThisTopicHeading, headings: InThisTopicHeading[]): boolean {\r\n            if (headings == null) {\r\n                headings = this._rootHeadings;\r\n            }\r\n\r\n            let returnValue = false;\r\n\r\n            if (parent != null) {\r\n                returnValue = parent.getIsVisible();\r\n            }\r\n\r\n            $.each(headings,\r\n                (_: number, heading: InThisTopicHeading) => {\r\n                    returnValue = (this.highlightSelected(heading, heading.childHeadings) && parent != null) || returnValue;\r\n                });\r\n\r\n            if (parent != null) {\r\n                parent.highlightVisibility(returnValue);\r\n            }\r\n\r\n            return returnValue;\r\n        }\r\n\r\n        private getDefaultSettings(): IInThisTopicFeatureSettings {\r\n            return {\r\n                areChildHeadingsAlwaysVisible: true,\r\n                headingTags: null,\r\n                isEnabled: false,\r\n                isSupported: false\r\n            };\r\n        }\r\n\r\n        public getFeatureSettings(): IInThisTopicFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IInThisTopicFeatureSettings>(\"inthistopic\", this.getDefaultSettings);\r\n        }\r\n\r\n        private findInThisTopicHeading(headings: InThisTopicHeading[], heading: Element): InThisTopicHeading {\r\n            if (headings == null || headings.length === 0) {\r\n                return null;\r\n            }\r\n\r\n            for (const childHeading of headings) {\r\n                if (childHeading.headingElement === heading) {\r\n                    return childHeading;\r\n                }\r\n                const match = this.findInThisTopicHeading(childHeading.childHeadings, heading);\r\n                if (match != null) {\r\n                    return match;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        private findParentInThisTopicHeading(\r\n            parent: InThisTopicHeading,\r\n            headings: InThisTopicHeading[],\r\n            headingLevel: number): InThisTopicHeading {\r\n\r\n            if (parent != null && parent.headingLevel === headingLevel - 1) {\r\n                // This is the heading level we are looking for\r\n                return parent;\r\n            }\r\n\r\n            const lastChild = headings.length > 0\r\n                ? headings[headings.length - 1]\r\n                : null;\r\n\r\n            if (lastChild == null) {\r\n                // No child headings to search\r\n                return null;\r\n            } else {\r\n                const foundHeading: InThisTopicHeading = this.findParentInThisTopicHeading(lastChild,\r\n                    lastChild.childHeadings,\r\n                    headingLevel);\r\n                if (foundHeading != null) {\r\n                    return foundHeading;\r\n                } else {\r\n                    // No find in the levels below, so match the largest heading\r\n                    //  available in the current hierarchy\r\n                    if (lastChild.headingLevel <= headingLevel - 1) {\r\n                        return lastChild;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n    }\r\n\r\n    export interface IInThisTopicFeatureSettings {\r\n        headingTags: string;\r\n        areChildHeadingsAlwaysVisible: boolean;\r\n        isEnabled: boolean;\r\n        isSupported: boolean;\r\n    }\r\n\r\n    export class InThisTopicDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new InThisTopicDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.InThisTopicDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const languageFilterConstants = {\r\n        vbLanguageCount: 2\r\n    };\r\n\r\n    export class LanguageFilterDocumentFeature extends ContentFilterDocumentFeature {\r\n\r\n        private readonly _linkSelector = \".i-language-filter\";\r\n        private readonly _allLabelSelector = \"label.i-language-filter-all\";\r\n        private readonly _languageLabelSelectorPrefix = \"label.i-language-filter-\";\r\n        private readonly _languageNameAttributeName = \"data-languagename\";\r\n        private readonly _filteredContentClassNamePrefix = \"i-filtered-content-\";\r\n        private readonly _toggleClassAttributeName = \"data-toggleclass\";\r\n\r\n        public getName(): string {\r\n            return \"Language Filter\";\r\n        }\r\n\r\n        public getCheckboxClassName(): string {\r\n            return \"i-toggle-language-checkbox\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            // Move VB and VBUsage to a common Syntax-VB div\r\n            const tabContainers = $(\".i-tab-container\", rootSelector);\r\n            tabContainers.each((_: number, element: HTMLElement): void => {\r\n                const tabContainer = $(element);\r\n                if ($(\"a[href='#i-syntax-VBAll']\", tabContainer).length > 0) {\r\n                    $(\"<div>\", { id: \"i-syntax-VBAll\", class: \"i-code\" })\r\n                        .append($(\"#i-syntax-VB\", tabContainer))\r\n                        .append(\"&nbsp;\")\r\n                        .append($(\"#i-syntax-VBUsage\", tabContainer))\r\n                        .appendTo(tabContainer);\r\n                }\r\n            });\r\n\r\n            super.initializeContent(rootSelector);\r\n\r\n        }\r\n\r\n        protected toggleCheckbox(element: JQuery, isImmediate: boolean = false): JQuery {\r\n\r\n            const rootSelector = this.documentInstance.rootSelector;\r\n\r\n            // Don't allow removal of the last language\r\n            const allCheckboxes = $(`.${this.getCheckboxClassName()}`);\r\n            const allCheckedCheckboxes = allCheckboxes.filter(\":checked\");\r\n            if (allCheckedCheckboxes.length === 0) {\r\n                element.prop(\"checked\", true);\r\n\r\n                return $();\r\n            }\r\n\r\n            // Base implementation shows/hides the related content\r\n            const result = super.toggleCheckbox(element, isImmediate);\r\n            const isChecked = element.is(\":checked\");\r\n\r\n            const toggleClassName: string = element.attr(this._toggleClassAttributeName);\r\n\r\n            // Wrapper for toggleCheckBox that hides the consolidated VB section\r\n            //  if both VB and VBUsage are hidden\r\n            if (toggleClassName === `${this._filteredContentClassNamePrefix}VBUsage`\r\n                || toggleClassName === `${this._filteredContentClassNamePrefix}VB`) {\r\n\r\n                const isVbChecked: boolean\r\n                    = rootSelector.find(`.${this.getCheckboxClassName()}[data-languagename='VB']`).is(\":checked\");\r\n                const isVbUsageChecked: boolean\r\n                    = rootSelector.find(`.${this.getCheckboxClassName()}[data-languagename='VBUsage']`).is(\":checked\");\r\n\r\n                if ((isChecked && !(isVbChecked && isVbUsageChecked))\r\n                    || (!isChecked && !isVbChecked && !isVbUsageChecked)) {\r\n\r\n                    this.documentInstance.setElementVisibility(\r\n                        rootSelector.find(`.${this._filteredContentClassNamePrefix}VBAll`), isChecked, isImmediate);\r\n                }\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        protected updateFilterLabel(): void {\r\n\r\n            // Set caption of language filter to reflect current set\r\n            let targetLabel: JQuery = null;\r\n            const allCheckboxes = $(`.${this.getCheckboxClassName()}`);\r\n            const allCheckedCheckboxes = allCheckboxes.filter(\":checked\");\r\n            const allLabels = $(`${this._linkSelector} label`);\r\n\r\n            if (allCheckedCheckboxes.length === allCheckboxes.length) {\r\n                // All languages\r\n                targetLabel = $(`${this._linkSelector} ${this._allLabelSelector}`);\r\n            } else if (allCheckedCheckboxes.length === 0) {\r\n                // No languages\r\n\r\n            } else if (allCheckedCheckboxes.length === 1) {\r\n                // Single language\r\n                const languageName = allCheckedCheckboxes.attr(this._languageNameAttributeName);\r\n                targetLabel =\r\n                    $(`${this._linkSelector} ${this._languageLabelSelectorPrefix}${languageName},${this._linkSelector\r\n                        } .i-${languageName}-label`);\r\n            } else {\r\n                // Multiple languages\r\n                if (allCheckedCheckboxes.length === languageFilterConstants.vbLanguageCount\r\n                    && allCheckedCheckboxes.filter(\r\n                        `[${this._languageNameAttributeName}^='VB']`).length === languageFilterConstants.vbLanguageCount) {\r\n\r\n                    // 2 languages, both VB\r\n                    targetLabel = $(`${this._linkSelector} ${this._languageLabelSelectorPrefix}vball`);\r\n                } else {\r\n                    targetLabel = $(`${this._linkSelector} ${this._languageLabelSelectorPrefix}multiple`);\r\n                }\r\n            }\r\n\r\n            allLabels.css(\"display\", \"none\");\r\n\r\n            if (targetLabel != null) {\r\n                targetLabel.css(\"display\", \"inline\");\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    export class LanguageFilterDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new LanguageFilterDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.LanguageFilterDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class MemberFilterDocumentFeature extends ContentFilterDocumentFeature {\r\n\r\n        public getName(): string {\r\n            return \"Member Filter\";\r\n        }\r\n\r\n        protected getCheckboxClassName(): string {\r\n            return \"i-toggle-filter-checkbox\";\r\n        }\r\n\r\n        protected updateFilterLabel(): void {\r\n            const rootSelector = this.documentInstance.rootSelector;\r\n            const isFiltered = !$(\"#i-inherited-checkbox\").is(\":checked\") || !$(\"#i-protected-checkbox\").is(\":checked\");\r\n            rootSelector.find(\".i-members-all\").css(\"display\", isFiltered ? \"none\" : \"inline\");\r\n            rootSelector.find(\".i-members-filtered\").css(\"display\", isFiltered ? \"inline\" : \"none\");\r\n        }\r\n\r\n    }\r\n\r\n    export class MemberFilterDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new MemberFilterDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.MemberFilterDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Versions {\r\n    export class Configuration {\r\n        public static versionDefinitionSets: VersionDefinitionSet[];\r\n        public static discoveryUrl: string;\r\n        public static navigationUrl: string;\r\n    }\r\n\r\n    export class VersionDefinitionSet {\r\n        public id: string;\r\n        public caption: string;\r\n        public versionDefinitions: VersionDefinition[];\r\n    }\r\n\r\n    export class VersionDefinition {\r\n        public id: string;\r\n        public caption: string;\r\n        public isFrameless: boolean;\r\n    }\r\n}\r\n\r\n/* eslint-disable-next-line @typescript-eslint/no-unused-vars, no-redeclare */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export const versionConstants = {\r\n        badRequestStatusCode: 400\r\n    };\r\n\r\n    export class VersionsDocumentFeature extends DocumentFeatureBase {\r\n\r\n        public getName(): string {\r\n            return \"Versions\";\r\n        }\r\n\r\n        public initializeContentOrdinal(): number {\r\n            // Initialise before popup links feature\r\n            return -1;\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (Browser.isDesignTime || Browser.isCompiledHelp()) {\r\n                return;\r\n            }\r\n\r\n            if (isInitialLoad) {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                if ((Innovasys as any).settings.versions.isEnabled\r\n                    && Versions.Configuration\r\n                    && Versions.Configuration.versionDefinitionSets) {\r\n                    $.each(Versions.Configuration.versionDefinitionSets,\r\n                        (index: number, item: Versions.VersionDefinitionSet) => {\r\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                            if ((Innovasys as any).settings.versions[item.id]) {\r\n                                if (item.versionDefinitions.length > 1) {\r\n                                    this.createPopupForVersionDefinitionSet(item);\r\n                                }\r\n                            }\r\n                        });\r\n                }\r\n            } else {\r\n                // Initialising the Editions list\r\n                const $popupContent = rootSelector.find(\".i-version-selector\");\r\n                if ($popupContent.length > 0) {\r\n                    $popupContent.each((_: number, popupContentElement: HTMLElement) => {\r\n                        this.discoverVersions($(popupContentElement).attr(\"data-i-versionset-id\"), $(popupContentElement));\r\n                    });\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        private discoverVersions(versionDefinitionSetId: string, popupContent: JQuery) {\r\n            if (popupContent.attr(\"data-i-populated\") != null) {\r\n                return;\r\n            }\r\n\r\n            popupContent.attr(\"data-i-populated\", \"true\");\r\n\r\n            const versionDefinitionSet\r\n                = Versions.Configuration.versionDefinitionSets.filter(\r\n                    (item: Versions.VersionDefinitionSet) => item.id === versionDefinitionSetId)[0];\r\n\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const currentVersionId = (Innovasys as any).settings.versions[versionDefinitionSet.id].currentId;\r\n\r\n            const promises = $.map(versionDefinitionSet.versionDefinitions,\r\n                (item: Versions.VersionDefinition) => {\r\n                    const versionId = `${versionDefinitionSet.id}-${item.id}`;\r\n                    const $itemElement = $(`.i-version-link[data-version-id='${versionId}']`, popupContent);\r\n\r\n                    if (item.id === currentVersionId) {\r\n                        // Current version\r\n                        $itemElement.addClass(\"i-discovered\");\r\n                    } else {\r\n                        // Not the current version, discover\r\n                        const discoveryUrl\r\n                            = this.parseContentUrlTemplate(item, Versions.Configuration.discoveryUrl, versionDefinitionSet.id);\r\n\r\n                        if (discoveryUrl != null && discoveryUrl !== \"\") {\r\n                            const targetUrl = discoveryUrl;\r\n                            void $.ajax({\r\n                                type: \"HEAD\",\r\n                                url: targetUrl,\r\n                                complete: (xhr: JQueryXHR) => {\r\n                                    if (xhr.status !== 0 && xhr.status < versionConstants.badRequestStatusCode) {\r\n                                        $itemElement.addClass(\"i-discovered\");\r\n                                        const $anchor = $(\"<a />\");\r\n                                        $anchor.attr(\"target\", \"_top\");\r\n\r\n                                        const isFrameless = versionDefinitionSetId === \"edition\"\r\n                                            ? item.isFrameless\r\n                                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                            : (Innovasys as any).settings.isFrameless as boolean;\r\n\r\n                                        if (!isFrameless) {\r\n                                            // Different url for navigating to the discovered page\r\n                                            const navigationUrl = this.parseContentUrlTemplate(\r\n                                                item,\r\n                                                Versions.Configuration.navigationUrl,\r\n                                                versionDefinitionSet.id);\r\n                                            $anchor.attr(\"href\", navigationUrl);\r\n                                        } else {\r\n                                            // Direct navigation to the same page we discovered\r\n                                            $anchor.attr(\"href\", targetUrl);\r\n                                        }\r\n                                        $anchor.text($itemElement.text());\r\n                                        $itemElement.empty().append($anchor);\r\n                                    } else {\r\n                                        $itemElement.addClass(\"i-unavailable\");\r\n                                    }\r\n                                }\r\n                            });\r\n                        } else {\r\n                            // No target url\r\n                            $itemElement.addClass(\"i-unavailable\");\r\n                        }\r\n                    }\r\n                });\r\n\r\n            void jQuery.when(promises)\r\n                .always(() => {\r\n                    //\r\n                });\r\n        }\r\n\r\n        private parseContentUrlTemplate(\r\n            versionDefinition: Versions.VersionDefinition,\r\n            urlTemplate: string,\r\n            targetVersionSetId: string): string {\r\n\r\n            return urlTemplate.replace(/%%(.*?)%%/g, (match) => {\r\n                switch (match.toLowerCase()) {\r\n                    case \"%%pagefilename%%\":\r\n                        return Browser.getLocationInfo().pathname.split(\"/\").pop();\r\n                    case \"%%locale%%\":\r\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                        const locale = (Innovasys as any).settings.versions.locale.currentId;\r\n                        if (locale === \"-\") {\r\n                            return \"\";\r\n                        } else {\r\n                            return `_${locale}`;\r\n                        }\r\n                    default:\r\n                        const versionSetId: string = match.replace(/%%/g, \"\").toLowerCase();\r\n                        let value = \"\";\r\n                        if (versionSetId === targetVersionSetId) {\r\n                            // The id we are switching to\r\n                            value = versionDefinition.id;\r\n                        } else {\r\n                            // Current id value for this version set\r\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                            value = (Innovasys as any).settings.versions[versionSetId].currentId;\r\n                        }\r\n\r\n                        return value;\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        private getPopupContainerSelector(): string {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const selector = (Innovasys as any).settings.versions.popupContainer;\r\n            if (selector) {\r\n                return selector;\r\n            } else {\r\n                return \"#i-actions-content\";\r\n            }\r\n        }\r\n\r\n        private createPopupForVersionDefinitionSet(versionDefinitionSet: Versions.VersionDefinitionSet): JQuery {\r\n            const id = `i-version-${versionDefinitionSet.id}`;\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const currentVersionId = (Innovasys as any).settings.versions[versionDefinitionSet.id].currentId;\r\n\r\n            const $container = $(this.getPopupContainerSelector());\r\n\r\n            const $span = $(\"<span class='i-popup-link i-version-popup-link' />\");\r\n            $span.attr(\"data-popup-title\", versionDefinitionSet.caption);\r\n            $span.text(versionDefinitionSet.caption);\r\n            $span.attr(\"data-popup-contentsource\", `#${id}`);\r\n\r\n            const $contentDiv = $(\"<div class='i-popup-content i-version-selector'/>\");\r\n            $contentDiv.attr(\"data-i-versionset-id\", versionDefinitionSet.id);\r\n            $contentDiv.attr(\"id\", id);\r\n\r\n            const $versionList = $(\"<ul/>\");\r\n            $.each(versionDefinitionSet.versionDefinitions,\r\n                (index: number, item: Versions.VersionDefinition) => {\r\n                    const $versionItem = $(\"<li class='i-version-link'/>\");\r\n                    if (currentVersionId === item.id) {\r\n                        $versionItem.addClass(\"i-current-version\");\r\n                    }\r\n                    $versionItem.attr(\"data-version-id\", `${versionDefinitionSet.id}-${item.id}`);\r\n                    $versionItem.text(item.caption);\r\n                    $versionList.append($versionItem);\r\n                });\r\n            $contentDiv.append($versionList);\r\n\r\n            $container.append($span);\r\n            $container.append($contentDiv);\r\n\r\n            return $span;\r\n        }\r\n\r\n        private getDefaultSettings(): IVersionsFeatureSettings {\r\n            return {\r\n                isEnabled: true\r\n            };\r\n        }\r\n\r\n        public getFeatureSettings(): IVersionsFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IVersionsFeatureSettings>(\"Versions\", this.getDefaultSettings);\r\n        }\r\n\r\n    }\r\n\r\n    export interface IVersionsFeatureSettings {\r\n        isEnabled: boolean;\r\n    }\r\n\r\n    export class VersionsDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            if ((Innovasys as any).settings.versions.isEnabled\r\n                && Versions.Configuration\r\n                && Versions.Configuration.versionDefinitionSets) {\r\n\r\n                return new VersionsDocumentFeature(documentInstance);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.VersionsDocumentFeatureFactory());\r\n"]}