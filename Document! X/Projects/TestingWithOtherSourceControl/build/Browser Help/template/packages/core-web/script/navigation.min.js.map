{"version":3,"sources":["../script/core/browser.ts","../script/core/common.ts","../script/core/dom-helpers.ts","../script/core/help2.ts","../script/core/local-storage.ts","../script/core/messaging.ts","../script/core/featurebase.ts","../script/core/document.ts","../script/core/responsive.ts","../script/core/fixed-to-top.ts","../script/core/theme.ts","../script/core/dynamic-styles.ts","../script/core/dark-mode.ts","../script/core/diacritics.ts","../script/features/navigation/navigationmessagenames.ts","../script/features/navigation/navigation.ts","../script/features/navigation/tableofcontents.ts","../script/features/navigation/topframe.ts","../script/features/navigation/search.ts","../script/features/navigation/index.ts"],"names":["Innovasys","Content","browserInfoConstants","BrowserInfo","getUserAgent","navigator","userAgent","ua","toLowerCase","match","exec","indexOf","this","name","version","parseInt","Browser","msIeVersion","info","getDocumentInstance","element","elementSelector","jQuery","$","root","hasClass","parents","length","get","data","newDocument","Document","getLocationInfo","location","getCompatMode","document","compatMode","reload","replaceLocation","newLocation","window","history","replaceState","concat","ex","replace","navigateTo","url","href","stopPropagation","e","returnValue","loadStylesheet","stylesheetUrl","stylesheetId","beforeElementId","onLoaded","id","dynamicallyLoadedFileIndex","attributes","data-stylesheet-id","yepnope","injectCss","attrs","loadScript","scriptUrl","scriptId","data-script-id","injectJs","src","resizeIFrames","selector","ignoreOffScreen","minAllowedHeight","maxHeight","top","height","each","index","currentHeight","is","offset","left","doc","contentDocument","contentWindow","exDocument","exHeight","heightDifference","parent_1","parent","tagName","busy","showElement","query","show","css","checkForIe7ModeJqueryBug","mshvAttributeSetWorkaround","attributeHooks","set","elem","value","setAttribute","getAttributeNode","attrHooks","getQueryStringParameter","results","RegExp","search","decodeURIComponent","isCompiledHelp","currentHref","currentProtocol","protocol","isEditor","getUniqueId","getId","idValue","i","_idCharacters","Math","floor","random","getCommonSettings","overrides","settings","compareVersionStrings","a","b","regExStrip0","segmentsA","split","segmentsB","l","min","diff","getDynamicStyleContainer","$dynamicStyleElement","append","isElementInView","fullyInView","pageTop","scrollTop","pageBottom","elementTop","elementBottom","isDesignTime","isAnimationDisabled","isHideBodyDuringLoadDisabled","isOverflowClippedDuringLoad","write","ElementPosition","DomHelpers","getElementPosition","offsetLeft","offsetTop","scrollLeft","offsetParent","leftMargin","body","topMargin","getTextFromContainingTable","parentTableQuery","tableCell","find","preCell","elemsToUse","toArray","push","textResult","elemTmp","textContent","innerText","text","getCurrentHelp2Namespace","namespace","hostname","substring","findHelp2Keyword","namespaceName","keyword","session","ActiveXObject","Initialize","topics","Query","Count","URL","resolveHelp2Keyword","onlineKeyword","namespaces","RegisteredNamespaceList","n","Item","Name","bracketPosition","keywordForUrl","navigateToHelp2Keyword","replacePage","status","win","open","urlExistsInnov","parentUrl","lastIndexOf","successCallBack","notfoundCallBack","ajax","dataType","statusCode","200","response","404","LocalStorageHandler","attributePrefix","windowLocalStorage","cookieValue","storageMethod","cookieData","storageElement","localStorage","appendTo","load","Cookies","JSON","parse","prototype","save","key","removeItem","setItem","stringify","expires","path","domain","getAttribute","getItem","WindowMessage","messageType","messageData","Messaging","isPostMessageEnabled","postMessage","addMessageListener","receiver","addEventListener","attachEvent","removeMessageListener","removeEventListener","detachEvent","getMessageFromData","separator","routeMessageToFrameElement","windowName","getElementById","routeMessageToWindow","self","routeMessageToParentFrame","ResponsiveClickTargetKind","DocumentFeatureBase","initializeDocument","initializeContent","rootSelector","isInitialLoad","onMessage","message","ensureElementVisible","beforeSetElementVisibility","isVisible","isImmediate","afterSetElementVisibility","populateResponsiveConfiguration","configuration","applyResponsiveConfiguration","initializeContentOrdinal","documentInstance","DocumentFeatureConfiguration","registerDocumentFeatureFactory","factory","_featureFactories","getFeatureFactories","ResponsiveConfiguration","profileName","clickTargets","stylesheetUrls","tablesToPivot","ResponsiveClickTarget","className","kind","ResponsiveTable","onAfterPivot","currentLocation","mkPrefix","restOfUrl","rootElement","_this","_isUnloaded","_featureSettings","setBodyVisibleAfterLoadComplete","isNew","isResponsiveEnabled","isContentDocument","_features","map","createInstance","feature","addClass","DocumentMessageNames","RootMessageNames","getLocalStorage","external","IsInnovasysDesigner","_localStorageInstance","_windowMessageEventListener","ev","receiveMessage","title","navigationKind","setBodyVisible","setTimeout","hide","unload","sort","_","getResponsiveConfiguration","responsiveConfiguration","event","processWindowMessage","setElementVisibility","elements","originalDisplay","cancelDefault","slideDown","slideUp","getFeatureByName","matchingFeatures","getName","getFeatureSettings","getBaseSettings","baseSettings","newSettings","defaults","defaultSettings","__assign","quickSearch","resetQuickSearch","insertNavigationHeader","searchHighlightComplete","navigate","openNavigationPane","Features","_super","ResponsiveDocumentFeature","__extends","pivotTable","table","sourceTable","container","labels","pivotColumnIndex","children","first","cell","toString","row","newTable_1","header_1","cellIndex","newRow","clone","getDefaultFeatureSettings","isEnabled","displayMode","checkPendingResponsiveFilesLoad","loadedId","_pendingResponsiveFiles","item","onResponsiveFilesLoaded","deviceType_1","getDeviceType","stylesheet","responsiveStylesheets","attr","scriptElement","scriptContainer","displayModes","trim","html","block","inline","_configuration","clickTarget","applyClickTarget","_tableIndex","responsiveTable","_elementIndex","pivotDiv","replaceWith","off","on","eventObject","currentTarget","setForcedDisplayMode","val","selectedValue","header","innercontainer","paneId","prependTo","buttonClassName","forcedDisplayMode","getForcedDisplayMode","Modernizr","touch","mq","hash","currentPath","pathname","responsiveStorageId","apply","arguments","ResponsiveDocumentFeatureFactory","FixedToTopDocumentFeature","scrollEventId","resizeEventId","refresh","bodyTop","getBodyContentPosition","$fixedToTop","isPinnedNewValue","isPinned","toggleClass","topValue","bodyContentPosition","position","FixedToTopDocumentFeatureFactory","ThemeDocumentFeature","getDefaultSettings","defaultThemeOption","isThemeSelectionEnabled","_rootSelector","themeName","themeOption","onThemeSelected","themeOptionToApply","$element","themeValue","saveSelection","remove","optionValue","ThemeDocumentFeatureFactory","DynamicStylesDocumentFeature","isDynamicWordWrapEnabled","isDynamicWordWrapUpdateOnResizeEnabled","updateDynamicWordBreak","styleId","$bodyContent","bodyContent","_addedStyles","dynamicWordBreak","offsetWidth","scrollWidth","DynamicStylesDocumentFeatureFactory","DarkModeDocumentFeature","findReadableColorOnDarkBackground","color","_optimalColors","toHex8String","resolvedColor","possibleColor","lighten","tinycolor","isReadable","isAlwaysDarkMode","matchMediaListener","matchMedia","queryList","isAddDarkModificationsDisabled","matches","addDarkModifications","removeDarkModifications","removeClass","matchMediaQuery","addListener","originalColor","style","removeData","DarkModeDocumentFeatureFactory","replacementList","DiacriticsHelper","base","letters","removeDiacritics","str","NavigationMessageNames","syncTableOfContents","select","shrinkIFrames","loaded","toggleTocPrevious","toggleTocNext","activated","updateNavigationButtons","updatePageTitle","closeNavigationPane","insertRemoveHighlighting","navigationConstants","NavigationDocumentFeature","_isEnabled","selectNavigationFrame","shrinkFrame","isStartOfToc","isEndOfToc","navigateToc","direction","_isAccordionView","addCloseButtonChevrons","preventDefault","webContentFrame","setInterval","_isIframeResizeTimerDisabled","accordion","heightStyle","ui","newHeader","tabs","isTocNavigationEnabled","arrowContainer","frameSelector","frameId","x","_navigationFrames","currentFrameId","topWindowHeight","closePaneHeight","max","image","NavigationDocumentFeatureFactory","tableOfContentsConstants","TableOfContentsDocumentFeature","_indexNodes","constructDesktopToc","_isTocConstructed","constructMobileToC","_isMobileToc","syncTocUrl","syncTocNodeToUrl","anchor","webframe","moveToNextNode","moveToPreviousNode","_ignoreSyncRequest","syncTocNode","isLastNodeSelected","isFirstNodeSelected","_moveNode","setSelectedNode","_selectedNodeIndex","_selectedNodeHref","_tocNodeCount","_getAnchors","_lastNodeIndex","_firstNodeIndex","isPrevious","anchors","eq","isPageSelected","processListElement","expandOrCollapseClickHandler","siblingList","target","nextAll","expandOrCollapseNode","nodeClickHandler","selectNodeElement","prev","_lastSelectedNode","listElement","isAnimationEnabled","icon","slideToggle","prevAll","listItemElement","hasNestedList","listItem","__","childListElement","iconClassIndex","firstChild","nodeName","spacer","iconIndex","parentList","closest","buildToCPage","expandParents","animate","parentListElement","listId","backId","newPage","pageList","tocPageId","mobile","activePage","_highlightSelectedNode","changePage","dataUrl","list","removeAttr","page","_onBeforePageChange","pageData","toPage","pageId","_onVirtualClick","_onPageChange","options","fromPage","tocNodeIndex","anchorElement","ul","next","prepend","rootPage","rootList","initializePage","nodeIndex","TableOfContentsDocumentFeatureFactory","autoInitializePage","defaultPageTransition","topFrameConstants","TopFrameDocumentFeature","_fixSubPixelWidth","width","baseTitle","_responsiveProfileName","layout","resizeWhileDragging","west__size","maskIframesOnResize","onContentLoaded","resize","getDefaultTopic","getCurrentPageName","updateLocation","pageTitle","location_1","pageName","topic","qs","isUrl","defaultTopic","possibleUrl","test","location_2","overrides_1","extend","TopFrameDocumentFeatureFactory","searchConstants","enterKeyCode","minOperatorLength","SearchFile","rank","SearchTermWordMatch","searchTerm","matchedWords","SearchResult","fileIndex","keywords","searchTerms","SearchDocumentFeature","_webSearchPendingHighlight","_isFullTextSearchPositionDataAvailable","_isFullTextSearchObjects","_isFullTextSearchFrameless","_results","_clickedResult","_diacriticsHelper","escapeForRegEx","source","overrides_2","isFullTextSearchPositionDataAvailable","isFullTextSearchObjects","isFullTextSearchFrameless","keyCode","click","executeSearch","showSearchResult","querystringSearchText","searchResult","buildSearchResults","searchText","lastTokenWasOperator","lastTokenWasKeyword","phrase","searchTermIndex","_i","tokens_1","token","charAt","searchFiles","allWords","buildSearchFilesAndKeywords","indexFiles","indexTitles","buildSearchIndexArray","newSearchFile","word","allWordsDiact","searchResults","populateSearchResults","buildResultsArray","outputResults","searchTermWordMatch","searchTermWords","firstSearchTermWord_1","baseResults","this_1","searchTermWord","baseResult","thisKeywords","searchTermWordIndex_1","thisKeywords_1","thisKeyword","keywordPositions","basePosition","_a","searchTermWords_1","searchTermRegExp","hasOwnProperty","searchTermWordMatchIndex","_b","_c","matchedWord","_d","fileIndexes_1","rankAsString","fileIndexValue","positions","positionAsString","locatedSearchResult","searchFile","searchTerms_1","searchResults_1","result","eval","getPhrase","span","tableHtml","resultCount","searchResults_2","hRef","resultIndex","highlight","clickedResult","encodeURIComponent","highlightContentFrame","keywords_1","getKeywordArray","tokens_2","focus","SearchDocumentFeatureFactory","indexConstants","IndexDocumentFeature","overrides_3","isIndexFilterVisibility","_isFilterVisibility","selectedHref","filter","findIndexEntry","indexContainer","regex_1","bodyElement","diacriticsRemoverFunc","term","blockQuoteElement","parentElement","outerHeight","IndexDocumentFeatureFactory"],"mappings":"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","file":"innovasys.navigation.min.js","sourcesContent":["/* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\nnamespace Innovasys.Content {\r\n\r\n    const browserInfoConstants = {\r\n        minHeightChange: 10,\r\n        ie7Version: 7\r\n    };\r\n\r\n    export class BrowserInfo {\r\n        public name: string;\r\n        public version: number;\r\n        constructor() {\r\n            const ua = BrowserInfo.getUserAgent().toLowerCase();\r\n            const match: any = /(chrome)[ /]([\\w.]+)/.exec(ua) ||\r\n                /(webkit)[ /]([\\w.]+)/.exec(ua) ||\r\n                /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) ||\r\n                /(msie) ([\\w.]+)/.exec(ua) ||\r\n                ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\r\n                [];\r\n            this.name = match[1] || \"\";\r\n            const versionIndex = 2;\r\n            this.version = parseInt(match[versionIndex] || \"0\", 10);\r\n        }\r\n\r\n        /**\r\n         * Returns the current user agent string\r\n         */\r\n        public static getUserAgent(): string {\r\n            return navigator.userAgent;\r\n        }\r\n    }\r\n\r\n    export interface ILocationInfo {\r\n        href: string;\r\n        protocol: string;\r\n        search?: string;\r\n        hash?: string;\r\n        hostname?: string;\r\n        pathname?: string;\r\n    }\r\n\r\n    export class Browser {\r\n        /** Indicates that we are running in a design time environment (i.e. the editor) */\r\n        public static isDesignTime = false;\r\n        /** Indicates that animations should be disabled */\r\n        public static isAnimationDisabled = false;\r\n        /** Provides access to more information about the browser agent etc. */\r\n        public static info = new BrowserInfo();\r\n        /** Index for dynamically loaded stylesheets */\r\n        public static dynamicallyLoadedFileIndex = 0;\r\n\r\n        private static readonly _idCharacters = \"_0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\".split(\"\");\r\n\r\n        /**\r\n         * Return Microsoft Internet Explorer (major) version number, or 0 for others.\r\n         */\r\n        public static msIeVersion(): number {\r\n            if (Browser.info.name === \"msie\") {\r\n                // is Microsoft Internet Explorer; return version number\r\n                return Browser.info.version;\r\n            } else {\r\n                return 0;    // is other browser\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get a document instance from a given page element.\r\n         */\r\n        public static getDocumentInstance<TDocument extends Document>(element: JQuery | HTMLElement): TDocument {\r\n            let elementSelector: JQuery;\r\n            if (!(element instanceof jQuery)) {\r\n                elementSelector = $(element);\r\n            } else {\r\n                elementSelector = element as JQuery;\r\n            }\r\n            // Find the container element\r\n            let root: JQuery = elementSelector.hasClass(\"content-root\") ? elementSelector : elementSelector.parents(\".content-root\");\r\n            if (root.length === 0) {\r\n                root = $(\"body\");\r\n            } else {\r\n                root = $(root.get(0));\r\n            }\r\n            // Now we have the root, check for a document object\r\n            if (root.data(\"innovasys-document\") != null) {\r\n                return root.data(\"innovasys-document\") as TDocument;\r\n            } else {\r\n                // No existing document, create a new one\r\n                const newDocument = new Document(root.get(0));\r\n                root.data(\"innovasys-document\", newDocument);\r\n\r\n                return newDocument as TDocument;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Returns basic information about the current browser location.\r\n         */\r\n        public static getLocationInfo(): ILocationInfo {\r\n            return location;\r\n        }\r\n\r\n        /**\r\n         * Return the current document compatMode value.\r\n         */\r\n        public static getCompatMode(): string {\r\n            return document.compatMode;\r\n        }\r\n\r\n        /**\r\n         * Reload the current page.\r\n         */\r\n        public static reload(): void {\r\n            location.reload();\r\n        }\r\n\r\n        /**\r\n         * Replace the current location.\r\n         */\r\n        public static replaceLocation(newLocation: string): void {\r\n            if (window.history.replaceState) {\r\n                try {\r\n                    window.history.replaceState(\"\", \"\", `#${newLocation}`);\r\n                } catch (ex) {\r\n                    // May fail with security exception on local file system\r\n                }\r\n            } else {\r\n                window.location.replace(`#${newLocation}`);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Navigate to a new url.\r\n         * @param url The url to navigate to.\r\n         * @param replace Pass true in order to replace the current entry in the browser history.\r\n         */\r\n        public static navigateTo(url: string, replace: boolean): void {\r\n            if (replace) {\r\n                window.location.replace(url);\r\n            } else {\r\n                window.location.href = url;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Cross browser helper for stopping event propagation.\r\n         */\r\n        public static stopPropagation(e: JQueryEventObject): void {\r\n            if (e.stopPropagation) {\r\n                e.stopPropagation();\r\n            } else {\r\n                e.returnValue = false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Loads a stylesheet from the specified Url.\r\n         */\r\n        public static loadStylesheet(\r\n            stylesheetUrl: string,\r\n            stylesheetId: string,\r\n            beforeElementId: string,\r\n            onLoaded: (_: string) => void = null): string {\r\n\r\n            const id = `file${this.dynamicallyLoadedFileIndex}`;\r\n            this.dynamicallyLoadedFileIndex++;\r\n\r\n            const attributes = { \"data-stylesheet-id\": stylesheetId };\r\n            yepnope.injectCss({ href: stylesheetUrl, attrs: attributes }, () => {\r\n                onLoaded(id);\r\n            });\r\n\r\n            return id;\r\n\r\n        }\r\n\r\n        /**\r\n         * Loads a script file from the specified Url.\r\n         */\r\n        public static loadScript(\r\n            scriptUrl: string,\r\n            scriptId: string,\r\n            beforeElementId: string,\r\n            onLoaded: (_: string) => void = null): string {\r\n\r\n            const id = `file${this.dynamicallyLoadedFileIndex}`;\r\n            this.dynamicallyLoadedFileIndex++;\r\n\r\n            const attributes = { \"data-script-id\": scriptId };\r\n            yepnope.injectJs({ src: scriptUrl, attrs: attributes }, () => {\r\n                onLoaded(id);\r\n            });\r\n\r\n            return id;\r\n\r\n        }\r\n\r\n        public static resizeIFrames(selector: JQuery, ignoreOffScreen = false): number {\r\n\r\n            let maxHeight = 0;\r\n            let minAllowedHeight: number;\r\n\r\n            try {\r\n                minAllowedHeight = $(window.top).height();\r\n            } catch (ex) {\r\n                minAllowedHeight = $(window).height();\r\n            }\r\n\r\n            $(\"iframe\", selector).each((index: number, element: HTMLIFrameElement): void => {\r\n                let currentHeight = 0;\r\n                if ($(element).is(\":visible\") && (ignoreOffScreen || $(element).offset().left >= 0)) {\r\n                    // Only resize if visible\r\n                    let doc: Document = null;\r\n                    try {\r\n                        doc = element.contentDocument\r\n                            ? element.contentDocument\r\n                            : (element.contentWindow.document || (element as any).document);\r\n                    } catch (exDocument) {\r\n                        // Security may prevent access if frame hasn't loaded or is cross origin\r\n                    }\r\n                    if (doc != null) {\r\n                        // Firefox throws an error here, so we trap and fallback\r\n                        try {\r\n                            currentHeight = $(doc).height();\r\n                        } catch (exHeight) {\r\n                            currentHeight = minAllowedHeight;\r\n                        }\r\n                    } else {\r\n                        currentHeight = minAllowedHeight;\r\n                    }\r\n                    let lastHeight = $(element).data(\"last-height\");\r\n                    if (!lastHeight) {\r\n                        lastHeight = 0;\r\n                    }\r\n                    const heightDifference = currentHeight - lastHeight;\r\n                    if (heightDifference > browserInfoConstants.minHeightChange\r\n                        || (heightDifference < 0 && heightDifference < browserInfoConstants.minHeightChange)) {\r\n\r\n                        const parent = $(element).parent();\r\n                        if (parent.get(0).tagName === \"DIV\" && currentHeight < parent.height()) {\r\n                            // Resize to at least the containing DIV height\r\n                            currentHeight = parent.height();\r\n                        }\r\n                        if (currentHeight < minAllowedHeight) {\r\n                            // Make sure at least as high as the window\r\n                            currentHeight = minAllowedHeight;\r\n                        }\r\n                        $(element).height(`${currentHeight}px`);\r\n                        $(element).data(\"last-height\", currentHeight);\r\n                    }\r\n                } else if (!$(element).is(\":visible\")) {\r\n                    // Not visible, collapse to zero\r\n                    $(element).height(0);\r\n                    $(element).data(\"last-height\", 0);\r\n                }\r\n                if (currentHeight > maxHeight) {\r\n                    // Record the maximum iframe height\r\n                    maxHeight = currentHeight;\r\n                }\r\n            });\r\n\r\n            const busy: JQuery = $(\"#i-busy\");\r\n            if (busy.length !== 0) {\r\n                busy.height(maxHeight);\r\n            }\r\n\r\n            return maxHeight;\r\n\r\n        }\r\n\r\n        public static showElement(query: JQuery<Element>, tagName: string): void {\r\n            // Firefox does not remove a display: none on show so we check for that specifically here\r\n            query.show();\r\n            if (tagName === \"body\") {\r\n                $(\"body\").css(\"display\", \"block\");\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Works around a jQuery setAttribute bug for a specific IE mode used by MSHV and Help 2.x (with IE11 installed)\r\n         */\r\n        public static checkForIe7ModeJqueryBug(): void {\r\n            if (Browser.info.name === \"msie\" && Browser.info.version <= browserInfoConstants.ie7Version) {\r\n                const mshvAttributeSetWorkaround = {\r\n                    set: (elem: Element, value: any, name: string): any => {\r\n                        elem.setAttribute(name, value);\r\n\r\n                        return elem.getAttributeNode(name);\r\n                    }\r\n                };\r\n                if ($ != null && ($ as any).attrHooks != null) {\r\n                    const attributeHooks: any = ($ as any).attrHooks;\r\n                    attributeHooks[\"aria-describedby\"] = mshvAttributeSetWorkaround;\r\n                    attributeHooks[\"aria-live\"] = mshvAttributeSetWorkaround;\r\n                    attributeHooks[\"aria-atomic\"] = mshvAttributeSetWorkaround;\r\n                    attributeHooks[\"aria-hidden\"] = mshvAttributeSetWorkaround;\r\n                }\r\n            }\r\n        }\r\n\r\n        public static getQueryStringParameter(name: string): string {\r\n            name = name.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n            const regex = new RegExp(`[\\\\?&]${name}=([^&#]*)`);\r\n            const results = regex.exec(Browser.getLocationInfo().search);\r\n\r\n            return results == null ? null : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\r\n        }\r\n\r\n        public static isCompiledHelp(): boolean {\r\n            const currentHref = `${Browser.getLocationInfo().href}.`;\r\n            const currentProtocol = Browser.getLocationInfo().protocol;\r\n\r\n            if (currentHref.indexOf(\"mk:@MSITStore\") === 0) {\r\n                return true;\r\n            } else if (currentHref.indexOf(\"ms-its:\") === 0) {\r\n                return true;\r\n            } else if (currentProtocol === \"ms-help:\") {\r\n                return true;\r\n            } else if (currentProtocol === \"ms-xhelp:\" ||\r\n                currentHref.indexOf(\"ms.help?\") !== -1 ||\r\n                currentHref.indexOf(\"?method=page&\") !== -1) {\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        public static isEditor(): boolean {\r\n            return location.protocol === \"about:\";\r\n        }\r\n\r\n        /**\r\n         * Returns a unique id, randomnly generated and checked for uniqueness in the DOM\r\n         */\r\n        public static getUniqueId(): string {\r\n            const idlength = 10;\r\n            const getId = (): string => {\r\n                let idValue = \"\";\r\n                for (let i = 0; i < idlength; i++) {\r\n                    idValue += Browser._idCharacters[Math.floor(Math.random() * Browser._idCharacters.length)];\r\n                }\r\n\r\n                return idValue;\r\n            };\r\n            let id = getId();\r\n            while ($(`#${id}`).length > 0) {\r\n                id = getId();\r\n            }\r\n\r\n            return id;\r\n        }\r\n\r\n        /**\r\n         * Returns common feature settings\r\n         */\r\n        public static getCommonSettings(): IOverrides {\r\n            return ((Innovasys as any).overrides || (Innovasys as any).settings) || {};\r\n        }\r\n\r\n        /**\r\n         * Compares 2 version strings and returns an integer indicating the result. < 0 if a < b, > 0 if a > b, 0 if a = b\r\n         */\r\n        public static compareVersionStrings(a: string, b: string): number {\r\n            const regExStrip0 = /(\\.0+)+$/;\r\n            const segmentsA = a.replace(regExStrip0, \"\").split(\".\");\r\n            const segmentsB = b.replace(regExStrip0, \"\").split(\".\");\r\n            const l = Math.min(segmentsA.length, segmentsB.length);\r\n\r\n            for (let i = 0; i < l; i++) {\r\n                const diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\r\n                if (diff) {\r\n                    return diff;\r\n                }\r\n            }\r\n\r\n            return segmentsA.length - segmentsB.length;\r\n        }\r\n\r\n        /**\r\n         * Creates or returns a <style> element to contain custom style markup\r\n         */\r\n        public static getDynamicStyleContainer(id: string): JQuery {\r\n            let $dynamicStyleElement = $(`#${id}`);\r\n            if ($dynamicStyleElement.length === 0) {\r\n                $dynamicStyleElement = $(`<style type=\"text/css\" id=\"${id}\"></style>`);\r\n                $(\"head\").append($dynamicStyleElement);\r\n            }\r\n\r\n            return $dynamicStyleElement;\r\n        }\r\n\r\n        public static isElementInView(element: Element, fullyInView: boolean): boolean {\r\n            if (element == null) {\r\n                return false;\r\n            }\r\n\r\n            if (!$(element).is(\":visible\")) {\r\n                return false;\r\n            }\r\n\r\n            const pageTop = $(window).scrollTop();\r\n            const pageBottom = pageTop + $(window).height();\r\n            const elementTop = $(element).offset().top;\r\n            const elementBottom = elementTop + $(element).height();\r\n\r\n            if (fullyInView) {\r\n                return ((pageTop < elementTop) && (pageBottom > elementBottom));\r\n            } else {\r\n                return ((elementTop <= pageBottom) && (elementBottom >= pageTop));\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/* eslint @typescript-eslint/no-explicit-any: \"off\" */\r\nconst overrides: Innovasys.IOverrides = ((Innovasys as any).overrides || (Innovasys as any).settings);\r\n\r\nif (document.compatMode !== \"BackCompat\"\r\n    || !(location.protocol === \"ms-xhelp:\"\r\n        || location.href.indexOf(\"ms.help?\") !== -1\r\n        || location.href.indexOf(\"?method=page&\") !== -1)) {\r\n\r\n    if (overrides == null || !overrides.isHideBodyDuringLoadDisabled) {\r\n        // Prevent flickering by setting body to display:none during initialization\r\n        document.write(\"<style type=\\\"text/css\\\">body{display:none;}</style>\");\r\n    } else if (overrides.isOverflowClippedDuringLoad) {\r\n        // Prevent adding of a vertical scrollbar during load\r\n        document.write(\"<style type=\\\"text/css\\\">body{overflow-y:hidden;}</style>\");\r\n    }\r\n}\r\n","/* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\nnamespace Innovasys.Content {\r\n\r\n    /**\r\n     * Encapsulates a left and top position.\r\n     */\r\n    export class ElementPosition {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public left: number, public top: number) {}\r\n\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    export class DomHelpers {\r\n\r\n        /**\r\n         * Returns an elements absolute position, allowing for the non-scrolling header\r\n         * @param element The element to find the absolute position of\r\n         */\r\n        public static getElementPosition(element: HTMLElement): ElementPosition {\r\n            let offsetLeft = 0;\r\n            let offsetTop = 0;\r\n\r\n            while (element) {\r\n                const MSIE_4_VERSION = 4;\r\n                // Allow for the scrolling body region in IE\r\n                if (Browser.msIeVersion() > MSIE_4_VERSION) {\r\n                    offsetLeft += (element.offsetLeft - element.scrollLeft);\r\n                    offsetTop += (element.offsetTop - element.scrollTop);\r\n                } else {\r\n                    offsetLeft += element.offsetLeft;\r\n                    offsetTop += element.offsetTop;\r\n                }\r\n\r\n                element = (element.offsetParent as HTMLElement);\r\n            }\r\n\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const leftMargin = (document.body as any).leftMargin as number;\r\n            if (BrowserInfo.getUserAgent().indexOf(\"Mac\") !== -1\r\n                && typeof leftMargin !== \"undefined\") {\r\n\r\n                offsetLeft += leftMargin;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                offsetTop += ((document.body as any).topMargin as number);\r\n            }\r\n\r\n            return new ElementPosition(offsetLeft, offsetTop);\r\n        }\r\n\r\n        /**\r\n         * Returns the text from the containing table. Uses this as the context element from which to find the containing table.\r\n         */\r\n        public static getTextFromContainingTable(element: HTMLElement): string {\r\n            const parentTableQuery = $(element)\r\n                .parents(\"table\")\r\n                .get(0);\r\n            const parentTable: JQuery = $(parentTableQuery);\r\n            const tableCell: HTMLTableCellElement = parentTable.find(\"td\").get(0) as HTMLTableCellElement;\r\n            const preCell: JQuery<HTMLPreElement> = $(tableCell).find(\"pre\");\r\n\r\n            let elemsToUse: HTMLElement[] = [];\r\n\r\n            if (preCell && preCell.length > 0) {\r\n                elemsToUse = preCell.toArray();\r\n            } else {\r\n                elemsToUse.push(tableCell);\r\n            }\r\n\r\n            let textResult: string = \"\";\r\n\r\n            for (let index = 0; index < elemsToUse.length; ++index) {\r\n                let elemTmp = elemsToUse[index];\r\n                if (elemTmp != null) {\r\n                    if (elemTmp.textContent != null) {\r\n                        textResult += elemTmp.textContent;\r\n                    } else if (elemTmp.innerText != null) {\r\n                        textResult += elemTmp.innerText;\r\n                    } else {\r\n                        textResult += $(elemTmp).text();\r\n                    }\r\n                }\r\n            }\r\n            return textResult;\r\n        }\r\n    }\r\n\r\n}\r\n","/* .NET Framework Help Topic Resolution */\r\n\r\nconst getCurrentHelp2Namespace = (): string => {\r\n    let namespace = \"\";\r\n    const location = Innovasys.Content.Browser.getLocationInfo();\r\n\r\n    if (location.protocol === \"ms-help:\") {\r\n        namespace = location.hostname;\r\n        const URL_PREFIX_LENGTH = 2;\r\n        if (namespace.substring(0, URL_PREFIX_LENGTH) === \"//\") {\r\n            namespace = namespace.substring(URL_PREFIX_LENGTH);\r\n        }\r\n    }\r\n\r\n    return namespace;\r\n};\r\n\r\nconst findHelp2Keyword = (namespaceName: string, keyword: string): string => {\r\n\r\n    if (namespaceName.length > 0) {\r\n        try {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const session: any = new ActiveXObject(\"HxDs.HxSession\");\r\n            session.Initialize(`ms-help://${namespaceName}`, 0);\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const topics: any = session.Query(keyword, \"!DefaultAssociativeIndex\", 0, \"\");\r\n            if (topics.Count > 0) {\r\n                return topics(1).URL;\r\n            }\r\n        } catch (e) {\r\n            //\r\n        }\r\n    }\r\n\r\n    return \"\";\r\n};\r\n\r\n// This function is Copyright 2006 Innovasys Limited. No reproduction or usage\r\n//  allowed other than in documentation generated by licensed Innovasys products\r\nconst resolveHelp2Keyword = (keyword: string, onlineKeyword: string): string => {\r\n\r\n    let url = \"\";\r\n\r\n    try {\r\n        // Try the current namespace\r\n        url = findHelp2Keyword(getCurrentHelp2Namespace(), keyword);\r\n        if (url === \"\") {\r\n            // Try the likely namespaces first, most recent first\r\n            url = findHelp2Keyword(\"MS.VSCC.v80\", keyword);\r\n            if (url === \"\") {\r\n                url = findHelp2Keyword(\"MS.VSCC.2003\", keyword);\r\n                if (url === \"\") {\r\n                    url = findHelp2Keyword(\"MS.VSCC\", keyword);\r\n                }\r\n            }\r\n        }\r\n\r\n        // URL found in one of the known VSCC namespaces\r\n        if (url !== \"\") {\r\n            return url;\r\n        } else {\r\n            // For future proofing, try other VSCC namespaces\r\n            const registryWalker = new ActiveXObject(\"HxDs.HxRegistryWalker\");\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const namespaces: any = registryWalker.RegisteredNamespaceList(\"MS.VSCC\");\r\n\r\n            if (namespaces.Count > 0) {\r\n                for (let n = 1; n <= namespaces.Count; n++) {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    const namespace: any = namespaces.Item(n);\r\n                    const namespaceName: string = namespace.Name;\r\n                    const PREFIX_LENGTH = 7;\r\n                    if (namespaceName.substring(0, PREFIX_LENGTH) === \"MS.VSCC\") {\r\n                        switch (namespaceName) {\r\n                            case \"MS.VSCC.v80\":\r\n                                break;\r\n                            case \"MS.VSCC.2003\":\r\n                                break;\r\n                            case \"MS.VSCC\":\r\n                                break;\r\n                            default:\r\n                                url = findHelp2Keyword(namespaceName, \"\");\r\n                                if (url !== \"\") {\r\n                                    return url;\r\n                                }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    } catch (e) {\r\n        //\r\n    }\r\n\r\n    // No match found in any applicable namespace\r\n    // Msdn doesn't support links to individual overloads, only to the master page\r\n    //  so we trim off the brackets when directing to Msdn\r\n    const bracketPosition = onlineKeyword.indexOf(\"(\");\r\n    if (bracketPosition !== -1) {\r\n        onlineKeyword = onlineKeyword.substring(0, bracketPosition);\r\n    }\r\n\r\n    const keywordForUrl = onlineKeyword.replace(\"`\", \"-\").toLowerCase();\r\n\r\n    return `https://docs.microsoft.com/dotnet/api/${keywordForUrl}`;\r\n};\r\n\r\n/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nconst navigateToHelp2Keyword = (keyword: string, onlineKeyword: string, replacePage: boolean): void => {\r\n    window.status = \"Resolving link. Please wait a moment...\";\r\n    const url = resolveHelp2Keyword(keyword, onlineKeyword);\r\n    window.status = \"\";\r\n    const MSDN_PREFIX_LENGTH = 25;\r\n    const DOCS_PREFIX_LENGTH = 26;\r\n    if ((url.substring(0, MSDN_PREFIX_LENGTH) === \"http://msdn.microsoft.com\"\r\n        || url.substring(0, DOCS_PREFIX_LENGTH) === \"https://docs.microsoft.com\"\r\n    ) &&\r\n        window.parent != null) {\r\n        // MSDN no longer support hosting in an IFRAME so open in new browser window\r\n\t\tvar win = window.open('about:blank', '_blank')\r\n\t\turlExistsInnov(url, \r\n            function() { win.location.href = url;}, \r\n            function() {\r\n\t\t\t\tvar parentUrl = url.substring(0, url.lastIndexOf(\".\"));\r\n\t\t\t\turlExistsInnov(parentUrl, \r\n                    function() { win.location.href = parentUrl; }, \r\n                    function() { win.location.href = url;}\r\n                );\r\n\t\t});\r\n    } else if (replacePage) {\r\n        location.replace(url);\r\n    } else {\r\n        location.href = url;\r\n    }\r\n};\r\n\r\n/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nconst urlExistsInnov = (url: string, successCallBack: any, notfoundCallBack: any): void => {\r\n    $.ajax({\r\n      url: url,\r\n      dataType: \"jsonp\",\r\n      statusCode: {\r\n        200: function(response) {\r\n          successCallBack();\r\n        },\r\n        404: function(response) {\r\n          notfoundCallBack();\r\n        }\r\n      }\r\n    });\r\n  }","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    /**\r\n     * Common Local Storage interface\r\n     */\r\n    export interface ILocalStorageHandler {\r\n        load(name: string): void;\r\n        save(name: string): void;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        setAttribute(key: string, value: any): void;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        getAttribute(key: string): any;\r\n    }\r\n\r\n    /**\r\n     * Wrapper for handling load/save to localstorage. Handles the difference in functionality when executing at design time\r\n     *  and in a CHM.\r\n     */\r\n    export class LocalStorageHandler implements ILocalStorageHandler {\r\n\r\n        public storageMethod = \"native\";\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public cookieData: any = null;\r\n        public storageElement: Element = null;\r\n\r\n        constructor(public attributePrefix: string = \"\") {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            let windowLocalStorage: any;\r\n            try {\r\n                // Edge throws an exception when querying localStorage in local file system output\r\n                windowLocalStorage = window.localStorage;\r\n            } catch (e) {\r\n                //\r\n            }\r\n            if (!windowLocalStorage) {\r\n                if (location.protocol === \"ms-its:\") {\r\n                    // Cookies don't work in CHM so we use userdata behavior instead\r\n                    this.storageMethod = \"userdata\";\r\n                    const storageElement = $(\"<link />\");\r\n                    storageElement.css(\"behavior\", \"url(#default#userdata)\");\r\n                    storageElement.appendTo(\"body\");\r\n                    this.storageElement = storageElement.get(0);\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (this.storageElement as any).load(\"localStorage\");\r\n                } else {\r\n                    // If local storage isn't available, fall back to cookie storage\r\n                    this.storageMethod = \"cookie\";\r\n                    const cookieValue = Cookies.get(\"localStorage\");\r\n                    if (cookieValue) {\r\n                        this.cookieData = JSON.parse(cookieValue);\r\n                    } else {\r\n                        this.cookieData = {};\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public load(name: string): void {\r\n            // local storage automatically saves\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public save(name: string): void {\r\n            // local storage automatically saves\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public setAttribute(key: string, value: any): void {\r\n            if (this.attributePrefix != null) {\r\n                key = this.attributePrefix + key;\r\n            }\r\n            if (this.storageMethod === \"native\") {\r\n                if (value == null || typeof value === \"undefined\") {\r\n                    window.localStorage.removeItem(key);\r\n                } else {\r\n                    window.localStorage.setItem(key, value);\r\n                }\r\n            } else if (this.storageMethod === \"cookie\") {\r\n                if (value == null) {\r\n                    this.cookieData[key] = null;\r\n                } else {\r\n                    this.cookieData[key] = `${value}`;\r\n                }\r\n                Cookies.set(\"localStorage\", JSON.stringify(this.cookieData), { expires: 365, path: \"/\", domain: \"\" });\r\n            } else if (this.storageMethod === \"userdata\") {\r\n                this.storageElement.setAttribute(key, `${value}`);\r\n                // Save method is added by the userdata behavior\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                (this.storageElement as any).save(\"localStorage\");\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public getAttribute(key: string): any {\r\n            if (this.attributePrefix != null) {\r\n                key = this.attributePrefix + key;\r\n            }\r\n            if (this.storageMethod === \"native\") {\r\n                return window.localStorage.getItem(key);\r\n            } else if (this.storageMethod === \"cookie\") {\r\n                if (typeof this.cookieData[key] === \"undefined\") {\r\n                    return null;\r\n                } else {\r\n                    return this.cookieData[key];\r\n                }\r\n            } else if (this.storageMethod === \"userdata\") {\r\n                return this.storageElement.getAttribute(key);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    /**\r\n     * A message object, used for cross frame communication.\r\n     */\r\n    export class WindowMessage {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public messageType: string, public messageData: string) { }\r\n    }\r\n\r\n    /**\r\n     * Cross frame messaging utility functionality.\r\n     */\r\n    export class Messaging {\r\n\r\n        /**\r\n         * Returns true if PostMessage support is available in the current browser.\r\n         */\r\n        public static isPostMessageEnabled(): boolean {\r\n            return (window.postMessage != null);\r\n        }\r\n\r\n        /**\r\n         * Registers to receive message events incoming to the current window.\r\n         * @param receiver The receiving event handler.\r\n         */\r\n        public static addMessageListener(receiver: (ev: MessageEvent) => void): void {\r\n            if (Messaging.isPostMessageEnabled()) {\r\n                if (window.addEventListener) {\r\n                    window.addEventListener(\"message\", receiver, false);\r\n                } else {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (window as any).attachEvent(\"onmessage\", receiver);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Removes a previous registered window event listener\r\n         * @param receiver The receiving event handler.\r\n         */\r\n        public static removeMessageListener(receiver: (ev: MessageEvent) => void): void {\r\n            if (Messaging.isPostMessageEnabled()) {\r\n                if (window.addEventListener) {\r\n                    window.removeEventListener(\"message\", receiver, false);\r\n                } else {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (window as any).detachEvent(\"onmessage\", receiver);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Gets a WindowMessage object from string message data.\r\n         * @param data The string containing the message data (format MessageType|MessageData).\r\n         */\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public static getMessageFromData(data: any): WindowMessage {\r\n            const separator = data.indexOf(\"|\") as number;\r\n            let messageType: string;\r\n            let messageData: string;\r\n\r\n            if (separator !== -1) {\r\n                messageType = data.substring(0, separator);\r\n                messageData = data.substring(separator + 1);\r\n            } else {\r\n                messageType = data;\r\n                messageData = \"\";\r\n            }\r\n\r\n            return new WindowMessage(messageType, messageData);\r\n        }\r\n\r\n        public static routeMessageToFrameElement(windowName: string, messageType: string, messageData: string): void {\r\n            const element: Element = document.getElementById(windowName);\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            if (element != null && (element as any).contentWindow != null) {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                Messaging.routeMessageToWindow(((element as any).contentWindow as Window), messageType, messageData);\r\n            }\r\n        }\r\n\r\n        public static routeMessageToWindow(window: Window, messageType: string, messageData: string): void {\r\n            if (window != null && self !== window) {\r\n                if (window != null && window.postMessage != null) {\r\n                    window.postMessage(`${messageType}|${messageData}`, \"*\");\r\n                }\r\n            }\r\n        }\r\n\r\n        public static routeMessageToParentFrame(messageType: string, messageData: string): void {\r\n            if (parent != null && self !== parent) {\r\n                this.routeMessageToWindow(parent, messageType, messageData);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    export enum ResponsiveClickTargetKind {\r\n        auto,\r\n        inline,\r\n        block\r\n    }\r\n\r\n    export abstract class DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(protected documentInstance: Document = null) { }\r\n\r\n        public initializeDocument(): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad?: boolean): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public onMessage(message: WindowMessage): void {\r\n            //\r\n        }\r\n\r\n        public abstract getName(): string;\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public ensureElementVisible(element: Element): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public beforeSetElementVisibility(element: Element, isVisible: boolean, isImmediate: boolean): boolean {\r\n            return false;\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public afterSetElementVisibility(element: Element, isVisible: boolean): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            //\r\n        }\r\n\r\n        /**\r\n         * Returns a number used to determine the order of content initialization amongst document features.\r\n         */\r\n        public initializeContentOrdinal(): number {\r\n            return 0;\r\n        }\r\n\r\n    }\r\n\r\n    export class DocumentFeatureConfiguration {\r\n\r\n        // TODO: Would be useful to key this array so that a feature factory can override a default implementation\r\n\r\n        private static readonly _featureFactories: IDocumentFeatureFactory[] = [];\r\n\r\n        public static registerDocumentFeatureFactory(factory: IDocumentFeatureFactory): void {\r\n            DocumentFeatureConfiguration._featureFactories.push(factory);\r\n        }\r\n\r\n        public static getFeatureFactories(): IDocumentFeatureFactory[] {\r\n            return DocumentFeatureConfiguration._featureFactories;\r\n        }\r\n\r\n    }\r\n\r\n    export class ResponsiveConfiguration {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public profileName: string, public clickTargets: ResponsiveClickTarget[] = []) {\r\n\r\n        }\r\n\r\n        public stylesheetUrls: string[] = [];\r\n\r\n        public tablesToPivot: ResponsiveTable[] = [];\r\n\r\n    }\r\n\r\n    export class ResponsiveClickTarget {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public className: string, public kind: ResponsiveClickTargetKind) { }\r\n\r\n    }\r\n\r\n    export class ResponsiveTable {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public selector: string, public onAfterPivot: (originalTable: JQuery, pivotDiv: JQuery) => void = null) { }\r\n\r\n    }\r\n\r\n}\r\n","/* Userdata support in CHMs requires pages are loaded under the ms-its protocol and not mk:@MSITStore */\r\nconst currentLocation = `${location.href}.`;\r\nconst mkPrefix = \"mk:@MSITStore\";\r\nif (currentLocation.indexOf(mkPrefix) === 0) {\r\n    const restOfUrl = currentLocation.substring(mkPrefix.length + 1, currentLocation.length - 1);\r\n    const newLocation = `ms-its:${restOfUrl}`;\r\n    location.replace(newLocation);\r\n}\r\n\r\n/* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\nnamespace Innovasys.Content {\r\n\r\n    export class Document {\r\n\r\n        /** Handle to the local storage instance */\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _localStorageInstance: any;\r\n        /** Handle to the window message event listener so we can remove it later */\r\n        private _windowMessageEventListener: (event: MessageEvent) => void;\r\n        /** Indicates if this document instance has been unloaded */\r\n        private _isUnloaded = true;\r\n        /** Features collection */\r\n        private readonly _features: IDocumentFeature[];\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _featureSettings: any;\r\n\r\n        /** Provides an id that can be used to disambiguate this document if it is loaded in a parent document */\r\n        public id = \"\";\r\n        /** The root element of this logical document */\r\n        public rootElement: HTMLElement;\r\n        /** JQuery selector representing the root element of this document */\r\n        public rootSelector: JQuery;\r\n        /** Indicates that this page should be highlighted as new */\r\n        public isNew: boolean;\r\n        /** Indicates that automatic responsive functionality is enabled */\r\n        public isResponsiveEnabled: boolean;\r\n        /** Indicates that the body should be made visible after loading is complete. Can be set to false if\r\n         * waiting on dynamically loaded stylesheets\r\n         */\r\n        public setBodyVisibleAfterLoadComplete: boolean;\r\n        /** Indicates that this is a content document. Content documents inform the parent frames on load */\r\n        public isContentDocument: boolean;\r\n\r\n        constructor(rootElement: HTMLElement, id = \"\") {\r\n            this.id = id;\r\n            this.rootElement = rootElement;\r\n            this.rootSelector = $(rootElement);\r\n            this._featureSettings = {};\r\n            this.setBodyVisibleAfterLoadComplete = true;\r\n            this.isNew = false;\r\n            this.isResponsiveEnabled = false;\r\n            this.isContentDocument = true;\r\n\r\n            this.rootSelector.data(\"innovasys-document\", this);\r\n\r\n            // Create the features instances according to configuration. Some factories may return null if the feature\r\n            //  is not required for this document.\r\n            this._features = $.map(\r\n                DocumentFeatureConfiguration.getFeatureFactories(),\r\n                (factory: IDocumentFeatureFactory): IDocumentFeature => factory.createInstance(this));\r\n\r\n            // Initialize the features.\r\n            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                feature.initializeDocument();\r\n            });\r\n\r\n            if (Browser.isDesignTime) {\r\n                $(\"body\").addClass(\"i-designtime\");\r\n            }\r\n\r\n            if (Browser.isEditor()) {\r\n                $(\"body\").addClass(\"i-editor\");\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get a local storage instance, initializing the first time it is called.\r\n         */\r\n        public getLocalStorage(): ILocalStorageHandler {\r\n            if (Browser.isDesignTime) {\r\n                try {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    if ((window.external as any).IsInnovasysDesigner) {\r\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                        this._localStorageInstance = ((window.external as any) as ILocalStorageHandler);\r\n                    }\r\n                } catch (e) {\r\n                    //\r\n                }\r\n            }\r\n            if (!this._localStorageInstance) {\r\n                this._localStorageInstance = new LocalStorageHandler(this.id);\r\n            }\r\n\r\n            return this._localStorageInstance;\r\n        }\r\n\r\n        /**\r\n         * Called once the DOM has loaded. Performs content initialization.\r\n         */\r\n        public load(): void {\r\n\r\n            const overrides: IOverrides = Browser.getCommonSettings();\r\n\r\n            if (overrides.isNew) {\r\n                this.isNew = true;\r\n            }\r\n\r\n            // If running in a frame, set up a message listener and let\r\n            //  the parent frame know we have loaded\r\n            if (this.id === \"\") {\r\n                // Running in a frame - listen for commands\r\n                if (Messaging.isPostMessageEnabled()) {\r\n                    this._windowMessageEventListener = (ev: MessageEvent): void => this.receiveMessage(ev);\r\n                    Messaging.addMessageListener(this._windowMessageEventListener);\r\n\r\n                    if (this.isContentDocument) {\r\n                        // Notify the parent frame that we have loaded, and give it our page title\r\n                        Messaging.routeMessageToParentFrame(\"loaded\", location.href);\r\n                        Messaging.routeMessageToParentFrame(\"updatePageTitle\", document.title);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Add a class to the body that indicates that kind of navigation we are using\r\n            if (overrides.navigationKind !== \"inpage\") {\r\n                $(\"body\").addClass(\"i-navigation-frames\");\r\n            } else {\r\n                $(\"body\").addClass(\"i-navigation-inpage\");\r\n            }\r\n\r\n            // Configure our document content for each of the features\r\n            this.initializeContent(this.rootSelector, true);\r\n\r\n            if (this.id === \"\" && this.setBodyVisibleAfterLoadComplete) {\r\n                // Resume rendering updates after loading complete\r\n                this.setBodyVisible();\r\n            }\r\n        }\r\n\r\n        public setBodyVisible(): void {\r\n            $(\"html\").addClass(\"i-loaded\");\r\n            Browser.showElement($(\"body\"), \"body\");\r\n            setTimeout(() => {\r\n                if (Browser.getCommonSettings().isOverflowClippedDuringLoad) {\r\n                    $(\"body\").css(\"overflow-y\", \"auto\");\r\n                }\r\n                $(\".i-busy-overlay\").hide();\r\n            }, 1);\r\n        }\r\n\r\n        public unload(): void {\r\n\r\n            if (this.id === \"\") {\r\n                // Running in a frame - remove message listener\r\n                if (Messaging.isPostMessageEnabled() && this._windowMessageEventListener != null) {\r\n                    Messaging.removeMessageListener(this._windowMessageEventListener);\r\n                }\r\n            }\r\n\r\n            this._isUnloaded = true;\r\n\r\n        }\r\n\r\n        /**\r\n         * Initializes new DOM content, either on page load or subsequently when new content is created.\r\n         */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad = false): void {\r\n            $.each(this._features.sort(\r\n                (a: IDocumentFeature, b: IDocumentFeature): number => a.initializeContentOrdinal() - b.initializeContentOrdinal()),\r\n                (_: number, feature: IDocumentFeature) => {\r\n                    feature.initializeContent(rootSelector, isInitialLoad);\r\n                });\r\n        }\r\n\r\n        /**\r\n         * Creates, populates and returns a responsive configuration instance.\r\n         */\r\n        public getResponsiveConfiguration(profileName: string): ResponsiveConfiguration {\r\n            const configuration: ResponsiveConfiguration = new ResponsiveConfiguration(profileName);\r\n            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                feature.populateResponsiveConfiguration(configuration);\r\n            });\r\n\r\n            return configuration;\r\n        }\r\n\r\n        /**\r\n         * Applies a responsive configuration.\r\n         */\r\n        public applyResponsiveConfiguration(responsiveConfiguration: ResponsiveConfiguration): void {\r\n            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                feature.applyResponsiveConfiguration(responsiveConfiguration);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cross frame message processor.\r\n         * @param event The message event containing message data.\r\n         */\r\n        public receiveMessage(event: MessageEvent): void {\r\n            let message: WindowMessage;\r\n            try {\r\n                message = Messaging.getMessageFromData(event.data);\r\n            } catch (ex) {\r\n                // Catch exceptions that can fire at design time\r\n            }\r\n\r\n            this.processWindowMessage(message);\r\n        }\r\n\r\n        /**\r\n         * Process the passed message.\r\n         */\r\n        public processWindowMessage(message: WindowMessage): void {\r\n            if (message) {\r\n                switch (message.messageType) {\r\n                    case \"refresh\":\r\n                        document.location.reload();\r\n                        break;\r\n                    default:\r\n                        if (this._features != null) {\r\n                            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                                feature.onMessage(message);\r\n                            });\r\n                        }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Ensures that the passed element is visible. Calls document features to apply\r\n         *  any necessary logic (e.g. where the element is within a collapsed section or tab)\r\n         */\r\n        public ensureElementVisible(element: Element): void {\r\n            $.each(this._features, (index: number, feature: IDocumentFeature): void => {\r\n                feature.ensureElementVisible(element);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Toggle the state of an element or elements.\r\n         * @param elements JQuery selector representing Element(s) to toggle state for.\r\n         * @param isImmediate When set to true, animations are disabled.\r\n         * @param isVisible Indicates if the element(s) should be made visible or not.\r\n         */\r\n        public setElementVisibility(elements: JQuery, isVisible: boolean, isImmediate: boolean): JQuery {\r\n            return elements.each((index: number, element: Element) => {\r\n\r\n                let cancelDefault = false;\r\n                // Allow features to add custom behavior and/or prevent default\r\n                $.each(this._features, (_: number, feature: IDocumentFeature) => {\r\n                    if (!cancelDefault) {\r\n                        if (feature.beforeSetElementVisibility(element, isVisible, isImmediate) === true) {\r\n                            cancelDefault = true;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (!cancelDefault) {\r\n\r\n                    if ($(element).css(\"display\") !== \"none\" !== isVisible) {\r\n                        if ($(element).css(\"display\") === \"none\") {\r\n                            if (isImmediate || Browser.isAnimationDisabled) {\r\n                                // Element is currently not visible - make it visible\r\n                                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                const originalDisplay: any = $(element).data(\"i-original-display\");\r\n                                if (originalDisplay != null) {\r\n                                    $(element).css(\"display\", originalDisplay);\r\n                                    $(element).data(\"i-original-display\", null);\r\n                                } else {\r\n                                    if (element.tagName === \"TR\") {\r\n                                        $(element).css(\"display\", \"table-row\");\r\n                                    } else {\r\n                                        $(element).css(\"display\", \"block\");\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                $(element).slideDown(\"fast\");\r\n                            }\r\n                        } else {\r\n                            // Element is currently visible, hide\r\n                            $(element).data(\"i-original-display\", $(element).css(\"display\"));\r\n                            if (isImmediate || Browser.isAnimationDisabled) {\r\n                                $(element).hide();\r\n                            } else {\r\n                                $(element).slideUp(\"fast\");\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    $.each(this._features, (_: number, feature: IDocumentFeature) => {\r\n                        feature.afterSetElementVisibility(element, isVisible);\r\n                    });\r\n\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Returns a feature matching the passed name\r\n         */\r\n        public getFeatureByName<TFeature extends IDocumentFeature>(name: string): TFeature {\r\n            if (name == null) {\r\n                return null;\r\n            }\r\n            const matchingFeatures: TFeature[]\r\n                = $.map(this._features, (feature: IDocumentFeature, index: number): TFeature => {\r\n                    if (feature.getName().toLowerCase() === name.toLowerCase()) {\r\n                        return feature as TFeature;\r\n                    } else {\r\n                        return null;\r\n                    }\r\n                });\r\n            if (matchingFeatures.length > 0) {\r\n                return matchingFeatures[0];\r\n            }\r\n        }\r\n\r\n        public getFeatureSettings<TFeatureSettings>(name: string, getBaseSettings: () => TFeatureSettings): TFeatureSettings {\r\n            if (name == null) {\r\n                return null;\r\n            }\r\n            if (this._featureSettings[name] != null) {\r\n                return this._featureSettings[name] as TFeatureSettings;\r\n            } else {\r\n                const baseSettings = getBaseSettings != null ? getBaseSettings() : {};\r\n                let newSettings: TFeatureSettings;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const defaults: any = (Innovasys as any).overrides || (Innovasys as any).settings;\r\n                const defaultSettings = defaults == null ? null : defaults[name.toLowerCase()];\r\n                if (defaultSettings != null) {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    newSettings = { ...(baseSettings as any), ...defaultSettings } as TFeatureSettings;\r\n                } else {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    newSettings = { ...(baseSettings as any) } as TFeatureSettings;\r\n                }\r\n                this._featureSettings[name] = newSettings;\r\n\r\n                return newSettings;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class DocumentMessageNames {\r\n        public static quickSearch = \"quickSearch\";\r\n        public static resetQuickSearch = \"resetQuickSearch\";\r\n        public static insertNavigationHeader = \"insertNavigationHeader\";\r\n        public static searchHighlightComplete = \"searchHighlightComplete\";\r\n    }\r\n\r\n    export class RootMessageNames {\r\n        public static navigate = \"navigate\";\r\n        public static openNavigationPane = \"openNavigationPane\";\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const INNOVASYS_PREFIX_LENGTH = 2;\r\n\r\n    export class ResponsiveDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _pendingResponsiveFiles: string[] = [];\r\n        private _configuration: ResponsiveConfiguration = null;\r\n\r\n        public static pivotTable(table: HTMLElement): JQuery<HTMLElement> {\r\n\r\n            const sourceTable: JQuery = $(table);\r\n            const container: JQuery = $(\"<div class=\\\"i-pivot-table-container\\\"></div>\");\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const labels: any = {};\r\n            const pivotColumnIndex: number = sourceTable\r\n                .find(\"tr\")\r\n                .children(\"td.i-pivot-column, th.i-pivot-column\")\r\n                .first()\r\n                .index();\r\n\r\n            // No column found to pivot on so just return here\r\n            if (pivotColumnIndex === -1) {\r\n                return null;\r\n            }\r\n\r\n            // Get the labels for each new row in the new table for the first row in the source table\r\n            sourceTable\r\n                .find(\"tr:first-child\")\r\n                .children(\"td, th\")\r\n                .each((index, cell) => {\r\n                    labels[index.toString()] = $(cell).text();\r\n                });\r\n\r\n            sourceTable.find(\"tr\").each((index, row) => {\r\n                if (index > 0) {\r\n                    const newTable = $(\"<table class=\\\"i-pivot-table i-section-content\\\"></table>\") as JQuery<HTMLElement>;\r\n                    let header: JQuery;\r\n\r\n                    $(row)\r\n                        .children(\"td\")\r\n                        .each((cellIndex, cell) => {\r\n                            if (cellIndex === pivotColumnIndex) {\r\n                                header = $(`<div class=\"i-section-heading\"><span class=\"btn\">${$(cell).text()}</span></div>`);\r\n                            } else {\r\n                                // Add a new row for each column in the source table\r\n                                const newRow = $(`<tr><td>${labels[cellIndex.toString()]}</td></tr>`) as JQuery<HTMLElement>;\r\n                                $(cell)\r\n                                    .clone()\r\n                                    .appendTo(newRow as JQuery<HTMLTableRowElement>);\r\n                                newRow.find(\"td a\").addClass(\"btn btn-mini btn-xs\");\r\n                                newRow.appendTo(newTable);\r\n                            }\r\n                        });\r\n\r\n                    if (header != null) {\r\n                        header.appendTo(container);\r\n                    }\r\n                    newTable.appendTo(container);\r\n                }\r\n            });\r\n\r\n            return container;\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"Responsive\";\r\n        }\r\n\r\n        public getFeatureSettings(): IResponsiveFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IResponsiveFeatureSettings>(\"responsive\",\r\n                this.getDefaultFeatureSettings);\r\n        }\r\n\r\n        public getDefaultFeatureSettings(): IResponsiveFeatureSettings {\r\n            return {\r\n                isEnabled: false,\r\n                displayMode: null\r\n            };\r\n        }\r\n\r\n        public checkPendingResponsiveFilesLoad(loadedId: string): void {\r\n            this._pendingResponsiveFiles = $.map(this._pendingResponsiveFiles, (item: string): string => {\r\n                if (item === loadedId) {\r\n                    // This item now loaded, exclude from pending array\r\n                    return null;\r\n                } else {\r\n                    return item;\r\n                }\r\n            });\r\n            if (this._pendingResponsiveFiles.length === 0) {\r\n                // All loaded\r\n                this.onResponsiveFilesLoaded();\r\n            }\r\n        }\r\n\r\n        private isEnabled(): boolean {\r\n            return this.documentInstance.isResponsiveEnabled || this.getFeatureSettings().isEnabled;\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n\r\n                const deviceType = this.getDeviceType().toLowerCase();\r\n\r\n                // Gather the responsive configuration\r\n                const configuration: ResponsiveConfiguration = this.documentInstance.getResponsiveConfiguration(deviceType);\r\n\r\n                if (this.isEnabled()) {\r\n                    switch (deviceType) {\r\n                        case \"mobile\":\r\n                            $(\".i-hidden-mobile, .i-visible-tablet, .i-visible-desktop\").css(\"display\", \"none\");\r\n                            break;\r\n                        case \"tablet\":\r\n                            $(\".i-hidden-tablet, .i-visible-mobile, .i-visible-desktop\").css(\"display\", \"none\");\r\n                            break;\r\n                        case \"desktop\":\r\n                            $(\".i-hidden-desktop, .i-visible-mobile, .i-visible-tablet\").css(\"display\", \"none\");\r\n                            break;\r\n                        // No default\r\n                    }\r\n\r\n                    if (deviceType !== \"desktop\") {\r\n\r\n                        // Find and add any stylesheets with data-responsive-{profileName} attributes\r\n                        $(`link[data-responsive-${deviceType}]`).each((index: number, stylesheet: Element) => {\r\n                            const responsiveStylesheets = $(stylesheet).attr(`data-responsive-${deviceType}`);\r\n                            if (responsiveStylesheets != null) {\r\n                                // Defer setting body visible while we wait for our custom stylesheet to load\r\n                                this.documentInstance.setBodyVisibleAfterLoadComplete = false;\r\n                                $.each(responsiveStylesheets.split(\",\"), (_: number, url: string) => {\r\n                                    // Give the stylesheet a link so we can remove it later if the responsive style changes\r\n                                    this._pendingResponsiveFiles.push(\r\n                                        Browser.loadStylesheet(\r\n                                            url,\r\n                                            `data-responsive-${deviceType}`,\r\n                                            \"responsive-marker\",\r\n                                            (stylesheetId: string): void => {\r\n                                                this.checkPendingResponsiveFilesLoad(stylesheetId);\r\n                                            }));\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        // Find any stylesheet references stored in css/responsive script tags\r\n                        $(\"script[type='i-url-container/css']\").each((index: number, scriptElement: Element) => {\r\n                            const scriptContainer = $(scriptElement);\r\n                            const displayModes: string = scriptContainer.data(\"responsive-display-modes\");\r\n                            if (displayModes != null && displayModes.toLowerCase().indexOf(deviceType) !== -1) {\r\n                                const url: string = $.trim(scriptContainer.html());\r\n                                this.documentInstance.setBodyVisibleAfterLoadComplete = false;\r\n                                // Give the stylesheet a link so we can remove it later if the responsive style changes\r\n                                this._pendingResponsiveFiles.push(\r\n                                    Browser.loadStylesheet(url,\r\n                                        `data-responsive-${deviceType}`,\r\n                                        \"responsive-marker\",\r\n                                        (stylesheetId: string): void => {\r\n                                            this.checkPendingResponsiveFilesLoad(stylesheetId);\r\n                                        }));\r\n                            }\r\n                        });\r\n\r\n\r\n                        // Find any script references stored in css/responsive script tags\r\n                        $(\"script[type='i-url-container/script']\").each((index: number, scriptElement: Element) => {\r\n                            const scriptContainer = $(scriptElement);\r\n                            const displayModes: string = scriptContainer.data(\"responsive-display-modes\");\r\n                            if (displayModes != null && displayModes.toLowerCase().indexOf(deviceType) !== -1) {\r\n                                const url: string = $.trim(scriptContainer.html());\r\n                                this.documentInstance.setBodyVisibleAfterLoadComplete = false;\r\n                                // Give the stylesheet a link so we can remove it later if the responsive style changes\r\n                                this._pendingResponsiveFiles.push(\r\n                                    Browser.loadScript(url,\r\n                                        `data-responsive-${deviceType}`,\r\n                                        \"responsive-marker\",\r\n                                        (scriptId: string): void => {\r\n                                            this.checkPendingResponsiveFilesLoad(scriptId);\r\n                                        }));\r\n                            }\r\n                        });\r\n\r\n                    }\r\n\r\n                    if (configuration.profileName === \"mobile\" || configuration.profileName === \"tablet\") {\r\n                        switch (configuration.profileName) {\r\n                            case \"mobile\":\r\n                                configuration.clickTargets.push(new ResponsiveClickTarget(\".i-link>a,\"\r\n                                    + \".i-member-link a\", ResponsiveClickTargetKind.block));\r\n                                configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-actions-content .i-page-link,\"\r\n                                    + \"#i-actions-content .i-popup-link,\"\r\n                                    + \"#i-actions-content .i-function-link\", ResponsiveClickTargetKind.inline));\r\n                                break;\r\n                            case \"tablet\":\r\n                                configuration.clickTargets.push(new ResponsiveClickTarget(\".i-breadcrumbs-container a,\"\r\n                                    + \"#i-after-header-content .i-page-link,\"\r\n                                    + \"#i-after-header-content .i-popup-link,\"\r\n                                    + \"#i-after-header-content .i-function-link,\"\r\n                                    + \"#i-actions-content .i-page-link,\"\r\n                                    + \"#i-actions-content .i-popup-link,\"\r\n                                    + \"#i-actions-content .i-function-link\", ResponsiveClickTargetKind.inline));\r\n                                configuration.clickTargets.push(\r\n                                    new ResponsiveClickTarget(\"a[href='#top']\", ResponsiveClickTargetKind.block));\r\n                                break;\r\n                            // No default\r\n                        }\r\n\r\n                        // Add some default click targets - apply to both mobile and tablet\r\n                        configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-footer-content>a,\"\r\n                            + \"#i-after-header-content .i-function-link\", ResponsiveClickTargetKind.inline));\r\n                        configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-seealso-section-content a,\"\r\n                            + \".i-in-this-topic-container a\", ResponsiveClickTargetKind.block));\r\n\r\n                        // And default pivot tables\r\n                        configuration.tablesToPivot.push(new ResponsiveTable(\"table.pivot-table,table.i-pivot-table\"));\r\n                    }\r\n\r\n                }\r\n\r\n                this._configuration = configuration;\r\n\r\n                if (this._pendingResponsiveFiles.length === 0) {\r\n                    // No pending files, immediately apply\r\n                    this.onResponsiveFilesLoaded();\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        public initializeContentOrdinal(): number {\r\n            const CONTENT_ORDINAL = 999;\r\n\r\n            return CONTENT_ORDINAL;\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            // Apply the custom click targets\r\n            $.each(configuration.clickTargets, (_: number, clickTarget: ResponsiveClickTarget) => {\r\n                this.applyClickTarget(clickTarget);\r\n            });\r\n\r\n            // Pivot tables\r\n            $.each(configuration.tablesToPivot, (_tableIndex: number, responsiveTable: ResponsiveTable) => {\r\n                $(responsiveTable.selector).each((_elementIndex: number, table: HTMLElement) => {\r\n                    const pivotDiv = ResponsiveDocumentFeature.pivotTable(table);\r\n                    if (pivotDiv != null) {\r\n                        if (responsiveTable.onAfterPivot != null) {\r\n                            responsiveTable.onAfterPivot($(table), pivotDiv);\r\n                        } else {\r\n                            $(table).replaceWith(pivotDiv);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Wire up any responsive switches\r\n            $(\".i-responsive-switch\")\r\n                .off(\"click.responsive\")\r\n                .on(\"click.responsive\", (eventObject: JQueryEventObject) => {\r\n                    const displayMode: string = $(eventObject.currentTarget).data(\"i-responsive-mode\");\r\n                    if (displayMode !== \"\") {\r\n                        this.setForcedDisplayMode(displayMode);\r\n                        Browser.reload();\r\n                    }\r\n                });\r\n\r\n            $(\".i-responsive-select\")\r\n                .val(configuration.profileName)\r\n                .off(\"change.responsive\")\r\n                .on(\"change.responsive\",\r\n                    (eventObject: JQueryEventObject) => {\r\n                        const selectedValue = $(eventObject.currentTarget).val();\r\n                        if (selectedValue !== \"\") {\r\n                            this.setForcedDisplayMode(selectedValue as string);\r\n                            Browser.reload();\r\n                        }\r\n                    });\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (message) {\r\n                switch (message.messageType) {\r\n                    case DocumentMessageNames.insertNavigationHeader:\r\n                        this.insertNavigationHeader();\r\n                        break;\r\n                    case DocumentMessageNames.searchHighlightComplete:\r\n                        $(\"a#i-remove-highlighting\").css(\"display\", \"inline\");\r\n                        break;\r\n                    // No default\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        protected insertNavigationHeader(): void {\r\n\r\n            if ($(\"body > div.navigation-header\").length === 0) {\r\n\r\n                const header: JQuery = $(\"<div class=\\\"i-navigation-header\\\"><div class=\\\"i-inner-container\\\"></div></div>\");\r\n                const innercontainer: JQuery = header.find(\".i-inner-container\").first();\r\n\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-previous\\\"><i class=\\\"icon-arrow-left\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-index\\\"><i class=\\\"icon-list\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-toc\\\"><i class=\\\"icon-book\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-search\\\"><i class=\\\"icon-search\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-next\\\"><i class=\\\"icon-arrow-right\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-remove-highlighting\\\" class=\\\"btn-warning\\\"><i class=\\\"icon-remove icon-white\\\"></i></a>\")\r\n                    .appendTo(innercontainer);\r\n\r\n                if ($(\".i-search-highlight\").length) {\r\n                    // Highlighted search items have been added to the body so show the remove highlights button\r\n                    innercontainer.children(\"#i-remove-highlighting\").css(\"display\", \"inline\");\r\n                }\r\n\r\n                innercontainer.children(\"a\")\r\n                    .off(\"click.responsive\")\r\n                    .on(\"click.responsive\", (eventObject: JQueryEventObject) => {\r\n                        const webframe = window.parent;\r\n                        if (typeof webframe != \"undefined\") {\r\n\r\n                            switch ($(eventObject.currentTarget).attr(\"id\")) {\r\n                                case \"i-nav-previous\":\r\n                                    Messaging.routeMessageToParentFrame(\r\n                                        RootMessageNames.navigate,\r\n                                        \"previous\");\r\n\r\n                                    break;\r\n                                case \"i-nav-next\":\r\n                                    Messaging.routeMessageToParentFrame(\r\n                                        RootMessageNames.navigate,\r\n                                        \"next\");\r\n\r\n                                    break;\r\n                                case \"i-nav-index\":\r\n                                case \"i-nav-toc\":\r\n                                case \"i-nav-search\":\r\n                                    let paneId: string = $(eventObject.currentTarget).attr(\"id\");\r\n                                    if (paneId.substring(0, INNOVASYS_PREFIX_LENGTH) === \"i-\") {\r\n                                        paneId = paneId.substring(INNOVASYS_PREFIX_LENGTH);\r\n                                    }\r\n                                    Messaging.routeMessageToParentFrame(RootMessageNames.openNavigationPane, paneId);\r\n                                    break;\r\n                                case \"i-remove-highlighting\":\r\n                                    // Instruct search highlighting to remove any existing highlights\r\n                                    this.documentInstance.processWindowMessage(\r\n                                        new WindowMessage(DocumentMessageNames.resetQuickSearch, null));\r\n                                    break;\r\n                                // No default\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                header.prependTo($(\"body\"));\r\n\r\n                if ($(\"html\").data(\"responsive-load-complete\") === true) {\r\n                    // Async load of responsive files already complete so make the body visible\r\n                    this.documentInstance.setBodyVisible();\r\n                    $(\"html\").data(\"responsive-load-complete\", null);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        protected applyClickTarget(clickTarget: ResponsiveClickTarget): void {\r\n            const buttonClassName: string\r\n                = (clickTarget.kind === ResponsiveClickTargetKind.inline) ? \"btn btn-mini btn-xs\" : \"btn\";\r\n            $(clickTarget.className).addClass(buttonClassName);\r\n        }\r\n\r\n        private getDeviceType(): string {\r\n\r\n            if (!this.isEnabled()) {\r\n                // Responsive disabled - always desktop\r\n                return \"DESKTOP\";\r\n            }\r\n\r\n            const forcedDisplayMode: string = this.getForcedDisplayMode();\r\n            if (forcedDisplayMode != null) {\r\n                return forcedDisplayMode;\r\n            }\r\n\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            if ((Modernizr as any).touch) {\r\n\r\n                if (Modernizr.mq(\"screen and (orientation: portrait) and (max-device-width: 600px)\")) {\r\n                    return \"MOBILE\";\r\n                } else if (Modernizr.mq(\"screen and (orientation: landscape) and (max-device-width: 767px)\")) {\r\n                    return \"MOBILE\";\r\n                } else {\r\n                    return \"TABLET\";\r\n                }\r\n\r\n            } else if (navigator.userAgent.indexOf(\"Windows Phone OS\") !== -1) {\r\n                // Specific check for windows phone as Modernizr returns false for the touch property\r\n                return \"MOBILE\";\r\n            }\r\n\r\n            return \"DESKTOP\";\r\n\r\n        }\r\n\r\n        /**\r\n         * Returns any forced display mode set by the containing frame.\r\n         */\r\n        private getForcedDisplayMode() {\r\n\r\n            const overrides: IOverrides = Browser.getCommonSettings();\r\n            if (typeof overrides.forcedDisplayMode != \"undefined\"\r\n                && overrides.forcedDisplayMode != null) {\r\n\r\n                return overrides.forcedDisplayMode;\r\n            }\r\n\r\n            if (this.getFeatureSettings().displayMode != null) {\r\n                return this.getFeatureSettings().displayMode;\r\n            }\r\n\r\n            const location = Browser.getLocationInfo();\r\n            if (location.hash === \"#ForceDisplayDesktop\") {\r\n                return \"DESKTOP\";\r\n            } else if (location.hash === \"#ForceDisplayMobile\") {\r\n                return \"MOBILE\";\r\n            } else if (location.hash === \"#ForceDisplayTablet\") {\r\n                return \"TABLET\";\r\n            }\r\n\r\n            // Only check local storage here if we are in a frame - the parent frame sets the local storage\r\n            // value for overriding the default behavior so we only need to check it if we are actually running\r\n            // in a frame\r\n            const currentPath: string =\r\n                location.pathname.substring(0, location.pathname.lastIndexOf(\"/\"));\r\n            const responsiveStorageId\r\n                = `innovasys-responsive-${currentPath.replace(/[^a-zA-Z0-9_\\-]/g, \"\")}`;\r\n            if (this.documentInstance.getLocalStorage().getAttribute(responsiveStorageId) != null) {\r\n                return this.documentInstance.getLocalStorage().getAttribute(responsiveStorageId);\r\n            }\r\n\r\n            return null;\r\n\r\n        }\r\n\r\n        /**\r\n         * Forces a specific responsive display mode when the document loads. The forced display mode is set in local storage\r\n         *  so will be used by all subsequent page loads until it is reset.\r\n         */\r\n        public setForcedDisplayMode(displayMode: string): void {\r\n            const location = Browser.getLocationInfo();\r\n            const currentPath: string = location.pathname.substring(0, location.pathname.lastIndexOf(\"/\"));\r\n            const responsiveStorageId\r\n                = `innovasys-responsive-${currentPath.replace(/[^a-zA-Z0-9_\\-]/g, \"\")}`;\r\n            this.documentInstance.getLocalStorage().setAttribute(responsiveStorageId, displayMode);\r\n        }\r\n\r\n        /**\r\n         * Called after responsive setup completes.\r\n         */\r\n        private onResponsiveFilesLoaded() {\r\n\r\n            const overrides: IOverrides = Browser.getCommonSettings();\r\n\r\n            this.documentInstance.applyResponsiveConfiguration(this._configuration);\r\n\r\n            if (this._configuration.profileName !== \"desktop\") {\r\n                if (!this.documentInstance.isContentDocument\r\n                    || overrides.navigationKind === \"inpage\"\r\n                    || $(\"body > div.i-navigation-header\").length !== 0) {\r\n\r\n                    // Navigation header already loaded, or not a content document or a page with\r\n                    //  inpage navigation so make the body visible;\r\n                    this.documentInstance.setBodyVisible();\r\n                } else {\r\n                    // Navigation header not loaded yet, add a flag here so that when the header has finished loaded it will make\r\n                    //  the body visible\r\n                    $(\"html\").data(\"responsive-load-complete\", true);\r\n                }\r\n            }\r\n\r\n            $(\"html\").addClass(`i-responsive-${this._configuration.profileName}`);\r\n\r\n        }\r\n    }\r\n\r\n    export interface IResponsiveFeatureSettings {\r\n        isEnabled: boolean;\r\n        displayMode: string;\r\n    }\r\n\r\n    export class ResponsiveDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new ResponsiveDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ResponsiveDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class FixedToTopDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private isPinned = false;\r\n        private readonly rootSelector: string;\r\n\r\n        public getName(): string {\r\n            return \"Fixed to Top\";\r\n        }\r\n\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if ($(\".i-fixed-to-top\").length > 0) {\r\n                const scrollEventId = \"scroll.fixed-to-top\";\r\n                const resizeEventId = \"resize.fixed-to-top\";\r\n\r\n                setTimeout(() => this.refresh(), 1);\r\n\r\n                $(window)\r\n                    .off(scrollEventId)\r\n                    .on(scrollEventId, () => this.refresh())\r\n                    .off(resizeEventId)\r\n                    .on(resizeEventId, () => this.refresh());\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            setTimeout(() => this.refresh(), 1);\r\n        }\r\n\r\n        private refresh(): void {\r\n            const bodyTop = this.getBodyContentPosition();\r\n\r\n            const $fixedToTop = $(\".i-fixed-to-top\");\r\n\r\n            const scrollTop = $(window).scrollTop();\r\n            const isPinnedNewValue = (scrollTop > bodyTop);\r\n\r\n            if (this.isPinned !== isPinnedNewValue) {\r\n                this.isPinned = isPinnedNewValue;\r\n                $fixedToTop.toggleClass(\"i-is-fixed\", isPinnedNewValue);\r\n\r\n                if (this.isPinned) {\r\n                    $fixedToTop.css(\"top\", \"0\");\r\n                }\r\n            }\r\n\r\n            if (!this.isPinned) {\r\n                const topValue = bodyTop - scrollTop;\r\n                $(\".i-fixed-to-top\").css(\"top\", topValue > 0 ? `${topValue}px` : \"\");\r\n            }\r\n        }\r\n\r\n        private getBodyContentPosition(): number {\r\n            const bodyContentPosition = $(\"#i-body-content-container\", this.rootSelector).position();\r\n            if (bodyContentPosition != null) {\r\n                return bodyContentPosition.top;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class FixedToTopDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new FixedToTopDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.FixedToTopDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class ThemeDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _rootSelector: JQuery;\r\n\r\n        public getName(): string {\r\n            return \"Theme\";\r\n        }\r\n\r\n        private getDefaultSettings(): IThemeFeatureSettings {\r\n            return {\r\n                defaultThemeOption: null,\r\n                isThemeSelectionEnabled: false\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IThemeFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IThemeFeatureSettings>(\"theme\", this.getDefaultSettings);\r\n        }\r\n\r\n        /* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            this._rootSelector = rootSelector;\r\n\r\n            const settings = this.getFeatureSettings();\r\n\r\n            if (settings.isThemeSelectionEnabled) {\r\n                $(\".i-theme-select\", rootSelector)\r\n                    .off(\"change.theme\")\r\n                    .on(\"change.theme\",\r\n                    (eventObject: JQueryEventObject) => {\r\n                        const themeName = $(eventObject.currentTarget).data(\"theme-name\");\r\n                        const stylesheetUrl = $(eventObject.currentTarget).val() as string;\r\n                        const themeOption = $(`option[value='${stylesheetUrl}']`, $(eventObject.currentTarget)).data(\"theme-option\");\r\n                        this.onThemeSelected(themeName, themeOption, stylesheetUrl, true);\r\n                    });\r\n            }\r\n\r\n            $(\".i-theme-select\", rootSelector).each((index: number, element: Element) => {\r\n                const $element = $(element);\r\n                const themeName = $element.data(\"theme-name\");\r\n\r\n                if (themeName != null) {\r\n                    let themeOptionToApply: string = this.documentInstance.getLocalStorage()\r\n                        .getAttribute(`i-theme-${themeName}`);\r\n                    if (themeOptionToApply == null) {\r\n                        themeOptionToApply = settings.defaultThemeOption;\r\n                    }\r\n                    if (themeOptionToApply != null) {\r\n                        const themeOption = $(`option[data-theme-option='${themeOptionToApply}']`, $element);\r\n                        if (themeOption.length > 0) {\r\n                            $element.val(themeOption.val());\r\n                            this.onThemeSelected(themeName, themeOptionToApply, themeOption.val() as string, false);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (!settings.isThemeSelectionEnabled) {\r\n                $(\".i-theme-selection-container\").hide();\r\n            } else {\r\n                $(\".i-theme-selection-container\").show();\r\n            }\r\n\r\n        }\r\n\r\n        private onThemeSelected(themeName: string, themeValue: string, stylesheetUrl: string, saveSelection: boolean) {\r\n            // Remove any existing theme stylesheets\r\n            const existingStylesheets = $(`link[data-theme-name='${themeName}']`);\r\n            existingStylesheets.remove();\r\n            // Add the new one (if not \"none\")\r\n            if (stylesheetUrl !== \"none\") {\r\n                $(\"head\").append(`<link rel=\"stylesheet\" href=\"${stylesheetUrl}\" type=\"text/css\" data-theme-name=\"${themeName}\" />`);\r\n            }\r\n            // Add a class to the root\r\n            $(\".i-theme-select option\", this._rootSelector).each((index: number, element: Element) => {\r\n                const optionValue = $(element).data(\"theme-option\");\r\n                $(\"html\").toggleClass(`i-theme-${themeName}-${optionValue}`, optionValue === themeValue);\r\n            });\r\n            if (saveSelection) {\r\n                // Save as the current preference\r\n                this.documentInstance.getLocalStorage().setAttribute(`i-theme-${themeName}`, themeValue);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export interface IThemeFeatureSettings {\r\n        defaultThemeOption: string;\r\n        isThemeSelectionEnabled: boolean;\r\n    }\r\n\r\n    export class ThemeDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new ThemeDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ThemeDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class DynamicStylesDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _rootSelector: JQuery;\r\n        private _addedStyles: { dynamicWordBreak: number } = { dynamicWordBreak: null };\r\n\r\n        public getName(): string {\r\n            return \"DynamicStyles\";\r\n        }\r\n\r\n        private getDefaultSettings(): IDynamicStylesFeatureSettings {\r\n            return {\r\n                isDynamicWordWrapEnabled: false,\r\n                isDynamicWordWrapUpdateOnResizeEnabled: true\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IDynamicStylesFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IDynamicStylesFeatureSettings>(\"dynamicstyles\", this.getDefaultSettings);\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n                this._rootSelector = rootSelector;\r\n            }\r\n\r\n            const settings = this.getFeatureSettings();\r\n            if (!settings.isDynamicWordWrapEnabled) {\r\n                return;\r\n            }\r\n\r\n            // No dynamic styles in compiled help or at design time\r\n            if (!Browser.isCompiledHelp() && !Browser.isDesignTime) {\r\n\r\n                const $bodyContent = $(\"#i-body-content\", this._rootSelector);\r\n\r\n                if ($bodyContent.length > 0) {\r\n                    setTimeout(() => {\r\n                        this.updateDynamicWordBreak();\r\n                    });\r\n\r\n                    if (settings.isDynamicWordWrapUpdateOnResizeEnabled) {\r\n                        $(window).off(\"resize.dynamicstyles\")\r\n                            .on(\"resize.dynamicstyles\",\r\n                                () => {\r\n                                    this.updateDynamicWordBreak();\r\n                                });\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        private updateDynamicWordBreak(): void {\r\n\r\n            const styleId = \"i-dynamic-word-break\";\r\n            const $bodyContent = $(\"#i-body-content\", this._rootSelector);\r\n            const bodyContent = $bodyContent.get(0);\r\n\r\n            if (this._addedStyles.dynamicWordBreak != null) {\r\n                // Style already added. If the current width is > applied width, remove and re-evaluate\r\n                if (bodyContent.offsetWidth > this._addedStyles.dynamicWordBreak) {\r\n                    $(`#${styleId}`).remove();\r\n                    this._addedStyles.dynamicWordBreak = null;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (bodyContent.offsetWidth < bodyContent.scrollWidth\r\n                && ($(\"table\", $bodyContent).length > 0)) {\r\n\r\n                this._addedStyles.dynamicWordBreak = bodyContent.offsetWidth;\r\n                const $dynamicStylesElement = Browser.getDynamicStyleContainer(styleId);\r\n                $dynamicStylesElement.html(\"td {word-break: break-all;}\");\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    export interface IDynamicStylesFeatureSettings {\r\n        isDynamicWordWrapEnabled: boolean;\r\n        isDynamicWordWrapUpdateOnResizeEnabled: boolean;\r\n    }\r\n\r\n    export class DynamicStylesDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new DynamicStylesDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.DynamicStylesDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class DarkModeDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private readonly _optimalColors: Record<string, tinycolor.Instance> = {};\r\n\r\n        private findReadableColorOnDarkBackground(color: tinycolor.Instance): tinycolor.Instance {\r\n            if (this._optimalColors[color.toHex8String()]) {\r\n                return this._optimalColors[color.toHex8String()];\r\n            }\r\n\r\n            const maximumLightening = 100;\r\n            const lighteningIncrement = 1;\r\n            let resolvedColor: tinycolor.Instance;\r\n\r\n            for (let i = 1; i < maximumLightening; i += lighteningIncrement) {\r\n                const possibleColor = color.clone().lighten(i);\r\n                if (tinycolor.isReadable(possibleColor, \"#333\")) {\r\n                    resolvedColor = possibleColor;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (resolvedColor == null) {\r\n                resolvedColor = tinycolor(\"#ccc\");\r\n            }\r\n\r\n            this._optimalColors[color.toHex8String()] = resolvedColor;\r\n\r\n            return resolvedColor;\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"DarkMode\";\r\n        }\r\n\r\n        private getDefaultSettings(): IDarkModeFeatureSettings {\r\n            return {\r\n                isEnabled: false,\r\n                isAlwaysDarkMode: false\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IDarkModeFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IDarkModeFeatureSettings>(\"darkmode\", this.getDefaultSettings);\r\n        }\r\n\r\n        public initializeDocument(): void {\r\n\r\n            const settings = this.getFeatureSettings();\r\n\r\n            if (settings.isEnabled) {\r\n                if (settings.isAlwaysDarkMode) {\r\n                    $(\"html\").addClass(\"i-dark\");\r\n                } else {\r\n                    if (window.matchMedia) {\r\n                        const matchMediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n                        const matchMediaListener = (queryList: MediaQueryList, isAddDarkModificationsDisabled: boolean = false) => {\r\n                            if (queryList.matches) {\r\n                                $(\"html\").addClass(\"i-dark\");\r\n                                if (!isAddDarkModificationsDisabled) {\r\n                                    this.addDarkModifications();\r\n                                }\r\n                            } else {\r\n                                if ($(\"html\").hasClass(\"i-dark\")) {\r\n                                    this.removeDarkModifications();\r\n                                    $(\"html\").removeClass(\"i-dark\");\r\n                                }\r\n                            }\r\n                        };\r\n                        matchMediaListener(matchMediaQuery, true);\r\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                        matchMediaQuery.addListener(matchMediaListener as any);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad?: boolean): void {\r\n            if ($(\"html\").hasClass(\"i-dark\")) {\r\n                this.addDarkModifications();\r\n            }\r\n        }\r\n\r\n        private addDarkModifications(): void {\r\n            const $inlineColors = $(\"pre [style]\");\r\n            $inlineColors.each((_, element) => {\r\n                if (element.style.color) {\r\n                    const originalColor = tinycolor(element.style.color);\r\n                    const color = this.findReadableColorOnDarkBackground(originalColor);\r\n                    if (color.toHex8String() !== originalColor.toHex8String()) {\r\n                        $(element).data(\"i-original-color\", element.style.color);\r\n                        element.style.color = color.toHex8String();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        private removeDarkModifications(): void {\r\n            const $inlineColors = $(\"pre [style]\");\r\n            $inlineColors.each((_, element) => {\r\n                const $element = $(element);\r\n                if ($element.data(\"i-original-color\")) {\r\n                    element.style.color = $element.data(\"i-original-color\");\r\n                    $element.removeData(\"i-original-color\");\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    export interface IDarkModeFeatureSettings {\r\n        isEnabled: boolean;\r\n        isAlwaysDarkMode: boolean;\r\n    }\r\n\r\n    export class DarkModeDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new DarkModeDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.DarkModeDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const replacementList = [\r\n        {'base':'A', 'letters':/[\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F]/g},\r\n        {'base':'AA','letters':/[\\uA732]/g},\r\n        {'base':'AE','letters':/[\\u00C6\\u01FC\\u01E2]/g},\r\n        {'base':'AO','letters':/[\\uA734]/g},\r\n        {'base':'AU','letters':/[\\uA736]/g},\r\n        {'base':'AV','letters':/[\\uA738\\uA73A]/g},\r\n        {'base':'AY','letters':/[\\uA73C]/g},\r\n        {'base':'B', 'letters':/[\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181]/g},\r\n        {'base':'C', 'letters':/[\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E]/g},\r\n        {'base':'D', 'letters':/[\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779]/g},\r\n        {'base':'DZ','letters':/[\\u01F1\\u01C4]/g},\r\n        {'base':'Dz','letters':/[\\u01F2\\u01C5]/g},\r\n        {'base':'E', 'letters':/[\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E]/g},\r\n        {'base':'F', 'letters':/[\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B]/g},\r\n        {'base':'G', 'letters':/[\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E]/g},\r\n        {'base':'H', 'letters':/[\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D]/g},\r\n        {'base':'I', 'letters':/[\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197]/g},\r\n        {'base':'J', 'letters':/[\\u004A\\u24BF\\uFF2A\\u0134\\u0248]/g},\r\n        {'base':'K', 'letters':/[\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2]/g},\r\n        {'base':'L', 'letters':/[\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780]/g},\r\n        {'base':'LJ','letters':/[\\u01C7]/g},\r\n        {'base':'Lj','letters':/[\\u01C8]/g},\r\n        {'base':'M', 'letters':/[\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C]/g},\r\n        {'base':'N', 'letters':/[\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4]/g},\r\n        {'base':'NJ','letters':/[\\u01CA]/g},\r\n        {'base':'Nj','letters':/[\\u01CB]/g},\r\n        {'base':'O', 'letters':/[\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C]/g},\r\n        {'base':'OI','letters':/[\\u01A2]/g},\r\n        {'base':'OO','letters':/[\\uA74E]/g},\r\n        {'base':'OU','letters':/[\\u0222]/g},\r\n        {'base':'P', 'letters':/[\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754]/g},\r\n        {'base':'Q', 'letters':/[\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A]/g},\r\n        {'base':'R', 'letters':/[\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782]/g},\r\n        {'base':'S', 'letters':/[\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784]/g},\r\n        {'base':'T', 'letters':/[\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786]/g},\r\n        {'base':'TZ','letters':/[\\uA728]/g},\r\n        {'base':'U', 'letters':/[\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244]/g},\r\n        {'base':'V', 'letters':/[\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245]/g},\r\n        {'base':'VY','letters':/[\\uA760]/g},\r\n        {'base':'W', 'letters':/[\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72]/g},\r\n        {'base':'X', 'letters':/[\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C]/g},\r\n        {'base':'Y', 'letters':/[\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE]/g},\r\n        {'base':'Z', 'letters':/[\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762]/g},\r\n        {'base':'a', 'letters':/[\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250]/g},\r\n        {'base':'aa','letters':/[\\uA733]/g},\r\n        {'base':'ae','letters':/[\\u00E6\\u01FD\\u01E3]/g},\r\n        {'base':'ao','letters':/[\\uA735]/g},\r\n        {'base':'au','letters':/[\\uA737]/g},\r\n        {'base':'av','letters':/[\\uA739\\uA73B]/g},\r\n        {'base':'ay','letters':/[\\uA73D]/g},\r\n        {'base':'b', 'letters':/[\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253]/g},\r\n        {'base':'c', 'letters':/[\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184]/g},\r\n        {'base':'d', 'letters':/[\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A]/g},\r\n        {'base':'dz','letters':/[\\u01F3\\u01C6]/g},\r\n        {'base':'e', 'letters':/[\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD]/g},\r\n        {'base':'f', 'letters':/[\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C]/g},\r\n        {'base':'g', 'letters':/[\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F]/g},\r\n        {'base':'h', 'letters':/[\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265]/g},\r\n        {'base':'hv','letters':/[\\u0195]/g},\r\n        {'base':'i', 'letters':/[\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131]/g},\r\n        {'base':'j', 'letters':/[\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249]/g},\r\n        {'base':'k', 'letters':/[\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3]/g},\r\n        {'base':'l', 'letters':/[\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747]/g},\r\n        {'base':'lj','letters':/[\\u01C9]/g},\r\n        {'base':'m', 'letters':/[\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F]/g},\r\n        {'base':'n', 'letters':/[\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5]/g},\r\n        {'base':'nj','letters':/[\\u01CC]/g},\r\n        {'base':'o', 'letters':/[\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275]/g},\r\n        {'base':'oi','letters':/[\\u01A3]/g},\r\n        {'base':'ou','letters':/[\\u0223]/g},\r\n        {'base':'oo','letters':/[\\uA74F]/g},\r\n        {'base':'p','letters':/[\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755]/g},\r\n        {'base':'q','letters':/[\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759]/g},\r\n        {'base':'r','letters':/[\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783]/g},\r\n        {'base':'s','letters':/[\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B]/g},\r\n        {'base':'t','letters':/[\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787]/g},\r\n        {'base':'tz','letters':/[\\uA729]/g},\r\n        {'base':'u','letters':/[\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289]/g},\r\n        {'base':'v','letters':/[\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C]/g},\r\n        {'base':'vy','letters':/[\\uA761]/g},\r\n        {'base':'w','letters':/[\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73]/g},\r\n        {'base':'x','letters':/[\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D]/g},\r\n        {'base':'y','letters':/[\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF]/g},\r\n        {'base':'z','letters':/[\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763]/g}\r\n    ];;\r\n\r\n\r\n\r\n    export class DiacriticsHelper {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor() {\r\n\r\n        }\r\n\r\n        public removeDiacritics (str : string) : string {\r\n            for(var i=0; i<replacementList.length; i++) {\r\n                str = str.replace(replacementList[i].letters, replacementList[i].base);\r\n            }\r\n        \r\n            return str;\r\n        }\r\n    }\r\n}","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n    export class NavigationMessageNames {\r\n        public static syncTableOfContents = \"syncToC\";\r\n        public static select = \"select\";\r\n        public static shrinkIFrames = \"shrinkIframes\";\r\n        public static loaded = \"loaded\";\r\n        public static toggleTocPrevious = \"toggle-toc-previous\";\r\n        public static toggleTocNext = \"toggle-toc-next\";\r\n        public static navigate = \"navigate\";\r\n        public static activated = \"activated\";\r\n        public static updateNavigationButtons = \"update-navigation-buttons\";\r\n        public static updatePageTitle = \"updatePageTitle\";\r\n        public static openNavigationPane = \"openNavigationPane\";\r\n        public static closeNavigationPane = \"closeNavigationPane\";\r\n        public static insertRemoveHighlighting = \"insertRemoveHighlighting\";\r\n    }\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const navigationConstants = {\r\n        navigationDelay: 500,\r\n        navigationPrefixLength: 4\r\n    };\r\n\r\n    export class NavigationDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _rootSelector: JQuery = null;\r\n        private readonly _isIframeResizeTimerDisabled = false;\r\n        private _isAccordionView = true;\r\n        private readonly _navigationFrames = [\"i-toc\", \"i-index\", \"i-search\"];\r\n        private _isEnabled = false;\r\n\r\n        public isTocNavigationEnabled = false;\r\n        public isStartOfToc = false;\r\n        public isEndOfToc = false;\r\n\r\n        public getName(): string {\r\n            return \"Navigation\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            this._rootSelector = rootSelector;\r\n\r\n            if ($(\"#i-navigation-container\", this._rootSelector).length > 0) {\r\n\r\n                this._isEnabled = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            switch (message.messageType) {\r\n                case NavigationMessageNames.syncTableOfContents:\r\n                    Messaging.routeMessageToFrameElement(\"i-toc\", message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.select:\r\n                    this.selectNavigationFrame(message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.shrinkIFrames:\r\n                    this.shrinkFrame($(\"iframe#i-toc,iframe#i-index,iframe#i-search\"));\r\n                    break;\r\n                case NavigationMessageNames.loaded:\r\n                    // Forward message to search pane so that search highlights can be rendered\r\n                    Messaging.routeMessageToFrameElement(\"i-search\", message.messageType, message.messageData);\r\n                    break;\r\n                case DocumentMessageNames.quickSearch:\r\n                case DocumentMessageNames.searchHighlightComplete:\r\n                    // Pass to parent frame handler so it can be forwarded on to the content frame\r\n                    Messaging.routeMessageToWindow(parent, message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.toggleTocPrevious:\r\n                    this.isStartOfToc = (message.messageData === \"true\");\r\n                    $(\"#i-toc-header #i-previous\").toggleClass(\"i-arrow-left-disabled\", this.isStartOfToc);\r\n                    break;\r\n                case NavigationMessageNames.toggleTocNext:\r\n                    this.isEndOfToc = (message.messageData === \"true\");\r\n                    $(\"#i-toc-header #i-next\").toggleClass(\"i-arrow-right-disabled\", this.isEndOfToc);\r\n                    break;\r\n                case NavigationMessageNames.navigate:\r\n                    if (message.messageData === \"previous\" || message.messageData === \"next\") {\r\n                        this.navigateToc(message.messageData);\r\n                    } else {\r\n                        Messaging.routeMessageToWindow(parent, message.messageType, message.messageData);\r\n                    }\r\n                    break;\r\n                // No default\r\n            }\r\n        }\r\n\r\n        protected navigateToc(direction: string): void {\r\n            Messaging.routeMessageToFrameElement(\"i-toc\", NavigationMessageNames.navigate, direction);\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            if (configuration.profileName !== \"desktop\") {\r\n\r\n                // Tablet & Mobile\r\n\r\n                this._isAccordionView = false;\r\n\r\n                // Hide the accordion elements\r\n                $(\".i-header, .i-header.ui-state-active\").css(\"display\", \"none\");\r\n                if (Modernizr.touch) {\r\n                    $(\"iframe\").attr(\"scrolling\", \"no\");\r\n                }\r\n\r\n                $(window)\r\n                    .off(\"resize.navigation\")\r\n                    .on(\"resize.navigation\", () => {\r\n                        this.addCloseButtonChevrons();\r\n                    });\r\n\r\n                $(\"#i-close-pane\", this._rootSelector)\r\n                    .off(\"click.navigation\", \"a.btn, i.i-image\")\r\n                    .on(\"click.navigation\", \"a.btn, i.i-image\", (event: JQueryEventObject) => {\r\n                        event.preventDefault();\r\n                        const webContentFrame: Window = window.parent;\r\n                        Messaging.routeMessageToWindow(webContentFrame, NavigationMessageNames.closeNavigationPane, null);\r\n                    });\r\n\r\n                // Resize the iframes and set a timer to keep them sized\r\n                Browser.resizeIFrames(this._rootSelector);\r\n                setInterval(() => {\r\n                    if (!this._isIframeResizeTimerDisabled) {\r\n                        Browser.resizeIFrames(this._rootSelector);\r\n                    }\r\n                }, navigationConstants.navigationDelay);\r\n\r\n            } else {\r\n\r\n                // Desktop\r\n\r\n                this._isAccordionView = true;\r\n\r\n                if ($(\"#i-accordion\", this._rootSelector).length > 0) {\r\n                    $(\"#i-accordion\", this._rootSelector).accordion({ heightStyle: \"fill\" });\r\n\r\n                    // Initial resize\r\n                    setTimeout(() => {\r\n                        $(\"#i-accordion\", this._rootSelector).accordion(\"refresh\");\r\n                    }, 1);\r\n\r\n                    // Resize immediately when the window resizes\r\n                    $(window)\r\n                        .off(\"resize.navigation\")\r\n                        .on(\"resize.navigation\", () => {\r\n                            if ($(\"#i-accordion\", this._rootSelector).data(\"ui-accordion\") != null) {\r\n                                $(\"#i-accordion\", this._rootSelector).accordion(\"refresh\");\r\n                            }\r\n                        });\r\n\r\n                    // Notify the websearch iframe to set focus in the search box\r\n                    $(\"#i-accordion\", this._rootSelector)\r\n                        .off(\"accordionactivate.navigation\")\r\n                        .on(\"accordionactivate.navigation\", (_: JQuery.Event, ui: JQueryUI.AccordionUIParams): void => {\r\n                            if (ui.newHeader.attr(\"id\") === \"i-search-header\") {\r\n                                Messaging.routeMessageToFrameElement(\"i-search\", NavigationMessageNames.activated, null);\r\n                            }\r\n                        });\r\n\r\n                } else if ($(\"#i-tabstrip\", this._rootSelector).length > 0) {\r\n                    // Change default duration on the tabs\r\n                    const options: JQueryUI.TabsOptions = {\r\n                        heightStyle: \"fill\"\r\n                    };\r\n\r\n                    // Tab strip\r\n                    $(\"#i-tabstrip\", this._rootSelector).tabs(options);\r\n\r\n                    // Initial resize\r\n                    setTimeout(() => {\r\n                        $(\"#i-tabstrip\", this._rootSelector).tabs(\"refresh\");\r\n                    }, 1);\r\n\r\n                    // Resize immediately when the window resizes\r\n                    $(window)\r\n                        .off(\"resize.navigation\")\r\n                        .on(\"resize.navigation\", () => {\r\n                            if ($(\"#i-tabstrip\", this._rootSelector).data(\"ui-tabs\") != null) {\r\n                                $(\"#i-tabstrip\", this._rootSelector).tabs(\"refresh\");\r\n                            }\r\n                        });\r\n                }\r\n\r\n                if (this.isTocNavigationEnabled) {\r\n\r\n                    const arrowContainer = $(\"<div class=\\\"i-arrow-container\\\"></div>\");\r\n                    arrowContainer.append(\"<div class=\\\"i-arrow i-arrow-right\\\" id=\\\"i-next\\\"></div>\");\r\n                    arrowContainer.append(\"<div class=\\\"i-arrow i-arrow-left\\\" id=\\\"i-previous\\\"></div>\");\r\n\r\n                    $(\"#i-toc-header\", this._rootSelector).append(arrowContainer);\r\n\r\n                    $(\"#i-toc-header #i-next\", this._rootSelector)\r\n                        .off(\"click.tocnavigation\")\r\n                        .on(\"click.tocnavigation\", () => {\r\n\r\n                            if (!this.isEndOfToc) {\r\n                                this.navigateToc(\"next\");\r\n                            }\r\n\r\n                        });\r\n\r\n                    $(\"#i-toc-header #i-previous\", this._rootSelector)\r\n                        .off(\"click.tocnavigation\")\r\n                        .on(\"click.tocnavigation\", () => {\r\n\r\n                            if (!this.isStartOfToc) {\r\n                                this.navigateToc(\"previous\");\r\n                            }\r\n\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        protected shrinkFrame(frameSelector: JQuery): void {\r\n            frameSelector.height(null);\r\n            frameSelector.data(\"last-height\", null);\r\n            frameSelector.css(\"display\", \"none\");\r\n        }\r\n\r\n        protected selectNavigationFrame(frameId: string): void {\r\n\r\n            if (frameId != null && frameId.indexOf(\"nav-\") === 0) {\r\n                frameId = `i-${frameId.substring(navigationConstants.navigationPrefixLength)}`;\r\n            }\r\n\r\n            for (let x = 0; x < this._navigationFrames.length; x++) {\r\n                const currentFrameId: string = this._navigationFrames[x];\r\n                const isSelected: boolean = (currentFrameId === frameId);\r\n                if (isSelected) {\r\n                    if (this._isAccordionView) {\r\n                        $(\"#i-accordion\").accordion(\"option\", \"active\", x);\r\n                    } else {\r\n                        $(`iframe#${currentFrameId}`).css(\"display\", \"block\");\r\n                    }\r\n                } else {\r\n                    $(`iframe#${currentFrameId}`).css(\"display\", \"none\");\r\n                }\r\n            }\r\n\r\n            if (!this._isAccordionView) {\r\n                Browser.resizeIFrames(this._rootSelector, true);\r\n            }\r\n\r\n        }\r\n\r\n        protected addCloseButtonChevrons(): void {\r\n            let topWindowHeight: number;\r\n            try {\r\n                topWindowHeight = $(window.top).height();\r\n            } catch (ex) {\r\n                topWindowHeight = $(window).height();\r\n            }\r\n            const closePaneHeight = Math.max($(\"#i-close-pane\").height(), topWindowHeight);\r\n\r\n            $(\"#i-close-pane > i.i-image\").remove();\r\n\r\n            /* eslint-disable-next-line no-magic-numbers */\r\n            for (let i = topWindowHeight / 2; i < closePaneHeight; i += topWindowHeight) {\r\n                const image = $(\"<i class=\\\"i-image\\\"></i>\");\r\n                image.css(\"top\", `${i}px`);\r\n                image.appendTo(\"#i-close-pane\");\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class NavigationDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new NavigationDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.NavigationDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const tableOfContentsConstants = {\r\n        slideToggleDelay: 200,\r\n        iconIndexFolderNew: 3,\r\n        iconIndexFolder: 1,\r\n        iconIndexPageNew: 10,\r\n        iconIndexPage: 9\r\n    };\r\n\r\n    export class TableOfContentsDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _lastSelectedNode: JQuery = null;\r\n        private _ignoreSyncRequest = false;\r\n        private _selectedNodeIndex = -1;\r\n        private _firstNodeIndex = -1;\r\n        private _lastNodeIndex = -1;\r\n        private _tocNodeCount = -1;\r\n        private _selectedNodeHref: string = null;\r\n        private _rootSelector: JQuery = null;\r\n        private _isTocConstructed = false;\r\n        private _isMobileToc = false;\r\n        private _isEnabled = false;\r\n        public syncTocUrl: string = null;\r\n\r\n        public getName(): string {\r\n            return \"TableOfContents\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n            if (isInitialLoad) {\r\n                this._rootSelector = rootSelector;\r\n\r\n                if ($(\"#i-toc-container\", this._rootSelector).length > 0) {\r\n\r\n                    this._isEnabled = true;\r\n\r\n                    this._indexNodes();\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            if (configuration.profileName === \"desktop\") {\r\n                $(\"html\")\r\n                    .removeClass(\"ui-mobile\")\r\n                    .removeClass(\"ui-mobile-rendering\");\r\n                // Desktop\r\n                this.constructDesktopToc($(\"ul#i-root\", this._rootSelector));\r\n                this._isTocConstructed = true;\r\n            } else {\r\n                // Mobile/Tablet\r\n                $(\"ul#i-root\", this._rootSelector).css(\"display\", \"none\");\r\n                this.constructMobileToC();\r\n                this._isMobileToc = true;\r\n                this._isTocConstructed = true;\r\n                $(\"ul#i-root\", this._rootSelector).addClass(\"visible\");\r\n            }\r\n            if (this.syncTocUrl != null) {\r\n                const url: string = this.syncTocUrl;\r\n                this.syncTocUrl = null;\r\n                this.syncTocNodeToUrl(url);\r\n            }\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            switch (message.messageType) {\r\n                case NavigationMessageNames.navigate:\r\n                    if (message.messageData) {\r\n                        let anchor: JQuery = null;\r\n\r\n                        if (message.messageData === \"next\") {\r\n                            anchor = this.moveToNextNode();\r\n                        } else if (message.messageData === \"previous\") {\r\n                            anchor = this.moveToPreviousNode();\r\n                        }\r\n\r\n                        if (anchor != null && anchor.length) {\r\n\r\n                            this._ignoreSyncRequest = false;\r\n                            this.syncTocNode(anchor);\r\n\r\n                            // Ignore the next ToC node sync request as it will come from the webframe when the content has finished loading\r\n                            this._ignoreSyncRequest = true;\r\n\r\n                            if (anchor.attr(\"href\").substring(0, 1) !== \"#\") {\r\n                                const webframe: Window = window.parent.parent;\r\n                                Messaging.routeMessageToWindow(webframe, NavigationMessageNames.navigate, anchor.attr(\"href\"));\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case NavigationMessageNames.updateNavigationButtons:\r\n                    this.updateNavigationButtons();\r\n                    break;\r\n                case NavigationMessageNames.syncTableOfContents:\r\n                    this.syncTocNodeToUrl(message.messageData);\r\n                    break;\r\n                // No default\r\n            }\r\n        }\r\n\r\n        protected updateNavigationButtons(): void {\r\n            Messaging.routeMessageToWindow(\r\n                window.parent,\r\n                NavigationMessageNames.toggleTocNext,\r\n                this.isLastNodeSelected() ? \"true\" : \"false\");\r\n            Messaging.routeMessageToWindow(\r\n                window.parent,\r\n                NavigationMessageNames.toggleTocPrevious,\r\n                this.isFirstNodeSelected() ? \"true\" : \"false\");\r\n        }\r\n\r\n        protected moveToNextNode(): JQuery {\r\n            return this._moveNode(false);\r\n        }\r\n\r\n        protected moveToPreviousNode(): JQuery {\r\n            return this._moveNode(true);\r\n        }\r\n\r\n        protected setSelectedNode(anchor: JQuery): void {\r\n            this._selectedNodeIndex = parseInt(anchor.attr(\"data-node-index\"), 10);\r\n            this._selectedNodeHref = anchor.attr(\"href\");\r\n        }\r\n\r\n        protected isLastNodeSelected(): boolean {\r\n\r\n            if (this._tocNodeCount === -1) {\r\n                this._tocNodeCount = this._getAnchors().length;\r\n            }\r\n\r\n            return this._selectedNodeIndex === this._lastNodeIndex;\r\n        }\r\n\r\n        protected isFirstNodeSelected(): boolean {\r\n            return this._selectedNodeIndex === this._firstNodeIndex;\r\n        }\r\n\r\n        private _getAnchors(): JQuery {\r\n            return this._rootSelector.find(\"#i-toc-container > ul#i-root a[data-node-index]\");\r\n        }\r\n\r\n        private _moveNode(isPrevious: boolean) {\r\n\r\n            const anchors: JQuery = this._getAnchors();\r\n\r\n            if (isPrevious) {\r\n                if (this._selectedNodeIndex > 0) {\r\n                    do {\r\n                        this._selectedNodeIndex--;\r\n                    } while (anchors.eq(this._selectedNodeIndex)\r\n                        .attr(\"href\")\r\n                        .substring(0, 1) === \"#\" && this._selectedNodeIndex > 0);\r\n                }\r\n            } else {\r\n                if (anchors.length - 1 > this._selectedNodeIndex) {\r\n                    do {\r\n                        this._selectedNodeIndex++;\r\n                    } while (anchors.eq(this._selectedNodeIndex)\r\n                        .attr(\"href\")\r\n                        .substring(0, 1) === \"#\" && anchors.length - 1 > this._selectedNodeIndex);\r\n                }\r\n            }\r\n\r\n            return anchors.eq(this._selectedNodeIndex);\r\n        }\r\n\r\n        protected isPageSelected(anchor: JQuery): boolean {\r\n            return (anchor.attr(\"href\") === this._selectedNodeHref);\r\n        }\r\n\r\n        protected constructDesktopToc(root: JQuery): void {\r\n            this.processListElement(root);\r\n        }\r\n\r\n        protected expandOrCollapseClickHandler(event: JQueryEventObject): void {\r\n            const siblingList = $(event.target).nextAll(\"ul\") as JQuery<HTMLElement>;\r\n            this.expandOrCollapseNode(siblingList, true);\r\n        }\r\n\r\n        protected nodeClickHandler(element: JQuery): void {\r\n\r\n            this.selectNodeElement(element);\r\n\r\n            if (element.attr(\"href\") !== \"#\") {\r\n                Messaging.routeMessageToWindow((window.parent.parent as Window), NavigationMessageNames.navigate, element.attr(\"href\"));\r\n            }\r\n\r\n            // Don't collapse the nested list when clicking on a node (do expand it if it is collapsed)\r\n            if (!$(element)\r\n                .prev(\"ins\")\r\n                .hasClass(\"i-collapse\")) {\r\n\r\n                // expand /collapse child\r\n                const siblingList = element.nextAll(\"ul\");\r\n                this.expandOrCollapseNode(siblingList, true);\r\n            }\r\n\r\n            this.updateNavigationButtons();\r\n\r\n        }\r\n\r\n        protected selectNodeElement(element: JQuery): void {\r\n\r\n            if (this._lastSelectedNode != null) {\r\n                // Remove selected highlighting from previously selected node\r\n                this._lastSelectedNode.removeClass(\"i-selected\");\r\n            }\r\n\r\n            element.removeClass(\"i-hover\");\r\n            element.addClass(\"i-selected\");\r\n\r\n            this._lastSelectedNode = element;\r\n\r\n\r\n            this.setSelectedNode(element);\r\n        }\r\n\r\n        protected expandOrCollapseNode(listElement: JQuery, isAnimationEnabled: boolean = true): void {\r\n\r\n            if (listElement.length) {\r\n\r\n                if (listElement.length > 1) {\r\n                    // Process individually\r\n                    listElement.each((_: number, element: HTMLElement) => {\r\n                        this.expandOrCollapseNode($(element), isAnimationEnabled);\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                if (!listElement.hasClass(\"i-visible\")) {\r\n                    this.processListElement(listElement);\r\n                }\r\n\r\n                if (isAnimationEnabled) {\r\n                    listElement.slideToggle(tableOfContentsConstants.slideToggleDelay, () => {\r\n                        listElement.toggleClass(\"i-visible\");\r\n                        listElement.css(\"display\", \"\");\r\n                    });\r\n                } else {\r\n                    listElement.toggleClass(\"i-visible\");\r\n                }\r\n\r\n                // Swap icons for open and closed books\r\n                const icon: JQuery = listElement.prev(\"a\").children(\"ins\");\r\n                if (icon.hasClass(\"i-icon-1\")) {\r\n                    icon.removeClass(\"i-icon-1\").addClass(\"i-icon-2\");\r\n                } else if (icon.hasClass(\"i-icon-2\")) {\r\n                    icon.removeClass(\"i-icon-2\").addClass(\"i-icon-1\");\r\n                } else if (icon.hasClass(\"i-icon-3\")) {\r\n                    icon.removeClass(\"i-icon-3\").addClass(\"i-icon-4\");\r\n                } else if (icon.hasClass(\"i-icon-4\")) {\r\n                    icon.removeClass(\"i-icon-4\").addClass(\"i-icon-3\");\r\n                }\r\n\r\n                listElement.prevAll(\"ins\").toggleClass(\"i-expand i-collapse\");\r\n\r\n            }\r\n\r\n        }\r\n\r\n        protected processListElement(listElement: JQuery): void {\r\n\r\n            if (listElement.length) {\r\n\r\n                if (listElement.length > 1) {\r\n                    // Process individually\r\n                    listElement.each((_: number, element: HTMLElement) => {\r\n                        this.processListElement($(element));\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                if (listElement.hasClass(\"i-root\")) {\r\n                    listElement.addClass(\"i-visible\");\r\n                }\r\n\r\n                listElement.children(\"li\").each((_: number, listItemElement: HTMLElement) => {\r\n\r\n                    let hasNestedList = false;\r\n                    const listItem: JQuery = $(listItemElement);\r\n\r\n                    listItem.children(\"ul\").each((__: number, childListElement: HTMLElement) => {\r\n                        if ($(childListElement).children().length > 0) {\r\n                            hasNestedList = true;\r\n                        } else {\r\n                            // Remove any empty <ul> elements\r\n                            $(childListElement).remove();\r\n                        }\r\n                    });\r\n\r\n                    const anchor: JQuery = listItem.children(\"a\");\r\n\r\n                    // Add an <ins> node for the expand / collapse icon if one doesn't already exist\r\n                    if (listItemElement.firstChild.nodeName !== \"INS\") {\r\n                        const spacer: JQuery = $(\"<ins class=\\\"i-spacer\\\"></ins>\");\r\n\r\n                        if (hasNestedList) {\r\n                            spacer.addClass(\"i-expandorcollapse\");\r\n                            spacer.addClass(\"i-expand\");\r\n                            spacer\r\n                                .off(\"click.toc\")\r\n                                .on(\"click.toc\", (event: JQueryEventObject) => {\r\n                                    this.expandOrCollapseClickHandler(event);\r\n                                });\r\n                        }\r\n\r\n                        spacer.prependTo(listItem);\r\n                    }\r\n\r\n                    // Add an <ins> node for the node icon\r\n                    if (anchor.children(\"ins\").length === 0) {\r\n                        const icon: JQuery = $(\"<ins class=\\\"i-icon\\\"></ins>\");\r\n                        const iconIndex: number = parseInt(listItem.attr(\"rel\"), 10);\r\n                        let iconClassIndex = iconIndex;\r\n                        const isNew = listItem.data(\"is-new\") === \"True\";\r\n\r\n                        if (hasNestedList) {\r\n                            if (iconIndex <= 0) {\r\n                                if (isNew) {\r\n                                    iconClassIndex = tableOfContentsConstants.iconIndexFolderNew;\r\n                                } else {\r\n                                    iconClassIndex = tableOfContentsConstants.iconIndexFolder;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (iconIndex <= 0) {\r\n                                if (isNew) {\r\n                                    iconClassIndex = tableOfContentsConstants.iconIndexPageNew;\r\n                                } else {\r\n                                    iconClassIndex = tableOfContentsConstants.iconIndexPage;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        icon.addClass(`i-icon-${iconClassIndex}`);\r\n                        icon.prependTo(anchor);\r\n                    }\r\n\r\n                    anchor\r\n                        .off(\"click.toc\")\r\n                        .on(\"click.toc\", (event: JQueryEventObject) => {\r\n                            this.nodeClickHandler($(event.currentTarget) as JQuery<HTMLElement>);\r\n                            event.preventDefault();\r\n                            Browser.stopPropagation(event);\r\n                        });\r\n\r\n                    anchor\r\n                        .off(\"hover.toc\")\r\n                        .on(\"hover.toc\",\r\n                            (event: JQueryEventObject) => {\r\n                                if (!$(event.currentTarget).hasClass(\"i-selected\")) {\r\n                                    $(event.currentTarget).addClass(\"i-hover\");\r\n                                }\r\n                            },\r\n                            (event: JQueryEventObject) => {\r\n                                $(event.currentTarget).removeClass(\"i-hover\");\r\n                            });\r\n\r\n                });\r\n\r\n            }\r\n        }\r\n\r\n        public syncTocNodeToUrl(url: string): void {\r\n\r\n            if (!this._isTocConstructed) {\r\n                // ToC not available yet, postpone.\r\n                this.syncTocUrl = url;\r\n\r\n                return;\r\n            }\r\n\r\n            const anchor: JQuery = $(`div#i-toc-container > ul a[href=\"${decodeURIComponent(url)}\"]`, this._rootSelector).first();\r\n\r\n            if (anchor != null\r\n                && anchor.length\r\n                && !this._ignoreSyncRequest\r\n                && !this.isPageSelected(anchor)) {\r\n\r\n                this.setSelectedNode(anchor);\r\n                this.syncTocNode(anchor);\r\n            }\r\n\r\n            if (this._ignoreSyncRequest) {\r\n                this._ignoreSyncRequest = false;\r\n            }\r\n\r\n        }\r\n\r\n        public syncTocNode(anchor: JQuery): void {\r\n\r\n            if (this._isMobileToc) {\r\n                this.setSelectedNode(anchor);\r\n                const parentList: JQuery = anchor.parent().closest(\"ul\");\r\n                this.buildToCPage(parentList.attr(\"id\"));\r\n            } else {\r\n                // Only sync if there wasn't a previously selected node or the new node is different from the currently selected node\r\n                if (anchor.length && ((this._lastSelectedNode != null\r\n                    && anchor.data(\"node-index\") !== this._lastSelectedNode.data(\"node-index\")) || this._lastSelectedNode == null)) {\r\n\r\n                    this.selectNodeElement(anchor);\r\n                    this.expandParents(anchor, false);\r\n\r\n                    // scroll selected anchor into view (don't use scrollInToView here as that causes problems with the iframe)\r\n                    $(\"html, body\").animate({\r\n                        scrollTop: anchor.offset().top\r\n                    }, tableOfContentsConstants.slideToggleDelay);\r\n\r\n                    this.updateNavigationButtons();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        protected expandParents(element: JQuery, isAnimationEnabled: boolean, parents: JQuery[] = null): void {\r\n\r\n            const parentListElement: JQuery = element.parent().closest(\"ul\");\r\n\r\n            if (parentListElement.length === 0) {\r\n\r\n                for (let i = parents.length - 1; i > -1; i--) {\r\n                    this.expandOrCollapseNode(parents[i], isAnimationEnabled);\r\n                }\r\n\r\n                return;\r\n            } else {\r\n\r\n                if (typeof parents === \"undefined\" || parents == null) {\r\n                    parents = [];\r\n                }\r\n\r\n                // Only expand if it isn't the root, isn't already expanded or hasn't been procesed yet\r\n                if (!parentListElement.hasClass(\"i-root\")) {\r\n                    const spacer = parentListElement.prevAll(\"ins.i-spacer\");\r\n\r\n                    if (spacer.length === 0 || spacer.hasClass(\"i-expand\")) {\r\n                        parents.push(parentListElement);\r\n                    }\r\n                }\r\n\r\n                this.expandParents(parentListElement, isAnimationEnabled, parents);\r\n            }\r\n\r\n        }\r\n\r\n        protected buildToCPage(listId: string): void {\r\n\r\n            if (listId === \"i-root\") {\r\n                listId = \"i-root-node\";\r\n            }\r\n\r\n            const tocPageId: string = listId;\r\n            if (listId === \"i-root-node\") {\r\n                listId = \"i-root\";\r\n            }\r\n\r\n            if ($.mobile.activePage.length && $.mobile.activePage.attr(\"id\") === listId) {\r\n                // Current active ToC page so just highlight the selected Url\r\n                this._highlightSelectedNode();\r\n\r\n                return;\r\n            }\r\n\r\n            // If the ToC page already exists in the DOM then just change to it\r\n            if ($(`div#${tocPageId}`, this._rootSelector).length) {\r\n                $.mobile.changePage($(`div#${tocPageId}`, this._rootSelector), { dataUrl: tocPageId });\r\n\r\n                return;\r\n            }\r\n\r\n            const list: JQuery = $(`ul#${listId}`, this._rootSelector).first();\r\n            const title: string = list.prev(\"a\").text();\r\n            let backId: string = list\r\n                .parent()\r\n                .closest(\"ul\")\r\n                .attr(\"id\");\r\n            const newPage: JQuery = $(`<div data-role=\"page\" id=\"${tocPageId}\"></div>`);\r\n            const header: JQuery = $(\"<div data-role=\\\"header\\\" data-theme=\\\"b\\\"></div>\");\r\n\r\n            if (backId === \"i-root\") {\r\n                backId = \"i-root-node\";\r\n            }\r\n\r\n            if (listId !== \"i-root\") {\r\n                // Add a header to all child pages\r\n                // Add a back button to the header (just icon no text)\r\n                $(`<a href=\"#${backId}\" data-icon=\"arrow-l\" data-iconpos=\"notext\">Back</a>`).appendTo(header);\r\n                $(`<h1>${title}</h1>`).appendTo(header);\r\n                header.appendTo(newPage);\r\n            }\r\n\r\n            const pageList: JQuery = list.clone();\r\n            // remove any nested lists\r\n            pageList.find(\"ul\").remove();\r\n            // remove any inline css (i.e. display: none on root page)\r\n            pageList.css(\"display\", \"\");\r\n            // display as a JQM listview\r\n            pageList.attr(\"data-role\", \"listview\");\r\n            // get rid of the temporary id from the cloned list\r\n            pageList.removeAttr(\"id\");\r\n            // remove the \">\" icon from links directly to pages\r\n            pageList.find(\"a:not(a[href^='#node-'])\")\r\n                .closest(\"li\")\r\n                .attr(\"data-icon\", \"false\");\r\n\r\n            pageList.appendTo(newPage);\r\n\r\n            // Add the new page to the main container, mobile-ize it then transition to it\r\n            newPage.appendTo($(\"div#i-toc-container\", this._rootSelector));\r\n            newPage.page();\r\n            $.mobile.changePage(newPage, { dataUrl: tocPageId });\r\n\r\n            // Highlight the selected node\r\n            this._highlightSelectedNode();\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _onBeforePageChange(event: JQuery.Event, pageData: any): void {\r\n\r\n            // data.toPage will be the page href on the first call (div element on the second)\r\n            if (typeof pageData.toPage === \"string\") {\r\n\r\n                if (pageData.toPage.match(/(#node-(\\d+)|#i-root-node)/)) {\r\n                    const pageId: string = pageData.toPage.substring(\r\n                        pageData.toPage.lastIndexOf(\"#\") as number + 1,\r\n                        pageData.toPage.length);\r\n\r\n                    if ($(`div#${pageId}`).length === 0) {\r\n                        // Build the new ToC page and prevent JQM from handling this event\r\n                        this.buildToCPage(pageId);\r\n                        event.preventDefault();\r\n                    }\r\n                } else {\r\n                    event.preventDefault();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        private _onVirtualClick(event: JQueryEventObject) {\r\n\r\n            const anchor = $(event.target) as JQuery<HTMLElement>;\r\n\r\n            // Intercept clicks to content links here as we need to query the anchor element\r\n            if (anchor.attr(\"href\") != null\r\n                && anchor.attr(\"href\").substring(0, 1) !== \"#\") {\r\n\r\n                event.preventDefault();\r\n\r\n                this.setSelectedNode(anchor);\r\n                this._highlightSelectedNode();\r\n                // Ignore the next ToC node sync request as it will come from the webframe when the content has finished loading\r\n                this._ignoreSyncRequest = true;\r\n\r\n                const webContentFrame = window.parent.parent;\r\n                if (typeof webContentFrame != \"undefined\") {\r\n                    Messaging.routeMessageToWindow(webContentFrame, NavigationMessageNames.navigate, anchor.attr(\"href\"));\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _onPageChange(_: JQueryEventObject, pageData: any): void {\r\n            // Called after sucessfully switching to the next ToC page, if the page we came from isn't the\r\n            // root page then remove it from the DOM\r\n            if (typeof pageData.options.fromPage != \"undefined\"\r\n                && pageData.toPage.attr(\"id\") !== pageData.options.fromPage.attr(\"id\")) {\r\n\r\n                pageData.options.fromPage.remove();\r\n            }\r\n\r\n            this._highlightSelectedNode();\r\n        }\r\n\r\n        protected constructMobileToC(): void {\r\n\r\n            $(document)\r\n                .off(\"pagebeforechange.toc\")\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                .on(\"pagebeforechange.toc\", (event: JQuery.Event, pageData: any) => {\r\n                    this._onBeforePageChange(event, pageData);\r\n                });\r\n\r\n            $(document)\r\n                .off(\"pagechange.toc\")\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                .on(\"pagechange.toc\", (event: any, pageData: any) => {\r\n                    this._onPageChange(event as JQueryEventObject, pageData);\r\n                });\r\n\r\n            this._rootSelector\r\n                .off(\"vclick.toc\")\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                .on(\"vclick.toc\", (event: any) => {\r\n                    this._onVirtualClick(event as JQueryEventObject);\r\n                });\r\n\r\n            let tocNodeIndex = 0;\r\n\r\n            $(\"li>a\", this._rootSelector).each((_: number, anchorElement: HTMLAnchorElement) => {\r\n                const ul = $(anchorElement).next(\"ul\");\r\n                if (ul.length) {\r\n                    if ($(anchorElement).attr(\"href\") !== \"#\") {\r\n                        // If the li has a link to a page then add a new li to the child ul so that it will be displayed\r\n                        // as the first item on the new page\r\n                        const listItem = $(\"<li></li>\").prepend($(anchorElement).clone());\r\n                        ul.prepend(listItem);\r\n                    }\r\n                    // Add an id to the list element which will be moved to the page div later\r\n                    ul.attr(\"id\", `node-${tocNodeIndex}`);\r\n                    // Point the anchor in the list item to the child list\r\n                    $(anchorElement).attr(\"href\", `#node-${tocNodeIndex}`);\r\n                    tocNodeIndex++;\r\n                }\r\n            });\r\n\r\n            // Index the anchor nodes again as they will have changed since loading the page\r\n            this._indexNodes();\r\n\r\n            // Add the root page\r\n            const rootPage: JQuery = $(\"<div data-role=\\\"page\\\" id=\\\"i-root-node\\\"></div>\");\r\n            const rootList: JQuery = $(\"ul#i-root\")\r\n                .clone()\r\n                .removeAttr(\"id\")\r\n                .removeAttr(\"style\")\r\n                .attr(\"data-role\", \"listview\");\r\n            rootList.find(\"ul\").remove();\r\n            rootList.find(\"a:not(a[href*='#node-'])\")\r\n                .closest(\"li\")\r\n                .attr(\"data-icon\", \"false\");\r\n            rootList.appendTo(rootPage);\r\n            rootPage.appendTo($(\"div#i-toc-container\", this._rootSelector));\r\n\r\n            // Manually initialize JQM\r\n            $.mobile.initializePage();\r\n\r\n        }\r\n\r\n        private _highlightSelectedNode(): void {\r\n            $(\"div.ui-page a.ui-btn-active\", this._rootSelector)\r\n                .removeClass(\"ui-btn-active\");\r\n            $(\"div.ui-page li\", this._rootSelector)\r\n                .find(`a[data-node-index=\"${this._selectedNodeIndex}\"]`)\r\n                .first()\r\n                .addClass(\"ui-btn-active\");\r\n        }\r\n\r\n        private _indexNodes(): void {\r\n            let nodeIndex = 0;\r\n            $(\"ul.i-root a\", this._rootSelector).each((_: number, element: Element) => {\r\n                if (this._firstNodeIndex === -1\r\n                    && $(element)\r\n                        .attr(\"href\")\r\n                        .substring(0, 1) !== \"#\") {\r\n\r\n                    this._firstNodeIndex = nodeIndex;\r\n                }\r\n                $(element).attr(\"data-node-index\", nodeIndex);\r\n                nodeIndex++;\r\n            });\r\n            this._lastNodeIndex = nodeIndex - 1;\r\n        }\r\n\r\n    }\r\n\r\n    export class TableOfContentsDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new TableOfContentsDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.TableOfContentsDocumentFeatureFactory());\r\n\r\n// Disable JQM page initialization\r\n$(document)\r\n    .off(\"mobileinit.navigation\")\r\n    .on(\"mobileinit.navigation\", () => {\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        ($ as any).mobile.autoInitializePage = false;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        ($ as any).mobile.defaultPageTransition = \"none\";\r\n    });\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const topFrameConstants = {\r\n        iFrameResizeDelay: 500,\r\n        navBarSwingDuration: 600,\r\n        navBarCloseDuration: 400,\r\n        syncDelay: 500,\r\n        widthDivisor: 0.5\r\n    };\r\n\r\n    export class TopFrameDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public defaultTopic: string = null;\r\n        public baseTitle: string = null;\r\n        private _rootSelector: JQuery = null;\r\n        private _responsiveProfileName = \"desktop\";\r\n        private _isIframeResizeTimerDisabled = false;\r\n        private _isEnabled = false;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public layout: any = null;\r\n\r\n        private static _fixSubPixelWidth(element: JQuery): void {\r\n            element.width(Math.floor($(window).width() * element.data(\"widthDivisor\")));\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"TopFrame\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n                this._rootSelector = rootSelector;\r\n                this.baseTitle = document.title;\r\n            }\r\n\r\n            this._isEnabled = ($(\"#i-top-frame-container\", rootSelector).length > 0);\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            this._responsiveProfileName = configuration.profileName;\r\n\r\n            if (configuration.profileName === \"desktop\") {\r\n\r\n                // Desktop\r\n\r\n                this.layout = $(\".i-layout-container\", this.documentInstance.rootSelector).layout({\r\n                    resizeWhileDragging: true,\r\n                    /* eslint-disable-next-line @typescript-eslint/naming-convention */\r\n                    west__size: 270,\r\n                    maskIframesOnResize: true\r\n                });\r\n\r\n                this.onContentLoaded(null);\r\n\r\n            } else {\r\n\r\n                // Tablet & Mobile\r\n\r\n                $(\"iframe#i-nav\", this.documentInstance.rootSelector)\r\n                    .css(\"left\", -$(window).width())\r\n                    .css(\"display\", \"block\");\r\n\r\n                $(window).resize(() => {\r\n                    if ($(\"iframe#i-nav\", this.documentInstance.rootSelector).css(\"left\") !== \"0px\") {\r\n                        $(\"iframe#i-nav\", this.documentInstance.rootSelector).css(\"left\", -$(window).width());\r\n                    }\r\n                    TopFrameDocumentFeature._fixSubPixelWidth($(\"iframe#i-nav\", this.documentInstance.rootSelector));\r\n                });\r\n\r\n                // Scroll back to the top of page on a new page load\r\n                $(\"iframe#i-content\", this._rootSelector)\r\n                    .on(\"load.topframe\", () => {\r\n                        this._rootSelector.scrollTop(0);\r\n                    });\r\n\r\n                this.onContentLoaded(null);\r\n\r\n                // Resize the iframes and set a timer to keep them sized\r\n                Browser.resizeIFrames(this._rootSelector);\r\n                setInterval(() => {\r\n                    if (!this._isIframeResizeTimerDisabled) {\r\n                        const maxHeight: number = Browser.resizeIFrames(this._rootSelector);\r\n                        if (maxHeight > 0 && maxHeight !== $(\"body\").height()) {\r\n                            this._rootSelector.height(maxHeight);\r\n                        }\r\n                    }\r\n                }, topFrameConstants.iFrameResizeDelay);\r\n            }\r\n\r\n            this.navigate(this.getDefaultTopic());\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            switch (message.messageType) {\r\n                case NavigationMessageNames.updateNavigationButtons:\r\n                    // Route to webnav\r\n                    Messaging.routeMessageToFrameElement(\"i-nav\", message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.loaded:\r\n                    this.onContentLoaded(message.messageData);\r\n                    // Forward message to webnav\r\n                    Messaging.routeMessageToFrameElement(\"i-nav\", message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.updatePageTitle:\r\n                    this.updatePageTitle(message.messageData);\r\n                    break;\r\n                case DocumentMessageNames.quickSearch:\r\n                case DocumentMessageNames.searchHighlightComplete:\r\n                case NavigationMessageNames.insertRemoveHighlighting:\r\n                    // Pass to content window\r\n                    Messaging.routeMessageToFrameElement(\"i-content\", message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.navigate:\r\n                    this.navigate(message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.openNavigationPane:\r\n                    this.openNavigationPane(message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.closeNavigationPane:\r\n                    this.closeNavigationPane();\r\n                    break;\r\n                // No default\r\n            }\r\n        }\r\n\r\n        protected openNavigationPane(messageData: string): void {\r\n\r\n            this._isIframeResizeTimerDisabled = true;\r\n\r\n            // Activate the desired item in the navigation bar\r\n            Messaging.routeMessageToFrameElement(\"i-nav\", NavigationMessageNames.select, messageData);\r\n\r\n            switch (this._responsiveProfileName) {\r\n                case \"mobile\":\r\n                    $(\"#i-nav\", this.documentInstance.rootSelector).css(\"width\", \"100%\");\r\n                    break;\r\n                case \"tablet\":\r\n                    $(\"iframe#i-nav\", this.documentInstance.rootSelector)\r\n                        .css(\"width\", \"50%\")\r\n                        .data(\"widthDivisor\", topFrameConstants.widthDivisor);\r\n                    TopFrameDocumentFeature._fixSubPixelWidth($(\"iframe#i-nav\", this.documentInstance.rootSelector));\r\n                    break;\r\n                // No default\r\n            }\r\n\r\n            if (this._responsiveProfileName !== \"desktop\") {\r\n                // Resize webnav and webcontent to their content height\r\n                Browser.resizeIFrames(this._rootSelector, true);\r\n\r\n                // Show the gray overlay\r\n                $(\"#i-busy\", this.documentInstance.rootSelector).show();\r\n\r\n                // Bring in the navbar\r\n                $(\"iframe#i-nav\", this.documentInstance.rootSelector)\r\n                    .css(\"visibility\", \"visible\")\r\n                    .animate({ left: \"0\" }, topFrameConstants.navBarSwingDuration, \"swing\", () => {\r\n                        this._isIframeResizeTimerDisabled = false;\r\n                    });\r\n            }\r\n\r\n        }\r\n\r\n        protected closeNavigationPane(): void {\r\n            if (this._responsiveProfileName === \"desktop\") {\r\n                return;\r\n            }\r\n\r\n            if ($(\"iframe#i-nav\", this.documentInstance.rootSelector).css(\"left\") === \"0px\") {\r\n                this._isIframeResizeTimerDisabled = true;\r\n\r\n                // Close the navbar\r\n                $(\"iframe#i-nav\", this.documentInstance.rootSelector).animate({\r\n                    left: `-${$(\"iframe#i-nav\").css(\"width\")}`\r\n                }, topFrameConstants.navBarCloseDuration, \"swing\", () => {\r\n                    $(\"iframe#i-nav\", this.documentInstance.rootSelector)\r\n                        .css(\"visibility\", \"hidden\");\r\n                    // Remove the gray overlay\r\n                    $(\"#i-busy\", this.documentInstance.rootSelector).hide();\r\n                    // Resize the navbar back to default - window height\r\n                    $(\"iframe#i-nav\", this.documentInstance.rootSelector).height($(window).height())\r\n                        .data(\"last-height\", $(window).height());\r\n                    // Tell the navbar to shrink it's frame sizes\r\n                    Messaging.routeMessageToFrameElement(\"i-nav\", NavigationMessageNames.shrinkIFrames, null);\r\n                    this._isIframeResizeTimerDisabled = false;\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n        protected getCurrentPageName(): string {\r\n\r\n            const location = Browser.getLocationInfo();\r\n            if (location.hash !== \"\") {\r\n                return location.hash.substring(1);\r\n            } else {\r\n                return this.getDefaultTopic();\r\n            }\r\n\r\n        }\r\n\r\n        protected onContentLoaded(url: string): void {\r\n\r\n            this.updateLocation(url);\r\n\r\n            setTimeout(() => {\r\n                Messaging.routeMessageToFrameElement(\"i-nav\", NavigationMessageNames.syncTableOfContents, this.getCurrentPageName());\r\n            }, topFrameConstants.syncDelay);\r\n\r\n            if (this._responsiveProfileName !== \"desktop\") {\r\n                Messaging.routeMessageToFrameElement(\"i-content\", DocumentMessageNames.insertNavigationHeader, null);\r\n            }\r\n\r\n        }\r\n\r\n        protected updatePageTitle(pageTitle: string): void {\r\n            if (pageTitle != null) {\r\n                document.title = `${this.baseTitle} - ${pageTitle}`;\r\n            }\r\n        }\r\n\r\n        protected updateLocation(url: string): void {\r\n\r\n            if (url != null) {\r\n                const location = Browser.getLocationInfo();\r\n                const pageName: string = url.substring(url.lastIndexOf(\"/\") + 1);\r\n                if (`#${pageName}` !== location.hash && `?${pageName}` !== location.search) {\r\n                    Browser.replaceLocation(pageName);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        public getDefaultTopic(): string {\r\n\r\n            let topic = null as string;\r\n\r\n            const location = Browser.getLocationInfo();\r\n            const qs: string = location.search;\r\n            if (qs != null && qs.length > 0) {\r\n                topic = qs.substring(1) + location.hash;\r\n            } else if (location.hash != null && location.hash.length > 0) {\r\n                topic = location.hash.substring(1);\r\n            }\r\n\r\n            if (topic == null || this.isUrl(topic)) {\r\n                topic = this.defaultTopic;\r\n            }\r\n\r\n            return topic;\r\n        }\r\n\r\n        private isUrl(possibleUrl: string): boolean {\r\n            return /^[\\d\\D\\.]*:/.test(possibleUrl);\r\n        }\r\n\r\n        protected navigate(messageData: string): void {\r\n\r\n            // ToC previous/next navigation\r\n            if (messageData === \"next\" || messageData === \"previous\") {\r\n                Messaging.routeMessageToFrameElement(\"i-nav\", \"navigate\", messageData);\r\n            } else {\r\n                // Navigate to specific page\r\n                const location = Browser.getLocationInfo();\r\n                if ($(\"#i-content\", this._rootSelector).attr(\"src\") !== messageData\r\n                    || (location.hash.length > 0 && location.hash.substring(1) !== messageData)\r\n                    || (location.search.length > 0 && location.search.substring(1) !== messageData)\r\n                    || (location.hash.length === 0 && location.search.length === 0)) {\r\n\r\n                    // Default content frame height back to the window height - to stop the content frame\r\n                    //  growing to the largest doc size over time\r\n                    if (this._responsiveProfileName !== \"desktop\") {\r\n                        $(\"#i-content\", this._rootSelector).height($(window).height());\r\n                    }\r\n                    $(\"#i-content\", this._rootSelector).attr(\"src\", messageData);\r\n                }\r\n                if (this._responsiveProfileName !== \"desktop\") {\r\n                    this.closeNavigationPane();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Forces a specific responsive display mode when the document loads. The forced display mode is set in local storage\r\n         *  so will be used by all subsequent page loads until it is reset.\r\n         */\r\n        public setForcedDisplayMode(displayMode: string): void {\r\n            (this.documentInstance.getFeatureByName(\"Responsive\") as ResponsiveDocumentFeature).setForcedDisplayMode(displayMode);\r\n            if (displayMode != null) {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const overrides: any = (Innovasys as any).overrides\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    || (Innovasys as any).settings\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    || ((Innovasys as any).settings = (Innovasys as any).overrides = {});\r\n                $.extend(overrides, {\r\n                    forcedDisplayMode: displayMode\r\n                });\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class TopFrameDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new TopFrameDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.TopFrameDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const searchConstants = {\r\n        enterKeyCode: 13,\r\n        minOperatorLength: 4\r\n    };\r\n\r\n    export class SearchFile {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public url: string, public title: string, public rank: number) {\r\n\r\n        }\r\n    }\r\n\r\n    export class SearchTermWordMatch {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public searchTerm: string, public matchedWords: string[]) {\r\n\r\n        }\r\n    }\r\n\r\n    export class SearchResult {\r\n\r\n        public searchFile: SearchFile;\r\n        public keywordPositions: number[][];\r\n\r\n        constructor(public fileIndex: number, public rank: number, public keywords: string, public searchTerms: string) {\r\n            this.rank = rank;\r\n        }\r\n\r\n    }\r\n\r\n    export class SearchDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _webSearchPendingHighlight: string = null;\r\n        private _rootSelector: JQuery = null;\r\n        private _isEnabled = false;\r\n        private _isFullTextSearchPositionDataAvailable = false;\r\n        private _isFullTextSearchObjects = false;\r\n        private _isFullTextSearchFrameless = false;\r\n        private _results: SearchResult[] = null;\r\n        private _clickedResult: SearchResult = null;\r\n        private _diacriticsHelper: DiacriticsHelper = null;\r\n\r\n        private static escapeForRegEx(source: string): string {\r\n            return source.replace(/[-\\/\\\\^$+.()|[\\]{}]/g, \"\\\\$&\");\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"Search\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n                this._rootSelector = rootSelector;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const overrides: IOverrides = ((Innovasys as any).overrides || (Innovasys as any).settings);\r\n                if (overrides != null && overrides.isFullTextSearchPositionDataAvailable) {\r\n                    this._isFullTextSearchPositionDataAvailable = true;\r\n                }\r\n                if (overrides != null && overrides.isFullTextSearchObjects) {\r\n                    this._isFullTextSearchObjects = true;\r\n                }\r\n                if (overrides != null && overrides.isFullTextSearchFrameless) {\r\n                    this._isFullTextSearchFrameless = true;\r\n                }\r\n            }\r\n\r\n            this._diacriticsHelper = new DiacriticsHelper;\r\n\r\n            if ($(\"#i-search-container\", this._rootSelector).length > 0) {\r\n\r\n                this._isEnabled = true;\r\n\r\n                $(\"#i-search\", rootSelector)\r\n                    .off(\"keyup.search\")\r\n                    .on(\"keyup.search\", (event: JQueryEventObject) => {\r\n                        if (event.keyCode === searchConstants.enterKeyCode) {\r\n                            $(\"#i-execute-search\").click();\r\n                        }\r\n                    });\r\n\r\n                $(\"#i-execute-search\", rootSelector)\r\n                    .off(\"click.search\")\r\n                    .on(\"click.search\", () => {\r\n                        this.executeSearch();\r\n                    });\r\n\r\n                $(\"#i-search-container\", this._rootSelector)\r\n                    .off(\"click.search\", \".i-result\")\r\n                    .on(\"click.search\", \".i-result\", (event: JQueryEventObject) => {\r\n                        event.preventDefault();\r\n                        this.showSearchResult($(event.target).attr(\"href\"), parseInt($(event.target).attr(\"data-result-index\"), 10));\r\n                    });\r\n\r\n            }\r\n\r\n            const querystringSearchText = Browser.getQueryStringParameter(\"query\");\r\n            if (querystringSearchText != null && querystringSearchText !== \"\") {\r\n                $(\"#i-search\", rootSelector).val(querystringSearchText);\r\n                this.executeSearch();\r\n            }\r\n\r\n        }\r\n\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            if (configuration.profileName !== \"desktop\") {\r\n                configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-execute-search\", ResponsiveClickTargetKind.block));\r\n            }\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            if (configuration.profileName !== \"desktop\") {\r\n                $(\"#i-highlight\", this._rootSelector).attr(\"checked\", \"true\");\r\n            }\r\n        }\r\n\r\n        protected executeSearch(): void {\r\n\r\n            // Show searching div\r\n            $(\"#i-search-container\", this._rootSelector).hide();\r\n            $(\"#i-searching-overlay\", this._rootSelector).show();\r\n\r\n            // do search\r\n            const searchResult = this.buildSearchResults();\r\n\r\n            // Show resuls div\r\n            $(\"#i-searching-overlay\", this._rootSelector).hide();\r\n            $(\"#i-search-container\", this._rootSelector).show();\r\n\r\n            // show results\r\n            if (searchResult === true) {\r\n                // show resulta div\r\n                $(\"#i-results\", this._rootSelector).show();\r\n            }\r\n\r\n        }\r\n\r\n        protected buildSearchResults(): boolean {\r\n\r\n            // get search string\r\n            let searchText: string = $(\"#i-search\", this._rootSelector).val() as string;\r\n            if (searchText.length === 0) {\r\n                return false;\r\n            }\r\n\r\n            // make lowercase for easy comparison later on\r\n            searchText = this._diacriticsHelper.removeDiacritics(searchText.toLowerCase());\r\n\r\n            // tokenise\r\n            const tokens = searchText.split(\" \");\r\n\r\n            // build keywords array & query string\r\n            let query = \"\";\r\n            let lastTokenWasOperator = true;\r\n            let lastTokenWasKeyword = false;\r\n            let phrase: string = null;\r\n            let searchTermIndex = 0;\r\n            const searchTerms: string[] = [];\r\n\r\n            for (let token of tokens) {\r\n\r\n                if (token.length > 0) {\r\n\r\n                    // strip out any delimiters & whitespace\r\n                    token = token.replace(new RegExp(\",\", \"ig\"), \"\");\r\n\r\n                    if (phrase != null) {\r\n                        phrase += (` ${token}`);\r\n                        if (token.charAt(token.length - 1) === \"\\\"\") {\r\n                            // Last word in the phrase. Set as the token and clear.\r\n                            token = phrase.substring(1, phrase.length - 1);\r\n                            phrase = null;\r\n                        } else {\r\n                            token = null;\r\n                        }\r\n                    } else if (token.charAt(0) === \"\\\"\") {\r\n                        // First word of a phrase\r\n                        phrase = token;\r\n                        token = null;\r\n                    }\r\n\r\n                    if (token != null) {\r\n\r\n                        // add to array\r\n                        if ((token === \"or\") || (token === \"and\")) {\r\n                            // only add it if not just had an operator\r\n                            if (lastTokenWasOperator === false) {\r\n                                // add to the query string\r\n                                if (token === \"or\") {\r\n                                    query += \" || \";\r\n                                } else if (token === \"and\") {\r\n                                    query += \" && \";\r\n                                }\r\n                                lastTokenWasOperator = true;\r\n                                lastTokenWasKeyword = false;\r\n                            }\r\n                        } else {\r\n\r\n                            // we just had a keyword ?\r\n                            if (lastTokenWasKeyword) {\r\n                                // add default OR operator\r\n                                query += \" || \";\r\n                            }\r\n\r\n                            // add to query string\r\n                            query += (`(searchTerms.indexOf(\"${token}\") >= 0)`);\r\n\r\n                            lastTokenWasOperator = false;\r\n                            lastTokenWasKeyword = true;\r\n\r\n                            // add to keywords array\r\n                            searchTerms[searchTermIndex] = token;\r\n                            searchTermIndex++;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if (searchTerms.length === 0) {\r\n                return false;\r\n            }\r\n\r\n            if (query !== \"\" && query.length > searchConstants.minOperatorLength) {\r\n                // Handle the case where the last word is an operator\r\n                if (query.substring(query.length - searchConstants.minOperatorLength) === \" && \"\r\n                    || query.substring(query.length - searchConstants.minOperatorLength) === \" || \") {\r\n                    query = query.substring(0, query.length - searchConstants.minOperatorLength);\r\n                }\r\n            }\r\n\r\n            // load files & stopwords arrays\r\n            const searchFiles: SearchFile[] = [];\r\n            const allWords: string[] = [];\r\n\r\n            if (this._isFullTextSearchObjects) {\r\n                // Pass constructor to initialization function\r\n                buildSearchFilesAndKeywords(searchFiles, allWords, SearchFile);\r\n            } else {\r\n                // Pass 2 arrays and build SearchFile array from them\r\n                const indexFiles: string[] = [];\r\n                const indexTitles: string[] = [];\r\n                buildSearchIndexArray(indexFiles, indexTitles, allWords);\r\n                for (let fileIndex = 0; fileIndex < indexFiles.length; fileIndex++) {\r\n                    const newSearchFile = new SearchFile(indexFiles[fileIndex], indexTitles[fileIndex], 0);\r\n                    searchFiles[fileIndex] = newSearchFile;\r\n                }\r\n            }\r\n\r\n            const allWordsDiact: {[key: string | number]: any} = [];\r\n\r\n            for (let word in allWords) {\r\n                allWordsDiact[this._diacriticsHelper.removeDiacritics(word)] = allWords[word];\r\n            }\r\n\r\n            // build list of files containing keywords\r\n            let searchResults: SearchResult[] = this.populateSearchResults(searchFiles, allWordsDiact, searchTerms);\r\n\r\n            // build results list\r\n            searchResults = this.buildResultsArray(query, searchResults);\r\n\r\n            // write results to document\r\n            this.outputResults(searchResults);\r\n\r\n            this._results = searchResults;\r\n\r\n            // return success\r\n            return true;\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        protected populateSearchResults(searchFiles: SearchFile[], allWords: {[key: string | number]: any}, searchTerms: string[]): SearchResult[] {\r\n\r\n            let searchResults: SearchResult[] = [];\r\n\r\n            // build lookup arrays\r\n            for (const searchTerm of searchTerms) {\r\n\r\n                const searchTermWordMatch: SearchTermWordMatch = new SearchTermWordMatch(searchTerm, []);\r\n\r\n                if (searchTerm.indexOf(\" \") !== -1) {\r\n\r\n                    // Phrase - find several matching words where the file matches the first word, and the\r\n                    //  relative position is the same as in the phrase\r\n                    const searchTermWords: string[] = searchTerm.split(\" \");\r\n                    const firstSearchTermWord: string = searchTermWords[0];\r\n                    let baseResults: SearchResult[] = this.populateSearchResults(searchFiles, allWords, [firstSearchTermWord]);\r\n\r\n                    for (const searchTermWord of searchTermWords) {\r\n\r\n                        const results: SearchResult[] = this.populateSearchResults(searchFiles, allWords, [searchTermWord]);\r\n\r\n                        baseResults = $.map(baseResults, (baseResult: SearchResult): SearchResult => {\r\n\r\n                            if (typeof baseResult != \"undefined\") {\r\n\r\n                                // A search result for secondary phrase words requires that the words be in a file we\r\n                                //  have already found at the base result + searchTermWordIndex\r\n                                const matchingBaseResults: SearchResult[] = $.map(results, (searchResult: SearchResult): SearchResult => {\r\n\r\n                                    if (typeof searchResult !== \"undefined\" && searchResult.fileIndex === baseResult.fileIndex) {\r\n\r\n                                        // Look for a match for any of the keywords in this result\r\n\r\n                                        const thisKeywords: string[] = searchResult.keywords.split(\",\");\r\n\r\n                                        let searchTermWordIndex = 0;\r\n\r\n                                        for (const thisKeyword of thisKeywords) {\r\n\r\n                                            if (thisKeyword !== \"\") {\r\n                                                // Matching position?\r\n                                                const matchingBasePositions: number[] =\r\n                                                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                                    $.map((baseResult.keywordPositions[(`_${firstSearchTermWord}`) as any]) as number[],\r\n                                                        (basePosition: number): number => {\r\n                                                            const matchingKeywordPositions: number[]\r\n                                                                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                                                = $.map(searchResult.keywordPositions[(`_${thisKeyword}`) as any],\r\n                                                                    (position: number): number => {\r\n                                                                        if (position === (basePosition + searchTermWordIndex)) {\r\n                                                                            return position;\r\n                                                                        } else {\r\n                                                                            return null;\r\n                                                                        }\r\n                                                                    });\r\n                                                            if (matchingKeywordPositions.length > 0) {\r\n                                                                return basePosition;\r\n                                                            } else {\r\n                                                                return null;\r\n                                                            }\r\n                                                        });\r\n\r\n                                                if (matchingBasePositions.length > 0) {\r\n                                                    // Found a match at the next word position in the same file\r\n                                                    // Add the keyword and rank to the base result\r\n                                                    baseResult.searchTerms = `${searchTerm},`;\r\n                                                    baseResult.keywords += searchResult.keywords;\r\n                                                    baseResult.rank += searchResult.rank;\r\n\r\n                                                    return baseResult;\r\n                                                }\r\n                                            }\r\n\r\n                                            searchTermWordIndex++;\r\n                                        }\r\n                                    }\r\n\r\n                                    return null;\r\n\r\n                                });\r\n\r\n                                if (matchingBaseResults.length > 0) {\r\n                                    return baseResult;\r\n                                } else {\r\n                                    return null;\r\n                                }\r\n\r\n                            }\r\n\r\n                            return null;\r\n                        });\r\n                    }\r\n\r\n                    return baseResults;\r\n\r\n                } else if (searchTerm.indexOf(\"*\") !== -1 || searchTerm.indexOf(\"?\") !== -1) {\r\n                    // Wildcard - find potentially several matching words\r\n                    const searchTermRegExp\r\n                        = new RegExp(`^${SearchDocumentFeature.escapeForRegEx(searchTerm)\r\n                            .replace(/\\*/g, \".*\")\r\n                            .replace(/\\?/g, \".\")}$`, \"i\");\r\n\r\n                    for (const word in allWords) {\r\n                        if (allWords.hasOwnProperty(word) && word.substring(1).match(searchTermRegExp) != null) {\r\n                            // Matched\r\n                            searchTermWordMatch.matchedWords.push(word.substring(1));\r\n                        }\r\n                    }\r\n                    // Sort on matched word length (reverse)\r\n                    searchTermWordMatch.matchedWords\r\n                        = searchTermWordMatch.matchedWords.sort((a: string, b: string): number => b.length - a.length);\r\n                } else {\r\n                    // Single word - just lookup in index and if found add to list of words\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    if (typeof allWords[`_${searchTerm}` as any] !== \"undefined\") {\r\n                        searchTermWordMatch.matchedWords.push(searchTerm);\r\n                    }\r\n                }\r\n\r\n                // All of the above will yield one or more words. We then go through the matched words, building a search result\r\n                //  entry with a ranking value.\r\n\r\n                if (searchTermWordMatch != null) {\r\n\r\n                    let searchTermWordMatchIndex = 0;\r\n\r\n                    for (const matchedWord of searchTermWordMatch.matchedWords) {\r\n\r\n                        // get indices of files containing word\r\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                        const matchedWordData = allWords[`_${searchTermWordMatch.matchedWords[searchTermWordMatchIndex]}` as any];\r\n\r\n                        // tokenize indices\r\n                        const fileIndexes = matchedWordData.split(\",\");\r\n\r\n                        for (const fileIndexValue of fileIndexes) {\r\n\r\n                            let fileIndex: number;\r\n                            let rank = 0;\r\n                            let positions: number[] = null;\r\n\r\n                            if (this._isFullTextSearchPositionDataAvailable) {\r\n                                // Store file index, position data and a rank value in the search result\r\n                                fileIndex = parseInt(fileIndexValue.split(\":\")[0], 10);\r\n                                const rankAsString: string = fileIndexValue.split(\":\")[1];\r\n\r\n                                positions = $.map(\r\n                                    rankAsString.split(\"|\"),\r\n                                    (positionAsString: string): number => parseInt(positionAsString, 10));\r\n\r\n                                if (positions.length > 0) {\r\n                                    rank = positions[0];\r\n                                }\r\n                            } else {\r\n                                // No positional data available - we store just the file index in the search result\r\n                                fileIndex = parseInt(fileIndexValue, 10);\r\n                            }\r\n\r\n                            let locatedSearchResult: SearchResult = null;\r\n                            if (typeof searchResults[fileIndex] === \"undefined\") {\r\n                                // New file not encountered yet\r\n                                locatedSearchResult = new SearchResult(\r\n                                    fileIndex,\r\n                                    rank,\r\n                                    `${matchedWord},`,\r\n                                    `${searchTermWordMatch.searchTerm},`);\r\n\r\n                                if (typeof searchFiles[fileIndex] != \"undefined\") {\r\n                                    // Store url and title\r\n                                    locatedSearchResult.searchFile = searchFiles[fileIndex];\r\n                                }\r\n                                searchResults[fileIndex] = locatedSearchResult;\r\n                            } else {\r\n                                // Existing file, add to the rank\r\n                                locatedSearchResult = searchResults[fileIndex];\r\n                                if (locatedSearchResult.keywords.indexOf(`${matchedWord},`) === -1) {\r\n                                    // New word match in this file\r\n                                    locatedSearchResult.rank += rank;\r\n                                    locatedSearchResult.keywords += (`${matchedWord},`);\r\n                                }\r\n                                if (locatedSearchResult.searchTerms.indexOf(`${searchTermWordMatch.searchTerm},`) === -1) {\r\n                                    // New search term match in this file\r\n                                    locatedSearchResult.rank += rank;\r\n                                    locatedSearchResult.searchTerms += (`${searchTermWordMatch.searchTerm},`);\r\n                                }\r\n                            }\r\n\r\n                            if (positions != null) {\r\n                                if (locatedSearchResult.keywordPositions == null) {\r\n                                    locatedSearchResult.keywordPositions = [];\r\n                                }\r\n                                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                locatedSearchResult.keywordPositions[(`_${matchedWord}`) as any] = positions;\r\n                            }\r\n\r\n                        }\r\n\r\n                        searchTermWordMatchIndex++;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Return array ordered by rank\r\n            if (this._isFullTextSearchPositionDataAvailable) {\r\n                searchResults = searchResults.sort((a: SearchResult, b: SearchResult): number => {\r\n                    let value = a.rank - b.rank;\r\n                    if (value === 0) {\r\n                        // Use file rank to disambiguate\r\n                        value = a.searchFile.rank - b.searchFile.rank;\r\n                        if (value === 0) {\r\n                            return a.fileIndex - b.fileIndex;\r\n                        }\r\n                    }\r\n\r\n                    return value;\r\n                });\r\n            }\r\n\r\n            return searchResults;\r\n        }\r\n\r\n        protected buildResultsArray(query: string, searchResults: SearchResult[]): SearchResult[] {\r\n            const results: SearchResult[] = [];\r\n\r\n            for (const searchResult of searchResults) {\r\n                if (typeof searchResult !== \"undefined\") {\r\n                    // Note: Used in eval below\r\n                    var searchTerms: string = searchResult.searchTerms;\r\n                    let result = false;\r\n                    try {\r\n                        /* eslint-disable-next-line no-eval */\r\n                        result = eval(query);\r\n                    } catch (ex) {\r\n                        // Entered term caused a Javascript syntax error\r\n                    }\r\n                    if (result) {\r\n                        results.push(searchResult);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return results;\r\n        }\r\n\r\n        protected getPhrase(name: string): string {\r\n            const span = $(`#phrase_${name}`);\r\n            if (span.length > 0) {\r\n                return span.html();\r\n            }\r\n        }\r\n\r\n        protected outputResults(searchResults: SearchResult[]): void {\r\n\r\n            // init table html\r\n            let tableHtml = `<hr /><p class=\"i-search-title\">${this.getPhrase(\"Search_SearchResults\")}</p>`;\r\n            tableHtml += \"<table class=\\\"i-result-list\\\">\";\r\n\r\n            // add results to table\r\n            let resultCount = 0;\r\n\r\n            for (const searchResult of searchResults) {\r\n                let className: string;\r\n                if (typeof searchResult !== \"undefined\") {\r\n                    if (resultCount === 0) {\r\n                        className = \"i-top-row\";\r\n                    } else if (resultCount === searchResults.length) {\r\n                        className = \"i-bottom-row\";\r\n                    } else {\r\n                        className = \"i-inner-row\";\r\n                    }\r\n\r\n                    // add row text\r\n                    tableHtml += `<tr><td class=\"${className}\">${resultCount + 1}:</td><td class=\"${className\r\n                        }\"><a class=\"i-result btn\" ${!this._isFullTextSearchFrameless ? \"target=\\\"i-content\\\" \" : \"\"\r\n                        }href=\"${searchResult.searchFile.url}\" data-result-index=\"${resultCount}\">${searchResult\r\n                            .searchFile.title}</a></td></tr>`;\r\n\r\n                    // incr total\r\n                    resultCount++;\r\n                }\r\n            }\r\n\r\n            // add footer\r\n            tableHtml += `</table><p>${resultCount} ${this.getPhrase(\"Search_ResultCount\")}</p>`;\r\n\r\n            // set it\r\n            $(\"#i-results\", this._rootSelector).html(tableHtml);\r\n\r\n        }\r\n\r\n        protected showSearchResult(hRef: string, resultIndex: number): void {\r\n\r\n            const highlight: JQuery = $(\"#i-highlight\", this._rootSelector);\r\n\r\n            let webframe: Window = null;\r\n            if (window.parent != null && window.parent.parent != null) {\r\n                webframe = window.parent.parent;\r\n            }\r\n\r\n            if (highlight.is(\":checked\")) {\r\n                // message listener takes care of highlight when the content loads\r\n                this._webSearchPendingHighlight = hRef;\r\n            }\r\n\r\n            if (!this._isFullTextSearchFrameless && webframe != null) {\r\n                Messaging.routeMessageToWindow(webframe, NavigationMessageNames.navigate, hRef);\r\n                Messaging.routeMessageToWindow(webframe, NavigationMessageNames.closeNavigationPane, null);\r\n\r\n                if (resultIndex != null) {\r\n                    this._clickedResult = this._results[resultIndex];\r\n                }\r\n            } else {\r\n                if (resultIndex != null && highlight.is(\":checked\")) {\r\n                    const clickedResult = this._results[resultIndex];\r\n                    hRef = `${hRef}?highlight=${encodeURIComponent(clickedResult.keywords)}`;\r\n                }\r\n\r\n                Browser.navigateTo(hRef, false);\r\n            }\r\n\r\n        }\r\n\r\n        protected highlightContentFrame(): void {\r\n            Messaging.routeMessageToWindow(parent, DocumentMessageNames.resetQuickSearch, null);\r\n            if (this._clickedResult != null) {\r\n                const keywords: string[] = this._clickedResult.keywords.split(\",\");\r\n                for (const keyword of keywords) {\r\n                    if (keyword != null && keyword !== \"\") {\r\n                        Messaging.routeMessageToWindow(parent, DocumentMessageNames.quickSearch, keyword);\r\n                    }\r\n                }\r\n            }\r\n            Messaging.routeMessageToWindow(parent, DocumentMessageNames.searchHighlightComplete, null);\r\n        }\r\n\r\n        protected getKeywordArray(): string[] {\r\n\r\n            // get search string\r\n            let searchText: string = $(\"#i-search\", this._rootSelector).val() as string;\r\n            if (searchText.length === 0) {\r\n                return null;\r\n            }\r\n\r\n            // make lowercase for easy comparison later on\r\n            searchText = searchText.toLowerCase();\r\n\r\n            // tokenise\r\n            const tokens: string[] = searchText.split(\" \");\r\n\r\n            // build keywords array\r\n            const keywords: string[] = [];\r\n\r\n            for (let token of tokens) {\r\n                if (token.length > 0) {\r\n                    // strip out any delimiters & whitespace\r\n                    token = token.replace(new RegExp(\"\\'\", \"ig\"), \"\");\r\n                    token = token.replace(new RegExp(\"\\\"\", \"ig\"), \"\");\r\n                    token = token.replace(new RegExp(\",\", \"ig\"), \"\");\r\n\r\n                    // add to array\r\n                    if (!((token === \"or\") || (token === \"and\"))) {\r\n                        // add to keywords array\r\n                        keywords.push(token);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return keywords;\r\n\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            switch (message.messageType) {\r\n                case NavigationMessageNames.activated:\r\n                    $(\"#i-search\", this._rootSelector).focus();\r\n                    break;\r\n                case NavigationMessageNames.loaded:\r\n                    if (message.messageData.indexOf(this._webSearchPendingHighlight) !== -1) {\r\n                        // If the content loaded is our pending search navigate, apply the search highlights\r\n                        this.highlightContentFrame();\r\n                    }\r\n                    this._webSearchPendingHighlight = null;\r\n                    break;\r\n                case DocumentMessageNames.quickSearch:\r\n                case DocumentMessageNames.searchHighlightComplete:\r\n                    // Pass to parent frame handler and onwards to the content frame\r\n                    Messaging.routeMessageToWindow(parent, message.messageType, message.messageData);\r\n                    break;\r\n                // No default\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class SearchDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new SearchDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.SearchDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const indexConstants = {\r\n        enterKeyCode: 13,\r\n        heightMargin: 20\r\n    };\r\n\r\n    export class IndexDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _isFilterVisibility = false;\r\n        private _isEnabled = false;\r\n        private _rootSelector: JQuery = null;\r\n        private _diacriticsHelper: DiacriticsHelper = null;\r\n\r\n        public getName(): string {\r\n            return \"Index\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const overrides: IOverrides = ((Innovasys as any).overrides || (Innovasys as any).settings);\r\n                if (overrides != null && overrides.isIndexFilterVisibility) {\r\n                    this._isFilterVisibility = true;\r\n                }\r\n            }\r\n\r\n            this._diacriticsHelper = new DiacriticsHelper;\r\n            this._rootSelector = rootSelector;\r\n\r\n            if ($(\"#i-index-container\", rootSelector).length > 0) {\r\n\r\n                this._isEnabled = true;\r\n\r\n                $(\"#i-index-container #i-search\", this._rootSelector)\r\n                    .off(\"keyup.index\")\r\n                    .on(\"keyup.index\", (event: JQueryEventObject): void => {\r\n                        if (event.keyCode === indexConstants.enterKeyCode) {\r\n                            const selectedHref: string = $(\"a.i-selected\", this._rootSelector)\r\n                                .filter(\"[href]\")\r\n                                .first()\r\n                                .attr(\"href\");\r\n\r\n                            if (selectedHref != null) {\r\n                                // Route message to parent window to navigate to the selected entry\r\n                                Messaging.routeMessageToWindow(parent, NavigationMessageNames.navigate, selectedHref);\r\n                            }\r\n                        } else {\r\n                            setTimeout(() => {\r\n                                this.findIndexEntry();\r\n                            }, 1);\r\n                        }\r\n                    });\r\n\r\n                // Resize the results and search boxes\r\n                $(\"#i-index-container\", rootSelector)\r\n                    .off(\"resize.index\")\r\n                    .on(\"resize.index\", () => {\r\n                        setTimeout(() => {\r\n                            const indexContainer: JQuery = $(\"#i-index-container\");\r\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                            indexContainer.css(\"height\", `${(indexContainer as any).height() - indexConstants.heightMargin}px`);\r\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                            indexContainer.css(\"width\", `${(indexContainer as any).width()}px`);\r\n                        }, 1);\r\n                    });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (this._isEnabled && configuration.profileName !== \"desktop\") {\r\n                configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-index-body a\", ResponsiveClickTargetKind.block));\r\n            }\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (this._isEnabled && configuration.profileName !== \"desktop\") {\r\n                this._isFilterVisibility = true;\r\n\r\n                // Close the navigation pane when a result is selected\r\n                $(\"#i-index-body\", this._rootSelector)\r\n                    .off(\"click.index\", \"a\")\r\n                    .on(\"click.index\", \"a\", () => {\r\n                        if (window.parent != null && window.parent.parent != null) {\r\n                            Messaging.routeMessageToWindow(window.parent.parent, NavigationMessageNames.closeNavigationPane, null);\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n\r\n        protected findIndexEntry(): void {\r\n\r\n            const diacriticsRemoverFunc = this._diacriticsHelper.removeDiacritics;\r\n            let term = $(\"#i-index-container #i-search\", this._rootSelector).val() as string;\r\n            term = this._diacriticsHelper.removeDiacritics(term.toLowerCase());\r\n\r\n            if (this._isFilterVisibility) {\r\n\r\n                // Filter the list to only show matching\r\n\r\n                const regex = new RegExp(`^${term}`, \"i\");\r\n                \r\n\r\n                $(\"a,span\", this._rootSelector.find(\"#i-index-body\")).each((_: number, element: Element) => {\r\n                    if (diacriticsRemoverFunc($(element)\r\n                        .text())\r\n                        .match(regex)) {\r\n\r\n                        $(element).css(\"display\", \"inline-block\");\r\n                        $(element)\r\n                            .next(\"br\")\r\n                            .css(\"display\", \"inline\");\r\n                        $(element)\r\n                            .next(\"blockquote\")\r\n                            .css(\"display\", \"block\");\r\n                    } else {\r\n                        $(element).css(\"display\", \"none\");\r\n                        $(element)\r\n                            .next(\"br\")\r\n                            .css(\"display\", \"none\");\r\n                        $(element)\r\n                            .next(\"blockquote\")\r\n                            .css(\"display\", \"none\");\r\n                    }\r\n                });\r\n\r\n                $(\"a,span\", this._rootSelector.find(\"#i-index-body\")).each((index: number, element: Element) => {\r\n                    if ($(element).css(\"display\") === \"inline-block\") {\r\n                        // Make sure the parents are visible also\r\n                        $(element)\r\n                            .parents(\"blockquote\")\r\n                            .each((_: number, blockQuoteElement: Element) => {\r\n\r\n                                const parentElement = $(blockQuoteElement).prev(\"a,span\");\r\n                                parentElement.css(\"display\", \"inline-block\");\r\n                                parentElement.next(\"br\").css(\"display\", \"inline\");\r\n                                parentElement.next(\"blockquote\").css(\"display\", \"block\");\r\n                            });\r\n                    }\r\n                });\r\n\r\n            } else {\r\n\r\n                $(\".i-selected\", this._rootSelector).removeClass(\"i-selected\");\r\n\r\n                if (term != null) {\r\n\r\n                    // Find any matching terms\r\n                    const anchor =\r\n                        $(\"a,span\", this._rootSelector.find(\"#i-index-body\"))\r\n                            .filter((_: number, element: Element): boolean => {\r\n                                if (term != null && term !== \"\"\r\n                                    && diacriticsRemoverFunc($(element)\r\n                                        .text())\r\n                                        .substring(0, term.length)\r\n                                        .toLowerCase() === term) {\r\n\r\n                                    return true;\r\n                                }\r\n                            });\r\n\r\n                    const bodyElement: Element = $(\"#i-index-body\", this._rootSelector).get(0);\r\n                    if (anchor.length > 0) {\r\n                        // Found at least one match. Scroll to the first entry and mark all as selected\r\n                        bodyElement.scrollTop = anchor.get(0).offsetTop - anchor.outerHeight(true);\r\n                        anchor.toggleClass(\"i-selected\", true);\r\n                    } else {\r\n                        // Scroll back to the top of the index\r\n                        bodyElement.scrollTop = 0;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    export class IndexDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new IndexDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.IndexDocumentFeatureFactory());\r\n"]}