{"version":3,"sources":["../script/core/browser.ts","../script/core/common.ts","../script/core/dom-helpers.ts","../script/core/help2.ts","../script/core/local-storage.ts","../script/core/messaging.ts","../script/core/featurebase.ts","../script/core/document.ts","../script/core/responsive.ts","../script/core/fixed-to-top.ts","../script/core/theme.ts","../script/core/dynamic-styles.ts","../script/core/dark-mode.ts","../script/core/diacritics.ts","../script/features/navigation/navigationmessagenames.ts","../script/features/navigation/navigation.ts","../script/features/navigation/tableofcontents.ts","../script/features/navigation/topframe.ts","../script/features/navigation/search.ts","../script/features/navigation/index.ts"],"names":[],"mappings":"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","file":"innovasys.navigation.js","sourcesContent":["/* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\nnamespace Innovasys.Content {\r\n\r\n    const browserInfoConstants = {\r\n        minHeightChange: 10,\r\n        ie7Version: 7\r\n    };\r\n\r\n    export class BrowserInfo {\r\n        public name: string;\r\n        public version: number;\r\n        constructor() {\r\n            const ua = BrowserInfo.getUserAgent().toLowerCase();\r\n            const match: any = /(chrome)[ /]([\\w.]+)/.exec(ua) ||\r\n                /(webkit)[ /]([\\w.]+)/.exec(ua) ||\r\n                /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) ||\r\n                /(msie) ([\\w.]+)/.exec(ua) ||\r\n                ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\r\n                [];\r\n            this.name = match[1] || \"\";\r\n            const versionIndex = 2;\r\n            this.version = parseInt(match[versionIndex] || \"0\", 10);\r\n        }\r\n\r\n        /**\r\n         * Returns the current user agent string\r\n         */\r\n        public static getUserAgent(): string {\r\n            return navigator.userAgent;\r\n        }\r\n    }\r\n\r\n    export interface ILocationInfo {\r\n        href: string;\r\n        protocol: string;\r\n        search?: string;\r\n        hash?: string;\r\n        hostname?: string;\r\n        pathname?: string;\r\n    }\r\n\r\n    export class Browser {\r\n        /** Indicates that we are running in a design time environment (i.e. the editor) */\r\n        public static isDesignTime = false;\r\n        /** Indicates that animations should be disabled */\r\n        public static isAnimationDisabled = false;\r\n        /** Provides access to more information about the browser agent etc. */\r\n        public static info = new BrowserInfo();\r\n        /** Index for dynamically loaded stylesheets */\r\n        public static dynamicallyLoadedFileIndex = 0;\r\n\r\n        private static readonly _idCharacters = \"_0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\".split(\"\");\r\n\r\n        /**\r\n         * Return Microsoft Internet Explorer (major) version number, or 0 for others.\r\n         */\r\n        public static msIeVersion(): number {\r\n            if (Browser.info.name === \"msie\") {\r\n                // is Microsoft Internet Explorer; return version number\r\n                return Browser.info.version;\r\n            } else {\r\n                return 0;    // is other browser\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get a document instance from a given page element.\r\n         */\r\n        public static getDocumentInstance<TDocument extends Document>(element: JQuery | HTMLElement): TDocument {\r\n            let elementSelector: JQuery;\r\n            if (!(element instanceof jQuery)) {\r\n                elementSelector = $(element);\r\n            } else {\r\n                elementSelector = element as JQuery;\r\n            }\r\n            // Find the container element\r\n            let root: JQuery = elementSelector.hasClass(\"content-root\") ? elementSelector : elementSelector.parents(\".content-root\");\r\n            if (root.length === 0) {\r\n                root = $(\"body\");\r\n            } else {\r\n                root = $(root.get(0));\r\n            }\r\n            // Now we have the root, check for a document object\r\n            if (root.data(\"innovasys-document\") != null) {\r\n                return root.data(\"innovasys-document\") as TDocument;\r\n            } else {\r\n                // No existing document, create a new one\r\n                const newDocument = new Document(root.get(0));\r\n                root.data(\"innovasys-document\", newDocument);\r\n\r\n                return newDocument as TDocument;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Returns basic information about the current browser location.\r\n         */\r\n        public static getLocationInfo(): ILocationInfo {\r\n            return location;\r\n        }\r\n\r\n        /**\r\n         * Return the current document compatMode value.\r\n         */\r\n        public static getCompatMode(): string {\r\n            return document.compatMode;\r\n        }\r\n\r\n        /**\r\n         * Reload the current page.\r\n         */\r\n        public static reload(): void {\r\n            location.reload();\r\n        }\r\n\r\n        /**\r\n         * Replace the current location.\r\n         */\r\n        public static replaceLocation(newLocation: string): void {\r\n            if (window.history.replaceState) {\r\n                try {\r\n                    window.history.replaceState(\"\", \"\", `#${newLocation}`);\r\n                } catch (ex) {\r\n                    // May fail with security exception on local file system\r\n                }\r\n            } else {\r\n                window.location.replace(`#${newLocation}`);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Navigate to a new url.\r\n         * @param url The url to navigate to.\r\n         * @param replace Pass true in order to replace the current entry in the browser history.\r\n         */\r\n        public static navigateTo(url: string, replace: boolean): void {\r\n            if (replace) {\r\n                window.location.replace(url);\r\n            } else {\r\n                window.location.href = url;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Cross browser helper for stopping event propagation.\r\n         */\r\n        public static stopPropagation(e: JQueryEventObject): void {\r\n            if (e.stopPropagation) {\r\n                e.stopPropagation();\r\n            } else {\r\n                e.returnValue = false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Loads a stylesheet from the specified Url.\r\n         */\r\n        public static loadStylesheet(\r\n            stylesheetUrl: string,\r\n            stylesheetId: string,\r\n            beforeElementId: string,\r\n            onLoaded: (_: string) => void = null): string {\r\n\r\n            const id = `file${this.dynamicallyLoadedFileIndex}`;\r\n            this.dynamicallyLoadedFileIndex++;\r\n\r\n            const attributes = { \"data-stylesheet-id\": stylesheetId };\r\n            yepnope.injectCss({ href: stylesheetUrl, attrs: attributes }, () => {\r\n                onLoaded(id);\r\n            });\r\n\r\n            return id;\r\n\r\n        }\r\n\r\n        /**\r\n         * Loads a script file from the specified Url.\r\n         */\r\n        public static loadScript(\r\n            scriptUrl: string,\r\n            scriptId: string,\r\n            beforeElementId: string,\r\n            onLoaded: (_: string) => void = null): string {\r\n\r\n            const id = `file${this.dynamicallyLoadedFileIndex}`;\r\n            this.dynamicallyLoadedFileIndex++;\r\n\r\n            const attributes = { \"data-script-id\": scriptId };\r\n            yepnope.injectJs({ src: scriptUrl, attrs: attributes }, () => {\r\n                onLoaded(id);\r\n            });\r\n\r\n            return id;\r\n\r\n        }\r\n\r\n        public static resizeIFrames(selector: JQuery, ignoreOffScreen = false): number {\r\n\r\n            let maxHeight = 0;\r\n            let minAllowedHeight: number;\r\n\r\n            try {\r\n                minAllowedHeight = $(window.top).height();\r\n            } catch (ex) {\r\n                minAllowedHeight = $(window).height();\r\n            }\r\n\r\n            $(\"iframe\", selector).each((index: number, element: HTMLIFrameElement): void => {\r\n                let currentHeight = 0;\r\n                if ($(element).is(\":visible\") && (ignoreOffScreen || $(element).offset().left >= 0)) {\r\n                    // Only resize if visible\r\n                    let doc: Document = null;\r\n                    try {\r\n                        doc = element.contentDocument\r\n                            ? element.contentDocument\r\n                            : (element.contentWindow.document || (element as any).document);\r\n                    } catch (exDocument) {\r\n                        // Security may prevent access if frame hasn't loaded or is cross origin\r\n                    }\r\n                    if (doc != null) {\r\n                        // Firefox throws an error here, so we trap and fallback\r\n                        try {\r\n                            currentHeight = $(doc).height();\r\n                        } catch (exHeight) {\r\n                            currentHeight = minAllowedHeight;\r\n                        }\r\n                    } else {\r\n                        currentHeight = minAllowedHeight;\r\n                    }\r\n                    let lastHeight = $(element).data(\"last-height\");\r\n                    if (!lastHeight) {\r\n                        lastHeight = 0;\r\n                    }\r\n                    const heightDifference = currentHeight - lastHeight;\r\n                    if (heightDifference > browserInfoConstants.minHeightChange\r\n                        || (heightDifference < 0 && heightDifference < browserInfoConstants.minHeightChange)) {\r\n\r\n                        const parent = $(element).parent();\r\n                        if (parent.get(0).tagName === \"DIV\" && currentHeight < parent.height()) {\r\n                            // Resize to at least the containing DIV height\r\n                            currentHeight = parent.height();\r\n                        }\r\n                        if (currentHeight < minAllowedHeight) {\r\n                            // Make sure at least as high as the window\r\n                            currentHeight = minAllowedHeight;\r\n                        }\r\n                        $(element).height(`${currentHeight}px`);\r\n                        $(element).data(\"last-height\", currentHeight);\r\n                    }\r\n                } else if (!$(element).is(\":visible\")) {\r\n                    // Not visible, collapse to zero\r\n                    $(element).height(0);\r\n                    $(element).data(\"last-height\", 0);\r\n                }\r\n                if (currentHeight > maxHeight) {\r\n                    // Record the maximum iframe height\r\n                    maxHeight = currentHeight;\r\n                }\r\n            });\r\n\r\n            const busy: JQuery = $(\"#i-busy\");\r\n            if (busy.length !== 0) {\r\n                busy.height(maxHeight);\r\n            }\r\n\r\n            return maxHeight;\r\n\r\n        }\r\n\r\n        public static showElement(query: JQuery<Element>, tagName: string): void {\r\n            // Firefox does not remove a display: none on show so we check for that specifically here\r\n            query.show();\r\n            if (tagName === \"body\") {\r\n                $(\"body\").css(\"display\", \"block\");\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Works around a jQuery setAttribute bug for a specific IE mode used by MSHV and Help 2.x (with IE11 installed)\r\n         */\r\n        public static checkForIe7ModeJqueryBug(): void {\r\n            if (Browser.info.name === \"msie\" && Browser.info.version <= browserInfoConstants.ie7Version) {\r\n                const mshvAttributeSetWorkaround = {\r\n                    set: (elem: Element, value: any, name: string): any => {\r\n                        elem.setAttribute(name, value);\r\n\r\n                        return elem.getAttributeNode(name);\r\n                    }\r\n                };\r\n                if ($ != null && ($ as any).attrHooks != null) {\r\n                    const attributeHooks: any = ($ as any).attrHooks;\r\n                    attributeHooks[\"aria-describedby\"] = mshvAttributeSetWorkaround;\r\n                    attributeHooks[\"aria-live\"] = mshvAttributeSetWorkaround;\r\n                    attributeHooks[\"aria-atomic\"] = mshvAttributeSetWorkaround;\r\n                    attributeHooks[\"aria-hidden\"] = mshvAttributeSetWorkaround;\r\n                }\r\n            }\r\n        }\r\n\r\n        public static getQueryStringParameter(name: string): string {\r\n            name = name.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n            const regex = new RegExp(`[\\\\?&]${name}=([^&#]*)`);\r\n            const results = regex.exec(Browser.getLocationInfo().search);\r\n\r\n            return results == null ? null : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\r\n        }\r\n\r\n        public static isCompiledHelp(): boolean {\r\n            const currentHref = `${Browser.getLocationInfo().href}.`;\r\n            const currentProtocol = Browser.getLocationInfo().protocol;\r\n\r\n            if (currentHref.indexOf(\"mk:@MSITStore\") === 0) {\r\n                return true;\r\n            } else if (currentHref.indexOf(\"ms-its:\") === 0) {\r\n                return true;\r\n            } else if (currentProtocol === \"ms-help:\") {\r\n                return true;\r\n            } else if (currentProtocol === \"ms-xhelp:\" ||\r\n                currentHref.indexOf(\"ms.help?\") !== -1 ||\r\n                currentHref.indexOf(\"?method=page&\") !== -1) {\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        public static isEditor(): boolean {\r\n            return location.protocol === \"about:\";\r\n        }\r\n\r\n        /**\r\n         * Returns a unique id, randomnly generated and checked for uniqueness in the DOM\r\n         */\r\n        public static getUniqueId(): string {\r\n            const idlength = 10;\r\n            const getId = (): string => {\r\n                let idValue = \"\";\r\n                for (let i = 0; i < idlength; i++) {\r\n                    idValue += Browser._idCharacters[Math.floor(Math.random() * Browser._idCharacters.length)];\r\n                }\r\n\r\n                return idValue;\r\n            };\r\n            let id = getId();\r\n            while ($(`#${id}`).length > 0) {\r\n                id = getId();\r\n            }\r\n\r\n            return id;\r\n        }\r\n\r\n        /**\r\n         * Returns common feature settings\r\n         */\r\n        public static getCommonSettings(): IOverrides {\r\n            return ((Innovasys as any).overrides || (Innovasys as any).settings) || {};\r\n        }\r\n\r\n        /**\r\n         * Compares 2 version strings and returns an integer indicating the result. < 0 if a < b, > 0 if a > b, 0 if a = b\r\n         */\r\n        public static compareVersionStrings(a: string, b: string): number {\r\n            const regExStrip0 = /(\\.0+)+$/;\r\n            const segmentsA = a.replace(regExStrip0, \"\").split(\".\");\r\n            const segmentsB = b.replace(regExStrip0, \"\").split(\".\");\r\n            const l = Math.min(segmentsA.length, segmentsB.length);\r\n\r\n            for (let i = 0; i < l; i++) {\r\n                const diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\r\n                if (diff) {\r\n                    return diff;\r\n                }\r\n            }\r\n\r\n            return segmentsA.length - segmentsB.length;\r\n        }\r\n\r\n        /**\r\n         * Creates or returns a <style> element to contain custom style markup\r\n         */\r\n        public static getDynamicStyleContainer(id: string): JQuery {\r\n            let $dynamicStyleElement = $(`#${id}`);\r\n            if ($dynamicStyleElement.length === 0) {\r\n                $dynamicStyleElement = $(`<style type=\"text/css\" id=\"${id}\"></style>`);\r\n                $(\"head\").append($dynamicStyleElement);\r\n            }\r\n\r\n            return $dynamicStyleElement;\r\n        }\r\n\r\n        public static isElementInView(element: Element, fullyInView: boolean): boolean {\r\n            if (element == null) {\r\n                return false;\r\n            }\r\n\r\n            if (!$(element).is(\":visible\")) {\r\n                return false;\r\n            }\r\n\r\n            const pageTop = $(window).scrollTop();\r\n            const pageBottom = pageTop + $(window).height();\r\n            const elementTop = $(element).offset().top;\r\n            const elementBottom = elementTop + $(element).height();\r\n\r\n            if (fullyInView) {\r\n                return ((pageTop < elementTop) && (pageBottom > elementBottom));\r\n            } else {\r\n                return ((elementTop <= pageBottom) && (elementBottom >= pageTop));\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/* eslint @typescript-eslint/no-explicit-any: \"off\" */\r\nconst overrides: Innovasys.IOverrides = ((Innovasys as any).overrides || (Innovasys as any).settings);\r\n\r\nif (document.compatMode !== \"BackCompat\"\r\n    || !(location.protocol === \"ms-xhelp:\"\r\n        || location.href.indexOf(\"ms.help?\") !== -1\r\n        || location.href.indexOf(\"?method=page&\") !== -1)) {\r\n\r\n    if (overrides == null || !overrides.isHideBodyDuringLoadDisabled) {\r\n        // Prevent flickering by setting body to display:none during initialization\r\n        document.write(\"<style type=\\\"text/css\\\">body{display:none;}</style>\");\r\n    } else if (overrides.isOverflowClippedDuringLoad) {\r\n        // Prevent adding of a vertical scrollbar during load\r\n        document.write(\"<style type=\\\"text/css\\\">body{overflow-y:hidden;}</style>\");\r\n    }\r\n}\r\n","/* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\nnamespace Innovasys.Content {\r\n\r\n    /**\r\n     * Encapsulates a left and top position.\r\n     */\r\n    export class ElementPosition {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public left: number, public top: number) {}\r\n\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    export class DomHelpers {\r\n\r\n        /**\r\n         * Returns an elements absolute position, allowing for the non-scrolling header\r\n         * @param element The element to find the absolute position of\r\n         */\r\n        public static getElementPosition(element: HTMLElement): ElementPosition {\r\n            let offsetLeft = 0;\r\n            let offsetTop = 0;\r\n\r\n            while (element) {\r\n                const MSIE_4_VERSION = 4;\r\n                // Allow for the scrolling body region in IE\r\n                if (Browser.msIeVersion() > MSIE_4_VERSION) {\r\n                    offsetLeft += (element.offsetLeft - element.scrollLeft);\r\n                    offsetTop += (element.offsetTop - element.scrollTop);\r\n                } else {\r\n                    offsetLeft += element.offsetLeft;\r\n                    offsetTop += element.offsetTop;\r\n                }\r\n\r\n                element = (element.offsetParent as HTMLElement);\r\n            }\r\n\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const leftMargin = (document.body as any).leftMargin as number;\r\n            if (BrowserInfo.getUserAgent().indexOf(\"Mac\") !== -1\r\n                && typeof leftMargin !== \"undefined\") {\r\n\r\n                offsetLeft += leftMargin;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                offsetTop += ((document.body as any).topMargin as number);\r\n            }\r\n\r\n            return new ElementPosition(offsetLeft, offsetTop);\r\n        }\r\n\r\n        /**\r\n         * Returns the text from the containing table. Uses this as the context element from which to find the containing table.\r\n         */\r\n        public static getTextFromContainingTable(element: HTMLElement): string {\r\n            const parentTableQuery = $(element)\r\n                .parents(\"table\")\r\n                .get(0);\r\n            const parentTable: JQuery = $(parentTableQuery);\r\n            const tableCell: HTMLTableCellElement = parentTable.find(\"td\").get(0) as HTMLTableCellElement;\r\n            const preCell: JQuery<HTMLPreElement> = $(tableCell).find(\"pre\");\r\n\r\n            let elemsToUse: HTMLElement[] = [];\r\n\r\n            if (preCell && preCell.length > 0) {\r\n                elemsToUse = preCell.toArray();\r\n            } else {\r\n                elemsToUse.push(tableCell);\r\n            }\r\n\r\n            let textResult: string = \"\";\r\n\r\n            for (let index = 0; index < elemsToUse.length; ++index) {\r\n                let elemTmp = elemsToUse[index];\r\n                if (elemTmp != null) {\r\n                    if (elemTmp.textContent != null) {\r\n                        textResult += elemTmp.textContent;\r\n                    } else if (elemTmp.innerText != null) {\r\n                        textResult += elemTmp.innerText;\r\n                    } else {\r\n                        textResult += $(elemTmp).text();\r\n                    }\r\n                }\r\n            }\r\n            return textResult;\r\n        }\r\n    }\r\n\r\n}\r\n","/* .NET Framework Help Topic Resolution */\r\n\r\nconst getCurrentHelp2Namespace = (): string => {\r\n    let namespace = \"\";\r\n    const location = Innovasys.Content.Browser.getLocationInfo();\r\n\r\n    if (location.protocol === \"ms-help:\") {\r\n        namespace = location.hostname;\r\n        const URL_PREFIX_LENGTH = 2;\r\n        if (namespace.substring(0, URL_PREFIX_LENGTH) === \"//\") {\r\n            namespace = namespace.substring(URL_PREFIX_LENGTH);\r\n        }\r\n    }\r\n\r\n    return namespace;\r\n};\r\n\r\nconst findHelp2Keyword = (namespaceName: string, keyword: string): string => {\r\n\r\n    if (namespaceName.length > 0) {\r\n        try {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const session: any = new ActiveXObject(\"HxDs.HxSession\");\r\n            session.Initialize(`ms-help://${namespaceName}`, 0);\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const topics: any = session.Query(keyword, \"!DefaultAssociativeIndex\", 0, \"\");\r\n            if (topics.Count > 0) {\r\n                return topics(1).URL;\r\n            }\r\n        } catch (e) {\r\n            //\r\n        }\r\n    }\r\n\r\n    return \"\";\r\n};\r\n\r\n// This function is Copyright 2006 Innovasys Limited. No reproduction or usage\r\n//  allowed other than in documentation generated by licensed Innovasys products\r\nconst resolveHelp2Keyword = (keyword: string, onlineKeyword: string): string => {\r\n\r\n    let url = \"\";\r\n\r\n    try {\r\n        // Try the current namespace\r\n        url = findHelp2Keyword(getCurrentHelp2Namespace(), keyword);\r\n        if (url === \"\") {\r\n            // Try the likely namespaces first, most recent first\r\n            url = findHelp2Keyword(\"MS.VSCC.v80\", keyword);\r\n            if (url === \"\") {\r\n                url = findHelp2Keyword(\"MS.VSCC.2003\", keyword);\r\n                if (url === \"\") {\r\n                    url = findHelp2Keyword(\"MS.VSCC\", keyword);\r\n                }\r\n            }\r\n        }\r\n\r\n        // URL found in one of the known VSCC namespaces\r\n        if (url !== \"\") {\r\n            return url;\r\n        } else {\r\n            // For future proofing, try other VSCC namespaces\r\n            const registryWalker = new ActiveXObject(\"HxDs.HxRegistryWalker\");\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const namespaces: any = registryWalker.RegisteredNamespaceList(\"MS.VSCC\");\r\n\r\n            if (namespaces.Count > 0) {\r\n                for (let n = 1; n <= namespaces.Count; n++) {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    const namespace: any = namespaces.Item(n);\r\n                    const namespaceName: string = namespace.Name;\r\n                    const PREFIX_LENGTH = 7;\r\n                    if (namespaceName.substring(0, PREFIX_LENGTH) === \"MS.VSCC\") {\r\n                        switch (namespaceName) {\r\n                            case \"MS.VSCC.v80\":\r\n                                break;\r\n                            case \"MS.VSCC.2003\":\r\n                                break;\r\n                            case \"MS.VSCC\":\r\n                                break;\r\n                            default:\r\n                                url = findHelp2Keyword(namespaceName, \"\");\r\n                                if (url !== \"\") {\r\n                                    return url;\r\n                                }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    } catch (e) {\r\n        //\r\n    }\r\n\r\n    // No match found in any applicable namespace\r\n    // Msdn doesn't support links to individual overloads, only to the master page\r\n    //  so we trim off the brackets when directing to Msdn\r\n    const bracketPosition = onlineKeyword.indexOf(\"(\");\r\n    if (bracketPosition !== -1) {\r\n        onlineKeyword = onlineKeyword.substring(0, bracketPosition);\r\n    }\r\n\r\n    const keywordForUrl = onlineKeyword.replace(\"`\", \"-\").toLowerCase();\r\n\r\n    return `https://docs.microsoft.com/dotnet/api/${keywordForUrl}`;\r\n};\r\n\r\n/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nconst navigateToHelp2Keyword = (keyword: string, onlineKeyword: string, replacePage: boolean): void => {\r\n    window.status = \"Resolving link. Please wait a moment...\";\r\n    const url = resolveHelp2Keyword(keyword, onlineKeyword);\r\n    window.status = \"\";\r\n    const MSDN_PREFIX_LENGTH = 25;\r\n    const DOCS_PREFIX_LENGTH = 26;\r\n    if ((url.substring(0, MSDN_PREFIX_LENGTH) === \"http://msdn.microsoft.com\"\r\n        || url.substring(0, DOCS_PREFIX_LENGTH) === \"https://docs.microsoft.com\"\r\n    ) &&\r\n        window.parent != null) {\r\n        // MSDN no longer support hosting in an IFRAME so open in new browser window\r\n\t\tvar win = window.open('about:blank', '_blank')\r\n\t\turlExistsInnov(url, \r\n            function() { win.location.href = url;}, \r\n            function() {\r\n\t\t\t\tvar parentUrl = url.substring(0, url.lastIndexOf(\".\"));\r\n\t\t\t\turlExistsInnov(parentUrl, \r\n                    function() { win.location.href = parentUrl; }, \r\n                    function() { win.location.href = url;}\r\n                );\r\n\t\t});\r\n    } else if (replacePage) {\r\n        location.replace(url);\r\n    } else {\r\n        location.href = url;\r\n    }\r\n};\r\n\r\n/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nconst urlExistsInnov = (url: string, successCallBack: any, notfoundCallBack: any): void => {\r\n    $.ajax({\r\n      url: url,\r\n      dataType: \"jsonp\",\r\n      statusCode: {\r\n        200: function(response) {\r\n          successCallBack();\r\n        },\r\n        404: function(response) {\r\n          notfoundCallBack();\r\n        }\r\n      }\r\n    });\r\n  }","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    /**\r\n     * Common Local Storage interface\r\n     */\r\n    export interface ILocalStorageHandler {\r\n        load(name: string): void;\r\n        save(name: string): void;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        setAttribute(key: string, value: any): void;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        getAttribute(key: string): any;\r\n    }\r\n\r\n    /**\r\n     * Wrapper for handling load/save to localstorage. Handles the difference in functionality when executing at design time\r\n     *  and in a CHM.\r\n     */\r\n    export class LocalStorageHandler implements ILocalStorageHandler {\r\n\r\n        public storageMethod = \"native\";\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public cookieData: any = null;\r\n        public storageElement: Element = null;\r\n\r\n        constructor(public attributePrefix: string = \"\") {\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            let windowLocalStorage: any;\r\n            try {\r\n                // Edge throws an exception when querying localStorage in local file system output\r\n                windowLocalStorage = window.localStorage;\r\n            } catch (e) {\r\n                //\r\n            }\r\n            if (!windowLocalStorage) {\r\n                if (location.protocol === \"ms-its:\") {\r\n                    // Cookies don't work in CHM so we use userdata behavior instead\r\n                    this.storageMethod = \"userdata\";\r\n                    const storageElement = $(\"<link />\");\r\n                    storageElement.css(\"behavior\", \"url(#default#userdata)\");\r\n                    storageElement.appendTo(\"body\");\r\n                    this.storageElement = storageElement.get(0);\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (this.storageElement as any).load(\"localStorage\");\r\n                } else {\r\n                    // If local storage isn't available, fall back to cookie storage\r\n                    this.storageMethod = \"cookie\";\r\n                    const cookieValue = Cookies.get(\"localStorage\");\r\n                    if (cookieValue) {\r\n                        this.cookieData = JSON.parse(cookieValue);\r\n                    } else {\r\n                        this.cookieData = {};\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public load(name: string): void {\r\n            // local storage automatically saves\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public save(name: string): void {\r\n            // local storage automatically saves\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public setAttribute(key: string, value: any): void {\r\n            if (this.attributePrefix != null) {\r\n                key = this.attributePrefix + key;\r\n            }\r\n            if (this.storageMethod === \"native\") {\r\n                if (value == null || typeof value === \"undefined\") {\r\n                    window.localStorage.removeItem(key);\r\n                } else {\r\n                    window.localStorage.setItem(key, value);\r\n                }\r\n            } else if (this.storageMethod === \"cookie\") {\r\n                if (value == null) {\r\n                    this.cookieData[key] = null;\r\n                } else {\r\n                    this.cookieData[key] = `${value}`;\r\n                }\r\n                Cookies.set(\"localStorage\", JSON.stringify(this.cookieData), { expires: 365, path: \"/\", domain: \"\" });\r\n            } else if (this.storageMethod === \"userdata\") {\r\n                this.storageElement.setAttribute(key, `${value}`);\r\n                // Save method is added by the userdata behavior\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                (this.storageElement as any).save(\"localStorage\");\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public getAttribute(key: string): any {\r\n            if (this.attributePrefix != null) {\r\n                key = this.attributePrefix + key;\r\n            }\r\n            if (this.storageMethod === \"native\") {\r\n                return window.localStorage.getItem(key);\r\n            } else if (this.storageMethod === \"cookie\") {\r\n                if (typeof this.cookieData[key] === \"undefined\") {\r\n                    return null;\r\n                } else {\r\n                    return this.cookieData[key];\r\n                }\r\n            } else if (this.storageMethod === \"userdata\") {\r\n                return this.storageElement.getAttribute(key);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    /**\r\n     * A message object, used for cross frame communication.\r\n     */\r\n    export class WindowMessage {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public messageType: string, public messageData: string) { }\r\n    }\r\n\r\n    /**\r\n     * Cross frame messaging utility functionality.\r\n     */\r\n    export class Messaging {\r\n\r\n        /**\r\n         * Returns true if PostMessage support is available in the current browser.\r\n         */\r\n        public static isPostMessageEnabled(): boolean {\r\n            return (window.postMessage != null);\r\n        }\r\n\r\n        /**\r\n         * Registers to receive message events incoming to the current window.\r\n         * @param receiver The receiving event handler.\r\n         */\r\n        public static addMessageListener(receiver: (ev: MessageEvent) => void): void {\r\n            if (Messaging.isPostMessageEnabled()) {\r\n                if (window.addEventListener) {\r\n                    window.addEventListener(\"message\", receiver, false);\r\n                } else {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (window as any).attachEvent(\"onmessage\", receiver);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Removes a previous registered window event listener\r\n         * @param receiver The receiving event handler.\r\n         */\r\n        public static removeMessageListener(receiver: (ev: MessageEvent) => void): void {\r\n            if (Messaging.isPostMessageEnabled()) {\r\n                if (window.addEventListener) {\r\n                    window.removeEventListener(\"message\", receiver, false);\r\n                } else {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    (window as any).detachEvent(\"onmessage\", receiver);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Gets a WindowMessage object from string message data.\r\n         * @param data The string containing the message data (format MessageType|MessageData).\r\n         */\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public static getMessageFromData(data: any): WindowMessage {\r\n            const separator = data.indexOf(\"|\") as number;\r\n            let messageType: string;\r\n            let messageData: string;\r\n\r\n            if (separator !== -1) {\r\n                messageType = data.substring(0, separator);\r\n                messageData = data.substring(separator + 1);\r\n            } else {\r\n                messageType = data;\r\n                messageData = \"\";\r\n            }\r\n\r\n            return new WindowMessage(messageType, messageData);\r\n        }\r\n\r\n        public static routeMessageToFrameElement(windowName: string, messageType: string, messageData: string): void {\r\n            const element: Element = document.getElementById(windowName);\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            if (element != null && (element as any).contentWindow != null) {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                Messaging.routeMessageToWindow(((element as any).contentWindow as Window), messageType, messageData);\r\n            }\r\n        }\r\n\r\n        public static routeMessageToWindow(window: Window, messageType: string, messageData: string): void {\r\n            if (window != null && self !== window) {\r\n                if (window != null && window.postMessage != null) {\r\n                    window.postMessage(`${messageType}|${messageData}`, \"*\");\r\n                }\r\n            }\r\n        }\r\n\r\n        public static routeMessageToParentFrame(messageType: string, messageData: string): void {\r\n            if (parent != null && self !== parent) {\r\n                this.routeMessageToWindow(parent, messageType, messageData);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content {\r\n\r\n    export enum ResponsiveClickTargetKind {\r\n        auto,\r\n        inline,\r\n        block\r\n    }\r\n\r\n    export abstract class DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(protected documentInstance: Document = null) { }\r\n\r\n        public initializeDocument(): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad?: boolean): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public onMessage(message: WindowMessage): void {\r\n            //\r\n        }\r\n\r\n        public abstract getName(): string;\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public ensureElementVisible(element: Element): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public beforeSetElementVisibility(element: Element, isVisible: boolean, isImmediate: boolean): boolean {\r\n            return false;\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public afterSetElementVisibility(element: Element, isVisible: boolean): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            //\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            //\r\n        }\r\n\r\n        /**\r\n         * Returns a number used to determine the order of content initialization amongst document features.\r\n         */\r\n        public initializeContentOrdinal(): number {\r\n            return 0;\r\n        }\r\n\r\n    }\r\n\r\n    export class DocumentFeatureConfiguration {\r\n\r\n        // TODO: Would be useful to key this array so that a feature factory can override a default implementation\r\n\r\n        private static readonly _featureFactories: IDocumentFeatureFactory[] = [];\r\n\r\n        public static registerDocumentFeatureFactory(factory: IDocumentFeatureFactory): void {\r\n            DocumentFeatureConfiguration._featureFactories.push(factory);\r\n        }\r\n\r\n        public static getFeatureFactories(): IDocumentFeatureFactory[] {\r\n            return DocumentFeatureConfiguration._featureFactories;\r\n        }\r\n\r\n    }\r\n\r\n    export class ResponsiveConfiguration {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public profileName: string, public clickTargets: ResponsiveClickTarget[] = []) {\r\n\r\n        }\r\n\r\n        public stylesheetUrls: string[] = [];\r\n\r\n        public tablesToPivot: ResponsiveTable[] = [];\r\n\r\n    }\r\n\r\n    export class ResponsiveClickTarget {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public className: string, public kind: ResponsiveClickTargetKind) { }\r\n\r\n    }\r\n\r\n    export class ResponsiveTable {\r\n\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public selector: string, public onAfterPivot: (originalTable: JQuery, pivotDiv: JQuery) => void = null) { }\r\n\r\n    }\r\n\r\n}\r\n","/* Userdata support in CHMs requires pages are loaded under the ms-its protocol and not mk:@MSITStore */\r\nconst currentLocation = `${location.href}.`;\r\nconst mkPrefix = \"mk:@MSITStore\";\r\nif (currentLocation.indexOf(mkPrefix) === 0) {\r\n    const restOfUrl = currentLocation.substring(mkPrefix.length + 1, currentLocation.length - 1);\r\n    const newLocation = `ms-its:${restOfUrl}`;\r\n    location.replace(newLocation);\r\n}\r\n\r\n/* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\nnamespace Innovasys.Content {\r\n\r\n    export class Document {\r\n\r\n        /** Handle to the local storage instance */\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _localStorageInstance: any;\r\n        /** Handle to the window message event listener so we can remove it later */\r\n        private _windowMessageEventListener: (event: MessageEvent) => void;\r\n        /** Indicates if this document instance has been unloaded */\r\n        private _isUnloaded = true;\r\n        /** Features collection */\r\n        private readonly _features: IDocumentFeature[];\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _featureSettings: any;\r\n\r\n        /** Provides an id that can be used to disambiguate this document if it is loaded in a parent document */\r\n        public id = \"\";\r\n        /** The root element of this logical document */\r\n        public rootElement: HTMLElement;\r\n        /** JQuery selector representing the root element of this document */\r\n        public rootSelector: JQuery;\r\n        /** Indicates that this page should be highlighted as new */\r\n        public isNew: boolean;\r\n        /** Indicates that automatic responsive functionality is enabled */\r\n        public isResponsiveEnabled: boolean;\r\n        /** Indicates that the body should be made visible after loading is complete. Can be set to false if\r\n         * waiting on dynamically loaded stylesheets\r\n         */\r\n        public setBodyVisibleAfterLoadComplete: boolean;\r\n        /** Indicates that this is a content document. Content documents inform the parent frames on load */\r\n        public isContentDocument: boolean;\r\n\r\n        constructor(rootElement: HTMLElement, id = \"\") {\r\n            this.id = id;\r\n            this.rootElement = rootElement;\r\n            this.rootSelector = $(rootElement);\r\n            this._featureSettings = {};\r\n            this.setBodyVisibleAfterLoadComplete = true;\r\n            this.isNew = false;\r\n            this.isResponsiveEnabled = false;\r\n            this.isContentDocument = true;\r\n\r\n            this.rootSelector.data(\"innovasys-document\", this);\r\n\r\n            // Create the features instances according to configuration. Some factories may return null if the feature\r\n            //  is not required for this document.\r\n            this._features = $.map(\r\n                DocumentFeatureConfiguration.getFeatureFactories(),\r\n                (factory: IDocumentFeatureFactory): IDocumentFeature => factory.createInstance(this));\r\n\r\n            // Initialize the features.\r\n            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                feature.initializeDocument();\r\n            });\r\n\r\n            if (Browser.isDesignTime) {\r\n                $(\"body\").addClass(\"i-designtime\");\r\n            }\r\n\r\n            if (Browser.isEditor()) {\r\n                $(\"body\").addClass(\"i-editor\");\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get a local storage instance, initializing the first time it is called.\r\n         */\r\n        public getLocalStorage(): ILocalStorageHandler {\r\n            if (Browser.isDesignTime) {\r\n                try {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    if ((window.external as any).IsInnovasysDesigner) {\r\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                        this._localStorageInstance = ((window.external as any) as ILocalStorageHandler);\r\n                    }\r\n                } catch (e) {\r\n                    //\r\n                }\r\n            }\r\n            if (!this._localStorageInstance) {\r\n                this._localStorageInstance = new LocalStorageHandler(this.id);\r\n            }\r\n\r\n            return this._localStorageInstance;\r\n        }\r\n\r\n        /**\r\n         * Called once the DOM has loaded. Performs content initialization.\r\n         */\r\n        public load(): void {\r\n\r\n            const overrides: IOverrides = Browser.getCommonSettings();\r\n\r\n            if (overrides.isNew) {\r\n                this.isNew = true;\r\n            }\r\n\r\n            // If running in a frame, set up a message listener and let\r\n            //  the parent frame know we have loaded\r\n            if (this.id === \"\") {\r\n                // Running in a frame - listen for commands\r\n                if (Messaging.isPostMessageEnabled()) {\r\n                    this._windowMessageEventListener = (ev: MessageEvent): void => this.receiveMessage(ev);\r\n                    Messaging.addMessageListener(this._windowMessageEventListener);\r\n\r\n                    if (this.isContentDocument) {\r\n                        // Notify the parent frame that we have loaded, and give it our page title\r\n                        Messaging.routeMessageToParentFrame(\"loaded\", location.href);\r\n                        Messaging.routeMessageToParentFrame(\"updatePageTitle\", document.title);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Add a class to the body that indicates that kind of navigation we are using\r\n            if (overrides.navigationKind !== \"inpage\") {\r\n                $(\"body\").addClass(\"i-navigation-frames\");\r\n            } else {\r\n                $(\"body\").addClass(\"i-navigation-inpage\");\r\n            }\r\n\r\n            // Configure our document content for each of the features\r\n            this.initializeContent(this.rootSelector, true);\r\n\r\n            if (this.id === \"\" && this.setBodyVisibleAfterLoadComplete) {\r\n                // Resume rendering updates after loading complete\r\n                this.setBodyVisible();\r\n            }\r\n        }\r\n\r\n        public setBodyVisible(): void {\r\n            $(\"html\").addClass(\"i-loaded\");\r\n            Browser.showElement($(\"body\"), \"body\");\r\n            setTimeout(() => {\r\n                if (Browser.getCommonSettings().isOverflowClippedDuringLoad) {\r\n                    $(\"body\").css(\"overflow-y\", \"auto\");\r\n                }\r\n                $(\".i-busy-overlay\").hide();\r\n            }, 1);\r\n        }\r\n\r\n        public unload(): void {\r\n\r\n            if (this.id === \"\") {\r\n                // Running in a frame - remove message listener\r\n                if (Messaging.isPostMessageEnabled() && this._windowMessageEventListener != null) {\r\n                    Messaging.removeMessageListener(this._windowMessageEventListener);\r\n                }\r\n            }\r\n\r\n            this._isUnloaded = true;\r\n\r\n        }\r\n\r\n        /**\r\n         * Initializes new DOM content, either on page load or subsequently when new content is created.\r\n         */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad = false): void {\r\n            $.each(this._features.sort(\r\n                (a: IDocumentFeature, b: IDocumentFeature): number => a.initializeContentOrdinal() - b.initializeContentOrdinal()),\r\n                (_: number, feature: IDocumentFeature) => {\r\n                    feature.initializeContent(rootSelector, isInitialLoad);\r\n                });\r\n        }\r\n\r\n        /**\r\n         * Creates, populates and returns a responsive configuration instance.\r\n         */\r\n        public getResponsiveConfiguration(profileName: string): ResponsiveConfiguration {\r\n            const configuration: ResponsiveConfiguration = new ResponsiveConfiguration(profileName);\r\n            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                feature.populateResponsiveConfiguration(configuration);\r\n            });\r\n\r\n            return configuration;\r\n        }\r\n\r\n        /**\r\n         * Applies a responsive configuration.\r\n         */\r\n        public applyResponsiveConfiguration(responsiveConfiguration: ResponsiveConfiguration): void {\r\n            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                feature.applyResponsiveConfiguration(responsiveConfiguration);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cross frame message processor.\r\n         * @param event The message event containing message data.\r\n         */\r\n        public receiveMessage(event: MessageEvent): void {\r\n            let message: WindowMessage;\r\n            try {\r\n                message = Messaging.getMessageFromData(event.data);\r\n            } catch (ex) {\r\n                // Catch exceptions that can fire at design time\r\n            }\r\n\r\n            this.processWindowMessage(message);\r\n        }\r\n\r\n        /**\r\n         * Process the passed message.\r\n         */\r\n        public processWindowMessage(message: WindowMessage): void {\r\n            if (message) {\r\n                switch (message.messageType) {\r\n                    case \"refresh\":\r\n                        document.location.reload();\r\n                        break;\r\n                    default:\r\n                        if (this._features != null) {\r\n                            $.each(this._features, (index: number, feature: IDocumentFeature) => {\r\n                                feature.onMessage(message);\r\n                            });\r\n                        }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Ensures that the passed element is visible. Calls document features to apply\r\n         *  any necessary logic (e.g. where the element is within a collapsed section or tab)\r\n         */\r\n        public ensureElementVisible(element: Element): void {\r\n            $.each(this._features, (index: number, feature: IDocumentFeature): void => {\r\n                feature.ensureElementVisible(element);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Toggle the state of an element or elements.\r\n         * @param elements JQuery selector representing Element(s) to toggle state for.\r\n         * @param isImmediate When set to true, animations are disabled.\r\n         * @param isVisible Indicates if the element(s) should be made visible or not.\r\n         */\r\n        public setElementVisibility(elements: JQuery, isVisible: boolean, isImmediate: boolean): JQuery {\r\n            return elements.each((index: number, element: Element) => {\r\n\r\n                let cancelDefault = false;\r\n                // Allow features to add custom behavior and/or prevent default\r\n                $.each(this._features, (_: number, feature: IDocumentFeature) => {\r\n                    if (!cancelDefault) {\r\n                        if (feature.beforeSetElementVisibility(element, isVisible, isImmediate) === true) {\r\n                            cancelDefault = true;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (!cancelDefault) {\r\n\r\n                    if ($(element).css(\"display\") !== \"none\" !== isVisible) {\r\n                        if ($(element).css(\"display\") === \"none\") {\r\n                            if (isImmediate || Browser.isAnimationDisabled) {\r\n                                // Element is currently not visible - make it visible\r\n                                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                const originalDisplay: any = $(element).data(\"i-original-display\");\r\n                                if (originalDisplay != null) {\r\n                                    $(element).css(\"display\", originalDisplay);\r\n                                    $(element).data(\"i-original-display\", null);\r\n                                } else {\r\n                                    if (element.tagName === \"TR\") {\r\n                                        $(element).css(\"display\", \"table-row\");\r\n                                    } else {\r\n                                        $(element).css(\"display\", \"block\");\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                $(element).slideDown(\"fast\");\r\n                            }\r\n                        } else {\r\n                            // Element is currently visible, hide\r\n                            $(element).data(\"i-original-display\", $(element).css(\"display\"));\r\n                            if (isImmediate || Browser.isAnimationDisabled) {\r\n                                $(element).hide();\r\n                            } else {\r\n                                $(element).slideUp(\"fast\");\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    $.each(this._features, (_: number, feature: IDocumentFeature) => {\r\n                        feature.afterSetElementVisibility(element, isVisible);\r\n                    });\r\n\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Returns a feature matching the passed name\r\n         */\r\n        public getFeatureByName<TFeature extends IDocumentFeature>(name: string): TFeature {\r\n            if (name == null) {\r\n                return null;\r\n            }\r\n            const matchingFeatures: TFeature[]\r\n                = $.map(this._features, (feature: IDocumentFeature, index: number): TFeature => {\r\n                    if (feature.getName().toLowerCase() === name.toLowerCase()) {\r\n                        return feature as TFeature;\r\n                    } else {\r\n                        return null;\r\n                    }\r\n                });\r\n            if (matchingFeatures.length > 0) {\r\n                return matchingFeatures[0];\r\n            }\r\n        }\r\n\r\n        public getFeatureSettings<TFeatureSettings>(name: string, getBaseSettings: () => TFeatureSettings): TFeatureSettings {\r\n            if (name == null) {\r\n                return null;\r\n            }\r\n            if (this._featureSettings[name] != null) {\r\n                return this._featureSettings[name] as TFeatureSettings;\r\n            } else {\r\n                const baseSettings = getBaseSettings != null ? getBaseSettings() : {};\r\n                let newSettings: TFeatureSettings;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const defaults: any = (Innovasys as any).overrides || (Innovasys as any).settings;\r\n                const defaultSettings = defaults == null ? null : defaults[name.toLowerCase()];\r\n                if (defaultSettings != null) {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    newSettings = { ...(baseSettings as any), ...defaultSettings } as TFeatureSettings;\r\n                } else {\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    newSettings = { ...(baseSettings as any) } as TFeatureSettings;\r\n                }\r\n                this._featureSettings[name] = newSettings;\r\n\r\n                return newSettings;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class DocumentMessageNames {\r\n        public static quickSearch = \"quickSearch\";\r\n        public static resetQuickSearch = \"resetQuickSearch\";\r\n        public static insertNavigationHeader = \"insertNavigationHeader\";\r\n        public static searchHighlightComplete = \"searchHighlightComplete\";\r\n    }\r\n\r\n    export class RootMessageNames {\r\n        public static navigate = \"navigate\";\r\n        public static openNavigationPane = \"openNavigationPane\";\r\n    }\r\n\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const INNOVASYS_PREFIX_LENGTH = 2;\r\n\r\n    export class ResponsiveDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _pendingResponsiveFiles: string[] = [];\r\n        private _configuration: ResponsiveConfiguration = null;\r\n\r\n        public static pivotTable(table: HTMLElement): JQuery<HTMLElement> {\r\n\r\n            const sourceTable: JQuery = $(table);\r\n            const container: JQuery = $(\"<div class=\\\"i-pivot-table-container\\\"></div>\");\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            const labels: any = {};\r\n            const pivotColumnIndex: number = sourceTable\r\n                .find(\"tr\")\r\n                .children(\"td.i-pivot-column, th.i-pivot-column\")\r\n                .first()\r\n                .index();\r\n\r\n            // No column found to pivot on so just return here\r\n            if (pivotColumnIndex === -1) {\r\n                return null;\r\n            }\r\n\r\n            // Get the labels for each new row in the new table for the first row in the source table\r\n            sourceTable\r\n                .find(\"tr:first-child\")\r\n                .children(\"td, th\")\r\n                .each((index, cell) => {\r\n                    labels[index.toString()] = $(cell).text();\r\n                });\r\n\r\n            sourceTable.find(\"tr\").each((index, row) => {\r\n                if (index > 0) {\r\n                    const newTable = $(\"<table class=\\\"i-pivot-table i-section-content\\\"></table>\") as JQuery<HTMLElement>;\r\n                    let header: JQuery;\r\n\r\n                    $(row)\r\n                        .children(\"td\")\r\n                        .each((cellIndex, cell) => {\r\n                            if (cellIndex === pivotColumnIndex) {\r\n                                header = $(`<div class=\"i-section-heading\"><span class=\"btn\">${$(cell).text()}</span></div>`);\r\n                            } else {\r\n                                // Add a new row for each column in the source table\r\n                                const newRow = $(`<tr><td>${labels[cellIndex.toString()]}</td></tr>`) as JQuery<HTMLElement>;\r\n                                $(cell)\r\n                                    .clone()\r\n                                    .appendTo(newRow as JQuery<HTMLTableRowElement>);\r\n                                newRow.find(\"td a\").addClass(\"btn btn-mini btn-xs\");\r\n                                newRow.appendTo(newTable);\r\n                            }\r\n                        });\r\n\r\n                    if (header != null) {\r\n                        header.appendTo(container);\r\n                    }\r\n                    newTable.appendTo(container);\r\n                }\r\n            });\r\n\r\n            return container;\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"Responsive\";\r\n        }\r\n\r\n        public getFeatureSettings(): IResponsiveFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IResponsiveFeatureSettings>(\"responsive\",\r\n                this.getDefaultFeatureSettings);\r\n        }\r\n\r\n        public getDefaultFeatureSettings(): IResponsiveFeatureSettings {\r\n            return {\r\n                isEnabled: false,\r\n                displayMode: null\r\n            };\r\n        }\r\n\r\n        public checkPendingResponsiveFilesLoad(loadedId: string): void {\r\n            this._pendingResponsiveFiles = $.map(this._pendingResponsiveFiles, (item: string): string => {\r\n                if (item === loadedId) {\r\n                    // This item now loaded, exclude from pending array\r\n                    return null;\r\n                } else {\r\n                    return item;\r\n                }\r\n            });\r\n            if (this._pendingResponsiveFiles.length === 0) {\r\n                // All loaded\r\n                this.onResponsiveFilesLoaded();\r\n            }\r\n        }\r\n\r\n        private isEnabled(): boolean {\r\n            return this.documentInstance.isResponsiveEnabled || this.getFeatureSettings().isEnabled;\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n\r\n                const deviceType = this.getDeviceType().toLowerCase();\r\n\r\n                // Gather the responsive configuration\r\n                const configuration: ResponsiveConfiguration = this.documentInstance.getResponsiveConfiguration(deviceType);\r\n\r\n                if (this.isEnabled()) {\r\n                    switch (deviceType) {\r\n                        case \"mobile\":\r\n                            $(\".i-hidden-mobile, .i-visible-tablet, .i-visible-desktop\").css(\"display\", \"none\");\r\n                            break;\r\n                        case \"tablet\":\r\n                            $(\".i-hidden-tablet, .i-visible-mobile, .i-visible-desktop\").css(\"display\", \"none\");\r\n                            break;\r\n                        case \"desktop\":\r\n                            $(\".i-hidden-desktop, .i-visible-mobile, .i-visible-tablet\").css(\"display\", \"none\");\r\n                            break;\r\n                        // No default\r\n                    }\r\n\r\n                    if (deviceType !== \"desktop\") {\r\n\r\n                        // Find and add any stylesheets with data-responsive-{profileName} attributes\r\n                        $(`link[data-responsive-${deviceType}]`).each((index: number, stylesheet: Element) => {\r\n                            const responsiveStylesheets = $(stylesheet).attr(`data-responsive-${deviceType}`);\r\n                            if (responsiveStylesheets != null) {\r\n                                // Defer setting body visible while we wait for our custom stylesheet to load\r\n                                this.documentInstance.setBodyVisibleAfterLoadComplete = false;\r\n                                $.each(responsiveStylesheets.split(\",\"), (_: number, url: string) => {\r\n                                    // Give the stylesheet a link so we can remove it later if the responsive style changes\r\n                                    this._pendingResponsiveFiles.push(\r\n                                        Browser.loadStylesheet(\r\n                                            url,\r\n                                            `data-responsive-${deviceType}`,\r\n                                            \"responsive-marker\",\r\n                                            (stylesheetId: string): void => {\r\n                                                this.checkPendingResponsiveFilesLoad(stylesheetId);\r\n                                            }));\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        // Find any stylesheet references stored in css/responsive script tags\r\n                        $(\"script[type='i-url-container/css']\").each((index: number, scriptElement: Element) => {\r\n                            const scriptContainer = $(scriptElement);\r\n                            const displayModes: string = scriptContainer.data(\"responsive-display-modes\");\r\n                            if (displayModes != null && displayModes.toLowerCase().indexOf(deviceType) !== -1) {\r\n                                const url: string = $.trim(scriptContainer.html());\r\n                                this.documentInstance.setBodyVisibleAfterLoadComplete = false;\r\n                                // Give the stylesheet a link so we can remove it later if the responsive style changes\r\n                                this._pendingResponsiveFiles.push(\r\n                                    Browser.loadStylesheet(url,\r\n                                        `data-responsive-${deviceType}`,\r\n                                        \"responsive-marker\",\r\n                                        (stylesheetId: string): void => {\r\n                                            this.checkPendingResponsiveFilesLoad(stylesheetId);\r\n                                        }));\r\n                            }\r\n                        });\r\n\r\n\r\n                        // Find any script references stored in css/responsive script tags\r\n                        $(\"script[type='i-url-container/script']\").each((index: number, scriptElement: Element) => {\r\n                            const scriptContainer = $(scriptElement);\r\n                            const displayModes: string = scriptContainer.data(\"responsive-display-modes\");\r\n                            if (displayModes != null && displayModes.toLowerCase().indexOf(deviceType) !== -1) {\r\n                                const url: string = $.trim(scriptContainer.html());\r\n                                this.documentInstance.setBodyVisibleAfterLoadComplete = false;\r\n                                // Give the stylesheet a link so we can remove it later if the responsive style changes\r\n                                this._pendingResponsiveFiles.push(\r\n                                    Browser.loadScript(url,\r\n                                        `data-responsive-${deviceType}`,\r\n                                        \"responsive-marker\",\r\n                                        (scriptId: string): void => {\r\n                                            this.checkPendingResponsiveFilesLoad(scriptId);\r\n                                        }));\r\n                            }\r\n                        });\r\n\r\n                    }\r\n\r\n                    if (configuration.profileName === \"mobile\" || configuration.profileName === \"tablet\") {\r\n                        switch (configuration.profileName) {\r\n                            case \"mobile\":\r\n                                configuration.clickTargets.push(new ResponsiveClickTarget(\".i-link>a,\"\r\n                                    + \".i-member-link a\", ResponsiveClickTargetKind.block));\r\n                                configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-actions-content .i-page-link,\"\r\n                                    + \"#i-actions-content .i-popup-link,\"\r\n                                    + \"#i-actions-content .i-function-link\", ResponsiveClickTargetKind.inline));\r\n                                break;\r\n                            case \"tablet\":\r\n                                configuration.clickTargets.push(new ResponsiveClickTarget(\".i-breadcrumbs-container a,\"\r\n                                    + \"#i-after-header-content .i-page-link,\"\r\n                                    + \"#i-after-header-content .i-popup-link,\"\r\n                                    + \"#i-after-header-content .i-function-link,\"\r\n                                    + \"#i-actions-content .i-page-link,\"\r\n                                    + \"#i-actions-content .i-popup-link,\"\r\n                                    + \"#i-actions-content .i-function-link\", ResponsiveClickTargetKind.inline));\r\n                                configuration.clickTargets.push(\r\n                                    new ResponsiveClickTarget(\"a[href='#top']\", ResponsiveClickTargetKind.block));\r\n                                break;\r\n                            // No default\r\n                        }\r\n\r\n                        // Add some default click targets - apply to both mobile and tablet\r\n                        configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-footer-content>a,\"\r\n                            + \"#i-after-header-content .i-function-link\", ResponsiveClickTargetKind.inline));\r\n                        configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-seealso-section-content a,\"\r\n                            + \".i-in-this-topic-container a\", ResponsiveClickTargetKind.block));\r\n\r\n                        // And default pivot tables\r\n                        configuration.tablesToPivot.push(new ResponsiveTable(\"table.pivot-table,table.i-pivot-table\"));\r\n                    }\r\n\r\n                }\r\n\r\n                this._configuration = configuration;\r\n\r\n                if (this._pendingResponsiveFiles.length === 0) {\r\n                    // No pending files, immediately apply\r\n                    this.onResponsiveFilesLoaded();\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        public initializeContentOrdinal(): number {\r\n            const CONTENT_ORDINAL = 999;\r\n\r\n            return CONTENT_ORDINAL;\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            // Apply the custom click targets\r\n            $.each(configuration.clickTargets, (_: number, clickTarget: ResponsiveClickTarget) => {\r\n                this.applyClickTarget(clickTarget);\r\n            });\r\n\r\n            // Pivot tables\r\n            $.each(configuration.tablesToPivot, (_tableIndex: number, responsiveTable: ResponsiveTable) => {\r\n                $(responsiveTable.selector).each((_elementIndex: number, table: HTMLElement) => {\r\n                    const pivotDiv = ResponsiveDocumentFeature.pivotTable(table);\r\n                    if (pivotDiv != null) {\r\n                        if (responsiveTable.onAfterPivot != null) {\r\n                            responsiveTable.onAfterPivot($(table), pivotDiv);\r\n                        } else {\r\n                            $(table).replaceWith(pivotDiv);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Wire up any responsive switches\r\n            $(\".i-responsive-switch\")\r\n                .off(\"click.responsive\")\r\n                .on(\"click.responsive\", (eventObject: JQueryEventObject) => {\r\n                    const displayMode: string = $(eventObject.currentTarget).data(\"i-responsive-mode\");\r\n                    if (displayMode !== \"\") {\r\n                        this.setForcedDisplayMode(displayMode);\r\n                        Browser.reload();\r\n                    }\r\n                });\r\n\r\n            $(\".i-responsive-select\")\r\n                .val(configuration.profileName)\r\n                .off(\"change.responsive\")\r\n                .on(\"change.responsive\",\r\n                    (eventObject: JQueryEventObject) => {\r\n                        const selectedValue = $(eventObject.currentTarget).val();\r\n                        if (selectedValue !== \"\") {\r\n                            this.setForcedDisplayMode(selectedValue as string);\r\n                            Browser.reload();\r\n                        }\r\n                    });\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (message) {\r\n                switch (message.messageType) {\r\n                    case DocumentMessageNames.insertNavigationHeader:\r\n                        this.insertNavigationHeader();\r\n                        break;\r\n                    case DocumentMessageNames.searchHighlightComplete:\r\n                        $(\"a#i-remove-highlighting\").css(\"display\", \"inline\");\r\n                        break;\r\n                    // No default\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        protected insertNavigationHeader(): void {\r\n\r\n            if ($(\"body > div.navigation-header\").length === 0) {\r\n\r\n                const header: JQuery = $(\"<div class=\\\"i-navigation-header\\\"><div class=\\\"i-inner-container\\\"></div></div>\");\r\n                const innercontainer: JQuery = header.find(\".i-inner-container\").first();\r\n\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-previous\\\"><i class=\\\"icon-arrow-left\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-index\\\"><i class=\\\"icon-list\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-toc\\\"><i class=\\\"icon-book\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-search\\\"><i class=\\\"icon-search\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-nav-next\\\"><i class=\\\"icon-arrow-right\\\"/></a>\")\r\n                    .appendTo(innercontainer);\r\n                $(\"<a href=\\\"#\\\" id=\\\"i-remove-highlighting\\\" class=\\\"btn-warning\\\"><i class=\\\"icon-remove icon-white\\\"></i></a>\")\r\n                    .appendTo(innercontainer);\r\n\r\n                if ($(\".i-search-highlight\").length) {\r\n                    // Highlighted search items have been added to the body so show the remove highlights button\r\n                    innercontainer.children(\"#i-remove-highlighting\").css(\"display\", \"inline\");\r\n                }\r\n\r\n                innercontainer.children(\"a\")\r\n                    .off(\"click.responsive\")\r\n                    .on(\"click.responsive\", (eventObject: JQueryEventObject) => {\r\n                        const webframe = window.parent;\r\n                        if (typeof webframe != \"undefined\") {\r\n\r\n                            switch ($(eventObject.currentTarget).attr(\"id\")) {\r\n                                case \"i-nav-previous\":\r\n                                    Messaging.routeMessageToParentFrame(\r\n                                        RootMessageNames.navigate,\r\n                                        \"previous\");\r\n\r\n                                    break;\r\n                                case \"i-nav-next\":\r\n                                    Messaging.routeMessageToParentFrame(\r\n                                        RootMessageNames.navigate,\r\n                                        \"next\");\r\n\r\n                                    break;\r\n                                case \"i-nav-index\":\r\n                                case \"i-nav-toc\":\r\n                                case \"i-nav-search\":\r\n                                    let paneId: string = $(eventObject.currentTarget).attr(\"id\");\r\n                                    if (paneId.substring(0, INNOVASYS_PREFIX_LENGTH) === \"i-\") {\r\n                                        paneId = paneId.substring(INNOVASYS_PREFIX_LENGTH);\r\n                                    }\r\n                                    Messaging.routeMessageToParentFrame(RootMessageNames.openNavigationPane, paneId);\r\n                                    break;\r\n                                case \"i-remove-highlighting\":\r\n                                    // Instruct search highlighting to remove any existing highlights\r\n                                    this.documentInstance.processWindowMessage(\r\n                                        new WindowMessage(DocumentMessageNames.resetQuickSearch, null));\r\n                                    break;\r\n                                // No default\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                header.prependTo($(\"body\"));\r\n\r\n                if ($(\"html\").data(\"responsive-load-complete\") === true) {\r\n                    // Async load of responsive files already complete so make the body visible\r\n                    this.documentInstance.setBodyVisible();\r\n                    $(\"html\").data(\"responsive-load-complete\", null);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        protected applyClickTarget(clickTarget: ResponsiveClickTarget): void {\r\n            const buttonClassName: string\r\n                = (clickTarget.kind === ResponsiveClickTargetKind.inline) ? \"btn btn-mini btn-xs\" : \"btn\";\r\n            $(clickTarget.className).addClass(buttonClassName);\r\n        }\r\n\r\n        private getDeviceType(): string {\r\n\r\n            if (!this.isEnabled()) {\r\n                // Responsive disabled - always desktop\r\n                return \"DESKTOP\";\r\n            }\r\n\r\n            const forcedDisplayMode: string = this.getForcedDisplayMode();\r\n            if (forcedDisplayMode != null) {\r\n                return forcedDisplayMode;\r\n            }\r\n\r\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n            if ((Modernizr as any).touch) {\r\n\r\n                if (Modernizr.mq(\"screen and (orientation: portrait) and (max-device-width: 600px)\")) {\r\n                    return \"MOBILE\";\r\n                } else if (Modernizr.mq(\"screen and (orientation: landscape) and (max-device-width: 767px)\")) {\r\n                    return \"MOBILE\";\r\n                } else {\r\n                    return \"TABLET\";\r\n                }\r\n\r\n            } else if (navigator.userAgent.indexOf(\"Windows Phone OS\") !== -1) {\r\n                // Specific check for windows phone as Modernizr returns false for the touch property\r\n                return \"MOBILE\";\r\n            }\r\n\r\n            return \"DESKTOP\";\r\n\r\n        }\r\n\r\n        /**\r\n         * Returns any forced display mode set by the containing frame.\r\n         */\r\n        private getForcedDisplayMode() {\r\n\r\n            const overrides: IOverrides = Browser.getCommonSettings();\r\n            if (typeof overrides.forcedDisplayMode != \"undefined\"\r\n                && overrides.forcedDisplayMode != null) {\r\n\r\n                return overrides.forcedDisplayMode;\r\n            }\r\n\r\n            if (this.getFeatureSettings().displayMode != null) {\r\n                return this.getFeatureSettings().displayMode;\r\n            }\r\n\r\n            const location = Browser.getLocationInfo();\r\n            if (location.hash === \"#ForceDisplayDesktop\") {\r\n                return \"DESKTOP\";\r\n            } else if (location.hash === \"#ForceDisplayMobile\") {\r\n                return \"MOBILE\";\r\n            } else if (location.hash === \"#ForceDisplayTablet\") {\r\n                return \"TABLET\";\r\n            }\r\n\r\n            // Only check local storage here if we are in a frame - the parent frame sets the local storage\r\n            // value for overriding the default behavior so we only need to check it if we are actually running\r\n            // in a frame\r\n            const currentPath: string =\r\n                location.pathname.substring(0, location.pathname.lastIndexOf(\"/\"));\r\n            const responsiveStorageId\r\n                = `innovasys-responsive-${currentPath.replace(/[^a-zA-Z0-9_\\-]/g, \"\")}`;\r\n            if (this.documentInstance.getLocalStorage().getAttribute(responsiveStorageId) != null) {\r\n                return this.documentInstance.getLocalStorage().getAttribute(responsiveStorageId);\r\n            }\r\n\r\n            return null;\r\n\r\n        }\r\n\r\n        /**\r\n         * Forces a specific responsive display mode when the document loads. The forced display mode is set in local storage\r\n         *  so will be used by all subsequent page loads until it is reset.\r\n         */\r\n        public setForcedDisplayMode(displayMode: string): void {\r\n            const location = Browser.getLocationInfo();\r\n            const currentPath: string = location.pathname.substring(0, location.pathname.lastIndexOf(\"/\"));\r\n            const responsiveStorageId\r\n                = `innovasys-responsive-${currentPath.replace(/[^a-zA-Z0-9_\\-]/g, \"\")}`;\r\n            this.documentInstance.getLocalStorage().setAttribute(responsiveStorageId, displayMode);\r\n        }\r\n\r\n        /**\r\n         * Called after responsive setup completes.\r\n         */\r\n        private onResponsiveFilesLoaded() {\r\n\r\n            const overrides: IOverrides = Browser.getCommonSettings();\r\n\r\n            this.documentInstance.applyResponsiveConfiguration(this._configuration);\r\n\r\n            if (this._configuration.profileName !== \"desktop\") {\r\n                if (!this.documentInstance.isContentDocument\r\n                    || overrides.navigationKind === \"inpage\"\r\n                    || $(\"body > div.i-navigation-header\").length !== 0) {\r\n\r\n                    // Navigation header already loaded, or not a content document or a page with\r\n                    //  inpage navigation so make the body visible;\r\n                    this.documentInstance.setBodyVisible();\r\n                } else {\r\n                    // Navigation header not loaded yet, add a flag here so that when the header has finished loaded it will make\r\n                    //  the body visible\r\n                    $(\"html\").data(\"responsive-load-complete\", true);\r\n                }\r\n            }\r\n\r\n            $(\"html\").addClass(`i-responsive-${this._configuration.profileName}`);\r\n\r\n        }\r\n    }\r\n\r\n    export interface IResponsiveFeatureSettings {\r\n        isEnabled: boolean;\r\n        displayMode: string;\r\n    }\r\n\r\n    export class ResponsiveDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new ResponsiveDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ResponsiveDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class FixedToTopDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private isPinned = false;\r\n        private readonly rootSelector: string;\r\n\r\n        public getName(): string {\r\n            return \"Fixed to Top\";\r\n        }\r\n\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if ($(\".i-fixed-to-top\").length > 0) {\r\n                const scrollEventId = \"scroll.fixed-to-top\";\r\n                const resizeEventId = \"resize.fixed-to-top\";\r\n\r\n                setTimeout(() => this.refresh(), 1);\r\n\r\n                $(window)\r\n                    .off(scrollEventId)\r\n                    .on(scrollEventId, () => this.refresh())\r\n                    .off(resizeEventId)\r\n                    .on(resizeEventId, () => this.refresh());\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            setTimeout(() => this.refresh(), 1);\r\n        }\r\n\r\n        private refresh(): void {\r\n            const bodyTop = this.getBodyContentPosition();\r\n\r\n            const $fixedToTop = $(\".i-fixed-to-top\");\r\n\r\n            const scrollTop = $(window).scrollTop();\r\n            const isPinnedNewValue = (scrollTop > bodyTop);\r\n\r\n            if (this.isPinned !== isPinnedNewValue) {\r\n                this.isPinned = isPinnedNewValue;\r\n                $fixedToTop.toggleClass(\"i-is-fixed\", isPinnedNewValue);\r\n\r\n                if (this.isPinned) {\r\n                    $fixedToTop.css(\"top\", \"0\");\r\n                }\r\n            }\r\n\r\n            if (!this.isPinned) {\r\n                const topValue = bodyTop - scrollTop;\r\n                $(\".i-fixed-to-top\").css(\"top\", topValue > 0 ? `${topValue}px` : \"\");\r\n            }\r\n        }\r\n\r\n        private getBodyContentPosition(): number {\r\n            const bodyContentPosition = $(\"#i-body-content-container\", this.rootSelector).position();\r\n            if (bodyContentPosition != null) {\r\n                return bodyContentPosition.top;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class FixedToTopDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new FixedToTopDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.FixedToTopDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class ThemeDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _rootSelector: JQuery;\r\n\r\n        public getName(): string {\r\n            return \"Theme\";\r\n        }\r\n\r\n        private getDefaultSettings(): IThemeFeatureSettings {\r\n            return {\r\n                defaultThemeOption: null,\r\n                isThemeSelectionEnabled: false\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IThemeFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IThemeFeatureSettings>(\"theme\", this.getDefaultSettings);\r\n        }\r\n\r\n        /* eslint @typescript-eslint/no-unused-vars: \"off\" */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            this._rootSelector = rootSelector;\r\n\r\n            const settings = this.getFeatureSettings();\r\n\r\n            if (settings.isThemeSelectionEnabled) {\r\n                $(\".i-theme-select\", rootSelector)\r\n                    .off(\"change.theme\")\r\n                    .on(\"change.theme\",\r\n                    (eventObject: JQueryEventObject) => {\r\n                        const themeName = $(eventObject.currentTarget).data(\"theme-name\");\r\n                        const stylesheetUrl = $(eventObject.currentTarget).val() as string;\r\n                        const themeOption = $(`option[value='${stylesheetUrl}']`, $(eventObject.currentTarget)).data(\"theme-option\");\r\n                        this.onThemeSelected(themeName, themeOption, stylesheetUrl, true);\r\n                    });\r\n            }\r\n\r\n            $(\".i-theme-select\", rootSelector).each((index: number, element: Element) => {\r\n                const $element = $(element);\r\n                const themeName = $element.data(\"theme-name\");\r\n\r\n                if (themeName != null) {\r\n                    let themeOptionToApply: string = this.documentInstance.getLocalStorage()\r\n                        .getAttribute(`i-theme-${themeName}`);\r\n                    if (themeOptionToApply == null) {\r\n                        themeOptionToApply = settings.defaultThemeOption;\r\n                    }\r\n                    if (themeOptionToApply != null) {\r\n                        const themeOption = $(`option[data-theme-option='${themeOptionToApply}']`, $element);\r\n                        if (themeOption.length > 0) {\r\n                            $element.val(themeOption.val());\r\n                            this.onThemeSelected(themeName, themeOptionToApply, themeOption.val() as string, false);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (!settings.isThemeSelectionEnabled) {\r\n                $(\".i-theme-selection-container\").hide();\r\n            } else {\r\n                $(\".i-theme-selection-container\").show();\r\n            }\r\n\r\n        }\r\n\r\n        private onThemeSelected(themeName: string, themeValue: string, stylesheetUrl: string, saveSelection: boolean) {\r\n            // Remove any existing theme stylesheets\r\n            const existingStylesheets = $(`link[data-theme-name='${themeName}']`);\r\n            existingStylesheets.remove();\r\n            // Add the new one (if not \"none\")\r\n            if (stylesheetUrl !== \"none\") {\r\n                $(\"head\").append(`<link rel=\"stylesheet\" href=\"${stylesheetUrl}\" type=\"text/css\" data-theme-name=\"${themeName}\" />`);\r\n            }\r\n            // Add a class to the root\r\n            $(\".i-theme-select option\", this._rootSelector).each((index: number, element: Element) => {\r\n                const optionValue = $(element).data(\"theme-option\");\r\n                $(\"html\").toggleClass(`i-theme-${themeName}-${optionValue}`, optionValue === themeValue);\r\n            });\r\n            if (saveSelection) {\r\n                // Save as the current preference\r\n                this.documentInstance.getLocalStorage().setAttribute(`i-theme-${themeName}`, themeValue);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export interface IThemeFeatureSettings {\r\n        defaultThemeOption: string;\r\n        isThemeSelectionEnabled: boolean;\r\n    }\r\n\r\n    export class ThemeDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new ThemeDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.ThemeDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class DynamicStylesDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _rootSelector: JQuery;\r\n        private _addedStyles: { dynamicWordBreak: number } = { dynamicWordBreak: null };\r\n\r\n        public getName(): string {\r\n            return \"DynamicStyles\";\r\n        }\r\n\r\n        private getDefaultSettings(): IDynamicStylesFeatureSettings {\r\n            return {\r\n                isDynamicWordWrapEnabled: false,\r\n                isDynamicWordWrapUpdateOnResizeEnabled: true\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IDynamicStylesFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IDynamicStylesFeatureSettings>(\"dynamicstyles\", this.getDefaultSettings);\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n                this._rootSelector = rootSelector;\r\n            }\r\n\r\n            const settings = this.getFeatureSettings();\r\n            if (!settings.isDynamicWordWrapEnabled) {\r\n                return;\r\n            }\r\n\r\n            // No dynamic styles in compiled help or at design time\r\n            if (!Browser.isCompiledHelp() && !Browser.isDesignTime) {\r\n\r\n                const $bodyContent = $(\"#i-body-content\", this._rootSelector);\r\n\r\n                if ($bodyContent.length > 0) {\r\n                    setTimeout(() => {\r\n                        this.updateDynamicWordBreak();\r\n                    });\r\n\r\n                    if (settings.isDynamicWordWrapUpdateOnResizeEnabled) {\r\n                        $(window).off(\"resize.dynamicstyles\")\r\n                            .on(\"resize.dynamicstyles\",\r\n                                () => {\r\n                                    this.updateDynamicWordBreak();\r\n                                });\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        private updateDynamicWordBreak(): void {\r\n\r\n            const styleId = \"i-dynamic-word-break\";\r\n            const $bodyContent = $(\"#i-body-content\", this._rootSelector);\r\n            const bodyContent = $bodyContent.get(0);\r\n\r\n            if (this._addedStyles.dynamicWordBreak != null) {\r\n                // Style already added. If the current width is > applied width, remove and re-evaluate\r\n                if (bodyContent.offsetWidth > this._addedStyles.dynamicWordBreak) {\r\n                    $(`#${styleId}`).remove();\r\n                    this._addedStyles.dynamicWordBreak = null;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (bodyContent.offsetWidth < bodyContent.scrollWidth\r\n                && ($(\"table\", $bodyContent).length > 0)) {\r\n\r\n                this._addedStyles.dynamicWordBreak = bodyContent.offsetWidth;\r\n                const $dynamicStylesElement = Browser.getDynamicStyleContainer(styleId);\r\n                $dynamicStylesElement.html(\"td {word-break: break-all;}\");\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    export interface IDynamicStylesFeatureSettings {\r\n        isDynamicWordWrapEnabled: boolean;\r\n        isDynamicWordWrapUpdateOnResizeEnabled: boolean;\r\n    }\r\n\r\n    export class DynamicStylesDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new DynamicStylesDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.DynamicStylesDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    export class DarkModeDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private readonly _optimalColors: Record<string, tinycolor.Instance> = {};\r\n\r\n        private findReadableColorOnDarkBackground(color: tinycolor.Instance): tinycolor.Instance {\r\n            if (this._optimalColors[color.toHex8String()]) {\r\n                return this._optimalColors[color.toHex8String()];\r\n            }\r\n\r\n            const maximumLightening = 100;\r\n            const lighteningIncrement = 1;\r\n            let resolvedColor: tinycolor.Instance;\r\n\r\n            for (let i = 1; i < maximumLightening; i += lighteningIncrement) {\r\n                const possibleColor = color.clone().lighten(i);\r\n                if (tinycolor.isReadable(possibleColor, \"#333\")) {\r\n                    resolvedColor = possibleColor;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (resolvedColor == null) {\r\n                resolvedColor = tinycolor(\"#ccc\");\r\n            }\r\n\r\n            this._optimalColors[color.toHex8String()] = resolvedColor;\r\n\r\n            return resolvedColor;\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"DarkMode\";\r\n        }\r\n\r\n        private getDefaultSettings(): IDarkModeFeatureSettings {\r\n            return {\r\n                isEnabled: false,\r\n                isAlwaysDarkMode: false\r\n            };\r\n        }\r\n\r\n        private getFeatureSettings(): IDarkModeFeatureSettings {\r\n            return this.documentInstance.getFeatureSettings<IDarkModeFeatureSettings>(\"darkmode\", this.getDefaultSettings);\r\n        }\r\n\r\n        public initializeDocument(): void {\r\n\r\n            const settings = this.getFeatureSettings();\r\n\r\n            if (settings.isEnabled) {\r\n                if (settings.isAlwaysDarkMode) {\r\n                    $(\"html\").addClass(\"i-dark\");\r\n                } else {\r\n                    if (window.matchMedia) {\r\n                        const matchMediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n                        const matchMediaListener = (queryList: MediaQueryList, isAddDarkModificationsDisabled: boolean = false) => {\r\n                            if (queryList.matches) {\r\n                                $(\"html\").addClass(\"i-dark\");\r\n                                if (!isAddDarkModificationsDisabled) {\r\n                                    this.addDarkModifications();\r\n                                }\r\n                            } else {\r\n                                if ($(\"html\").hasClass(\"i-dark\")) {\r\n                                    this.removeDarkModifications();\r\n                                    $(\"html\").removeClass(\"i-dark\");\r\n                                }\r\n                            }\r\n                        };\r\n                        matchMediaListener(matchMediaQuery, true);\r\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                        matchMediaQuery.addListener(matchMediaListener as any);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad?: boolean): void {\r\n            if ($(\"html\").hasClass(\"i-dark\")) {\r\n                this.addDarkModifications();\r\n            }\r\n        }\r\n\r\n        private addDarkModifications(): void {\r\n            const $inlineColors = $(\"pre [style]\");\r\n            $inlineColors.each((_, element) => {\r\n                if (element.style.color) {\r\n                    const originalColor = tinycolor(element.style.color);\r\n                    const color = this.findReadableColorOnDarkBackground(originalColor);\r\n                    if (color.toHex8String() !== originalColor.toHex8String()) {\r\n                        $(element).data(\"i-original-color\", element.style.color);\r\n                        element.style.color = color.toHex8String();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        private removeDarkModifications(): void {\r\n            const $inlineColors = $(\"pre [style]\");\r\n            $inlineColors.each((_, element) => {\r\n                const $element = $(element);\r\n                if ($element.data(\"i-original-color\")) {\r\n                    element.style.color = $element.data(\"i-original-color\");\r\n                    $element.removeData(\"i-original-color\");\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    export interface IDarkModeFeatureSettings {\r\n        isEnabled: boolean;\r\n        isAlwaysDarkMode: boolean;\r\n    }\r\n\r\n    export class DarkModeDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new DarkModeDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.DarkModeDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const replacementList = [\r\n        {'base':'A', 'letters':/[\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F]/g},\r\n        {'base':'AA','letters':/[\\uA732]/g},\r\n        {'base':'AE','letters':/[\\u00C6\\u01FC\\u01E2]/g},\r\n        {'base':'AO','letters':/[\\uA734]/g},\r\n        {'base':'AU','letters':/[\\uA736]/g},\r\n        {'base':'AV','letters':/[\\uA738\\uA73A]/g},\r\n        {'base':'AY','letters':/[\\uA73C]/g},\r\n        {'base':'B', 'letters':/[\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181]/g},\r\n        {'base':'C', 'letters':/[\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E]/g},\r\n        {'base':'D', 'letters':/[\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779]/g},\r\n        {'base':'DZ','letters':/[\\u01F1\\u01C4]/g},\r\n        {'base':'Dz','letters':/[\\u01F2\\u01C5]/g},\r\n        {'base':'E', 'letters':/[\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E]/g},\r\n        {'base':'F', 'letters':/[\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B]/g},\r\n        {'base':'G', 'letters':/[\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E]/g},\r\n        {'base':'H', 'letters':/[\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D]/g},\r\n        {'base':'I', 'letters':/[\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197]/g},\r\n        {'base':'J', 'letters':/[\\u004A\\u24BF\\uFF2A\\u0134\\u0248]/g},\r\n        {'base':'K', 'letters':/[\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2]/g},\r\n        {'base':'L', 'letters':/[\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780]/g},\r\n        {'base':'LJ','letters':/[\\u01C7]/g},\r\n        {'base':'Lj','letters':/[\\u01C8]/g},\r\n        {'base':'M', 'letters':/[\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C]/g},\r\n        {'base':'N', 'letters':/[\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4]/g},\r\n        {'base':'NJ','letters':/[\\u01CA]/g},\r\n        {'base':'Nj','letters':/[\\u01CB]/g},\r\n        {'base':'O', 'letters':/[\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C]/g},\r\n        {'base':'OI','letters':/[\\u01A2]/g},\r\n        {'base':'OO','letters':/[\\uA74E]/g},\r\n        {'base':'OU','letters':/[\\u0222]/g},\r\n        {'base':'P', 'letters':/[\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754]/g},\r\n        {'base':'Q', 'letters':/[\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A]/g},\r\n        {'base':'R', 'letters':/[\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782]/g},\r\n        {'base':'S', 'letters':/[\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784]/g},\r\n        {'base':'T', 'letters':/[\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786]/g},\r\n        {'base':'TZ','letters':/[\\uA728]/g},\r\n        {'base':'U', 'letters':/[\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244]/g},\r\n        {'base':'V', 'letters':/[\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245]/g},\r\n        {'base':'VY','letters':/[\\uA760]/g},\r\n        {'base':'W', 'letters':/[\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72]/g},\r\n        {'base':'X', 'letters':/[\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C]/g},\r\n        {'base':'Y', 'letters':/[\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE]/g},\r\n        {'base':'Z', 'letters':/[\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762]/g},\r\n        {'base':'a', 'letters':/[\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250]/g},\r\n        {'base':'aa','letters':/[\\uA733]/g},\r\n        {'base':'ae','letters':/[\\u00E6\\u01FD\\u01E3]/g},\r\n        {'base':'ao','letters':/[\\uA735]/g},\r\n        {'base':'au','letters':/[\\uA737]/g},\r\n        {'base':'av','letters':/[\\uA739\\uA73B]/g},\r\n        {'base':'ay','letters':/[\\uA73D]/g},\r\n        {'base':'b', 'letters':/[\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253]/g},\r\n        {'base':'c', 'letters':/[\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184]/g},\r\n        {'base':'d', 'letters':/[\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A]/g},\r\n        {'base':'dz','letters':/[\\u01F3\\u01C6]/g},\r\n        {'base':'e', 'letters':/[\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD]/g},\r\n        {'base':'f', 'letters':/[\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C]/g},\r\n        {'base':'g', 'letters':/[\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F]/g},\r\n        {'base':'h', 'letters':/[\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265]/g},\r\n        {'base':'hv','letters':/[\\u0195]/g},\r\n        {'base':'i', 'letters':/[\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131]/g},\r\n        {'base':'j', 'letters':/[\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249]/g},\r\n        {'base':'k', 'letters':/[\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3]/g},\r\n        {'base':'l', 'letters':/[\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747]/g},\r\n        {'base':'lj','letters':/[\\u01C9]/g},\r\n        {'base':'m', 'letters':/[\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F]/g},\r\n        {'base':'n', 'letters':/[\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5]/g},\r\n        {'base':'nj','letters':/[\\u01CC]/g},\r\n        {'base':'o', 'letters':/[\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275]/g},\r\n        {'base':'oi','letters':/[\\u01A3]/g},\r\n        {'base':'ou','letters':/[\\u0223]/g},\r\n        {'base':'oo','letters':/[\\uA74F]/g},\r\n        {'base':'p','letters':/[\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755]/g},\r\n        {'base':'q','letters':/[\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759]/g},\r\n        {'base':'r','letters':/[\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783]/g},\r\n        {'base':'s','letters':/[\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B]/g},\r\n        {'base':'t','letters':/[\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787]/g},\r\n        {'base':'tz','letters':/[\\uA729]/g},\r\n        {'base':'u','letters':/[\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289]/g},\r\n        {'base':'v','letters':/[\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C]/g},\r\n        {'base':'vy','letters':/[\\uA761]/g},\r\n        {'base':'w','letters':/[\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73]/g},\r\n        {'base':'x','letters':/[\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D]/g},\r\n        {'base':'y','letters':/[\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF]/g},\r\n        {'base':'z','letters':/[\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763]/g}\r\n    ];;\r\n\r\n\r\n\r\n    export class DiacriticsHelper {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor() {\r\n\r\n        }\r\n\r\n        public removeDiacritics (str : string) : string {\r\n            for(var i=0; i<replacementList.length; i++) {\r\n                str = str.replace(replacementList[i].letters, replacementList[i].base);\r\n            }\r\n        \r\n            return str;\r\n        }\r\n    }\r\n}","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n    export class NavigationMessageNames {\r\n        public static syncTableOfContents = \"syncToC\";\r\n        public static select = \"select\";\r\n        public static shrinkIFrames = \"shrinkIframes\";\r\n        public static loaded = \"loaded\";\r\n        public static toggleTocPrevious = \"toggle-toc-previous\";\r\n        public static toggleTocNext = \"toggle-toc-next\";\r\n        public static navigate = \"navigate\";\r\n        public static activated = \"activated\";\r\n        public static updateNavigationButtons = \"update-navigation-buttons\";\r\n        public static updatePageTitle = \"updatePageTitle\";\r\n        public static openNavigationPane = \"openNavigationPane\";\r\n        public static closeNavigationPane = \"closeNavigationPane\";\r\n        public static insertRemoveHighlighting = \"insertRemoveHighlighting\";\r\n    }\r\n}\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const navigationConstants = {\r\n        navigationDelay: 500,\r\n        navigationPrefixLength: 4\r\n    };\r\n\r\n    export class NavigationDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _rootSelector: JQuery = null;\r\n        private readonly _isIframeResizeTimerDisabled = false;\r\n        private _isAccordionView = true;\r\n        private readonly _navigationFrames = [\"i-toc\", \"i-index\", \"i-search\"];\r\n        private _isEnabled = false;\r\n\r\n        public isTocNavigationEnabled = false;\r\n        public isStartOfToc = false;\r\n        public isEndOfToc = false;\r\n\r\n        public getName(): string {\r\n            return \"Navigation\";\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            this._rootSelector = rootSelector;\r\n\r\n            if ($(\"#i-navigation-container\", this._rootSelector).length > 0) {\r\n\r\n                this._isEnabled = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            switch (message.messageType) {\r\n                case NavigationMessageNames.syncTableOfContents:\r\n                    Messaging.routeMessageToFrameElement(\"i-toc\", message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.select:\r\n                    this.selectNavigationFrame(message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.shrinkIFrames:\r\n                    this.shrinkFrame($(\"iframe#i-toc,iframe#i-index,iframe#i-search\"));\r\n                    break;\r\n                case NavigationMessageNames.loaded:\r\n                    // Forward message to search pane so that search highlights can be rendered\r\n                    Messaging.routeMessageToFrameElement(\"i-search\", message.messageType, message.messageData);\r\n                    break;\r\n                case DocumentMessageNames.quickSearch:\r\n                case DocumentMessageNames.searchHighlightComplete:\r\n                    // Pass to parent frame handler so it can be forwarded on to the content frame\r\n                    Messaging.routeMessageToWindow(parent, message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.toggleTocPrevious:\r\n                    this.isStartOfToc = (message.messageData === \"true\");\r\n                    $(\"#i-toc-header #i-previous\").toggleClass(\"i-arrow-left-disabled\", this.isStartOfToc);\r\n                    break;\r\n                case NavigationMessageNames.toggleTocNext:\r\n                    this.isEndOfToc = (message.messageData === \"true\");\r\n                    $(\"#i-toc-header #i-next\").toggleClass(\"i-arrow-right-disabled\", this.isEndOfToc);\r\n                    break;\r\n                case NavigationMessageNames.navigate:\r\n                    if (message.messageData === \"previous\" || message.messageData === \"next\") {\r\n                        this.navigateToc(message.messageData);\r\n                    } else {\r\n                        Messaging.routeMessageToWindow(parent, message.messageType, message.messageData);\r\n                    }\r\n                    break;\r\n                // No default\r\n            }\r\n        }\r\n\r\n        protected navigateToc(direction: string): void {\r\n            Messaging.routeMessageToFrameElement(\"i-toc\", NavigationMessageNames.navigate, direction);\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            if (configuration.profileName !== \"desktop\") {\r\n\r\n                // Tablet & Mobile\r\n\r\n                this._isAccordionView = false;\r\n\r\n                // Hide the accordion elements\r\n                $(\".i-header, .i-header.ui-state-active\").css(\"display\", \"none\");\r\n                if (Modernizr.touch) {\r\n                    $(\"iframe\").attr(\"scrolling\", \"no\");\r\n                }\r\n\r\n                $(window)\r\n                    .off(\"resize.navigation\")\r\n                    .on(\"resize.navigation\", () => {\r\n                        this.addCloseButtonChevrons();\r\n                    });\r\n\r\n                $(\"#i-close-pane\", this._rootSelector)\r\n                    .off(\"click.navigation\", \"a.btn, i.i-image\")\r\n                    .on(\"click.navigation\", \"a.btn, i.i-image\", (event: JQueryEventObject) => {\r\n                        event.preventDefault();\r\n                        const webContentFrame: Window = window.parent;\r\n                        Messaging.routeMessageToWindow(webContentFrame, NavigationMessageNames.closeNavigationPane, null);\r\n                    });\r\n\r\n                // Resize the iframes and set a timer to keep them sized\r\n                Browser.resizeIFrames(this._rootSelector);\r\n                setInterval(() => {\r\n                    if (!this._isIframeResizeTimerDisabled) {\r\n                        Browser.resizeIFrames(this._rootSelector);\r\n                    }\r\n                }, navigationConstants.navigationDelay);\r\n\r\n            } else {\r\n\r\n                // Desktop\r\n\r\n                this._isAccordionView = true;\r\n\r\n                if ($(\"#i-accordion\", this._rootSelector).length > 0) {\r\n                    $(\"#i-accordion\", this._rootSelector).accordion({ heightStyle: \"fill\" });\r\n\r\n                    // Initial resize\r\n                    setTimeout(() => {\r\n                        $(\"#i-accordion\", this._rootSelector).accordion(\"refresh\");\r\n                    }, 1);\r\n\r\n                    // Resize immediately when the window resizes\r\n                    $(window)\r\n                        .off(\"resize.navigation\")\r\n                        .on(\"resize.navigation\", () => {\r\n                            if ($(\"#i-accordion\", this._rootSelector).data(\"ui-accordion\") != null) {\r\n                                $(\"#i-accordion\", this._rootSelector).accordion(\"refresh\");\r\n                            }\r\n                        });\r\n\r\n                    // Notify the websearch iframe to set focus in the search box\r\n                    $(\"#i-accordion\", this._rootSelector)\r\n                        .off(\"accordionactivate.navigation\")\r\n                        .on(\"accordionactivate.navigation\", (_: JQuery.Event, ui: JQueryUI.AccordionUIParams): void => {\r\n                            if (ui.newHeader.attr(\"id\") === \"i-search-header\") {\r\n                                Messaging.routeMessageToFrameElement(\"i-search\", NavigationMessageNames.activated, null);\r\n                            }\r\n                        });\r\n\r\n                } else if ($(\"#i-tabstrip\", this._rootSelector).length > 0) {\r\n                    // Change default duration on the tabs\r\n                    const options: JQueryUI.TabsOptions = {\r\n                        heightStyle: \"fill\"\r\n                    };\r\n\r\n                    // Tab strip\r\n                    $(\"#i-tabstrip\", this._rootSelector).tabs(options);\r\n\r\n                    // Initial resize\r\n                    setTimeout(() => {\r\n                        $(\"#i-tabstrip\", this._rootSelector).tabs(\"refresh\");\r\n                    }, 1);\r\n\r\n                    // Resize immediately when the window resizes\r\n                    $(window)\r\n                        .off(\"resize.navigation\")\r\n                        .on(\"resize.navigation\", () => {\r\n                            if ($(\"#i-tabstrip\", this._rootSelector).data(\"ui-tabs\") != null) {\r\n                                $(\"#i-tabstrip\", this._rootSelector).tabs(\"refresh\");\r\n                            }\r\n                        });\r\n                }\r\n\r\n                if (this.isTocNavigationEnabled) {\r\n\r\n                    const arrowContainer = $(\"<div class=\\\"i-arrow-container\\\"></div>\");\r\n                    arrowContainer.append(\"<div class=\\\"i-arrow i-arrow-right\\\" id=\\\"i-next\\\"></div>\");\r\n                    arrowContainer.append(\"<div class=\\\"i-arrow i-arrow-left\\\" id=\\\"i-previous\\\"></div>\");\r\n\r\n                    $(\"#i-toc-header\", this._rootSelector).append(arrowContainer);\r\n\r\n                    $(\"#i-toc-header #i-next\", this._rootSelector)\r\n                        .off(\"click.tocnavigation\")\r\n                        .on(\"click.tocnavigation\", () => {\r\n\r\n                            if (!this.isEndOfToc) {\r\n                                this.navigateToc(\"next\");\r\n                            }\r\n\r\n                        });\r\n\r\n                    $(\"#i-toc-header #i-previous\", this._rootSelector)\r\n                        .off(\"click.tocnavigation\")\r\n                        .on(\"click.tocnavigation\", () => {\r\n\r\n                            if (!this.isStartOfToc) {\r\n                                this.navigateToc(\"previous\");\r\n                            }\r\n\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        protected shrinkFrame(frameSelector: JQuery): void {\r\n            frameSelector.height(null);\r\n            frameSelector.data(\"last-height\", null);\r\n            frameSelector.css(\"display\", \"none\");\r\n        }\r\n\r\n        protected selectNavigationFrame(frameId: string): void {\r\n\r\n            if (frameId != null && frameId.indexOf(\"nav-\") === 0) {\r\n                frameId = `i-${frameId.substring(navigationConstants.navigationPrefixLength)}`;\r\n            }\r\n\r\n            for (let x = 0; x < this._navigationFrames.length; x++) {\r\n                const currentFrameId: string = this._navigationFrames[x];\r\n                const isSelected: boolean = (currentFrameId === frameId);\r\n                if (isSelected) {\r\n                    if (this._isAccordionView) {\r\n                        $(\"#i-accordion\").accordion(\"option\", \"active\", x);\r\n                    } else {\r\n                        $(`iframe#${currentFrameId}`).css(\"display\", \"block\");\r\n                    }\r\n                } else {\r\n                    $(`iframe#${currentFrameId}`).css(\"display\", \"none\");\r\n                }\r\n            }\r\n\r\n            if (!this._isAccordionView) {\r\n                Browser.resizeIFrames(this._rootSelector, true);\r\n            }\r\n\r\n        }\r\n\r\n        protected addCloseButtonChevrons(): void {\r\n            let topWindowHeight: number;\r\n            try {\r\n                topWindowHeight = $(window.top).height();\r\n            } catch (ex) {\r\n                topWindowHeight = $(window).height();\r\n            }\r\n            const closePaneHeight = Math.max($(\"#i-close-pane\").height(), topWindowHeight);\r\n\r\n            $(\"#i-close-pane > i.i-image\").remove();\r\n\r\n            /* eslint-disable-next-line no-magic-numbers */\r\n            for (let i = topWindowHeight / 2; i < closePaneHeight; i += topWindowHeight) {\r\n                const image = $(\"<i class=\\\"i-image\\\"></i>\");\r\n                image.css(\"top\", `${i}px`);\r\n                image.appendTo(\"#i-close-pane\");\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class NavigationDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new NavigationDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.NavigationDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const tableOfContentsConstants = {\r\n        slideToggleDelay: 200,\r\n        iconIndexFolderNew: 3,\r\n        iconIndexFolder: 1,\r\n        iconIndexPageNew: 10,\r\n        iconIndexPage: 9\r\n    };\r\n\r\n    export class TableOfContentsDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _lastSelectedNode: JQuery = null;\r\n        private _ignoreSyncRequest = false;\r\n        private _selectedNodeIndex = -1;\r\n        private _firstNodeIndex = -1;\r\n        private _lastNodeIndex = -1;\r\n        private _tocNodeCount = -1;\r\n        private _selectedNodeHref: string = null;\r\n        private _rootSelector: JQuery = null;\r\n        private _isTocConstructed = false;\r\n        private _isMobileToc = false;\r\n        private _isEnabled = false;\r\n        public syncTocUrl: string = null;\r\n\r\n        public getName(): string {\r\n            return \"TableOfContents\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n            if (isInitialLoad) {\r\n                this._rootSelector = rootSelector;\r\n\r\n                if ($(\"#i-toc-container\", this._rootSelector).length > 0) {\r\n\r\n                    this._isEnabled = true;\r\n\r\n                    this._indexNodes();\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            if (configuration.profileName === \"desktop\") {\r\n                $(\"html\")\r\n                    .removeClass(\"ui-mobile\")\r\n                    .removeClass(\"ui-mobile-rendering\");\r\n                // Desktop\r\n                this.constructDesktopToc($(\"ul#i-root\", this._rootSelector));\r\n                this._isTocConstructed = true;\r\n            } else {\r\n                // Mobile/Tablet\r\n                $(\"ul#i-root\", this._rootSelector).css(\"display\", \"none\");\r\n                this.constructMobileToC();\r\n                this._isMobileToc = true;\r\n                this._isTocConstructed = true;\r\n                $(\"ul#i-root\", this._rootSelector).addClass(\"visible\");\r\n            }\r\n            if (this.syncTocUrl != null) {\r\n                const url: string = this.syncTocUrl;\r\n                this.syncTocUrl = null;\r\n                this.syncTocNodeToUrl(url);\r\n            }\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            switch (message.messageType) {\r\n                case NavigationMessageNames.navigate:\r\n                    if (message.messageData) {\r\n                        let anchor: JQuery = null;\r\n\r\n                        if (message.messageData === \"next\") {\r\n                            anchor = this.moveToNextNode();\r\n                        } else if (message.messageData === \"previous\") {\r\n                            anchor = this.moveToPreviousNode();\r\n                        }\r\n\r\n                        if (anchor != null && anchor.length) {\r\n\r\n                            this._ignoreSyncRequest = false;\r\n                            this.syncTocNode(anchor);\r\n\r\n                            // Ignore the next ToC node sync request as it will come from the webframe when the content has finished loading\r\n                            this._ignoreSyncRequest = true;\r\n\r\n                            if (anchor.attr(\"href\").substring(0, 1) !== \"#\") {\r\n                                const webframe: Window = window.parent.parent;\r\n                                Messaging.routeMessageToWindow(webframe, NavigationMessageNames.navigate, anchor.attr(\"href\"));\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case NavigationMessageNames.updateNavigationButtons:\r\n                    this.updateNavigationButtons();\r\n                    break;\r\n                case NavigationMessageNames.syncTableOfContents:\r\n                    this.syncTocNodeToUrl(message.messageData);\r\n                    break;\r\n                // No default\r\n            }\r\n        }\r\n\r\n        protected updateNavigationButtons(): void {\r\n            Messaging.routeMessageToWindow(\r\n                window.parent,\r\n                NavigationMessageNames.toggleTocNext,\r\n                this.isLastNodeSelected() ? \"true\" : \"false\");\r\n            Messaging.routeMessageToWindow(\r\n                window.parent,\r\n                NavigationMessageNames.toggleTocPrevious,\r\n                this.isFirstNodeSelected() ? \"true\" : \"false\");\r\n        }\r\n\r\n        protected moveToNextNode(): JQuery {\r\n            return this._moveNode(false);\r\n        }\r\n\r\n        protected moveToPreviousNode(): JQuery {\r\n            return this._moveNode(true);\r\n        }\r\n\r\n        protected setSelectedNode(anchor: JQuery): void {\r\n            this._selectedNodeIndex = parseInt(anchor.attr(\"data-node-index\"), 10);\r\n            this._selectedNodeHref = anchor.attr(\"href\");\r\n        }\r\n\r\n        protected isLastNodeSelected(): boolean {\r\n\r\n            if (this._tocNodeCount === -1) {\r\n                this._tocNodeCount = this._getAnchors().length;\r\n            }\r\n\r\n            return this._selectedNodeIndex === this._lastNodeIndex;\r\n        }\r\n\r\n        protected isFirstNodeSelected(): boolean {\r\n            return this._selectedNodeIndex === this._firstNodeIndex;\r\n        }\r\n\r\n        private _getAnchors(): JQuery {\r\n            return this._rootSelector.find(\"#i-toc-container > ul#i-root a[data-node-index]\");\r\n        }\r\n\r\n        private _moveNode(isPrevious: boolean) {\r\n\r\n            const anchors: JQuery = this._getAnchors();\r\n\r\n            if (isPrevious) {\r\n                if (this._selectedNodeIndex > 0) {\r\n                    do {\r\n                        this._selectedNodeIndex--;\r\n                    } while (anchors.eq(this._selectedNodeIndex)\r\n                        .attr(\"href\")\r\n                        .substring(0, 1) === \"#\" && this._selectedNodeIndex > 0);\r\n                }\r\n            } else {\r\n                if (anchors.length - 1 > this._selectedNodeIndex) {\r\n                    do {\r\n                        this._selectedNodeIndex++;\r\n                    } while (anchors.eq(this._selectedNodeIndex)\r\n                        .attr(\"href\")\r\n                        .substring(0, 1) === \"#\" && anchors.length - 1 > this._selectedNodeIndex);\r\n                }\r\n            }\r\n\r\n            return anchors.eq(this._selectedNodeIndex);\r\n        }\r\n\r\n        protected isPageSelected(anchor: JQuery): boolean {\r\n            return (anchor.attr(\"href\") === this._selectedNodeHref);\r\n        }\r\n\r\n        protected constructDesktopToc(root: JQuery): void {\r\n            this.processListElement(root);\r\n        }\r\n\r\n        protected expandOrCollapseClickHandler(event: JQueryEventObject): void {\r\n            const siblingList = $(event.target).nextAll(\"ul\") as JQuery<HTMLElement>;\r\n            this.expandOrCollapseNode(siblingList, true);\r\n        }\r\n\r\n        protected nodeClickHandler(element: JQuery): void {\r\n\r\n            this.selectNodeElement(element);\r\n\r\n            if (element.attr(\"href\") !== \"#\") {\r\n                Messaging.routeMessageToWindow((window.parent.parent as Window), NavigationMessageNames.navigate, element.attr(\"href\"));\r\n            }\r\n\r\n            // Don't collapse the nested list when clicking on a node (do expand it if it is collapsed)\r\n            if (!$(element)\r\n                .prev(\"ins\")\r\n                .hasClass(\"i-collapse\")) {\r\n\r\n                // expand /collapse child\r\n                const siblingList = element.nextAll(\"ul\");\r\n                this.expandOrCollapseNode(siblingList, true);\r\n            }\r\n\r\n            this.updateNavigationButtons();\r\n\r\n        }\r\n\r\n        protected selectNodeElement(element: JQuery): void {\r\n\r\n            if (this._lastSelectedNode != null) {\r\n                // Remove selected highlighting from previously selected node\r\n                this._lastSelectedNode.removeClass(\"i-selected\");\r\n            }\r\n\r\n            element.removeClass(\"i-hover\");\r\n            element.addClass(\"i-selected\");\r\n\r\n            this._lastSelectedNode = element;\r\n\r\n\r\n            this.setSelectedNode(element);\r\n        }\r\n\r\n        protected expandOrCollapseNode(listElement: JQuery, isAnimationEnabled: boolean = true): void {\r\n\r\n            if (listElement.length) {\r\n\r\n                if (listElement.length > 1) {\r\n                    // Process individually\r\n                    listElement.each((_: number, element: HTMLElement) => {\r\n                        this.expandOrCollapseNode($(element), isAnimationEnabled);\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                if (!listElement.hasClass(\"i-visible\")) {\r\n                    this.processListElement(listElement);\r\n                }\r\n\r\n                if (isAnimationEnabled) {\r\n                    listElement.slideToggle(tableOfContentsConstants.slideToggleDelay, () => {\r\n                        listElement.toggleClass(\"i-visible\");\r\n                        listElement.css(\"display\", \"\");\r\n                    });\r\n                } else {\r\n                    listElement.toggleClass(\"i-visible\");\r\n                }\r\n\r\n                // Swap icons for open and closed books\r\n                const icon: JQuery = listElement.prev(\"a\").children(\"ins\");\r\n                if (icon.hasClass(\"i-icon-1\")) {\r\n                    icon.removeClass(\"i-icon-1\").addClass(\"i-icon-2\");\r\n                } else if (icon.hasClass(\"i-icon-2\")) {\r\n                    icon.removeClass(\"i-icon-2\").addClass(\"i-icon-1\");\r\n                } else if (icon.hasClass(\"i-icon-3\")) {\r\n                    icon.removeClass(\"i-icon-3\").addClass(\"i-icon-4\");\r\n                } else if (icon.hasClass(\"i-icon-4\")) {\r\n                    icon.removeClass(\"i-icon-4\").addClass(\"i-icon-3\");\r\n                }\r\n\r\n                listElement.prevAll(\"ins\").toggleClass(\"i-expand i-collapse\");\r\n\r\n            }\r\n\r\n        }\r\n\r\n        protected processListElement(listElement: JQuery): void {\r\n\r\n            if (listElement.length) {\r\n\r\n                if (listElement.length > 1) {\r\n                    // Process individually\r\n                    listElement.each((_: number, element: HTMLElement) => {\r\n                        this.processListElement($(element));\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                if (listElement.hasClass(\"i-root\")) {\r\n                    listElement.addClass(\"i-visible\");\r\n                }\r\n\r\n                listElement.children(\"li\").each((_: number, listItemElement: HTMLElement) => {\r\n\r\n                    let hasNestedList = false;\r\n                    const listItem: JQuery = $(listItemElement);\r\n\r\n                    listItem.children(\"ul\").each((__: number, childListElement: HTMLElement) => {\r\n                        if ($(childListElement).children().length > 0) {\r\n                            hasNestedList = true;\r\n                        } else {\r\n                            // Remove any empty <ul> elements\r\n                            $(childListElement).remove();\r\n                        }\r\n                    });\r\n\r\n                    const anchor: JQuery = listItem.children(\"a\");\r\n\r\n                    // Add an <ins> node for the expand / collapse icon if one doesn't already exist\r\n                    if (listItemElement.firstChild.nodeName !== \"INS\") {\r\n                        const spacer: JQuery = $(\"<ins class=\\\"i-spacer\\\"></ins>\");\r\n\r\n                        if (hasNestedList) {\r\n                            spacer.addClass(\"i-expandorcollapse\");\r\n                            spacer.addClass(\"i-expand\");\r\n                            spacer\r\n                                .off(\"click.toc\")\r\n                                .on(\"click.toc\", (event: JQueryEventObject) => {\r\n                                    this.expandOrCollapseClickHandler(event);\r\n                                });\r\n                        }\r\n\r\n                        spacer.prependTo(listItem);\r\n                    }\r\n\r\n                    // Add an <ins> node for the node icon\r\n                    if (anchor.children(\"ins\").length === 0) {\r\n                        const icon: JQuery = $(\"<ins class=\\\"i-icon\\\"></ins>\");\r\n                        const iconIndex: number = parseInt(listItem.attr(\"rel\"), 10);\r\n                        let iconClassIndex = iconIndex;\r\n                        const isNew = listItem.data(\"is-new\") === \"True\";\r\n\r\n                        if (hasNestedList) {\r\n                            if (iconIndex <= 0) {\r\n                                if (isNew) {\r\n                                    iconClassIndex = tableOfContentsConstants.iconIndexFolderNew;\r\n                                } else {\r\n                                    iconClassIndex = tableOfContentsConstants.iconIndexFolder;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (iconIndex <= 0) {\r\n                                if (isNew) {\r\n                                    iconClassIndex = tableOfContentsConstants.iconIndexPageNew;\r\n                                } else {\r\n                                    iconClassIndex = tableOfContentsConstants.iconIndexPage;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        icon.addClass(`i-icon-${iconClassIndex}`);\r\n                        icon.prependTo(anchor);\r\n                    }\r\n\r\n                    anchor\r\n                        .off(\"click.toc\")\r\n                        .on(\"click.toc\", (event: JQueryEventObject) => {\r\n                            this.nodeClickHandler($(event.currentTarget) as JQuery<HTMLElement>);\r\n                            event.preventDefault();\r\n                            Browser.stopPropagation(event);\r\n                        });\r\n\r\n                    anchor\r\n                        .off(\"hover.toc\")\r\n                        .on(\"hover.toc\",\r\n                            (event: JQueryEventObject) => {\r\n                                if (!$(event.currentTarget).hasClass(\"i-selected\")) {\r\n                                    $(event.currentTarget).addClass(\"i-hover\");\r\n                                }\r\n                            },\r\n                            (event: JQueryEventObject) => {\r\n                                $(event.currentTarget).removeClass(\"i-hover\");\r\n                            });\r\n\r\n                });\r\n\r\n            }\r\n        }\r\n\r\n        public syncTocNodeToUrl(url: string): void {\r\n\r\n            if (!this._isTocConstructed) {\r\n                // ToC not available yet, postpone.\r\n                this.syncTocUrl = url;\r\n\r\n                return;\r\n            }\r\n\r\n            const anchor: JQuery = $(`div#i-toc-container > ul a[href=\"${decodeURIComponent(url)}\"]`, this._rootSelector).first();\r\n\r\n            if (anchor != null\r\n                && anchor.length\r\n                && !this._ignoreSyncRequest\r\n                && !this.isPageSelected(anchor)) {\r\n\r\n                this.setSelectedNode(anchor);\r\n                this.syncTocNode(anchor);\r\n            }\r\n\r\n            if (this._ignoreSyncRequest) {\r\n                this._ignoreSyncRequest = false;\r\n            }\r\n\r\n        }\r\n\r\n        public syncTocNode(anchor: JQuery): void {\r\n\r\n            if (this._isMobileToc) {\r\n                this.setSelectedNode(anchor);\r\n                const parentList: JQuery = anchor.parent().closest(\"ul\");\r\n                this.buildToCPage(parentList.attr(\"id\"));\r\n            } else {\r\n                // Only sync if there wasn't a previously selected node or the new node is different from the currently selected node\r\n                if (anchor.length && ((this._lastSelectedNode != null\r\n                    && anchor.data(\"node-index\") !== this._lastSelectedNode.data(\"node-index\")) || this._lastSelectedNode == null)) {\r\n\r\n                    this.selectNodeElement(anchor);\r\n                    this.expandParents(anchor, false);\r\n\r\n                    // scroll selected anchor into view (don't use scrollInToView here as that causes problems with the iframe)\r\n                    $(\"html, body\").animate({\r\n                        scrollTop: anchor.offset().top\r\n                    }, tableOfContentsConstants.slideToggleDelay);\r\n\r\n                    this.updateNavigationButtons();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        protected expandParents(element: JQuery, isAnimationEnabled: boolean, parents: JQuery[] = null): void {\r\n\r\n            const parentListElement: JQuery = element.parent().closest(\"ul\");\r\n\r\n            if (parentListElement.length === 0) {\r\n\r\n                for (let i = parents.length - 1; i > -1; i--) {\r\n                    this.expandOrCollapseNode(parents[i], isAnimationEnabled);\r\n                }\r\n\r\n                return;\r\n            } else {\r\n\r\n                if (typeof parents === \"undefined\" || parents == null) {\r\n                    parents = [];\r\n                }\r\n\r\n                // Only expand if it isn't the root, isn't already expanded or hasn't been procesed yet\r\n                if (!parentListElement.hasClass(\"i-root\")) {\r\n                    const spacer = parentListElement.prevAll(\"ins.i-spacer\");\r\n\r\n                    if (spacer.length === 0 || spacer.hasClass(\"i-expand\")) {\r\n                        parents.push(parentListElement);\r\n                    }\r\n                }\r\n\r\n                this.expandParents(parentListElement, isAnimationEnabled, parents);\r\n            }\r\n\r\n        }\r\n\r\n        protected buildToCPage(listId: string): void {\r\n\r\n            if (listId === \"i-root\") {\r\n                listId = \"i-root-node\";\r\n            }\r\n\r\n            const tocPageId: string = listId;\r\n            if (listId === \"i-root-node\") {\r\n                listId = \"i-root\";\r\n            }\r\n\r\n            if ($.mobile.activePage.length && $.mobile.activePage.attr(\"id\") === listId) {\r\n                // Current active ToC page so just highlight the selected Url\r\n                this._highlightSelectedNode();\r\n\r\n                return;\r\n            }\r\n\r\n            // If the ToC page already exists in the DOM then just change to it\r\n            if ($(`div#${tocPageId}`, this._rootSelector).length) {\r\n                $.mobile.changePage($(`div#${tocPageId}`, this._rootSelector), { dataUrl: tocPageId });\r\n\r\n                return;\r\n            }\r\n\r\n            const list: JQuery = $(`ul#${listId}`, this._rootSelector).first();\r\n            const title: string = list.prev(\"a\").text();\r\n            let backId: string = list\r\n                .parent()\r\n                .closest(\"ul\")\r\n                .attr(\"id\");\r\n            const newPage: JQuery = $(`<div data-role=\"page\" id=\"${tocPageId}\"></div>`);\r\n            const header: JQuery = $(\"<div data-role=\\\"header\\\" data-theme=\\\"b\\\"></div>\");\r\n\r\n            if (backId === \"i-root\") {\r\n                backId = \"i-root-node\";\r\n            }\r\n\r\n            if (listId !== \"i-root\") {\r\n                // Add a header to all child pages\r\n                // Add a back button to the header (just icon no text)\r\n                $(`<a href=\"#${backId}\" data-icon=\"arrow-l\" data-iconpos=\"notext\">Back</a>`).appendTo(header);\r\n                $(`<h1>${title}</h1>`).appendTo(header);\r\n                header.appendTo(newPage);\r\n            }\r\n\r\n            const pageList: JQuery = list.clone();\r\n            // remove any nested lists\r\n            pageList.find(\"ul\").remove();\r\n            // remove any inline css (i.e. display: none on root page)\r\n            pageList.css(\"display\", \"\");\r\n            // display as a JQM listview\r\n            pageList.attr(\"data-role\", \"listview\");\r\n            // get rid of the temporary id from the cloned list\r\n            pageList.removeAttr(\"id\");\r\n            // remove the \">\" icon from links directly to pages\r\n            pageList.find(\"a:not(a[href^='#node-'])\")\r\n                .closest(\"li\")\r\n                .attr(\"data-icon\", \"false\");\r\n\r\n            pageList.appendTo(newPage);\r\n\r\n            // Add the new page to the main container, mobile-ize it then transition to it\r\n            newPage.appendTo($(\"div#i-toc-container\", this._rootSelector));\r\n            newPage.page();\r\n            $.mobile.changePage(newPage, { dataUrl: tocPageId });\r\n\r\n            // Highlight the selected node\r\n            this._highlightSelectedNode();\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _onBeforePageChange(event: JQuery.Event, pageData: any): void {\r\n\r\n            // data.toPage will be the page href on the first call (div element on the second)\r\n            if (typeof pageData.toPage === \"string\") {\r\n\r\n                if (pageData.toPage.match(/(#node-(\\d+)|#i-root-node)/)) {\r\n                    const pageId: string = pageData.toPage.substring(\r\n                        pageData.toPage.lastIndexOf(\"#\") as number + 1,\r\n                        pageData.toPage.length);\r\n\r\n                    if ($(`div#${pageId}`).length === 0) {\r\n                        // Build the new ToC page and prevent JQM from handling this event\r\n                        this.buildToCPage(pageId);\r\n                        event.preventDefault();\r\n                    }\r\n                } else {\r\n                    event.preventDefault();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        private _onVirtualClick(event: JQueryEventObject) {\r\n\r\n            const anchor = $(event.target) as JQuery<HTMLElement>;\r\n\r\n            // Intercept clicks to content links here as we need to query the anchor element\r\n            if (anchor.attr(\"href\") != null\r\n                && anchor.attr(\"href\").substring(0, 1) !== \"#\") {\r\n\r\n                event.preventDefault();\r\n\r\n                this.setSelectedNode(anchor);\r\n                this._highlightSelectedNode();\r\n                // Ignore the next ToC node sync request as it will come from the webframe when the content has finished loading\r\n                this._ignoreSyncRequest = true;\r\n\r\n                const webContentFrame = window.parent.parent;\r\n                if (typeof webContentFrame != \"undefined\") {\r\n                    Messaging.routeMessageToWindow(webContentFrame, NavigationMessageNames.navigate, anchor.attr(\"href\"));\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        private _onPageChange(_: JQueryEventObject, pageData: any): void {\r\n            // Called after sucessfully switching to the next ToC page, if the page we came from isn't the\r\n            // root page then remove it from the DOM\r\n            if (typeof pageData.options.fromPage != \"undefined\"\r\n                && pageData.toPage.attr(\"id\") !== pageData.options.fromPage.attr(\"id\")) {\r\n\r\n                pageData.options.fromPage.remove();\r\n            }\r\n\r\n            this._highlightSelectedNode();\r\n        }\r\n\r\n        protected constructMobileToC(): void {\r\n\r\n            $(document)\r\n                .off(\"pagebeforechange.toc\")\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                .on(\"pagebeforechange.toc\", (event: JQuery.Event, pageData: any) => {\r\n                    this._onBeforePageChange(event, pageData);\r\n                });\r\n\r\n            $(document)\r\n                .off(\"pagechange.toc\")\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                .on(\"pagechange.toc\", (event: any, pageData: any) => {\r\n                    this._onPageChange(event as JQueryEventObject, pageData);\r\n                });\r\n\r\n            this._rootSelector\r\n                .off(\"vclick.toc\")\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                .on(\"vclick.toc\", (event: any) => {\r\n                    this._onVirtualClick(event as JQueryEventObject);\r\n                });\r\n\r\n            let tocNodeIndex = 0;\r\n\r\n            $(\"li>a\", this._rootSelector).each((_: number, anchorElement: HTMLAnchorElement) => {\r\n                const ul = $(anchorElement).next(\"ul\");\r\n                if (ul.length) {\r\n                    if ($(anchorElement).attr(\"href\") !== \"#\") {\r\n                        // If the li has a link to a page then add a new li to the child ul so that it will be displayed\r\n                        // as the first item on the new page\r\n                        const listItem = $(\"<li></li>\").prepend($(anchorElement).clone());\r\n                        ul.prepend(listItem);\r\n                    }\r\n                    // Add an id to the list element which will be moved to the page div later\r\n                    ul.attr(\"id\", `node-${tocNodeIndex}`);\r\n                    // Point the anchor in the list item to the child list\r\n                    $(anchorElement).attr(\"href\", `#node-${tocNodeIndex}`);\r\n                    tocNodeIndex++;\r\n                }\r\n            });\r\n\r\n            // Index the anchor nodes again as they will have changed since loading the page\r\n            this._indexNodes();\r\n\r\n            // Add the root page\r\n            const rootPage: JQuery = $(\"<div data-role=\\\"page\\\" id=\\\"i-root-node\\\"></div>\");\r\n            const rootList: JQuery = $(\"ul#i-root\")\r\n                .clone()\r\n                .removeAttr(\"id\")\r\n                .removeAttr(\"style\")\r\n                .attr(\"data-role\", \"listview\");\r\n            rootList.find(\"ul\").remove();\r\n            rootList.find(\"a:not(a[href*='#node-'])\")\r\n                .closest(\"li\")\r\n                .attr(\"data-icon\", \"false\");\r\n            rootList.appendTo(rootPage);\r\n            rootPage.appendTo($(\"div#i-toc-container\", this._rootSelector));\r\n\r\n            // Manually initialize JQM\r\n            $.mobile.initializePage();\r\n\r\n        }\r\n\r\n        private _highlightSelectedNode(): void {\r\n            $(\"div.ui-page a.ui-btn-active\", this._rootSelector)\r\n                .removeClass(\"ui-btn-active\");\r\n            $(\"div.ui-page li\", this._rootSelector)\r\n                .find(`a[data-node-index=\"${this._selectedNodeIndex}\"]`)\r\n                .first()\r\n                .addClass(\"ui-btn-active\");\r\n        }\r\n\r\n        private _indexNodes(): void {\r\n            let nodeIndex = 0;\r\n            $(\"ul.i-root a\", this._rootSelector).each((_: number, element: Element) => {\r\n                if (this._firstNodeIndex === -1\r\n                    && $(element)\r\n                        .attr(\"href\")\r\n                        .substring(0, 1) !== \"#\") {\r\n\r\n                    this._firstNodeIndex = nodeIndex;\r\n                }\r\n                $(element).attr(\"data-node-index\", nodeIndex);\r\n                nodeIndex++;\r\n            });\r\n            this._lastNodeIndex = nodeIndex - 1;\r\n        }\r\n\r\n    }\r\n\r\n    export class TableOfContentsDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new TableOfContentsDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.TableOfContentsDocumentFeatureFactory());\r\n\r\n// Disable JQM page initialization\r\n$(document)\r\n    .off(\"mobileinit.navigation\")\r\n    .on(\"mobileinit.navigation\", () => {\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        ($ as any).mobile.autoInitializePage = false;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        ($ as any).mobile.defaultPageTransition = \"none\";\r\n    });\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const topFrameConstants = {\r\n        iFrameResizeDelay: 500,\r\n        navBarSwingDuration: 600,\r\n        navBarCloseDuration: 400,\r\n        syncDelay: 500,\r\n        widthDivisor: 0.5\r\n    };\r\n\r\n    export class TopFrameDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        public defaultTopic: string = null;\r\n        public baseTitle: string = null;\r\n        private _rootSelector: JQuery = null;\r\n        private _responsiveProfileName = \"desktop\";\r\n        private _isIframeResizeTimerDisabled = false;\r\n        private _isEnabled = false;\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        public layout: any = null;\r\n\r\n        private static _fixSubPixelWidth(element: JQuery): void {\r\n            element.width(Math.floor($(window).width() * element.data(\"widthDivisor\")));\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"TopFrame\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n                this._rootSelector = rootSelector;\r\n                this.baseTitle = document.title;\r\n            }\r\n\r\n            this._isEnabled = ($(\"#i-top-frame-container\", rootSelector).length > 0);\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            this._responsiveProfileName = configuration.profileName;\r\n\r\n            if (configuration.profileName === \"desktop\") {\r\n\r\n                // Desktop\r\n\r\n                this.layout = $(\".i-layout-container\", this.documentInstance.rootSelector).layout({\r\n                    resizeWhileDragging: true,\r\n                    /* eslint-disable-next-line @typescript-eslint/naming-convention */\r\n                    west__size: 270,\r\n                    maskIframesOnResize: true\r\n                });\r\n\r\n                this.onContentLoaded(null);\r\n\r\n            } else {\r\n\r\n                // Tablet & Mobile\r\n\r\n                $(\"iframe#i-nav\", this.documentInstance.rootSelector)\r\n                    .css(\"left\", -$(window).width())\r\n                    .css(\"display\", \"block\");\r\n\r\n                $(window).resize(() => {\r\n                    if ($(\"iframe#i-nav\", this.documentInstance.rootSelector).css(\"left\") !== \"0px\") {\r\n                        $(\"iframe#i-nav\", this.documentInstance.rootSelector).css(\"left\", -$(window).width());\r\n                    }\r\n                    TopFrameDocumentFeature._fixSubPixelWidth($(\"iframe#i-nav\", this.documentInstance.rootSelector));\r\n                });\r\n\r\n                // Scroll back to the top of page on a new page load\r\n                $(\"iframe#i-content\", this._rootSelector)\r\n                    .on(\"load.topframe\", () => {\r\n                        this._rootSelector.scrollTop(0);\r\n                    });\r\n\r\n                this.onContentLoaded(null);\r\n\r\n                // Resize the iframes and set a timer to keep them sized\r\n                Browser.resizeIFrames(this._rootSelector);\r\n                setInterval(() => {\r\n                    if (!this._isIframeResizeTimerDisabled) {\r\n                        const maxHeight: number = Browser.resizeIFrames(this._rootSelector);\r\n                        if (maxHeight > 0 && maxHeight !== $(\"body\").height()) {\r\n                            this._rootSelector.height(maxHeight);\r\n                        }\r\n                    }\r\n                }, topFrameConstants.iFrameResizeDelay);\r\n            }\r\n\r\n            this.navigate(this.getDefaultTopic());\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            switch (message.messageType) {\r\n                case NavigationMessageNames.updateNavigationButtons:\r\n                    // Route to webnav\r\n                    Messaging.routeMessageToFrameElement(\"i-nav\", message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.loaded:\r\n                    this.onContentLoaded(message.messageData);\r\n                    // Forward message to webnav\r\n                    Messaging.routeMessageToFrameElement(\"i-nav\", message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.updatePageTitle:\r\n                    this.updatePageTitle(message.messageData);\r\n                    break;\r\n                case DocumentMessageNames.quickSearch:\r\n                case DocumentMessageNames.searchHighlightComplete:\r\n                case NavigationMessageNames.insertRemoveHighlighting:\r\n                    // Pass to content window\r\n                    Messaging.routeMessageToFrameElement(\"i-content\", message.messageType, message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.navigate:\r\n                    this.navigate(message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.openNavigationPane:\r\n                    this.openNavigationPane(message.messageData);\r\n                    break;\r\n                case NavigationMessageNames.closeNavigationPane:\r\n                    this.closeNavigationPane();\r\n                    break;\r\n                // No default\r\n            }\r\n        }\r\n\r\n        protected openNavigationPane(messageData: string): void {\r\n\r\n            this._isIframeResizeTimerDisabled = true;\r\n\r\n            // Activate the desired item in the navigation bar\r\n            Messaging.routeMessageToFrameElement(\"i-nav\", NavigationMessageNames.select, messageData);\r\n\r\n            switch (this._responsiveProfileName) {\r\n                case \"mobile\":\r\n                    $(\"#i-nav\", this.documentInstance.rootSelector).css(\"width\", \"100%\");\r\n                    break;\r\n                case \"tablet\":\r\n                    $(\"iframe#i-nav\", this.documentInstance.rootSelector)\r\n                        .css(\"width\", \"50%\")\r\n                        .data(\"widthDivisor\", topFrameConstants.widthDivisor);\r\n                    TopFrameDocumentFeature._fixSubPixelWidth($(\"iframe#i-nav\", this.documentInstance.rootSelector));\r\n                    break;\r\n                // No default\r\n            }\r\n\r\n            if (this._responsiveProfileName !== \"desktop\") {\r\n                // Resize webnav and webcontent to their content height\r\n                Browser.resizeIFrames(this._rootSelector, true);\r\n\r\n                // Show the gray overlay\r\n                $(\"#i-busy\", this.documentInstance.rootSelector).show();\r\n\r\n                // Bring in the navbar\r\n                $(\"iframe#i-nav\", this.documentInstance.rootSelector)\r\n                    .css(\"visibility\", \"visible\")\r\n                    .animate({ left: \"0\" }, topFrameConstants.navBarSwingDuration, \"swing\", () => {\r\n                        this._isIframeResizeTimerDisabled = false;\r\n                    });\r\n            }\r\n\r\n        }\r\n\r\n        protected closeNavigationPane(): void {\r\n            if (this._responsiveProfileName === \"desktop\") {\r\n                return;\r\n            }\r\n\r\n            if ($(\"iframe#i-nav\", this.documentInstance.rootSelector).css(\"left\") === \"0px\") {\r\n                this._isIframeResizeTimerDisabled = true;\r\n\r\n                // Close the navbar\r\n                $(\"iframe#i-nav\", this.documentInstance.rootSelector).animate({\r\n                    left: `-${$(\"iframe#i-nav\").css(\"width\")}`\r\n                }, topFrameConstants.navBarCloseDuration, \"swing\", () => {\r\n                    $(\"iframe#i-nav\", this.documentInstance.rootSelector)\r\n                        .css(\"visibility\", \"hidden\");\r\n                    // Remove the gray overlay\r\n                    $(\"#i-busy\", this.documentInstance.rootSelector).hide();\r\n                    // Resize the navbar back to default - window height\r\n                    $(\"iframe#i-nav\", this.documentInstance.rootSelector).height($(window).height())\r\n                        .data(\"last-height\", $(window).height());\r\n                    // Tell the navbar to shrink it's frame sizes\r\n                    Messaging.routeMessageToFrameElement(\"i-nav\", NavigationMessageNames.shrinkIFrames, null);\r\n                    this._isIframeResizeTimerDisabled = false;\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n        protected getCurrentPageName(): string {\r\n\r\n            const location = Browser.getLocationInfo();\r\n            if (location.hash !== \"\") {\r\n                return location.hash.substring(1);\r\n            } else {\r\n                return this.getDefaultTopic();\r\n            }\r\n\r\n        }\r\n\r\n        protected onContentLoaded(url: string): void {\r\n\r\n            this.updateLocation(url);\r\n\r\n            setTimeout(() => {\r\n                Messaging.routeMessageToFrameElement(\"i-nav\", NavigationMessageNames.syncTableOfContents, this.getCurrentPageName());\r\n            }, topFrameConstants.syncDelay);\r\n\r\n            if (this._responsiveProfileName !== \"desktop\") {\r\n                Messaging.routeMessageToFrameElement(\"i-content\", DocumentMessageNames.insertNavigationHeader, null);\r\n            }\r\n\r\n        }\r\n\r\n        protected updatePageTitle(pageTitle: string): void {\r\n            if (pageTitle != null) {\r\n                document.title = `${this.baseTitle} - ${pageTitle}`;\r\n            }\r\n        }\r\n\r\n        protected updateLocation(url: string): void {\r\n\r\n            if (url != null) {\r\n                const location = Browser.getLocationInfo();\r\n                const pageName: string = url.substring(url.lastIndexOf(\"/\") + 1);\r\n                if (`#${pageName}` !== location.hash && `?${pageName}` !== location.search) {\r\n                    Browser.replaceLocation(pageName);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        public getDefaultTopic(): string {\r\n\r\n            let topic = null as string;\r\n\r\n            const location = Browser.getLocationInfo();\r\n            const qs: string = location.search;\r\n            if (qs != null && qs.length > 0) {\r\n                topic = qs.substring(1) + location.hash;\r\n            } else if (location.hash != null && location.hash.length > 0) {\r\n                topic = location.hash.substring(1);\r\n            }\r\n\r\n            if (topic == null || this.isUrl(topic)) {\r\n                topic = this.defaultTopic;\r\n            }\r\n\r\n            return topic;\r\n        }\r\n\r\n        private isUrl(possibleUrl: string): boolean {\r\n            return /^[\\d\\D\\.]*:/.test(possibleUrl);\r\n        }\r\n\r\n        protected navigate(messageData: string): void {\r\n\r\n            // ToC previous/next navigation\r\n            if (messageData === \"next\" || messageData === \"previous\") {\r\n                Messaging.routeMessageToFrameElement(\"i-nav\", \"navigate\", messageData);\r\n            } else {\r\n                // Navigate to specific page\r\n                const location = Browser.getLocationInfo();\r\n                if ($(\"#i-content\", this._rootSelector).attr(\"src\") !== messageData\r\n                    || (location.hash.length > 0 && location.hash.substring(1) !== messageData)\r\n                    || (location.search.length > 0 && location.search.substring(1) !== messageData)\r\n                    || (location.hash.length === 0 && location.search.length === 0)) {\r\n\r\n                    // Default content frame height back to the window height - to stop the content frame\r\n                    //  growing to the largest doc size over time\r\n                    if (this._responsiveProfileName !== \"desktop\") {\r\n                        $(\"#i-content\", this._rootSelector).height($(window).height());\r\n                    }\r\n                    $(\"#i-content\", this._rootSelector).attr(\"src\", messageData);\r\n                }\r\n                if (this._responsiveProfileName !== \"desktop\") {\r\n                    this.closeNavigationPane();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Forces a specific responsive display mode when the document loads. The forced display mode is set in local storage\r\n         *  so will be used by all subsequent page loads until it is reset.\r\n         */\r\n        public setForcedDisplayMode(displayMode: string): void {\r\n            (this.documentInstance.getFeatureByName(\"Responsive\") as ResponsiveDocumentFeature).setForcedDisplayMode(displayMode);\r\n            if (displayMode != null) {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const overrides: any = (Innovasys as any).overrides\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    || (Innovasys as any).settings\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    || ((Innovasys as any).settings = (Innovasys as any).overrides = {});\r\n                $.extend(overrides, {\r\n                    forcedDisplayMode: displayMode\r\n                });\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class TopFrameDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new TopFrameDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.TopFrameDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const searchConstants = {\r\n        enterKeyCode: 13,\r\n        minOperatorLength: 4\r\n    };\r\n\r\n    export class SearchFile {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public url: string, public title: string, public rank: number) {\r\n\r\n        }\r\n    }\r\n\r\n    export class SearchTermWordMatch {\r\n        /* eslint-disable-next-line no-useless-constructor */\r\n        constructor(public searchTerm: string, public matchedWords: string[]) {\r\n\r\n        }\r\n    }\r\n\r\n    export class SearchResult {\r\n\r\n        public searchFile: SearchFile;\r\n        public keywordPositions: number[][];\r\n\r\n        constructor(public fileIndex: number, public rank: number, public keywords: string, public searchTerms: string) {\r\n            this.rank = rank;\r\n        }\r\n\r\n    }\r\n\r\n    export class SearchDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _webSearchPendingHighlight: string = null;\r\n        private _rootSelector: JQuery = null;\r\n        private _isEnabled = false;\r\n        private _isFullTextSearchPositionDataAvailable = false;\r\n        private _isFullTextSearchObjects = false;\r\n        private _isFullTextSearchFrameless = false;\r\n        private _results: SearchResult[] = null;\r\n        private _clickedResult: SearchResult = null;\r\n        private _diacriticsHelper: DiacriticsHelper = null;\r\n\r\n        private static escapeForRegEx(source: string): string {\r\n            return source.replace(/[-\\/\\\\^$+.()|[\\]{}]/g, \"\\\\$&\");\r\n        }\r\n\r\n        public getName(): string {\r\n            return \"Search\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n                this._rootSelector = rootSelector;\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const overrides: IOverrides = ((Innovasys as any).overrides || (Innovasys as any).settings);\r\n                if (overrides != null && overrides.isFullTextSearchPositionDataAvailable) {\r\n                    this._isFullTextSearchPositionDataAvailable = true;\r\n                }\r\n                if (overrides != null && overrides.isFullTextSearchObjects) {\r\n                    this._isFullTextSearchObjects = true;\r\n                }\r\n                if (overrides != null && overrides.isFullTextSearchFrameless) {\r\n                    this._isFullTextSearchFrameless = true;\r\n                }\r\n            }\r\n\r\n            this._diacriticsHelper = new DiacriticsHelper;\r\n\r\n            if ($(\"#i-search-container\", this._rootSelector).length > 0) {\r\n\r\n                this._isEnabled = true;\r\n\r\n                $(\"#i-search\", rootSelector)\r\n                    .off(\"keyup.search\")\r\n                    .on(\"keyup.search\", (event: JQueryEventObject) => {\r\n                        if (event.keyCode === searchConstants.enterKeyCode) {\r\n                            $(\"#i-execute-search\").click();\r\n                        }\r\n                    });\r\n\r\n                $(\"#i-execute-search\", rootSelector)\r\n                    .off(\"click.search\")\r\n                    .on(\"click.search\", () => {\r\n                        this.executeSearch();\r\n                    });\r\n\r\n                $(\"#i-search-container\", this._rootSelector)\r\n                    .off(\"click.search\", \".i-result\")\r\n                    .on(\"click.search\", \".i-result\", (event: JQueryEventObject) => {\r\n                        event.preventDefault();\r\n                        this.showSearchResult($(event.target).attr(\"href\"), parseInt($(event.target).attr(\"data-result-index\"), 10));\r\n                    });\r\n\r\n            }\r\n\r\n            const querystringSearchText = Browser.getQueryStringParameter(\"query\");\r\n            if (querystringSearchText != null && querystringSearchText !== \"\") {\r\n                $(\"#i-search\", rootSelector).val(querystringSearchText);\r\n                this.executeSearch();\r\n            }\r\n\r\n        }\r\n\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            if (configuration.profileName !== \"desktop\") {\r\n                configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-execute-search\", ResponsiveClickTargetKind.block));\r\n            }\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            if (configuration.profileName !== \"desktop\") {\r\n                $(\"#i-highlight\", this._rootSelector).attr(\"checked\", \"true\");\r\n            }\r\n        }\r\n\r\n        protected executeSearch(): void {\r\n\r\n            // Show searching div\r\n            $(\"#i-search-container\", this._rootSelector).hide();\r\n            $(\"#i-searching-overlay\", this._rootSelector).show();\r\n\r\n            // do search\r\n            const searchResult = this.buildSearchResults();\r\n\r\n            // Show resuls div\r\n            $(\"#i-searching-overlay\", this._rootSelector).hide();\r\n            $(\"#i-search-container\", this._rootSelector).show();\r\n\r\n            // show results\r\n            if (searchResult === true) {\r\n                // show resulta div\r\n                $(\"#i-results\", this._rootSelector).show();\r\n            }\r\n\r\n        }\r\n\r\n        protected buildSearchResults(): boolean {\r\n\r\n            // get search string\r\n            let searchText: string = $(\"#i-search\", this._rootSelector).val() as string;\r\n            if (searchText.length === 0) {\r\n                return false;\r\n            }\r\n\r\n            // make lowercase for easy comparison later on\r\n            searchText = this._diacriticsHelper.removeDiacritics(searchText.toLowerCase());\r\n\r\n            // tokenise\r\n            const tokens = searchText.split(\" \");\r\n\r\n            // build keywords array & query string\r\n            let query = \"\";\r\n            let lastTokenWasOperator = true;\r\n            let lastTokenWasKeyword = false;\r\n            let phrase: string = null;\r\n            let searchTermIndex = 0;\r\n            const searchTerms: string[] = [];\r\n\r\n            for (let token of tokens) {\r\n\r\n                if (token.length > 0) {\r\n\r\n                    // strip out any delimiters & whitespace\r\n                    token = token.replace(new RegExp(\",\", \"ig\"), \"\");\r\n\r\n                    if (phrase != null) {\r\n                        phrase += (` ${token}`);\r\n                        if (token.charAt(token.length - 1) === \"\\\"\") {\r\n                            // Last word in the phrase. Set as the token and clear.\r\n                            token = phrase.substring(1, phrase.length - 1);\r\n                            phrase = null;\r\n                        } else {\r\n                            token = null;\r\n                        }\r\n                    } else if (token.charAt(0) === \"\\\"\") {\r\n                        // First word of a phrase\r\n                        phrase = token;\r\n                        token = null;\r\n                    }\r\n\r\n                    if (token != null) {\r\n\r\n                        // add to array\r\n                        if ((token === \"or\") || (token === \"and\")) {\r\n                            // only add it if not just had an operator\r\n                            if (lastTokenWasOperator === false) {\r\n                                // add to the query string\r\n                                if (token === \"or\") {\r\n                                    query += \" || \";\r\n                                } else if (token === \"and\") {\r\n                                    query += \" && \";\r\n                                }\r\n                                lastTokenWasOperator = true;\r\n                                lastTokenWasKeyword = false;\r\n                            }\r\n                        } else {\r\n\r\n                            // we just had a keyword ?\r\n                            if (lastTokenWasKeyword) {\r\n                                // add default OR operator\r\n                                query += \" || \";\r\n                            }\r\n\r\n                            // add to query string\r\n                            query += (`(searchTerms.indexOf(\"${token}\") >= 0)`);\r\n\r\n                            lastTokenWasOperator = false;\r\n                            lastTokenWasKeyword = true;\r\n\r\n                            // add to keywords array\r\n                            searchTerms[searchTermIndex] = token;\r\n                            searchTermIndex++;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if (searchTerms.length === 0) {\r\n                return false;\r\n            }\r\n\r\n            if (query !== \"\" && query.length > searchConstants.minOperatorLength) {\r\n                // Handle the case where the last word is an operator\r\n                if (query.substring(query.length - searchConstants.minOperatorLength) === \" && \"\r\n                    || query.substring(query.length - searchConstants.minOperatorLength) === \" || \") {\r\n                    query = query.substring(0, query.length - searchConstants.minOperatorLength);\r\n                }\r\n            }\r\n\r\n            // load files & stopwords arrays\r\n            const searchFiles: SearchFile[] = [];\r\n            const allWords: string[] = [];\r\n\r\n            if (this._isFullTextSearchObjects) {\r\n                // Pass constructor to initialization function\r\n                buildSearchFilesAndKeywords(searchFiles, allWords, SearchFile);\r\n            } else {\r\n                // Pass 2 arrays and build SearchFile array from them\r\n                const indexFiles: string[] = [];\r\n                const indexTitles: string[] = [];\r\n                buildSearchIndexArray(indexFiles, indexTitles, allWords);\r\n                for (let fileIndex = 0; fileIndex < indexFiles.length; fileIndex++) {\r\n                    const newSearchFile = new SearchFile(indexFiles[fileIndex], indexTitles[fileIndex], 0);\r\n                    searchFiles[fileIndex] = newSearchFile;\r\n                }\r\n            }\r\n\r\n            const allWordsDiact: {[key: string | number]: any} = [];\r\n\r\n            for (let word in allWords) {\r\n                allWordsDiact[this._diacriticsHelper.removeDiacritics(word)] = allWords[word];\r\n            }\r\n\r\n            // build list of files containing keywords\r\n            let searchResults: SearchResult[] = this.populateSearchResults(searchFiles, allWordsDiact, searchTerms);\r\n\r\n            // build results list\r\n            searchResults = this.buildResultsArray(query, searchResults);\r\n\r\n            // write results to document\r\n            this.outputResults(searchResults);\r\n\r\n            this._results = searchResults;\r\n\r\n            // return success\r\n            return true;\r\n\r\n        }\r\n\r\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n        protected populateSearchResults(searchFiles: SearchFile[], allWords: {[key: string | number]: any}, searchTerms: string[]): SearchResult[] {\r\n\r\n            let searchResults: SearchResult[] = [];\r\n\r\n            // build lookup arrays\r\n            for (const searchTerm of searchTerms) {\r\n\r\n                const searchTermWordMatch: SearchTermWordMatch = new SearchTermWordMatch(searchTerm, []);\r\n\r\n                if (searchTerm.indexOf(\" \") !== -1) {\r\n\r\n                    // Phrase - find several matching words where the file matches the first word, and the\r\n                    //  relative position is the same as in the phrase\r\n                    const searchTermWords: string[] = searchTerm.split(\" \");\r\n                    const firstSearchTermWord: string = searchTermWords[0];\r\n                    let baseResults: SearchResult[] = this.populateSearchResults(searchFiles, allWords, [firstSearchTermWord]);\r\n\r\n                    for (const searchTermWord of searchTermWords) {\r\n\r\n                        const results: SearchResult[] = this.populateSearchResults(searchFiles, allWords, [searchTermWord]);\r\n\r\n                        baseResults = $.map(baseResults, (baseResult: SearchResult): SearchResult => {\r\n\r\n                            if (typeof baseResult != \"undefined\") {\r\n\r\n                                // A search result for secondary phrase words requires that the words be in a file we\r\n                                //  have already found at the base result + searchTermWordIndex\r\n                                const matchingBaseResults: SearchResult[] = $.map(results, (searchResult: SearchResult): SearchResult => {\r\n\r\n                                    if (typeof searchResult !== \"undefined\" && searchResult.fileIndex === baseResult.fileIndex) {\r\n\r\n                                        // Look for a match for any of the keywords in this result\r\n\r\n                                        const thisKeywords: string[] = searchResult.keywords.split(\",\");\r\n\r\n                                        let searchTermWordIndex = 0;\r\n\r\n                                        for (const thisKeyword of thisKeywords) {\r\n\r\n                                            if (thisKeyword !== \"\") {\r\n                                                // Matching position?\r\n                                                const matchingBasePositions: number[] =\r\n                                                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                                    $.map((baseResult.keywordPositions[(`_${firstSearchTermWord}`) as any]) as number[],\r\n                                                        (basePosition: number): number => {\r\n                                                            const matchingKeywordPositions: number[]\r\n                                                                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                                                = $.map(searchResult.keywordPositions[(`_${thisKeyword}`) as any],\r\n                                                                    (position: number): number => {\r\n                                                                        if (position === (basePosition + searchTermWordIndex)) {\r\n                                                                            return position;\r\n                                                                        } else {\r\n                                                                            return null;\r\n                                                                        }\r\n                                                                    });\r\n                                                            if (matchingKeywordPositions.length > 0) {\r\n                                                                return basePosition;\r\n                                                            } else {\r\n                                                                return null;\r\n                                                            }\r\n                                                        });\r\n\r\n                                                if (matchingBasePositions.length > 0) {\r\n                                                    // Found a match at the next word position in the same file\r\n                                                    // Add the keyword and rank to the base result\r\n                                                    baseResult.searchTerms = `${searchTerm},`;\r\n                                                    baseResult.keywords += searchResult.keywords;\r\n                                                    baseResult.rank += searchResult.rank;\r\n\r\n                                                    return baseResult;\r\n                                                }\r\n                                            }\r\n\r\n                                            searchTermWordIndex++;\r\n                                        }\r\n                                    }\r\n\r\n                                    return null;\r\n\r\n                                });\r\n\r\n                                if (matchingBaseResults.length > 0) {\r\n                                    return baseResult;\r\n                                } else {\r\n                                    return null;\r\n                                }\r\n\r\n                            }\r\n\r\n                            return null;\r\n                        });\r\n                    }\r\n\r\n                    return baseResults;\r\n\r\n                } else if (searchTerm.indexOf(\"*\") !== -1 || searchTerm.indexOf(\"?\") !== -1) {\r\n                    // Wildcard - find potentially several matching words\r\n                    const searchTermRegExp\r\n                        = new RegExp(`^${SearchDocumentFeature.escapeForRegEx(searchTerm)\r\n                            .replace(/\\*/g, \".*\")\r\n                            .replace(/\\?/g, \".\")}$`, \"i\");\r\n\r\n                    for (const word in allWords) {\r\n                        if (allWords.hasOwnProperty(word) && word.substring(1).match(searchTermRegExp) != null) {\r\n                            // Matched\r\n                            searchTermWordMatch.matchedWords.push(word.substring(1));\r\n                        }\r\n                    }\r\n                    // Sort on matched word length (reverse)\r\n                    searchTermWordMatch.matchedWords\r\n                        = searchTermWordMatch.matchedWords.sort((a: string, b: string): number => b.length - a.length);\r\n                } else {\r\n                    // Single word - just lookup in index and if found add to list of words\r\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                    if (typeof allWords[`_${searchTerm}` as any] !== \"undefined\") {\r\n                        searchTermWordMatch.matchedWords.push(searchTerm);\r\n                    }\r\n                }\r\n\r\n                // All of the above will yield one or more words. We then go through the matched words, building a search result\r\n                //  entry with a ranking value.\r\n\r\n                if (searchTermWordMatch != null) {\r\n\r\n                    let searchTermWordMatchIndex = 0;\r\n\r\n                    for (const matchedWord of searchTermWordMatch.matchedWords) {\r\n\r\n                        // get indices of files containing word\r\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                        const matchedWordData = allWords[`_${searchTermWordMatch.matchedWords[searchTermWordMatchIndex]}` as any];\r\n\r\n                        // tokenize indices\r\n                        const fileIndexes = matchedWordData.split(\",\");\r\n\r\n                        for (const fileIndexValue of fileIndexes) {\r\n\r\n                            let fileIndex: number;\r\n                            let rank = 0;\r\n                            let positions: number[] = null;\r\n\r\n                            if (this._isFullTextSearchPositionDataAvailable) {\r\n                                // Store file index, position data and a rank value in the search result\r\n                                fileIndex = parseInt(fileIndexValue.split(\":\")[0], 10);\r\n                                const rankAsString: string = fileIndexValue.split(\":\")[1];\r\n\r\n                                positions = $.map(\r\n                                    rankAsString.split(\"|\"),\r\n                                    (positionAsString: string): number => parseInt(positionAsString, 10));\r\n\r\n                                if (positions.length > 0) {\r\n                                    rank = positions[0];\r\n                                }\r\n                            } else {\r\n                                // No positional data available - we store just the file index in the search result\r\n                                fileIndex = parseInt(fileIndexValue, 10);\r\n                            }\r\n\r\n                            let locatedSearchResult: SearchResult = null;\r\n                            if (typeof searchResults[fileIndex] === \"undefined\") {\r\n                                // New file not encountered yet\r\n                                locatedSearchResult = new SearchResult(\r\n                                    fileIndex,\r\n                                    rank,\r\n                                    `${matchedWord},`,\r\n                                    `${searchTermWordMatch.searchTerm},`);\r\n\r\n                                if (typeof searchFiles[fileIndex] != \"undefined\") {\r\n                                    // Store url and title\r\n                                    locatedSearchResult.searchFile = searchFiles[fileIndex];\r\n                                }\r\n                                searchResults[fileIndex] = locatedSearchResult;\r\n                            } else {\r\n                                // Existing file, add to the rank\r\n                                locatedSearchResult = searchResults[fileIndex];\r\n                                if (locatedSearchResult.keywords.indexOf(`${matchedWord},`) === -1) {\r\n                                    // New word match in this file\r\n                                    locatedSearchResult.rank += rank;\r\n                                    locatedSearchResult.keywords += (`${matchedWord},`);\r\n                                }\r\n                                if (locatedSearchResult.searchTerms.indexOf(`${searchTermWordMatch.searchTerm},`) === -1) {\r\n                                    // New search term match in this file\r\n                                    locatedSearchResult.rank += rank;\r\n                                    locatedSearchResult.searchTerms += (`${searchTermWordMatch.searchTerm},`);\r\n                                }\r\n                            }\r\n\r\n                            if (positions != null) {\r\n                                if (locatedSearchResult.keywordPositions == null) {\r\n                                    locatedSearchResult.keywordPositions = [];\r\n                                }\r\n                                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                                locatedSearchResult.keywordPositions[(`_${matchedWord}`) as any] = positions;\r\n                            }\r\n\r\n                        }\r\n\r\n                        searchTermWordMatchIndex++;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Return array ordered by rank\r\n            if (this._isFullTextSearchPositionDataAvailable) {\r\n                searchResults = searchResults.sort((a: SearchResult, b: SearchResult): number => {\r\n                    let value = a.rank - b.rank;\r\n                    if (value === 0) {\r\n                        // Use file rank to disambiguate\r\n                        value = a.searchFile.rank - b.searchFile.rank;\r\n                        if (value === 0) {\r\n                            return a.fileIndex - b.fileIndex;\r\n                        }\r\n                    }\r\n\r\n                    return value;\r\n                });\r\n            }\r\n\r\n            return searchResults;\r\n        }\r\n\r\n        protected buildResultsArray(query: string, searchResults: SearchResult[]): SearchResult[] {\r\n            const results: SearchResult[] = [];\r\n\r\n            for (const searchResult of searchResults) {\r\n                if (typeof searchResult !== \"undefined\") {\r\n                    // Note: Used in eval below\r\n                    var searchTerms: string = searchResult.searchTerms;\r\n                    let result = false;\r\n                    try {\r\n                        /* eslint-disable-next-line no-eval */\r\n                        result = eval(query);\r\n                    } catch (ex) {\r\n                        // Entered term caused a Javascript syntax error\r\n                    }\r\n                    if (result) {\r\n                        results.push(searchResult);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return results;\r\n        }\r\n\r\n        protected getPhrase(name: string): string {\r\n            const span = $(`#phrase_${name}`);\r\n            if (span.length > 0) {\r\n                return span.html();\r\n            }\r\n        }\r\n\r\n        protected outputResults(searchResults: SearchResult[]): void {\r\n\r\n            // init table html\r\n            let tableHtml = `<hr /><p class=\"i-search-title\">${this.getPhrase(\"Search_SearchResults\")}</p>`;\r\n            tableHtml += \"<table class=\\\"i-result-list\\\">\";\r\n\r\n            // add results to table\r\n            let resultCount = 0;\r\n\r\n            for (const searchResult of searchResults) {\r\n                let className: string;\r\n                if (typeof searchResult !== \"undefined\") {\r\n                    if (resultCount === 0) {\r\n                        className = \"i-top-row\";\r\n                    } else if (resultCount === searchResults.length) {\r\n                        className = \"i-bottom-row\";\r\n                    } else {\r\n                        className = \"i-inner-row\";\r\n                    }\r\n\r\n                    // add row text\r\n                    tableHtml += `<tr><td class=\"${className}\">${resultCount + 1}:</td><td class=\"${className\r\n                        }\"><a class=\"i-result btn\" ${!this._isFullTextSearchFrameless ? \"target=\\\"i-content\\\" \" : \"\"\r\n                        }href=\"${searchResult.searchFile.url}\" data-result-index=\"${resultCount}\">${searchResult\r\n                            .searchFile.title}</a></td></tr>`;\r\n\r\n                    // incr total\r\n                    resultCount++;\r\n                }\r\n            }\r\n\r\n            // add footer\r\n            tableHtml += `</table><p>${resultCount} ${this.getPhrase(\"Search_ResultCount\")}</p>`;\r\n\r\n            // set it\r\n            $(\"#i-results\", this._rootSelector).html(tableHtml);\r\n\r\n        }\r\n\r\n        protected showSearchResult(hRef: string, resultIndex: number): void {\r\n\r\n            const highlight: JQuery = $(\"#i-highlight\", this._rootSelector);\r\n\r\n            let webframe: Window = null;\r\n            if (window.parent != null && window.parent.parent != null) {\r\n                webframe = window.parent.parent;\r\n            }\r\n\r\n            if (highlight.is(\":checked\")) {\r\n                // message listener takes care of highlight when the content loads\r\n                this._webSearchPendingHighlight = hRef;\r\n            }\r\n\r\n            if (!this._isFullTextSearchFrameless && webframe != null) {\r\n                Messaging.routeMessageToWindow(webframe, NavigationMessageNames.navigate, hRef);\r\n                Messaging.routeMessageToWindow(webframe, NavigationMessageNames.closeNavigationPane, null);\r\n\r\n                if (resultIndex != null) {\r\n                    this._clickedResult = this._results[resultIndex];\r\n                }\r\n            } else {\r\n                if (resultIndex != null && highlight.is(\":checked\")) {\r\n                    const clickedResult = this._results[resultIndex];\r\n                    hRef = `${hRef}?highlight=${encodeURIComponent(clickedResult.keywords)}`;\r\n                }\r\n\r\n                Browser.navigateTo(hRef, false);\r\n            }\r\n\r\n        }\r\n\r\n        protected highlightContentFrame(): void {\r\n            Messaging.routeMessageToWindow(parent, DocumentMessageNames.resetQuickSearch, null);\r\n            if (this._clickedResult != null) {\r\n                const keywords: string[] = this._clickedResult.keywords.split(\",\");\r\n                for (const keyword of keywords) {\r\n                    if (keyword != null && keyword !== \"\") {\r\n                        Messaging.routeMessageToWindow(parent, DocumentMessageNames.quickSearch, keyword);\r\n                    }\r\n                }\r\n            }\r\n            Messaging.routeMessageToWindow(parent, DocumentMessageNames.searchHighlightComplete, null);\r\n        }\r\n\r\n        protected getKeywordArray(): string[] {\r\n\r\n            // get search string\r\n            let searchText: string = $(\"#i-search\", this._rootSelector).val() as string;\r\n            if (searchText.length === 0) {\r\n                return null;\r\n            }\r\n\r\n            // make lowercase for easy comparison later on\r\n            searchText = searchText.toLowerCase();\r\n\r\n            // tokenise\r\n            const tokens: string[] = searchText.split(\" \");\r\n\r\n            // build keywords array\r\n            const keywords: string[] = [];\r\n\r\n            for (let token of tokens) {\r\n                if (token.length > 0) {\r\n                    // strip out any delimiters & whitespace\r\n                    token = token.replace(new RegExp(\"\\'\", \"ig\"), \"\");\r\n                    token = token.replace(new RegExp(\"\\\"\", \"ig\"), \"\");\r\n                    token = token.replace(new RegExp(\",\", \"ig\"), \"\");\r\n\r\n                    // add to array\r\n                    if (!((token === \"or\") || (token === \"and\"))) {\r\n                        // add to keywords array\r\n                        keywords.push(token);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return keywords;\r\n\r\n        }\r\n\r\n        public onMessage(message: WindowMessage): void {\r\n            if (!this._isEnabled) {\r\n                return;\r\n            }\r\n\r\n            switch (message.messageType) {\r\n                case NavigationMessageNames.activated:\r\n                    $(\"#i-search\", this._rootSelector).focus();\r\n                    break;\r\n                case NavigationMessageNames.loaded:\r\n                    if (message.messageData.indexOf(this._webSearchPendingHighlight) !== -1) {\r\n                        // If the content loaded is our pending search navigate, apply the search highlights\r\n                        this.highlightContentFrame();\r\n                    }\r\n                    this._webSearchPendingHighlight = null;\r\n                    break;\r\n                case DocumentMessageNames.quickSearch:\r\n                case DocumentMessageNames.searchHighlightComplete:\r\n                    // Pass to parent frame handler and onwards to the content frame\r\n                    Messaging.routeMessageToWindow(parent, message.messageType, message.messageData);\r\n                    break;\r\n                // No default\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    export class SearchDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new SearchDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.SearchDocumentFeatureFactory());\r\n","/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\r\nnamespace Innovasys.Content.Features {\r\n\r\n    const indexConstants = {\r\n        enterKeyCode: 13,\r\n        heightMargin: 20\r\n    };\r\n\r\n    export class IndexDocumentFeature extends DocumentFeatureBase implements IDocumentFeature {\r\n\r\n        private _isFilterVisibility = false;\r\n        private _isEnabled = false;\r\n        private _rootSelector: JQuery = null;\r\n        private _diacriticsHelper: DiacriticsHelper = null;\r\n\r\n        public getName(): string {\r\n            return \"Index\";\r\n        }\r\n\r\n        public initializeContent(rootSelector: JQuery, isInitialLoad: boolean = false): void {\r\n\r\n            if (isInitialLoad) {\r\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                const overrides: IOverrides = ((Innovasys as any).overrides || (Innovasys as any).settings);\r\n                if (overrides != null && overrides.isIndexFilterVisibility) {\r\n                    this._isFilterVisibility = true;\r\n                }\r\n            }\r\n\r\n            this._diacriticsHelper = new DiacriticsHelper;\r\n            this._rootSelector = rootSelector;\r\n\r\n            if ($(\"#i-index-container\", rootSelector).length > 0) {\r\n\r\n                this._isEnabled = true;\r\n\r\n                $(\"#i-index-container #i-search\", this._rootSelector)\r\n                    .off(\"keyup.index\")\r\n                    .on(\"keyup.index\", (event: JQueryEventObject): void => {\r\n                        if (event.keyCode === indexConstants.enterKeyCode) {\r\n                            const selectedHref: string = $(\"a.i-selected\", this._rootSelector)\r\n                                .filter(\"[href]\")\r\n                                .first()\r\n                                .attr(\"href\");\r\n\r\n                            if (selectedHref != null) {\r\n                                // Route message to parent window to navigate to the selected entry\r\n                                Messaging.routeMessageToWindow(parent, NavigationMessageNames.navigate, selectedHref);\r\n                            }\r\n                        } else {\r\n                            setTimeout(() => {\r\n                                this.findIndexEntry();\r\n                            }, 1);\r\n                        }\r\n                    });\r\n\r\n                // Resize the results and search boxes\r\n                $(\"#i-index-container\", rootSelector)\r\n                    .off(\"resize.index\")\r\n                    .on(\"resize.index\", () => {\r\n                        setTimeout(() => {\r\n                            const indexContainer: JQuery = $(\"#i-index-container\");\r\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                            indexContainer.css(\"height\", `${(indexContainer as any).height() - indexConstants.heightMargin}px`);\r\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n                            indexContainer.css(\"width\", `${(indexContainer as any).width()}px`);\r\n                        }, 1);\r\n                    });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        public populateResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (this._isEnabled && configuration.profileName !== \"desktop\") {\r\n                configuration.clickTargets.push(new ResponsiveClickTarget(\"#i-index-body a\", ResponsiveClickTargetKind.block));\r\n            }\r\n        }\r\n\r\n        public applyResponsiveConfiguration(configuration: ResponsiveConfiguration): void {\r\n            if (this._isEnabled && configuration.profileName !== \"desktop\") {\r\n                this._isFilterVisibility = true;\r\n\r\n                // Close the navigation pane when a result is selected\r\n                $(\"#i-index-body\", this._rootSelector)\r\n                    .off(\"click.index\", \"a\")\r\n                    .on(\"click.index\", \"a\", () => {\r\n                        if (window.parent != null && window.parent.parent != null) {\r\n                            Messaging.routeMessageToWindow(window.parent.parent, NavigationMessageNames.closeNavigationPane, null);\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n\r\n        protected findIndexEntry(): void {\r\n\r\n            const diacriticsRemoverFunc = this._diacriticsHelper.removeDiacritics;\r\n            let term = $(\"#i-index-container #i-search\", this._rootSelector).val() as string;\r\n            term = this._diacriticsHelper.removeDiacritics(term.toLowerCase());\r\n\r\n            if (this._isFilterVisibility) {\r\n\r\n                // Filter the list to only show matching\r\n\r\n                const regex = new RegExp(`^${term}`, \"i\");\r\n                \r\n\r\n                $(\"a,span\", this._rootSelector.find(\"#i-index-body\")).each((_: number, element: Element) => {\r\n                    if (diacriticsRemoverFunc($(element)\r\n                        .text())\r\n                        .match(regex)) {\r\n\r\n                        $(element).css(\"display\", \"inline-block\");\r\n                        $(element)\r\n                            .next(\"br\")\r\n                            .css(\"display\", \"inline\");\r\n                        $(element)\r\n                            .next(\"blockquote\")\r\n                            .css(\"display\", \"block\");\r\n                    } else {\r\n                        $(element).css(\"display\", \"none\");\r\n                        $(element)\r\n                            .next(\"br\")\r\n                            .css(\"display\", \"none\");\r\n                        $(element)\r\n                            .next(\"blockquote\")\r\n                            .css(\"display\", \"none\");\r\n                    }\r\n                });\r\n\r\n                $(\"a,span\", this._rootSelector.find(\"#i-index-body\")).each((index: number, element: Element) => {\r\n                    if ($(element).css(\"display\") === \"inline-block\") {\r\n                        // Make sure the parents are visible also\r\n                        $(element)\r\n                            .parents(\"blockquote\")\r\n                            .each((_: number, blockQuoteElement: Element) => {\r\n\r\n                                const parentElement = $(blockQuoteElement).prev(\"a,span\");\r\n                                parentElement.css(\"display\", \"inline-block\");\r\n                                parentElement.next(\"br\").css(\"display\", \"inline\");\r\n                                parentElement.next(\"blockquote\").css(\"display\", \"block\");\r\n                            });\r\n                    }\r\n                });\r\n\r\n            } else {\r\n\r\n                $(\".i-selected\", this._rootSelector).removeClass(\"i-selected\");\r\n\r\n                if (term != null) {\r\n\r\n                    // Find any matching terms\r\n                    const anchor =\r\n                        $(\"a,span\", this._rootSelector.find(\"#i-index-body\"))\r\n                            .filter((_: number, element: Element): boolean => {\r\n                                if (term != null && term !== \"\"\r\n                                    && diacriticsRemoverFunc($(element)\r\n                                        .text())\r\n                                        .substring(0, term.length)\r\n                                        .toLowerCase() === term) {\r\n\r\n                                    return true;\r\n                                }\r\n                            });\r\n\r\n                    const bodyElement: Element = $(\"#i-index-body\", this._rootSelector).get(0);\r\n                    if (anchor.length > 0) {\r\n                        // Found at least one match. Scroll to the first entry and mark all as selected\r\n                        bodyElement.scrollTop = anchor.get(0).offsetTop - anchor.outerHeight(true);\r\n                        anchor.toggleClass(\"i-selected\", true);\r\n                    } else {\r\n                        // Scroll back to the top of the index\r\n                        bodyElement.scrollTop = 0;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    export class IndexDocumentFeatureFactory {\r\n\r\n        public createInstance(documentInstance: Document): IDocumentFeature {\r\n            // Always enabled\r\n            return new IndexDocumentFeature(documentInstance);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nInnovasys.Content.DocumentFeatureConfiguration.registerDocumentFeatureFactory(\r\n    new Innovasys.Content.Features.IndexDocumentFeatureFactory());\r\n"]}